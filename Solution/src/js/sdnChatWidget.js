/*! For license information please see sdnChatWidget.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=210)}([function(e,t,r){"use strict";e.exports=r(212)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(71);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var n=r(5),i=r(13),o=r(30),a=r(29),s=r(113),u=r.n(s),c=r(199),l=r(200);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=new(Object(o.a)((function t(){var r=this;Object(a.a)(this,t),this.turnServers=function(){return r._client.turnServers},this.init=function(e){var t=localStorage.getItem("user_id"),n=localStorage.getItem("access_token");r._client=t&&n?u.a.createClient({baseUrl:e,userId:t,accessToken:n}):u.a.createClient({baseUrl:e})},this.DIDLogin=function(){var e=Object(i.a)(f().mark((function e(t){var i,o,a,s,u,c,l,h,d,p,v,y,g,m,b,w,k,S,E,x,_;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=49;break}return e.prev=1,i="did:pkh:eip155:1:",e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return o=e.sent,a=Object(n.a)(o,1),s=a[0],e.next=9,r._client.getDIDList(s);case 9:if(u=e.sent,c=u.data,l=Object(n.a)(c,1),h=l[0]){e.next=25;break}return e.next=15,r._client.createDID("".concat(i).concat(s));case 15:return d=e.sent,p=d.did,v=d.message,y=d.updated,h=p,e.next=22,window.ethereum.request({method:"personal_sign",params:[v,s,""]});case 22:return g=e.sent,e.next=25,r._client.saveDID(p,{signature:g,operation:"create",updated:y,address:"".concat(i).concat(s)});case 25:return e.next=27,r._client.preDIDLogin(h);case 27:return m=e.sent,b=m.message,w=m.updated,e.next=32,window.ethereum.request({method:"personal_sign",params:[b,s,""]});case 32:return k=e.sent,S={type:"m.login.did.identity",updated:w,identifier:{did:h,token:k},initial_device_display_name:r.defaultDeviceDisplayName},e.next=37,r._client.DIDLogin(S);case 37:E=e.sent,x=E.access_token,_=E.user_id,localStorage.setItem("access_token",x),localStorage.setItem("user_id",_),localStorage.setItem("user_address",s),t&&"function"==typeof t&&t(!0),e.next=49;break;case 46:e.prev=46,e.t0=e.catch(1),t&&"function"==typeof t&&t(!1);case 49:case"end":return e.stop()}}),e,null,[[1,46]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=Object(i.a)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r._client.logout());case 1:case"end":return e.stop()}}),e)}))),this.joinRoom=function(e){return r._client.joinRoom(e)},this.createRoom=function(){var e=Object(i.a)(f().mark((function e(t){var i,o,a,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("trusted_private_chat"!==t.preset){e.next=18;break}return i=Object(n.a)(t.invite,1),o=i[0],e.next=5,r._client.findDMRoomByUserId(o);case 5:if(a=e.sent,(s=a.dm_rooms)&&s.length){e.next=15;break}return e.next=10,r._client.createRoom(t);case 10:return u=e.sent,c=u.room_id,e.abrupt("return",c);case 15:return e.abrupt("return",s[0]);case 16:e.next=23;break;case 18:return e.next=20,r._client.createRoom(t);case 20:return l=e.sent,h=l.room_id,e.abrupt("return",h);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createPublicRoom=function(){var e=Object(i.a)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createRoom({name:t,preset:"public_chat",visibility:"private"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createPrivateRoom=function(){var e=Object(i.a)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createRoom({name:t,preset:"private_chat",visibility:"private"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createDMRoom=function(){var e=Object(i.a)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createRoom({preset:"trusted_private_chat",visibility:"private",invite:[t],is_direct:!0,initial_state:[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}}]});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getUrlPreview=function(){var e=Object(i.a)(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._client.getUrlPreviewNew(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.queryMessageType=Object(i.a)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._client.queryMessageType();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.backUp=Object(i.a)(f().mark((function t(){var i,o,a,s,u,h,d,p,v,y,g,m,b;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=32;break}return t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return i=t.sent,o=Object(n.a)(i,1),a=o[0],t.prev=5,s=Object(c.randomBytes)(32).toString("hex"),u=(new Date).getTime(),h=["hiseas_account",a,s,u].join("#"),d="0x".concat(e.from(h,"utf8").toString("hex")),t.next=13,window.ethereum.request({method:"personal_sign",params:[d,a,""]});case 13:return p=t.sent,t.prev=14,t.next=17,r._client.backupSocialGraph({msg:d,signature:p});case 17:v=t.sent,y=v.transactions,g=Object(n.a)(y,1),m=g[0],b=m.chainId,Object(l.a)(b,y,(function(){})),t.next=27;break;case 24:return t.prev=24,t.t0=t.catch(14),t.abrupt("return",!1);case 27:t.next=32;break;case 29:return t.prev=29,t.t1=t.catch(5),t.abrupt("return",!1);case 32:case"end":return t.stop()}}),t,null,[[5,29],[14,24]])}))),this.restore=Object(i.a)(f().mark((function e(){var t,i,o,a,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._client.querySocialGraph();case 2:if(t=e.sent,i=t.exist,o=t.message,1!==i){e.next=21;break}if(!window.ethereum){e.next=21;break}return e.prev=7,e.next=10,window.ethereum.request({method:"eth_requestAccounts"});case 10:return a=e.sent,s=Object(n.a)(a,1),u=s[0],e.next=14,window.ethereum.request({method:"personal_sign",params:[o,u,""]});case 14:return c=e.sent,e.next=17,r._client.restoreSocialGraph({signature:c});case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(7);case 21:case"end":return e.stop()}}),e,null,[[7,19]])}))),this.getUnreadCounts=function(e){var t=r._client.getRooms();console.log(t,123);var n=t.map((function(e){return e.notificationCounts.total})).reduce((function(e,t){return e+t}),0);e&&"function"==typeof e&&e(n)},this.invite=function(e,t){r._client.invite(e,t)},this.leave=function(e){r._client.leave(e)},this.getUserId=function(){return r._client.getUserId()},this._client=null,this.joinRoom=this.joinRoom,this.createDMRoom=this.createDMRoom,this.createPublicRoom=this.createPublicRoom,this.DIDLogin=this.DIDLogin,this.logout=this.logout,this.getUrlPreview=this.getUrlPreview,this.backUp=this.backUp,this.restore=this.restore,this.init=this.init})));window.chatWidgetApi=h}).call(this,r(18).Buffer)},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";var n=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var i=n(r(222));i.default.methodFactory=function(e,t,r){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.prefix&&r.unshift(this.prefix);var i,o,a="error"===e||"warn"===e||"trace"===e||"info"===e;return a?(i=console)[e].apply(i,r):(o=console).log.apply(o,r)}};var o=i.default.getLogger("sendingnetwork");function a(e){e.withPrefix=function(e){return function(e){var t=i.default.getLogger("".concat("sendingnetwork","-").concat(e));t.prefix!==e&&(a(t),t.prefix=e,t.setLevel(i.default.levels.DEBUG,!1));return t}((this.prefix||"")+e)}}t.logger=o,o.setLevel(i.default.levels.DEBUG,!1),a(o)},function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,r){var n=r(18),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(74);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=n(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return i}))},function(e,t,r){var n=r(75);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(48),i=r(120),o=r(229);e.exports=function(e){return function(){var t,r=n(e);if(i()){var a=n(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return o(this,t)}}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&g(e,"error",t,r)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o,a,s;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"===typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):y(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,l=y(u,c);for(r=0;r<c;++r)o(l[r],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";(function(e){var n=r(217),i=r(218),o=r(117);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,n):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(n=t.length)!==n?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function w(e,t,r,n){return K(F(t,e.length-r),e,r,n)}function k(e,t,r,n){return K(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return k(e,t,r,n)}function E(e,t,r,n){return K(q(t),e,r,n)}function x(e,t,r,n){return K(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(n,i),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=B(e[o]);return i}function R(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function A(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):A(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):A(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:F(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function K(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(11))},function(e,t,r){"use strict";var n=r(31),i=r(9),o=r(119),a=r(20),s=r(12);function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var c=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ALPHABET=void 0,t.alphabetPad=b,t.averageBetweenStrings=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,n=Math.max(e.length,t.length),i=k(b(e,n,r),r),o=k(b(t,n,r),r),a=(i+o)/BigInt(2);if(a===i||a==o)return w(a,r)+r[0];return w(a,r)},t.baseToString=w,t.checkObjectHasKeys=function(e,t){for(var r=0;r<t.length;r++)if(!e.hasOwnProperty(t[r]))throw new Error("Missing required key: "+t[r])},t.checkObjectHasNoAdditionalKeys=function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&-1===t.indexOf(r))throw new Error("Unknown key: "+r)},t.chunkPromises=function(e,t){return g.apply(this,arguments)},t.compare=function(e,t){return E.compare(e,t)},t.decodeParams=function(e){var t,r={},n=new URLSearchParams(e),i=s(n.keys());try{for(i.s();!(t=i.n()).done;){var o=t.value,a=n.getAll(o);r[o]=1===a.length?a[0]:a}}catch(u){i.e(u)}finally{i.f()}return r},t.deepCompare=function e(t,r){if(t===r)return!0;if(typeof t!==typeof r)return!1;if("number"===typeof t&&isNaN(t)&&isNaN(r))return!0;if(null===t||null===r)return t===r;if(!(t instanceof Object))return!1;if(t.constructor!==r.constructor||t.prototype!==r.prototype)return!1;if(t instanceof RegExp||t instanceof Date)return t.toString()===r.toString();if(t instanceof Array){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1}else{var i;for(i in r)if(r.hasOwnProperty(i)!==t.hasOwnProperty(i))return!1;for(i in r){if(r.hasOwnProperty(i)!==t.hasOwnProperty(i))return!1;if(!e(t[i],r[i]))return!1}}return!0},t.deepCopy=function(e){return JSON.parse(JSON.stringify(e))},t.deepSortedObjectEntries=function e(t){if("object"!==typeof t)return t;if(null===t||void 0===t||Array.isArray(t))return t;for(var r=[],n=0,i=Object.entries(t);n<i.length;n++){var o=a(i[n],2),s=o[0],u=o[1];r.push([s,e(u)])}return r.sort((function(e,t){return S(e[0],t[0])})),r},t.defer=function(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}},t.encodeParams=function(e){return new URLSearchParams(e).toString()},t.encodeUri=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e=e.replace(r,encodeURIComponent(t[r])));return e},t.ensureNoTrailingSlash=function(e){return e&&e.endsWith("/")?e.substr(0,e.length-1):e},t.escapeRegExp=v,t.extend=function(){for(var e=(arguments.length<=0?void 0:arguments[0])||{},t=1;t<arguments.length;t++){var r=t<0||arguments.length<=t?void 0:arguments[t];if(r)for(var n in r)e[n]=r[n]}return e},t.getCrypto=function(){return d},t.globToRegexp=function(e,t){t="boolean"!==typeof t||t;var r=v(e);r=(r=r.replace(/\\\*/g,".*")).replace(/\?/g,"."),t&&(r=r.replace(/\\\[(!|)(.*)\\]/g,(function(e,t,r,n,i){return"["+(t?"^":"")+r.replace(/\\-/,"-")+"]"})));return r},t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},t.isNullOrUndefined=function(e){return null===e||void 0===e},t.isNumber=function(e){return"number"===typeof e&&isFinite(e)},t.lexicographicCompare=S,t.nextString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return w(k(e,t)+BigInt(1),t)},t.normalize=function(e){return h(e.toLowerCase()).replace(/[\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~\u2000-\u206f\u2e00-\u2e7f]/g,"").toLowerCase()},t.polyfillSuper=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];try{t.call.apply(t,[e].concat(n))}catch(s){var a=o(t,n);Object.assign(e,a)}},t.prevString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return w(k(e,t)-BigInt(1),t)},t.promiseMapSeries=function(e,t){return y.apply(this,arguments)},t.promiseTry=function(e){return new Promise((function(t){return t(e())}))},t.recursivelyAssign=function e(t,r){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0,o=Object.entries(r);i<o.length;i++){var s=a(o[i],2),u=s[0],c=s[1];t[u]instanceof Object&&c?e(t[u],c):(null!==c&&void 0!==c||!n)&&(t[u]=c)}return t},t.removeDirectionOverrideChars=function(e){if("string"===typeof e)return e.replace(/[\u202d-\u202e]/g,"");return""},t.removeElement=function(e,t,r){var n,i;if(r){for(n=e.length-1;n>=0;n--)if(t(e[n],n,e))return i=e[n],e.splice(n,1),i}else for(n=0;n<e.length;n++)if(t(e[n],n,e))return i=e[n],e.splice(n,1),i;return!1},t.removeHiddenChars=h,t.setCrypto=function(e){d=e},t.simpleRetryOperation=function(e){return(0,f.default)((function(t){return e(t)}),{forever:!0,factor:2,minTimeout:3e3,maxTimeout:15e3})},t.sleep=function(e,t){return new Promise((function(r){setTimeout(r,e,t)}))},t.stringToBase=k;var l=c(r(226)),f=c(r(121));function h(e){return"string"===typeof e?(0,l.default)(e.normalize("NFD").replace(p,"")):""}var d,p=/[\u2000-\u200F\u202A-\u202F\u0300-\u036F\uFEFF\u061C\s]/g;function v(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(){return(y=i(u().mark((function e(t,r){var n,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s(t),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=13;break}return o=i.value,e.t0=r,e.next=8,o;case 8:return e.t1=e.sent,e.next=11,(0,e.t0)(e.t1);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(1),n.e(e.t2);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))).apply(this,arguments)}function g(){return(g=i(u().mark((function e(t,r){var i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=0;case 2:if(!(o<t.length)){e.next=14;break}return e.t0=i.push,e.t1=i,e.t2=n,e.next=8,Promise.all(t.slice(o,o+r).map((function(e){return e()})));case 8:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 11:o+=r,e.next=2;break;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(){for(var e="",t=32;t<=126;t++)e+=String.fromCharCode(t);return e}();function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return e.padEnd(t,r[0])}function w(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=BigInt(r.length);if(e<=n)return null!==(t=r[Number(e)-1])&&void 0!==t?t:"";var i=e/n,o=Number(e%n)-1;return o<0&&(i-=BigInt(Math.abs(o)),o=Number(n)-1),w(i,r)+r[o]}function k(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,r=BigInt(t.length),n=BigInt(0),i=e.length-1,o=BigInt(0);i>=0;i--,o++){var a=e.charCodeAt(i)-t.charCodeAt(0);n+=BigInt(1+a)*Math.pow(r,o)}return n}function S(e,t){return e<t?-1:e===t?0:1}t.DEFAULT_ALPHABET=m;var E=new Intl.Collator},function(e,t,r){var n=r(219),i=r(220),o=r(74),a=r(221);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(340).Buffer}catch(_){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var i=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],d=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?v+r:l[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return n("undefined"!==typeof a),this.toArrayLike(a,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)o=(t=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,y=0|a[2],g=8191&y,m=y>>>13,b=0|a[3],w=8191&b,k=b>>>13,S=0|a[4],E=8191&S,x=S>>>13,_=0|a[5],T=8191&_,O=_>>>13,M=0|a[6],P=8191&M,R=M>>>13,I=0|a[7],L=8191&I,C=I>>>13,A=0|a[8],j=8191&A,D=A>>>13,N=0|a[9],U=8191&N,B=N>>>13,F=0|s[0],q=8191&F,K=F>>>13,z=0|s[1],G=8191&z,H=z>>>13,V=0|s[2],W=8191&V,X=V>>>13,Y=0|s[3],Z=8191&Y,J=Y>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ve=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,q))|0)+((8191&(i=(i=Math.imul(f,K))+Math.imul(h,q)|0))<<13)|0;c=((o=Math.imul(h,K))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,K))+Math.imul(v,q)|0,o=Math.imul(v,K);var ge=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,H)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,q),i=(i=Math.imul(g,K))+Math.imul(m,q)|0,o=Math.imul(m,K),n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0;var me=(c+(n=n+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,X)|0)+Math.imul(h,W)|0))<<13)|0;c=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,K))+Math.imul(k,q)|0,o=Math.imul(k,K),n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,X)|0;var be=(c+(n=n+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,Z)|0))<<13)|0;c=((o=o+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,q),i=(i=Math.imul(E,K))+Math.imul(x,q)|0,o=Math.imul(x,K),n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,J)|0;var we=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,q),i=(i=Math.imul(T,K))+Math.imul(O,q)|0,o=Math.imul(O,K),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0;var ke=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,K))+Math.imul(R,q)|0,o=Math.imul(R,K),n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0;var Se=(c+(n=n+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,q),i=(i=Math.imul(L,K))+Math.imul(C,q)|0,o=Math.imul(C,K),n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0;var Ee=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,q),i=(i=Math.imul(j,K))+Math.imul(D,q)|0,o=Math.imul(D,K),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0;var xe=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,K))+Math.imul(B,q)|0,o=Math.imul(B,K),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(v,fe)|0,o=o+Math.imul(v,he)|0;var _e=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ve)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,ve)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,H))+Math.imul(B,G)|0,o=Math.imul(B,H),n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,X)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(k,ue)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,he)|0;var Te=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ve)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,X))+Math.imul(B,W)|0,o=Math.imul(B,X),n=n+Math.imul(j,Z)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,J)|0,n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var Oe=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ve)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,ve)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,J))+Math.imul(B,Z)|0,o=Math.imul(B,J),n=n+Math.imul(j,$)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(x,fe)|0,o=o+Math.imul(x,he)|0;var Me=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ve)|0)+Math.imul(k,pe)|0))<<13)|0;c=((o=o+Math.imul(k,ve)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(B,$)|0,o=Math.imul(B,ee),n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,he)|0;var Pe=(c+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,ve)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,ve)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(j,oe)|0,i=(i=i+Math.imul(j,ae)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,ae)|0,n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,n=n+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,fe)|0,o=o+Math.imul(R,he)|0;var Re=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ve)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ve)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(B,oe)|0,o=Math.imul(B,ae),n=n+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,he)|0;var Ie=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ve)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,ve)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(j,fe)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(D,fe)|0,o=o+Math.imul(D,he)|0;var Le=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ve)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,ve)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(U,fe),i=(i=Math.imul(U,he))+Math.imul(B,fe)|0,o=Math.imul(B,he);var Ce=(c+(n=n+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,ve)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,ve)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Ae=(c+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ve))+Math.imul(B,pe)|0))<<13)|0;return c=((o=Math.imul(B,ve))+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u[0]=ye,u[1]=ge,u[2]=me,u[3]=be,u[4]=we,u[5]=ke,u[6]=Se,u[7]=Ee,u[8]=xe,u[9]=_e,u[10]=Te,u[11]=Oe,u[12]=Me,u[13]=Pe,u[14]=Re,u[15]=Ie,u[16]=Le,u[17]=Ce,u[18]=Ae,0!==c&&(u[19]=c,r.length++),r};function v(e,t,r){return(new y).mulp(e,t,r)}function y(e,t){this.x=e,this.y=t}Math.imul||(p=d),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?d(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):v(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},y.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},y.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=r[l+d],v=n[l+d],y=r[l+d+a],g=n[l+d+a],m=f*y-h*g;g=f*g+h*y,y=m,r[l+d]=p+y,n[l+d]=v+g,r[l+d+a]=p-y,n[l+d+a]=v-g,d!==s&&(m=u*f-c*h,h=u*h+c*f,f=m)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},y.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),v(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){n("number"===typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},o.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0===(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),a.isub(u)):(r.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0===(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new E(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},i(b,m),b.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,m),i(k,m),i(S,m),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return g[e]=t,t},E.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var v=d,y=0;0!==v.cmp(s);y++)v=v.redSqr();n(y<p);var g=this.pow(f,new o(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===n&&0===l)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new x(e)},i(x,E),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(40)(e))},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNSTABLE_MSC3089_TREE_SUBTYPE=t.UNSTABLE_MSC3089_LEAF=t.UNSTABLE_MSC3089_BRANCH=t.UNSTABLE_MSC3088_PURPOSE=t.UNSTABLE_MSC3088_ENABLED=t.UNSTABLE_ELEMENT_REPLY_IN_THREAD=t.UNSTABLE_ELEMENT_FUNCTIONAL_USERS=t.RoomType=t.RoomCreateTypeField=t.RelationType=t.MsgType=t.LreActionType=t.EventType=void 0;var n,i,o,a,s=r(123);t.EventType=n,function(e){e.RoomCanonicalAlias="m.room.canonical_alias",e.RoomCreate="m.room.create",e.RoomJoinRules="m.room.join_rules",e.RoomMember="m.room.member",e.RoomThirdPartyInvite="m.room.third_party_invite",e.RoomPowerLevels="m.room.power_levels",e.RoomName="m.room.name",e.RoomTopic="m.room.topic",e.RoomAvatar="m.room.avatar",e.RoomLre="m.room.lre",e.RoomPinnedEvents="m.room.pinned_events",e.RoomEncryption="m.room.encryption",e.RoomEncryptionHint="m.room.encryption_hint",e.RoomRetention="m.room.retention",e.RoomHistoryVisibility="m.room.history_visibility",e.RoomGuestAccess="m.room.guest_access",e.RoomServerAcl="m.room.server_acl",e.RoomTombstone="m.room.tombstone",e.RoomAliases="m.room.aliases",e.SpaceChild="m.space.child",e.SpaceParent="m.space.parent",e.RoomRedaction="m.room.redaction",e.RoomMessage="m.room.message",e.RoomMessageEncrypted="m.room.encrypted",e.Sticker="m.sticker",e.CallInvite="m.call.invite",e.CallCandidates="m.call.candidates",e.CallAnswer="m.call.answer",e.CallHangup="m.call.hangup",e.CallReject="m.call.reject",e.CallSelectAnswer="m.call.select_answer",e.CallNegotiate="m.call.negotiate",e.CallSDPStreamMetadataChanged="m.call.sdp_stream_metadata_changed",e.CallSDPStreamMetadataChangedPrefix="org.sendingnetwork.call.sdp_stream_metadata_changed",e.CallReplaces="m.call.replaces",e.CallAssertedIdentity="m.call.asserted_identity",e.CallAssertedIdentityPrefix="org.sendingnetwork.call.asserted_identity",e.KeyVerificationRequest="m.key.verification.request",e.KeyVerificationStart="m.key.verification.start",e.KeyVerificationCancel="m.key.verification.cancel",e.KeyVerificationMac="m.key.verification.mac",e.KeyVerificationDone="m.key.verification.done",e.RoomMessageFeedback="m.room.message.feedback",e.Reaction="m.reaction",e.Typing="m.typing",e.Receipt="m.receipt",e.Presence="m.presence",e.FullyRead="m.fully_read",e.Tag="m.tag",e.SpaceOrder="org.sendingnetwork.msc3230.space_order",e.PushRules="m.push_rules",e.Direct="m.direct",e.IgnoredUserList="m.ignored_user_list",e.RemarkedUserList="m.remarked_user_list",e.RoomKey="m.room_key",e.RoomKeyRequest="m.room_key_request",e.ForwardedRoomKey="m.forwarded_room_key",e.Dummy="m.dummy"}(n||(t.EventType=n={})),t.RelationType=i,function(e){e.Annotation="m.annotation",e.Replace="m.replace",e.Thread="io.element.thread",e.Tag="m.msg_tag"}(i||(t.RelationType=i={})),t.MsgType=o,function(e){e.Text="m.text",e.Emote="m.emote",e.Notice="m.notice",e.Image="m.image",e.File="m.file",e.Audio="m.audio",e.Location="m.location",e.Video="m.video",e.Lre="m.lre",e.Transfer="m.transfer",e.Discord="m.message.discord-richembed"}(o||(t.MsgType=o={})),t.LreActionType=a,function(e){e.Create="m.lre.action.create",e.Open="m.lre.action.open",e.Refund="m.lre.action.refund"}(a||(t.LreActionType=a={}));var u;t.RoomCreateTypeField="type",t.RoomType=u,function(e){e.Space="m.space"}(u||(t.RoomType=u={}));var c=new s.UnstableValue("m.room.purpose","org.sendingnetwork.msc3088.purpose");t.UNSTABLE_MSC3088_PURPOSE=c;var l=new s.UnstableValue("m.enabled","org.sendingnetwork.msc3088.enabled");t.UNSTABLE_MSC3088_ENABLED=l;var f=new s.UnstableValue("m.data_tree","org.sendingnetwork.msc3089.data_tree");t.UNSTABLE_MSC3089_TREE_SUBTYPE=f;var h=new s.UnstableValue("m.leaf","org.sendingnetwork.msc3089.leaf");t.UNSTABLE_MSC3089_LEAF=h;var d=new s.UnstableValue("m.branch","org.sendingnetwork.msc3089.branch");t.UNSTABLE_MSC3089_BRANCH=d;var p=new s.UnstableValue("io.element.functional_members","io.element.functional_members");t.UNSTABLE_ELEMENT_FUNCTIONAL_USERS=p;var v=new s.UnstableValue("m.in_thread","io.element.in_thread");t.UNSTABLE_ELEMENT_REPLY_IN_THREAD=v},function(e,t,r){"use strict";var n=r(9),i=r(20),o=r(1),a=r(2),s=r(16),u=r(14),c=r(15);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SendingNetworkEvent=t.MsgTag=t.EventStatus=void 0;var h,d=f(r(4)),p=r(17),v=r(8),y=r(24),g=r(19),m=r(126),b=r(61);t.EventStatus=h,function(e){e.NOT_SENT="not_sent",e.ENCRYPTING="encrypting",e.SENDING="sending",e.QUEUED="queued",e.SENT="sent",e.CANCELLED="cancelled"}(h||(t.EventStatus=h={}));var w,k={};function S(e){return k[e]||(k[e]=e),k[e]}t.MsgTag=w,function(e){e.best="best",e.good="good"}(w||(t.MsgTag=w={}));var E=function(e){u(r,e);var t=c(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this)).event=n,(0,d.default)(s(e),"pushActions",null),(0,d.default)(s(e),"_replacingEvent",null),(0,d.default)(s(e),"_localRedactionEvent",null),(0,d.default)(s(e),"_isCancelled",!1),(0,d.default)(s(e),"clearEvent",void 0),(0,d.default)(s(e),"senderCurve25519Key",null),(0,d.default)(s(e),"claimedEd25519Key",null),(0,d.default)(s(e),"forwardingCurve25519KeyChain",[]),(0,d.default)(s(e),"untrusted",null),(0,d.default)(s(e),"_decryptionPromise",null),(0,d.default)(s(e),"retryDecryption",!1),(0,d.default)(s(e),"txnId",null),(0,d.default)(s(e),"thread",null),(0,d.default)(s(e),"localTimestamp",void 0),(0,d.default)(s(e),"sender",null),(0,d.default)(s(e),"target",null),(0,d.default)(s(e),"status",null),(0,d.default)(s(e),"error",null),(0,d.default)(s(e),"forwardLooking",!0),(0,d.default)(s(e),"verificationRequest",null),(0,d.default)(s(e),"reEmitter",void 0),["state_key","type","sender","room_id","membership"].forEach((function(e){"string"===typeof n[e]&&(n[e]=S(n[e]))})),["membership","avatar_url","displayname"].forEach((function(e){var t;"string"===typeof(null===(t=n.content)||void 0===t?void 0:t[e])&&(n.content[e]=S(n.content[e]))})),["rel_type"].forEach((function(e){var t,r;"string"===typeof(null===(t=n.content)||void 0===t||null===(r=t["m.relates_to"])||void 0===r?void 0:r[e])&&(n.content["m.relates_to"][e]=S(n.content["m.relates_to"][e]))})),e.txnId=n.txn_id||null,e.localTimestamp=Date.now()-e.getAge(),e.reEmitter=new b.ReEmitter(s(e)),e}return a(r,[{key:"getEffectiveEvent",value:function(){var e=Object.assign({},this.getContent());if(this.getWireType()===y.EventType.RoomMessageEncrypted)for(var t=0,r=Object.entries(this.getWireContent());t<r.length;t++){var n=i(r[t],2),o=n[0],a=n[1];["algorithm","ciphertext","device_id","sender_key","session_id"].includes(o)||void 0===e[o]&&(e[o]=a)}return Object.assign({},this.event,this.clearEvent,{content:e})}},{key:"getId",value:function(){return this.event.event_id}},{key:"getSender",value:function(){return this.event.sender||this.event.user_id}},{key:"getType",value:function(){return this.clearEvent?this.clearEvent.type:this.event.type}},{key:"getWireType",value:function(){return this.event.type}},{key:"getRoomId",value:function(){return this.event.room_id}},{key:"getTs",value:function(){return this.event.origin_server_ts}},{key:"getDate",value:function(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null}},{key:"getOriginalContent",value:function(){return this._localRedactionEvent?{}:this.clearEvent?this.clearEvent.content||{}:this.event.content||{}}},{key:"getContent",value:function(){return this._localRedactionEvent?{}:this._replacingEvent?this._replacingEvent.getContent()["m.new_content"]||{}:this.getOriginalContent()}},{key:"getWireContent",value:function(){return this.event.content||{}}},{key:"threadRootId",get:function(){var e,t=null===(e=this.getWireContent())||void 0===e?void 0:e["m.relates_to"];if((null===t||void 0===t?void 0:t.rel_type)===y.RelationType.Thread)return t.event_id}},{key:"isThreadRelation",get:function(){return!!this.threadRootId}},{key:"tagEventId",get:function(){var e,t=null===(e=this.getWireContent())||void 0===e?void 0:e["m.relates_to"];if((null===t||void 0===t?void 0:t.rel_type)===y.RelationType.Tag)return t.event_id}},{key:"isThreadRoot",get:function(){var e=this.getThread();return(null===e||void 0===e?void 0:e.id)===this.getId()}},{key:"parentEventId",get:function(){var e,t=this.getWireContent()["m.relates_to"];return(null===t||void 0===t||null===(e=t["m.in_reply_to"])||void 0===e?void 0:e.event_id)||(null===t||void 0===t?void 0:t.event_id)}},{key:"replyEventId",get:function(){var e,t=this.getWireContent()["m.relates_to"];return null===t||void 0===t||null===(e=t["m.in_reply_to"])||void 0===e?void 0:e.event_id}},{key:"getPrevContent",value:function(){return this.getUnsigned().prev_content||this.event.prev_content||{}}},{key:"getDirectionalContent",value:function(){return this.forwardLooking?this.getContent():this.getPrevContent()}},{key:"getAge",value:function(){return this.getUnsigned().age||this.event.age}},{key:"getLocalAge",value:function(){return Date.now()-this.localTimestamp}},{key:"getStateKey",value:function(){return this.event.state_key}},{key:"isState",value:function(){return void 0!==this.event.state_key}},{key:"makeEncrypted",value:function(e,t,r,n){this.clearEvent={type:this.event.type,content:this.event.content},this.event.type=e,this.event.content=t,this.senderCurve25519Key=r,this.claimedEd25519Key=n}},{key:"isBeingDecrypted",value:function(){return null!=this._decryptionPromise}},{key:"getDecryptionPromise",value:function(){return this._decryptionPromise}},{key:"isDecryptionFailure",value:function(){var e,t;return"m.bad.encrypted"===(null===(e=this.clearEvent)||void 0===e||null===(t=e.content)||void 0===t?void 0:t.msgtype)}},{key:"shouldAttemptDecryption",value:function(){return this.isEncrypted()&&!this.isBeingDecrypted()&&!this.clearEvent}},{key:"attemptDecryption",value:function(){var e=n(l().mark((function e(t){var r,n=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("boolean"===typeof(r=n.length>1&&void 0!==n[1]?n[1]:{})&&(r={isRetry:r}),this.isEncrypted()){e.next=4;break}throw new Error("Attempt to decrypt event which isn't encrypted");case 4:if(!this.clearEvent||this.isDecryptionFailure()){e.next=6;break}throw new Error("Attempt to decrypt event which has already been decrypted");case 6:if(!this._decryptionPromise){e.next=10;break}return v.logger.log("Event ".concat(this.getId()," already being decrypted; queueing a retry")),this.retryDecryption=!0,e.abrupt("return",this._decryptionPromise);case 10:return this._decryptionPromise=this.decryptionLoop(t,r),e.abrupt("return",this._decryptionPromise);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAndResendKeyRequest",value:function(e,t){var r=this.getWireContent();return e.requestRoomKey({algorithm:r.algorithm,room_id:this.getRoomId(),session_id:r.session_id,sender_key:r.sender_key},this.getKeyRequestRecipients(t),!0)}},{key:"getKeyRequestRecipients",value:function(e){var t=this.getWireContent(),r=[{userId:e,deviceId:"*"}],n=this.getSender();return n!==e&&r.push({userId:n,deviceId:t.device_id}),r}},{key:"decryptionLoop",value:function(){var e=n(l().mark((function e(t){var r,n,i,o,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,Promise.resolve();case 3:if(this.retryDecryption=!1,n=void 0,i=void 0,e.prev=7,t){e.next=12;break}n=this.badEncryptedMessage("Encryption not enabled"),e.next=16;break;case 12:return e.next=14,t.decryptEvent(this);case 14:n=e.sent,!0===r.isRetry&&v.logger.info("Decrypted event on retry (id=".concat(this.getId(),")"));case 16:e.next=32;break;case 18:if(e.prev=18,e.t0=e.catch(7),"DecryptionError"===e.t0.name){e.next=26;break}return o=r.isRetry?"re":"",v.logger.error("Error ".concat(o,"decrypting event ")+"(id=".concat(this.getId(),"): ").concat(e.t0.stack||e.t0)),this._decryptionPromise=null,this.retryDecryption=!1,e.abrupt("return");case 26:if(i=e.t0,!this.retryDecryption){e.next=30;break}return v.logger.log("Got error decrypting event (id=".concat(this.getId(),": ")+"".concat(e.t0,"), but retrying")),e.abrupt("continue",3);case 30:v.logger.warn("Error decrypting event (id=".concat(this.getId(),"): ").concat(e.t0.detailedString)),n=this.badEncryptedMessage(e.t0.message);case 32:return this._decryptionPromise=null,this.retryDecryption=!1,this.setClearData(n),this.setPushActions(null),!1!==r.emit&&this.emit("Event.decrypted",this,i),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this,[[7,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"badEncryptedMessage",value:function(e){return{clearEvent:{type:"m.room.message",content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: "+e+" **"}}}}},{key:"setClearData",value:function(e){this.clearEvent=e.clearEvent,this.senderCurve25519Key=e.senderCurve25519Key||null,this.claimedEd25519Key=e.claimedEd25519Key||null,this.forwardingCurve25519KeyChain=e.forwardingCurve25519KeyChain||[],this.untrusted=e.untrusted||!1}},{key:"getClearContent",value:function(){return this.clearEvent?this.clearEvent.content:null}},{key:"isEncrypted",value:function(){return!this.isState()&&"m.room.encrypted"===this.event.type}},{key:"getSenderKey",value:function(){return this.senderCurve25519Key}},{key:"getKeysClaimed",value:function(){return{ed25519:this.claimedEd25519Key}}},{key:"getClaimedEd25519Key",value:function(){return this.claimedEd25519Key}},{key:"getForwardingCurve25519KeyChain",value:function(){return this.forwardingCurve25519KeyChain}},{key:"isKeySourceUntrusted",value:function(){return this.untrusted}},{key:"getUnsigned",value:function(){return this.event.unsigned||{}}},{key:"unmarkLocallyRedacted",value:function(){var e=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=null),!!e}},{key:"markLocallyRedacted",value:function(e){this._localRedactionEvent||(this.emit("Event.beforeRedaction",this,e),this._localRedactionEvent=e,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event)}},{key:"makeRedacted",value:function(e){if(!e.event)throw new Error("invalid redactionEvent in makeRedacted");var t;for(t in this._localRedactionEvent=null,this.emit("Event.beforeRedaction",this,e),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event,this.event)this.event.hasOwnProperty(t)&&(x.has(t)||delete this.event[t]);var r=_[this.getType()]||{},n=this.getContent();for(t in n)n.hasOwnProperty(t)&&(r[t]||delete n[t])}},{key:"isRedacted",value:function(){return Boolean(this.getUnsigned().redacted_because)}},{key:"isRedaction",value:function(){return"m.room.redaction"===this.getType()}},{key:"getRedactionEvent",value:function(){var e,t;return this.isRedacted()?null!==(e=this.clearEvent)&&void 0!==e&&e.unsigned?null===(t=this.clearEvent)||void 0===t?void 0:t.unsigned.redacted_because:this.event.unsigned.redacted_because?this.event.unsigned.redacted_because:{}:null}},{key:"getPushActions",value:function(){return this.pushActions}},{key:"setPushActions",value:function(e){this.pushActions=e}},{key:"handleRemoteEcho",value:function(e){var t=this.getUnsigned(),r=this.getId();this.event=e,t.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.redacted_because),this.setStatus(null),this.getId()!==r&&this.emit("Event.localEventIdReplaced",this)}},{key:"isSending",value:function(){return!!this.status}},{key:"setStatus",value:function(e){this.status=e,this.emit("Event.status",this,e)}},{key:"replaceLocalEventId",value:function(e){this.event.event_id=e,this.emit("Event.localEventIdReplaced",this)}},{key:"isRelation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this.getWireContent(),r=t&&t["m.relates_to"];return r&&r.rel_type&&r.event_id&&(e&&r.rel_type===e||!e)}},{key:"getRelation",value:function(){return this.isRelation()?this.getWireContent()["m.relates_to"]:null}},{key:"makeReplaced",value:function(e){this.isRedacted()&&e||this._replacingEvent!==e&&(this._replacingEvent=e,this.emit("Event.replaced",this))}},{key:"makeTag",value:function(e){var t;(null===(t=this.event.content)||void 0===t?void 0:t.msgtag)!==e&&(this.event.content=this.event.content||{},this.event.content.msgtag=e,this.emit("Event.tagChanged",this))}},{key:"getAssociatedStatus",value:function(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status}},{key:"getServerAggregatedRelation",value:function(e){var t=this.getUnsigned()["m.relations"];if(t)return t[e]}},{key:"replacingEventId",value:function(){var e=this.getServerAggregatedRelation(y.RelationType.Replace);return e?e.event_id:this._replacingEvent?this._replacingEvent.getId():void 0}},{key:"replacingEvent",value:function(){return this._replacingEvent}},{key:"replacingEventDate",value:function(){var e=this.getServerAggregatedRelation(y.RelationType.Replace);if(e){var t=e.origin_server_ts;if(Number.isFinite(t))return new Date(t)}else if(this._replacingEvent)return this._replacingEvent.getDate()}},{key:"localRedactionEvent",value:function(){return this._localRedactionEvent}},{key:"getAssociatedId",value:function(){var e=this.getRelation();return e?e.event_id:this.isRedaction()?this.event.redacts:void 0}},{key:"hasAssocation",value:function(){return!!this.getAssociatedId()}},{key:"updateAssociatedId",value:function(e){var t=this.getRelation();t?t.event_id=e:this.isRedaction()&&(this.event.redacts=e)}},{key:"flagCancelled",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isCancelled=e}},{key:"isCancelled",value:function(){return this._isCancelled}},{key:"toSnapshot",value:function(){for(var e=new r(JSON.parse(JSON.stringify(this.event))),t=0,n=Object.entries(this);t<n.length;t++){var o=i(n[t],2),a=o[0],s=o[1];"event"!==a&&(e[a]=s)}return e}},{key:"isEquivalentTo",value:function(e){if(!e)return!1;if(e===this)return!0;var t=(0,g.deepSortedObjectEntries)(this.event),r=(0,g.deepSortedObjectEntries)(e.event);return JSON.stringify(t)===JSON.stringify(r)}},{key:"toJSON",value:function(){var e=this.getEffectiveEvent();return this.isEncrypted()?{decrypted:e,encrypted:this.event}:e}},{key:"setVerificationRequest",value:function(e){this.verificationRequest=e}},{key:"setTxnId",value:function(e){this.txnId=e}},{key:"getTxnId",value:function(){return this.txnId}},{key:"setThread",value:function(e){this.thread=e,this.reEmitter.reEmit(e,[m.ThreadEvent.Ready,m.ThreadEvent.Update])}},{key:"getThread",value:function(){return this.thread}}]),r}(p.EventEmitter);t.SendingNetworkEvent=E;var x=new Set(["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"]),_={"m.room.member":{membership:1},"m.room.create":{creator:1},"m.room.join_rules":{join_rule:1},"m.room.power_levels":{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1},"m.room.aliases":{aliases:1}}},function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=r,r.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},function(e,t,r){"use strict";var n=t,i=r(22),o=r(26),a=r(179);n.assert=o,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0===(1&u)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0===(1&c)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"===typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},function(e,t,r){"use strict";(function(e,n){var i=r(31),o=r(12),a=r(20),s=r(9);function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var c=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.OLM_ALGORITHM=t.MEGOLM_BACKUP_ALGORITHM=t.MEGOLM_ALGORITHM=void 0,t.decodeBase64=function(e){return n.from(e,"base64")},t.encodeBase64=_,t.encodeUnpaddedBase64=function(e){return _(e).replace(/=+$/g,"")},t.encryptMessageForDevice=function(e,t,r,n,i,o,a){return m.apply(this,arguments)},t.ensureOlmSessionsForDevices=function(e,t,r){return w.apply(this,arguments)},t.getExistingOlmSessions=function(e,t,r){return b.apply(this,arguments)},t.pkSign=function(t,r,n,i){var o=!1;if(r instanceof Uint8Array){var a=new e.Olm.PkSigning;i=a.init_with_seed(r),r=a,o=!0}var s=t.signatures||{};delete t.signatures;var u=t.unsigned;t.unsigned&&delete t.unsigned;try{var c=s[n]||{};return s[n]=c,c["ed25519:"+i]=r.sign(f.default.stringify(t))}finally{t.signatures=s,u&&(t.unsigned=u),o&&r.free()}},t.pkVerify=function(t,r,n){var i="ed25519:"+r;if(!(t.signatures&&t.signatures[n]&&t.signatures[n][i]))throw new Error("No signature");var o=t.signatures[n][i],a=new e.Olm.Utility,s=t.signatures;delete t.signatures;var u=t.unsigned;t.unsigned&&delete t.unsigned;try{a.ed25519_verify(r,f.default.stringify(t),o)}finally{t.signatures=s,u&&(t.unsigned=u),a.free()}},t.verifySignature=E;var l,f=c(r(63)),h=r(8),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}!function(e){e.Olm="m.olm.v1.curve25519-aes-sha2",e.Megolm="m.megolm.v1.aes-sha2",e.MegolmBackup="m.megolm_backup.v1.curve25519-aes-sha2"}(l||(l={}));var v=l.Olm;t.OLM_ALGORITHM=v;var y=l.Megolm;t.MEGOLM_ALGORITHM=y;var g=l.MegolmBackup;function m(){return(m=s(u().mark((function e(t,r,n,i,o,a,s){var c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.getIdentityKey(),e.next=3,i.getSessionIdForDevice(c);case 3:if(null!==(l=e.sent)){e.next=6;break}return e.abrupt("return");case 6:return h.logger.log("Using sessionid "+l+" for device "+o+":"+a.deviceId),f={sender:r,sender_device:n,keys:{ed25519:i.deviceEd25519Key},recipient:o,recipient_keys:{ed25519:a.getFingerprint()}},d.extend(f,s),e.next=11,i.encryptMessage(c,l,JSON.stringify(f));case 11:t[c]=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=s(u().mark((function e(t,r,n){var i,c,l,f,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i={},c={},l=[],f=function(){var e,r=a(d[h],2),n=r[0],f=r[1],p=o(f);try{var v=function(){var r=e.value,o=r.deviceId,a=r.getIdentityKey();l.push(s(u().mark((function e(){var s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSessionIdForDevice(a,!0);case 2:null===(s=e.sent)?(i[n]=i[n]||[],i[n].push(r)):(c[n]=c[n]||{},c[n][o]={device:r,sessionId:s});case 4:case"end":return e.stop()}}),e)})))())};for(p.s();!(e=p.n()).done;)v()}catch(y){p.e(y)}finally{p.f()}},h=0,d=Object.entries(n);h<d.length;h++)f();return e.next=7,Promise.all(l);case 7:return e.abrupt("return",[i,c]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=s(u().mark((function e(t,r,n){var s,c,l,f,d,p,v,y,g,m,b,w,S,E,x,_,T,O,M,P,R,I,L,C,A,j,D,N,U,B,F,q,K,z,G,H,V,W=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=W.length>3&&void 0!==W[3]&&W[3],c=W.length>4?W[4]:void 0,l=W.length>5?W[5]:void 0,f=W.length>6&&void 0!==W[6]?W[6]:h.logger,"number"===typeof s&&(f=l,l=c,c=s,s=!1),d=[],p={},v={},y=0,g=Object.entries(n);case 9:if(!(y<g.length)){e.next=32;break}m=a(g[y],2),b=m[1],w=o(b),e.prev=12,E=function(){var e=S.value.getIdentityKey();if(e===t.deviceCurve25519Key)return"continue";t.sessionsInProgress[e]||(t.sessionsInProgress[e]=new Promise((function(r){v[e]=function(n){delete t.sessionsInProgress[e],r(n)}})))},w.s();case 15:if((S=w.n()).done){e.next=21;break}if("continue"!==E()){e.next=19;break}return e.abrupt("continue",19);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),w.e(e.t0);case 26:return e.prev=26,w.f(),e.finish(26);case 29:y++,e.next=9;break;case 32:x=0,_=Object.entries(n);case 33:if(!(x<_.length)){e.next=67;break}T=a(_[x],2),O=T[0],M=T[1],p[O]={},P=o(M),e.prev=37,P.s();case 39:if((R=P.n()).done){e.next=56;break}if(I=R.value,L=I.deviceId,(C=I.getIdentityKey())!==t.deviceCurve25519Key){e.next=47;break}return f.info("Attempted to start session with ourself! Ignoring"),p[O][L]={device:I,sessionId:null},e.abrupt("continue",54);case 47:return A="for ".concat(C," (").concat(O,":").concat(L,")"),e.next=50,t.getSessionIdForDevice(C,!!v[C],f);case 50:null!==(j=e.sent)&&v[C]&&v[C](),(null===j||s)&&(s?f.info("Forcing new Olm session ".concat(A)):f.info("Making new Olm session ".concat(A)),d.push([O,L])),p[O][L]={device:I,sessionId:j};case 54:e.next=39;break;case 56:e.next=61;break;case 58:e.prev=58,e.t1=e.catch(37),P.e(e.t1);case 61:return e.prev=61,P.f(),e.finish(61);case 64:x++,e.next=33;break;case 67:if(0!==d.length){e.next=69;break}return e.abrupt("return",p);case 69:return D="signed_curve25519",U="one-time keys for ".concat(d.length," devices"),e.prev=71,f.debug("Claiming ".concat(U)),e.next=75,r.claimOneTimeKeys(d,D,c);case 75:N=e.sent,f.debug("Claimed ".concat(U)),e.next=84;break;case 79:for(e.prev=79,e.t2=e.catch(71),B=0,F=Object.values(v);B<F.length;B++)(0,F[B])();throw f.log("Failed to claim ".concat(U),e.t2,d),e.t2;case 84:l&&"failures"in N&&(q=l).push.apply(q,i(Object.keys(N.failures))),K=N.one_time_keys||{},z=[],G=function(){for(var e=a(V[H],2),r=e[0],n=e[1],i=K[r]||{},o=function(e){var o=n[e],a=o.deviceId,u=o.getIdentityKey();if(u===t.deviceCurve25519Key)return"continue";if(p[r][a].sessionId&&!s)return"continue";var c=i[a]||{},l=null;for(var h in c)0===h.indexOf(D+":")&&(l=c[h]);if(!l)return f.warn("No one-time keys (alg=".concat(D,") ")+"for device ".concat(r,":").concat(a)),v[u]&&v[u](),"continue";z.push(k(t,l,r,o).then((function(e){v[u]&&v[u](e),p[r][a].sessionId=e}),(function(e){throw v[u]&&v[u](),e})))},u=0;u<n.length;u++)o(u)};for(H=0,V=Object.entries(n);H<V.length;H++)G();return U="Olm sessions for ".concat(z.length," devices"),f.debug("Starting ".concat(U)),e.next=93,Promise.all(z);case 93:return f.debug("Started ".concat(U)),e.abrupt("return",p);case 95:case"end":return e.stop()}}),e,null,[[12,23,26,29],[37,58,61,64],[71,79]])})))).apply(this,arguments)}function k(e,t,r,n){return S.apply(this,arguments)}function S(){return(S=s(u().mark((function e(t,r,n,i){var o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.deviceId,e.prev=1,e.next=4,E(t,r,n,o,i.getFingerprint());case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),h.logger.error("Unable to verify signature on one-time key for device "+n+":"+o+":",e.t0),e.abrupt("return",null);case 10:return e.prev=10,e.next=13,t.createOutboundSession(i.getIdentityKey(),r.key);case 13:a=e.sent,e.next=20;break;case 16:return e.prev=16,e.t1=e.catch(10),h.logger.error("Error starting olm session with device "+n+":"+o+": "+e.t1),e.abrupt("return",null);case 20:return h.logger.log("Started new olm sessionid "+a+" for device "+n+":"+o),e.abrupt("return",a);case 22:case"end":return e.stop()}}),e,null,[[1,6],[10,16]])})))).apply(this,arguments)}function E(e,t,r,n,i){return x.apply(this,arguments)}function x(){return(x=s(u().mark((function e(t,r,n,i,o){var a,s,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="ed25519:"+i,s=r.signatures||{},c=s[n]||{},l=c[a]){e.next=6;break}throw Error("No signature");case 6:"unsigned"in(h=Object.assign({},r))&&delete h.unsigned,delete h.signatures,d=f.default.stringify(h),t.verifySignature(o,d,l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return n.from(e).toString("base64")}t.MEGOLM_BACKUP_ALGORITHM=g}).call(this,r(11),r(18).Buffer)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return i}))},function(e,t,r){var n=r(223),i=r(224),o=r(74),a=r(225);e.exports=function(e){return n(e)||i(e)||o(e)||a()}},function(e,t,r){"use strict";var n=r(26),i=r(7);function o(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function u(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"===typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):o(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=a(i)),r+=u(i.toString(16))}return r},t.zero2=s,t.zero8=u,t.join32=function(e,t,r,i){var o=r-t;n(o%4===0);for(var a=new Array(o/4),s=0,u=t;s<a.length;s++,u+=4){var c;c="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],a[s]=c>>>0}return a},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,a=(o<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,o,a,s){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+r+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,o,a,s){return t+n+o+s>>>0},t.sum64_5_hi=function(e,t,r,n,i,o,a,s,u,c){var l=0,f=t;return l+=(f=f+n>>>0)<t?1:0,l+=(f=f+o>>>0)<o?1:0,l+=(f=f+s>>>0)<s?1:0,e+r+i+a+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,o,a,s,u,c){return t+n+o+s+c>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},function(e,t,r){"use strict";(function(e){var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBCryptoStore=void 0;var a=o(r(4)),s=r(8),u=r(254),c=r(73),l=p(r(255)),f=r(62),h=p(r(133));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var v=function(){function t(e,r){n(this,t),this.indexedDB=e,this.dbName=r,(0,a.default)(this,"backendPromise",null),(0,a.default)(this,"backend",null)}return i(t,[{key:"startup",value:function(){var r=this;return this.backendPromise||(this.backendPromise=new Promise((function(e,t){if(r.indexedDB){s.logger.log("connecting to indexeddb ".concat(r.dbName));var n=r.indexedDB.open(r.dbName,l.VERSION);n.onupgradeneeded=function(e){var t=n.result,r=e.oldVersion;l.upgradeDatabase(t,r)},n.onblocked=function(){s.logger.log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},n.onerror=function(e){s.logger.log("Error connecting to indexeddb",e),t(n.error)},n.onsuccess=function(){var t=n.result;s.logger.log("connected to indexeddb ".concat(r.dbName)),e(new l.Backend(t))}}else t(new Error("no indexeddb support available"))})).then((function(e){return e.doTxn("readonly",[t.STORE_INBOUND_GROUP_SESSIONS,t.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(function(t){e.getEndToEndInboundGroupSession("","",t,(function(){}))})).then((function(){return e}))})).catch((function(t){if("VersionError"===t.name)throw s.logger.warn("Crypto DB is too new for us to use!",t),new f.InvalidCryptoStoreError(f.InvalidCryptoStoreError.TOO_NEW);s.logger.warn("unable to connect to indexeddb ".concat(r.dbName)+": falling back to localStorage store: ".concat(t));try{return new u.LocalStorageCryptoStore(e.localStorage)}catch(t){return s.logger.warn("unable to open localStorage: falling back to in-memory store: ".concat(t)),new c.MemoryCryptoStore}})).then((function(e){return r.backend=e,e}))),this.backendPromise}},{key:"deleteAllData",value:function(){var e=this;return new Promise((function(t,r){if(e.indexedDB){s.logger.log("Removing indexeddb instance: ".concat(e.dbName));var n=e.indexedDB.deleteDatabase(e.dbName);n.onblocked=function(){s.logger.log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},n.onerror=function(e){s.logger.log("Error deleting data from indexeddb",e),r(n.error)},n.onsuccess=function(){s.logger.log("Removed indexeddb instance: ".concat(e.dbName)),t()}}else r(new Error("no indexeddb support available"))})).catch((function(e){s.logger.warn("unable to delete IndexedDBCryptoStore: ".concat(e))}))}},{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){return this.backend.getOrAddOutgoingRoomKeyRequest(e)}},{key:"getOutgoingRoomKeyRequest",value:function(e){return this.backend.getOutgoingRoomKeyRequest(e)}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){return this.backend.getOutgoingRoomKeyRequestByState(e)}},{key:"getAllOutgoingRoomKeyRequestsByState",value:function(e){return this.backend.getAllOutgoingRoomKeyRequestsByState(e)}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,r){return this.backend.getOutgoingRoomKeyRequestsByTarget(e,t,r)}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,r){return this.backend.updateOutgoingRoomKeyRequest(e,t,r)}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){return this.backend.deleteOutgoingRoomKeyRequest(e,t)}},{key:"getAccount",value:function(e,t){this.backend.getAccount(e,t)}},{key:"storeAccount",value:function(e,t){this.backend.storeAccount(e,t)}},{key:"getCrossSigningKeys",value:function(e,t){this.backend.getCrossSigningKeys(e,t)}},{key:"getSecretStorePrivateKey",value:function(e,t,r){this.backend.getSecretStorePrivateKey(e,t,r)}},{key:"storeCrossSigningKeys",value:function(e,t){this.backend.storeCrossSigningKeys(e,t)}},{key:"storeSecretStorePrivateKey",value:function(e,t,r){this.backend.storeSecretStorePrivateKey(e,t,r)}},{key:"countEndToEndSessions",value:function(e,t){this.backend.countEndToEndSessions(e,t)}},{key:"getEndToEndSession",value:function(e,t,r,n){this.backend.getEndToEndSession(e,t,r,n)}},{key:"getEndToEndSessions",value:function(e,t,r){this.backend.getEndToEndSessions(e,t,r)}},{key:"getAllEndToEndSessions",value:function(e,t){this.backend.getAllEndToEndSessions(e,t)}},{key:"storeEndToEndSession",value:function(e,t,r,n){this.backend.storeEndToEndSession(e,t,r,n)}},{key:"storeEndToEndSessionProblem",value:function(e,t,r){return this.backend.storeEndToEndSessionProblem(e,t,r)}},{key:"getEndToEndSessionProblem",value:function(e,t){return this.backend.getEndToEndSessionProblem(e,t)}},{key:"filterOutNotifiedErrorDevices",value:function(e){return this.backend.filterOutNotifiedErrorDevices(e)}},{key:"getEndToEndInboundGroupSession",value:function(e,t,r,n){this.backend.getEndToEndInboundGroupSession(e,t,r,n)}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){this.backend.getAllEndToEndInboundGroupSessions(e,t)}},{key:"addEndToEndInboundGroupSession",value:function(e,t,r,n){this.backend.addEndToEndInboundGroupSession(e,t,r,n)}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,r,n){this.backend.storeEndToEndInboundGroupSession(e,t,r,n)}},{key:"storeEndToEndInboundGroupSessionWithheld",value:function(e,t,r,n){this.backend.storeEndToEndInboundGroupSessionWithheld(e,t,r,n)}},{key:"storeEndToEndDeviceData",value:function(e,t){this.backend.storeEndToEndDeviceData(e,t)}},{key:"getEndToEndDeviceData",value:function(e,t){this.backend.getEndToEndDeviceData(e,t)}},{key:"storeEndToEndRoom",value:function(e,t,r){this.backend.storeEndToEndRoom(e,t,r)}},{key:"getEndToEndRooms",value:function(e,t){this.backend.getEndToEndRooms(e,t)}},{key:"getSessionsNeedingBackup",value:function(e){return this.backend.getSessionsNeedingBackup(e)}},{key:"countSessionsNeedingBackup",value:function(e){return this.backend.countSessionsNeedingBackup(e)}},{key:"unmarkSessionsNeedingBackup",value:function(e,t){return this.backend.unmarkSessionsNeedingBackup(e,t)}},{key:"markSessionsNeedingBackup",value:function(e,t){return this.backend.markSessionsNeedingBackup(e,t)}},{key:"addSharedHistoryInboundGroupSession",value:function(e,t,r,n){this.backend.addSharedHistoryInboundGroupSession(e,t,r,n)}},{key:"getSharedHistoryInboundGroupSessions",value:function(e,t){return this.backend.getSharedHistoryInboundGroupSessions(e,t)}},{key:"doTxn",value:function(e,t,r,n){return this.backend.doTxn(e,t,r,n)}}],[{key:"exists",value:function(e,t){return h.exists(e,t)}}]),t}();t.IndexedDBCryptoStore=v,(0,a.default)(v,"STORE_ACCOUNT","account"),(0,a.default)(v,"STORE_SESSIONS","sessions"),(0,a.default)(v,"STORE_INBOUND_GROUP_SESSIONS","inbound_group_sessions"),(0,a.default)(v,"STORE_INBOUND_GROUP_SESSIONS_WITHHELD","inbound_group_sessions_withheld"),(0,a.default)(v,"STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS","shared_history_inbound_group_sessions"),(0,a.default)(v,"STORE_DEVICE_DATA","device_data"),(0,a.default)(v,"STORE_ROOMS","rooms"),(0,a.default)(v,"STORE_BACKUP","sessions_needing_backup")}).call(this,r(11))},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"===typeof btoa){var i=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(r," */")}(n),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"===typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&i[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},function(e,t,r){"use strict";var n=r(12),i=r(23),o=r(1),a=r(2),s=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.EventTimeline=t.Direction=void 0;var u,c=s(r(4)),l=r(125),f=r(24);t.Direction=u,function(e){e.Backward="b",e.Forward="f"}(u||(t.Direction=u={}));var h=function(){function e(t){var r,n,a;o(this,e),this.eventTimelineSet=t,(0,c.default)(this,"roomId",void 0),(0,c.default)(this,"name",void 0),(0,c.default)(this,"events",[]),(0,c.default)(this,"baseIndex",0),(0,c.default)(this,"startState",void 0),(0,c.default)(this,"endState",void 0),(0,c.default)(this,"prevTimeline",void 0),(0,c.default)(this,"nextTimeline",void 0),(0,c.default)(this,"paginationRequests",(i(r={},u.Backward,null),i(r,u.Forward,null),r)),this.roomId=null!==(n=null===(a=t.room)||void 0===a?void 0:a.roomId)&&void 0!==n?n:null,this.startState=new l.RoomState(this.roomId),this.startState.paginationToken=null,this.endState=new l.RoomState(this.roomId),this.endState.paginationToken=null,this.prevTimeline=null,this.nextTimeline=null,this.paginationRequests={b:null,f:null},this.name=this.roomId+":"+(new Date).toISOString()}return a(e,[{key:"initialiseState",value:function(e){if(this.events.length>0)throw new Error("Cannot initialise state after events are added");var t,r=n(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;Object.freeze(i)}}catch(o){r.e(o)}finally{r.f()}this.startState.setStateEvents(e),this.endState.setStateEvents(e)}},{key:"forkLive",value:function(t){var r=this.getState(t),n=new e(this.eventTimelineSet);return n.startState=r.clone(),n.endState=r,this.endState=r.clone(),n}},{key:"fork",value:function(t){var r=this.getState(t),n=new e(this.eventTimelineSet);return n.startState=r.clone(),n.endState=r.clone(),n}},{key:"getRoomId",value:function(){return this.roomId}},{key:"getFilter",value:function(){return this.eventTimelineSet.getFilter()}},{key:"getTimelineSet",value:function(){return this.eventTimelineSet}},{key:"getBaseIndex",value:function(){return this.baseIndex}},{key:"getEvents",value:function(){return this.events}},{key:"getState",value:function(t){if(t==e.BACKWARDS)return this.startState;if(t==e.FORWARDS)return this.endState;throw new Error("Invalid direction '"+t+"'")}},{key:"getPaginationToken",value:function(e){return this.getState(e).paginationToken}},{key:"setPaginationToken",value:function(e,t){this.getState(t).paginationToken=e}},{key:"getNeighbouringTimeline",value:function(t){if(t==e.BACKWARDS)return this.prevTimeline;if(t==e.FORWARDS)return this.nextTimeline;throw new Error("Invalid direction '"+t+"'")}},{key:"setNeighbouringTimeline",value:function(t,r){if(this.getNeighbouringTimeline(r))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+r+")");if(r==e.BACKWARDS)this.prevTimeline=t;else{if(r!=e.FORWARDS)throw new Error("Invalid direction '"+r+"'");this.nextTimeline=t}this.setPaginationToken(null,r)}},{key:"addEvent",value:function(t,r,n){n||(n=r?this.startState:this.endState);var i,o=this.getTimelineSet();o.room&&(e.setEventMetadata(t,n,r),t.isState()&&o.room.getUnfilteredTimelineSet()===o&&(n.setStateEvents([t]),t.sender&&("m.room.member"!==t.getType()||r)||e.setEventMetadata(t,n,r))),i=r?0:this.events.length,this.events.splice(i,0,t),r&&this.baseIndex++}},{key:"removeEvent",value:function(e){for(var t=this.events.length-1;t>=0;t--){var r=this.events[t];if(r.getId()==e)return this.events.splice(t,1),t<this.baseIndex&&this.baseIndex--,r}return null}},{key:"toString",value:function(){return this.name}}],[{key:"setEventMetadata",value:function(e,t,r){var n,i,o,a;if(null===(n=e.sender)||void 0===n||null===(i=n.events)||void 0===i||!i.member)try{e.sender=t.getSentinelMember(e.getSender())}catch(s){}if((null===(o=e.target)||void 0===o||null===(a=o.events)||void 0===a||!a.member)&&e.getType()===f.EventType.RoomMember)try{e.target=t.getSentinelMember(e.getStateKey())}catch(u){}e.isState()&&r&&(e.forwardLooking=!1)}}]),e}();t.EventTimeline=h,(0,c.default)(h,"BACKWARDS",u.Backward),(0,c.default)(h,"FORWARDS",u.Forward)},function(e,t,r){var n=r(10).Buffer,i=r(310).Transform,o=r(38).StringDecoder;function a(e){i.call(this),this.hashMode="string"===typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(7)(a,i),a.prototype.update=function(e,t,r){"string"===typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){n=i}finally{r(n)}},a.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)},a.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},a.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=a},function(e,t,r){var n=r(48),i=r(75),o=r(231),a=r(119);function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t,r){"use strict";var n=r(10).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";var n=r(66),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var o=Object.create(r(54));o.inherits=r(7);var a=r(152),s=r(98);o.inherits(f,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";(function(t,n){var i=r(10).Buffer,o=t.crypto||t.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(e>0)if(e>65536)for(var a=0;a<e;a+=65536)o.getRandomValues(r.slice(a,a+65536));else o.getRandomValues(r);if("function"===typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(11),r(21))},function(e,t,r){"use strict";var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"===typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,s;if("string"===typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var u=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var i=r(144),o=r(148);r(7)(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(21))},function(e,t,r){var n=r(10).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"===typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var u=a%i,c=Math.min(o-s,i-u),l=0;l<c;l++)r[u+l]=e[s+l];s+=c,(a+=c)%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},function(e,t,r){"use strict";var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"===typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,s;if("string"===typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var u=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var i=r(173),o=r(177);r(7)(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(21))},function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=r(213)},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(16),a=r(14),s=r(15),u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var c=u(r(4)),l=function(e){a(r,e);var t=s(r);function r(e){var i;return n(this,r),(i=t.call(this)).userId=e,(0,c.default)(o(i),"modified",void 0),(0,c.default)(o(i),"walletAddress",void 0),(0,c.default)(o(i),"displayName",void 0),(0,c.default)(o(i),"signature",void 0),(0,c.default)(o(i),"rawDisplayName",void 0),(0,c.default)(o(i),"avatarUrl",void 0),(0,c.default)(o(i),"presenceStatusMsg",null),(0,c.default)(o(i),"presence","offline"),(0,c.default)(o(i),"lastActiveAgo",0),(0,c.default)(o(i),"lastPresenceTs",0),(0,c.default)(o(i),"currentlyActive",!1),(0,c.default)(o(i),"events",{presence:null,profile:null}),(0,c.default)(o(i),"unstable_statusMessage",""),(0,c.default)(o(i),"walletAccounts",void 0),i.displayName=e,i.rawDisplayName=e,i.avatarUrl=null,i.signature="",i.updateModifiedTime(),i}return i(r,[{key:"setPresenceEvent",value:function(e){if("m.presence"===e.getType()){var t=null===this.events.presence;this.events.presence=e;var r=[];(e.getContent().presence!==this.presence||t)&&r.push("User.presence"),e.getContent().avatar_url&&e.getContent().avatar_url!==this.avatarUrl&&r.push("User.avatarUrl"),e.getContent().displayname&&e.getContent().displayname!==this.displayName&&r.push("User.displayName"),e.getContent().signature&&e.getContent().signature!==this.signature&&r.push("User.signature"),void 0!==e.getContent().currently_active&&e.getContent().currently_active!==this.currentlyActive&&r.push("User.currentlyActive"),this.presence=e.getContent().presence,r.push("User.lastPresenceTs"),e.getContent().status_msg&&(this.presenceStatusMsg=e.getContent().status_msg),e.getContent().displayname&&(this.displayName=e.getContent().displayname),e.getContent().signature&&(this.signature=e.getContent().signature),e.getContent().avatar_url&&(this.avatarUrl=e.getContent().avatar_url),this.lastActiveAgo=e.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=e.getContent().currently_active,this.updateModifiedTime();for(var n=0;n<r.length;n++)this.emit(r[n],e,this)}}},{key:"setDisplayName",value:function(e){var t=this.displayName;this.displayName="string"===typeof e?e:void 0,e!==t&&this.updateModifiedTime()}},{key:"setSignature",value:function(e){var t=this.signature;this.signature="string"===typeof e?e:"",e!==t&&this.updateModifiedTime()}},{key:"setRawDisplayName",value:function(e){this.rawDisplayName="string"===typeof e?e:void 0}},{key:"setAvatarUrl",value:function(e){var t=this.avatarUrl;this.avatarUrl=e,e!==t&&this.updateModifiedTime()}},{key:"setWalletAddress",value:function(e){this.walletAddress=e}},{key:"getWalletAddress",value:function(){return this.walletAddress}},{key:"updateModifiedTime",value:function(){this.modified=Date.now()}},{key:"getLastModifiedTime",value:function(){return this.modified}},{key:"getLastActiveTs",value:function(){return this.lastPresenceTs-this.lastActiveAgo}},{key:"unstable_updateStatusMessage",value:function(e){e.getContent()?this.unstable_statusMessage=e.getContent().status:this.unstable_statusMessage="",this.updateModifiedTime(),this.emit("User.unstable_statusMessage",this)}}]),r}(r(17).EventEmitter);t.User=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomLowercaseString=function(e){return n(e,"abcdefghijklmnopqrstuvwxyz")},t.randomString=function(e){return n(e,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")},t.randomUppercaseString=function(e){return n(e,"ABCDEFGHIJKLMNOPQRSTUVWXYZ")};function n(e,t){for(var r="",n=0;n<e;++n)r+=t.charAt(Math.floor(Math.random()*t.length));return r}},function(e,t,r){"use strict";(function(e){var n=r(20),i=r(9);function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,a)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateKeyCheck=function(e,t){return g("\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0",e,"",t)},t.decryptAES=function(e,t,r){return u?function(e,t,r){return p.apply(this,arguments)}(e,t,r):function(e,t,r){return f.apply(this,arguments)}(e,t,r)},t.encryptAES=g;var a=r(19),s=r(28),u="undefined"!==typeof window&&window.crypto?window.crypto.subtle||window.crypto.webkitSubtle:null,c=new Uint8Array(8);function l(){return(l=i(o().mark((function t(r,i,u,c){var l,f,d,p,v,y,g,m,b;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=(0,a.getCrypto)()){t.next=3;break}throw new Error("No usable crypto implementation");case 3:return c?f=(0,s.decodeBase64)(c):(f=l.randomBytes(16))[8]&=127,d=h(i,u),p=n(d,2),v=p[0],y=p[1],g=l.createCipheriv("aes-256-ctr",v,f),m=e.concat([g.update(r,"utf8"),g.final()]),b=l.createHmac("sha256",y).update(m).digest("base64"),t.abrupt("return",{iv:(0,s.encodeBase64)(f),ciphertext:m.toString("base64"),mac:b});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=i(o().mark((function t(r,i,u){var c,l,f,d,p,v;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(0,a.getCrypto)()){t.next=3;break}throw new Error("No usable crypto implementation");case 3:if(l=h(i,u),f=n(l,2),d=f[0],p=f[1],c.createHmac("sha256",p).update(e.from(r.ciphertext,"base64")).digest("base64").replace(/=+$/g,"")===r.mac.replace(/=+$/g,"")){t.next=7;break}throw new Error("Error decrypting secret ".concat(u,": bad MAC"));case 7:return v=c.createDecipheriv("aes-256-ctr",d,(0,s.decodeBase64)(r.iv)),t.abrupt("return",v.update(r.ciphertext,"base64","utf8")+v.final("utf8"));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,r){var n=(0,a.getCrypto)(),i=n.createHmac("sha256",c).update(t).digest(),o=e.alloc(1,1),s=n.createHmac("sha256",i).update(r,"utf8").update(o).digest();return o[0]=2,[s,n.createHmac("sha256",i).update(s).update(r,"utf8").update(o).digest()]}function d(){return(d=i(o().mark((function e(t,r,i,a){var c,l,f,h,d,p,y,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a?c=(0,s.decodeBase64)(a):(c=new Uint8Array(16),window.crypto.getRandomValues(c),c[8]&=127),e.next=3,v(r,i);case 3:return l=e.sent,f=n(l,2),h=f[0],d=f[1],p=(new TextEncoder).encode(t),e.next=10,u.encrypt({name:"AES-CTR",counter:c,length:64},h,p);case 10:return y=e.sent,e.next=13,u.sign({name:"HMAC"},d,y);case 13:return g=e.sent,e.abrupt("return",{iv:(0,s.encodeBase64)(c),ciphertext:(0,s.encodeBase64)(y),mac:(0,s.encodeBase64)(g)});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=i(o().mark((function e(t,r,i){var a,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(r,i);case 2:return a=e.sent,c=n(a,2),l=c[0],f=c[1],h=(0,s.decodeBase64)(t.ciphertext),e.next=9,u.verify({name:"HMAC"},f,(0,s.decodeBase64)(t.mac),h);case 9:if(e.sent){e.next=11;break}throw new Error("Error decrypting secret ".concat(i,": bad MAC"));case 11:return e.next=13,u.decrypt({name:"AES-CTR",counter:(0,s.decodeBase64)(t.iv),length:64},l,h);case 13:return d=e.sent,e.abrupt("return",(new TextDecoder).decode(new Uint8Array(d)));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=i(o().mark((function e(t,r){var n,i,a,s,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]);case 2:return n=e.sent,e.next=5,u.deriveBits({name:"HKDF",salt:c,info:(new TextEncoder).encode(r),hash:"SHA-256"},n,512);case 5:return i=e.sent,a=i.slice(0,32),s=i.slice(32),l=u.importKey("raw",a,{name:"AES-CTR"},!1,["encrypt","decrypt"]),f=u.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]),e.next=12,Promise.all([l,f]);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,r,n){return u?function(e,t,r,n){return d.apply(this,arguments)}(e,t,r,n):function(e,t,r,n){return l.apply(this,arguments)}(e,t,r,n)}}).call(this,r(18).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorFactory=o,t.errorFromEvent=function(e){var t=e.getContent();if(t){var r=t.code,n=t.reason;return{code:r,reason:n}}return{code:"Unknown error",reason:"m.unknown"}},t.newUserMismatchError=t.newUserCancelledError=t.newUnknownTransactionError=t.newUnknownMethodError=t.newUnexpectedMessageError=t.newTimeoutError=t.newKeyMismatchError=t.newInvalidMessageError=void 0,t.newVerificationError=i;var n=r(25);function i(e,t,r){var i=Object.assign({},{code:e,reason:t},r);return new n.SendingNetworkEvent({type:"m.key.verification.cancel",content:i})}function o(e,t){return function(r){return i(e,t,r)}}var a=o("m.user","Cancelled by user");t.newUserCancelledError=a;var s=o("m.timeout","Timed out");t.newTimeoutError=s;var u=o("m.unknown_transaction","Unknown transaction");t.newUnknownTransactionError=u;var c=o("m.unknown_method","Unknown method");t.newUnknownMethodError=c;var l=o("m.unexpected_message","Unexpected message");t.newUnexpectedMessageError=l;var f=o("m.key_mismatch","Key mismatch");t.newKeyMismatchError=f;var h=o("m.user_error","User mismatch");t.newUserMismatchError=h;var d=o("m.invalid_message","Invalid message");t.newInvalidMessageError=d},function(e,t,r){"use strict";var n=r(7),i=r(91),o=r(94),a=r(95),s=r(36);function u(e){s.call(this,"digest"),this._hash=e}n(u,s),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new u(a(e))}},function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(18).Buffer.isBuffer},function(e,t,r){(function(t){e.exports=function(e,r){for(var n=Math.min(e.length,r.length),i=new t(n),o=0;o<n;++o)i[o]=e[o]^r[o];return i}}).call(this,r(18).Buffer)},function(e,t,r){"use strict";var n=r(32),i=r(26);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(e,t,r){"use strict";var n=r(7),i=r(110).Reporter,o=r(108).Buffer;function a(e,t){i.call(this,t),o.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return s.isEncoderBuffer(e)||(e=new s(e,t)),this.length+=e.length,e}),this);else if("number"===typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"===typeof e)this.value=e,this.length=o.byteLength(e);else{if(!o.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(a,i),t.DecoderBuffer=a,a.isDecoderBuffer=function(e){return e instanceof a||"object"===typeof e&&o.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"===typeof e.offset&&"number"===typeof e.length&&"function"===typeof e.save&&"function"===typeof e.restore&&"function"===typeof e.isEmpty&&"function"===typeof e.readUInt8&&"function"===typeof e.skip&&"function"===typeof e.raw},a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(e){var t=new a(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},a.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},a.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=s,s.isEncoderBuffer=function(e){return e instanceof s||"object"===typeof e&&"EncoderBuffer"===e.constructor.name&&"number"===typeof e.length&&"function"===typeof e.join},s.prototype.join=function(e,t){return e||(e=o.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"===typeof this.value?e[t]=this.value:"string"===typeof this.value?e.write(this.value,t):o.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";(function(e){var n=r(31),i=r(23),o=r(12),a=r(20),s=r(9),u=r(1),c=r(2),l=r(16),f=r(14),h=r(15);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var p=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SendingNetworkClient=t.RoomVersionStability=t.PendingEventOrdering=t.CRYPTO_ENABLED=void 0;var v=p(r(236)),y=p(r(4)),g=r(17),m=r(238),b=r(25),w=r(243),k=r(81),S=r(79),E=r(246),x=ne(r(19)),_=r(35),T=r(129),O=r(132),M=ne(r(28)),P=r(61),R=r(253),I=r(8),L=r(134),C=r(82),A=r(258),j=r(86),D=r(85),N=r(49),U=r(60),B=r(270),F=r(139),q=r(72),K=r(272),z=r(131),G=ne(r(141)),H=r(24),V=r(78),W=r(273),X=r(50),Y=r(140),Z=r(274),J=r(276),Q=r(130),$=r(277),ee=r(278),te=["type"];function re(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(re=function(e){return e?r:t})(e)}function ne(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=re(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,y.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae=(0,A.isCryptoAvailable)();t.CRYPTO_ENABLED=ae;var se,ue,ce;t.PendingEventOrdering=se,function(e){e.Chronological="chronological",e.Detached="detached"}(se||(t.PendingEventOrdering=se={})),t.RoomVersionStability=ue,function(e){e.Stable="stable",e.Unstable="unstable"}(ue||(t.RoomVersionStability=ue={})),function(e){e.MasterKey="master_key",e.SelfSigningKey="self_signing_key",e.UserSigningKey="user_signing_key"}(ce||(ce={}));var le=function(t){f(p,t);var r=h(p);function p(e){var t;u(this,p),t=r.call(this),(0,y.default)(l(t),"reEmitter",new P.ReEmitter(l(t))),(0,y.default)(l(t),"olmVersion",null),(0,y.default)(l(t),"usingExternalCrypto",!1),(0,y.default)(l(t),"store",void 0),(0,y.default)(l(t),"deviceId",void 0),(0,y.default)(l(t),"credentials",void 0),(0,y.default)(l(t),"pickleKey",void 0),(0,y.default)(l(t),"scheduler",void 0),(0,y.default)(l(t),"clientRunning",!1),(0,y.default)(l(t),"timelineSupport",!1),(0,y.default)(l(t),"urlPreviewCache",{}),(0,y.default)(l(t),"unstableClientRelationAggregation",!1),(0,y.default)(l(t),"identityServer",void 0),(0,y.default)(l(t),"sessionStore",void 0),(0,y.default)(l(t),"http",void 0),(0,y.default)(l(t),"crypto",void 0),(0,y.default)(l(t),"cryptoCallbacks",void 0),(0,y.default)(l(t),"callEventHandler",void 0),(0,y.default)(l(t),"supportsCallTransfer",!1),(0,y.default)(l(t),"forceTURN",!1),(0,y.default)(l(t),"iceCandidatePoolSize",0),(0,y.default)(l(t),"idBaseUrl",void 0),(0,y.default)(l(t),"baseUrl",void 0),(0,y.default)(l(t),"canSupportVoip",!1),(0,y.default)(l(t),"peekSync",null),(0,y.default)(l(t),"isGuestAccount",!1),(0,y.default)(l(t),"ongoingScrollbacks",{}),(0,y.default)(l(t),"notifTimelineSet",null),(0,y.default)(l(t),"cryptoStore",void 0),(0,y.default)(l(t),"verificationMethods",void 0),(0,y.default)(l(t),"fallbackICEServerAllowed",!1),(0,y.default)(l(t),"roomList",void 0),(0,y.default)(l(t),"syncApi",void 0),(0,y.default)(l(t),"pushRules",void 0),(0,y.default)(l(t),"syncLeftRoomsPromise",void 0),(0,y.default)(l(t),"syncedLeftRooms",!1),(0,y.default)(l(t),"clientOpts",void 0),(0,y.default)(l(t),"clientWellKnownIntervalID",void 0),(0,y.default)(l(t),"canResetTimelineCallback",void 0),(0,y.default)(l(t),"pushProcessor",new T.PushProcessor(l(t))),(0,y.default)(l(t),"serverVersionsPromise",void 0),(0,y.default)(l(t),"cachedCapabilities",void 0),(0,y.default)(l(t),"clientWellKnown",void 0),(0,y.default)(l(t),"clientWellKnownPromise",void 0),(0,y.default)(l(t),"turnServers",[]),(0,y.default)(l(t),"turnServersExpiry",0),(0,y.default)(l(t),"checkTurnServersIntervalID",void 0),(0,y.default)(l(t),"exportedOlmDeviceToImport",void 0),(0,y.default)(l(t),"txnCtr",0),(0,y.default)(l(t),"mediaHandler",new $.MediaHandler),(0,y.default)(l(t),"loginOptions",void 0),(0,y.default)(l(t),"wallet",void 0),(0,y.default)(l(t),"startCallEventHandler",(function(){t.isInitialSyncComplete()&&(t.callEventHandler.start(),t.off("sync",t.startCallEventHandler))})),(0,y.default)(l(t),"assetsVersion",1),e.baseUrl=x.ensureNoTrailingSlash(e.baseUrl),e.idBaseUrl=x.ensureNoTrailingSlash(e.idBaseUrl),t.baseUrl=e.baseUrl,t.idBaseUrl=e.idBaseUrl,t.usingExternalCrypto=e.usingExternalCrypto,t.store=e.store||new w.StubStore,t.deviceId=e.deviceId||null;var n=e.userId||null;return t.credentials={userId:n},t.http=new C.SendingNetworkHttpApi(l(t),{baseUrl:e.baseUrl,idBaseUrl:e.idBaseUrl,accessToken:e.accessToken,request:e.request,prefix:C.PREFIX_R0,onlyData:!0,extraParams:e.queryParams,localTimeoutMs:e.localTimeoutMs,useAuthorizationHeader:e.useAuthorizationHeader}),e.deviceToImport?t.deviceId?I.logger.warn("not importing device because device ID is provided to constructor independently of exported data"):t.credentials.userId?I.logger.warn("not importing device because user ID is provided to constructor independently of exported data"):e.deviceToImport.deviceId?(t.deviceId=e.deviceToImport.deviceId,t.credentials.userId=e.deviceToImport.userId,t.exportedOlmDeviceToImport=e.deviceToImport.olmDevice):I.logger.warn("not importing device because no device ID in exported data"):e.pickleKey&&(t.pickleKey=e.pickleKey),t.scheduler=e.scheduler,t.scheduler&&t.scheduler.setProcessFunction(function(){var e=s(d().mark((function e(r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getRoom(r.getRoomId()),r.status!==b.EventStatus.SENDING&&t.updatePendingEventStatus(n,r,b.EventStatus.SENDING),e.next=4,t.sendEventHttpRequest(r);case 4:return i=e.sent,n&&n.updatePendingEvent(r,b.EventStatus.SENT,i.event_id),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,k.createNewSendingNetworkCall)(l(t),void 0,void 0)&&(t.callEventHandler=new E.CallEventHandler(l(t)),t.canSupportVoip=!0,t.on("sync",t.startCallEventHandler)),t.timelineSupport=Boolean(e.timelineSupport),t.unstableClientRelationAggregation=!!e.unstableClientRelationAggregation,t.cryptoStore=e.cryptoStore,t.sessionStore=e.sessionStore,t.verificationMethods=e.verificationMethods,t.cryptoCallbacks=e.cryptoCallbacks||{},t.forceTURN=e.forceTURN||!1,t.iceCandidatePoolSize=void 0===e.iceCandidatePoolSize?0:e.iceCandidatePoolSize,t.supportsCallTransfer=e.supportsCallTransfer||!1,t.fallbackICEServerAllowed=e.fallbackICEServerAllowed||!1,t.roomList=new R.RoomList(t.cryptoStore),t.on("Event.decrypted",(function(e){var r=e.getPushActions(),n=t.pushProcessor.actionsForEvent(e);e.setPushActions(n);var i=t.getRoom(e.getRoomId());if(i){var o=i.getUnreadNotificationCount(q.NotificationCountType.Highlight),a=!(!r||!r.tweaks)&&!!r.tweaks.highlight,s=!(!n||!n.tweaks)&&!!n.tweaks.highlight;if((a!==s||o>0)&&!i.hasUserReadEvent(t.getUserId(),e.getId())){var u=o;s&&!a&&u++,!s&&a&&u--,i.setUnreadNotificationCount(q.NotificationCountType.Highlight,u),i.getUnreadNotificationCount(q.NotificationCountType.Total)<u&&i.setUnreadNotificationCount(q.NotificationCountType.Total,u)}}})),t.on("Room.receipt",(function(e,r){if(r&&t.isRoomEncrypted(r.roomId)){var n=e.getContent();if(!(Object.keys(n).filter((function(e){return Object.keys(n[e]["m.read"]).includes(t.getUserId())})).length>0))return;for(var i=r.getLiveTimeline().getEvents(),o=0,a=i.length-1;a>=0;a--){if(a===i.length-20)return;var s=i[a];if(r.hasUserReadEvent(t.getUserId(),s.getId()))break;var u=t.getPushActionsForEvent(s);o+=u.tweaks&&u.tweaks.highlight?1:0}r.setUnreadNotificationCount("highlight",o)}})),t}return c(p,[{key:"startClient",value:function(){var e=s(d().mark((function e(t){var r,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.clientRunning){e.next=2;break}return e.abrupt("return");case 2:this.clientRunning=!0,"number"===typeof t&&(t={initialSyncLimit:t}),(r=this.getUserId())&&this.store.storeUser(new N.User(r)),this.crypto&&(this.crypto.uploadDeviceKeys(),this.crypto.start()),this.canSupportVoip&&(this.checkTurnServersIntervalID=setInterval((function(){n.checkTurnServers()}),6e5),this.checkTurnServers()),this.syncApi&&(I.logger.error("Still have sync object whilst not running: stopping old one"),this.syncApi.stop()),this.clientOpts=Object.assign({},t),this.clientOpts.crypto=this.crypto,this.clientOpts.canResetEntireTimeline=function(e){return!!n.canResetTimelineCallback&&n.canResetTimelineCallback(e)},this.syncApi=new m.SyncApi(this,this.clientOpts),this.syncApi.sync(),void 0!==this.clientOpts.clientWellKnownPollPeriod&&(this.clientWellKnownIntervalID=setInterval((function(){n.fetchClientWellKnown()}),1e3*this.clientOpts.clientWellKnownPollPeriod),this.fetchClientWellKnown()),window.localStorage["m.login_options"]&&(this.loginOptions=JSON.parse(window.localStorage["m.login_options"])),window.localStorage["m.wallet"]&&(this.wallet=JSON.parse(window.localStorage["m.wallet"]));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopClient",value:function(){var t,r,n,i;I.logger.log("stopping SendingNetworkClient"),this.clientRunning=!1,null===(t=this.syncApi)||void 0===t||t.stop(),this.syncApi=null,null===(r=this.crypto)||void 0===r||r.stop(),null===(n=this.peekSync)||void 0===n||n.stopPeeking(),null===(i=this.callEventHandler)||void 0===i||i.stop(),this.callEventHandler=null,this.wallet=null,delete window.localStorage["m.wallet"],this.loginOptions=null,delete window.localStorage["m.login_options"],e.clearInterval(this.checkTurnServersIntervalID),void 0!==this.clientWellKnownIntervalID&&e.clearInterval(this.clientWellKnownIntervalID)}},{key:"getLoginOptions",value:function(){return this.loginOptions}},{key:"setLoginOptions",value:function(e){this.loginOptions=e,window.localStorage["m.login_options"]=JSON.stringify(e)}},{key:"getWallet",value:function(){return this.wallet}},{key:"setWallet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["walletChain","walletNetwork","walletProvider","walletEndpoint"];e&&(window.localStorage["m.wallet"]=JSON.stringify(e,t)),this.wallet=e}},{key:"rehydrateDevice",value:function(){var t=s(d().mark((function t(){var r,n,i,o,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.crypto){t.next=2;break}throw new Error("Cannot rehydrate device after crypto is initialized");case 2:if(this.cryptoCallbacks.getDehydrationKey){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.getDehydratedDevice();case 6:if(r=t.sent){t.next=9;break}return t.abrupt("return");case 9:if(r.device_data&&r.device_id){t.next=12;break}return I.logger.info("no dehydrated device found"),t.abrupt("return");case 12:if(n=new e.Olm.Account,t.prev=13,(i=r.device_data).algorithm===F.DEHYDRATION_ALGORITHM){t.next=18;break}return I.logger.warn("Wrong algorithm for dehydrated device"),t.abrupt("return");case 18:return I.logger.log("unpickling dehydrated device"),t.next=21,this.cryptoCallbacks.getDehydrationKey(i,(function(e){n.unpickle(new Uint8Array(e),i.account)}));case 21:return o=t.sent,n.unpickle(o,i.account),I.logger.log("unpickled device"),t.next=26,this.http.authedRequest(void 0,"POST","/dehydrated_device/claim",void 0,{device_id:r.device_id},{prefix:"/_api/client/unstable/org.sendingnetwork.msc2697.v2"});case 26:if(!0!==t.sent.success){t.next=36;break}return this.deviceId=r.device_id,I.logger.info("using dehydrated device"),a=this.pickleKey||"DEFAULT_KEY",this.exportedOlmDeviceToImport={pickledAccount:n.pickle(a),sessions:[],pickleKey:a},n.free(),t.abrupt("return",this.deviceId);case 36:return n.free(),I.logger.info("not using dehydrated device"),t.abrupt("return");case 39:t.next=45;break;case 41:t.prev=41,t.t0=t.catch(13),n.free(),I.logger.warn("could not unpickle",t.t0);case 45:case"end":return t.stop()}}),t,this,[[13,41]])})));return function(){return t.apply(this,arguments)}}()},{key:"getDehydratedDevice",value:function(){var e=s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.authedRequest(void 0,"GET","/dehydrated_device",void 0,void 0,{prefix:"/_api/client/unstable/org.sendingnetwork.msc2697.v2"});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),I.logger.info("could not get dehydrated device",e.t0.toString()),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"setDehydrationKey",value:function(){var e=s(d().mark((function e(t,r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=3;break}return I.logger.warn("not dehydrating device if crypto is not enabled"),e.abrupt("return");case 3:return e.next=5,this.crypto.dehydrationManager.setKeyAndQueueDehydration(t,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createDehydratedDevice",value:function(){var e=s(d().mark((function e(t,r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=3;break}return I.logger.warn("not dehydrating device if crypto is not enabled"),e.abrupt("return");case 3:return e.next=5,this.crypto.dehydrationManager.setKey(t,r,n);case 5:return e.next=7,this.crypto.dehydrationManager.dehydrateDevice();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"exportDevice",value:function(){var e=s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=3;break}return I.logger.warn("not exporting device if crypto is not enabled"),e.abrupt("return");case 3:return e.t0=this.credentials.userId,e.t1=this.deviceId,e.next=7,this.crypto.olmDevice.export();case 7:return e.t2=e.sent,e.abrupt("return",{userId:e.t0,deviceId:e.t1,olmDevice:e.t2});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearStores",value:function(){if(this.clientRunning)throw new Error("Cannot clear stores while client is running");var e=[];return e.push(this.store.deleteAllData()),this.cryptoStore&&e.push(this.cryptoStore.deleteAllData()),Promise.all(e).then()}},{key:"getUserId",value:function(){return this.credentials&&this.credentials.userId?this.credentials.userId:null}},{key:"getDomain",value:function(){return this.credentials&&this.credentials.userId?this.credentials.userId.replace(/^.*?:/,""):null}},{key:"getUserIdLocalpart",value:function(){return this.credentials&&this.credentials.userId?this.credentials.userId.split(":")[0].substring(1):null}},{key:"getDeviceId",value:function(){return this.deviceId}},{key:"supportsVoip",value:function(){return this.canSupportVoip}},{key:"getMediaHandler",value:function(){return this.mediaHandler}},{key:"setForceTURN",value:function(e){this.forceTURN=e}},{key:"setSupportsCallTransfer",value:function(e){this.supportsCallTransfer=e}},{key:"createCall",value:function(e){return(0,k.createNewSendingNetworkCall)(this,e)}},{key:"getSyncState",value:function(){return this.syncApi?this.syncApi.getSyncState():null}},{key:"getSyncStateData",value:function(){return this.syncApi?this.syncApi.getSyncStateData():null}},{key:"isInitialSyncComplete",value:function(){var e=this.getSyncState();return!!e&&(e===z.SyncState.Prepared||e===z.SyncState.Syncing)}},{key:"isGuest",value:function(){return this.isGuestAccount}},{key:"setGuest",value:function(e){this.isGuestAccount=e}},{key:"getScheduler",value:function(){return this.scheduler}},{key:"retryImmediately",value:function(){return this.syncApi.retryImmediately()}},{key:"getNotifTimelineSet",value:function(){return this.notifTimelineSet}},{key:"setNotifTimelineSet",value:function(e){this.notifTimelineSet=e}},{key:"getCapabilities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(new Date).getTime();return this.cachedCapabilities&&!t&&r<this.cachedCapabilities.expiration?(I.logger.log("Returning cached capabilities"),Promise.resolve(this.cachedCapabilities.capabilities)):this.http.authedRequest(void 0,"GET","/capabilities").catch((function(e){return I.logger.error(e),null})).then((function(t){t||(t={});var n=t.capabilities||{},i=Object.keys(n).length?216e5:6e4+5e3*Math.random();return e.cachedCapabilities={capabilities:n,expiration:r+i},I.logger.log("Caching capabilities: ",n),n}))}},{key:"initCrypto",value:function(){var e=s(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,A.isCryptoAvailable)()){e.next=2;break}throw new Error("End-to-end encryption not supported in this js-sdk build: did you remember to load the olm library?");case 2:if(!this.crypto){e.next=5;break}return I.logger.warn("Attempt to re-initialise e2e encryption on SendingNetworkClient"),e.abrupt("return");case 5:if(this.sessionStore){e.next=7;break}throw new Error("Cannot enable encryption: no sessionStore provided");case 7:if(this.cryptoStore){e.next=9;break}throw new Error("Cannot enable encryption: no cryptoStore provided");case 9:return I.logger.log("Crypto: Starting up crypto store..."),e.next=12,this.cryptoStore.startup();case 12:return I.logger.log("Crypto: initialising roomlist..."),e.next=15,this.roomList.init();case 15:if(null!==(t=this.getUserId())){e.next=18;break}throw new Error("Cannot enable encryption on SendingNetworkClient with unknown userId: ensure userId is passed in createClient().");case 18:if(null!==this.deviceId){e.next=20;break}throw new Error("Cannot enable encryption on SendingNetworkClient with unknown deviceId: ensure deviceId is passed in createClient().");case 20:return r=new A.Crypto(this,this.sessionStore,t,this.deviceId,this.store,this.cryptoStore,this.roomList,this.verificationMethods),this.reEmitter.reEmit(r,["crypto.keyBackupFailed","crypto.keyBackupSessionsRemaining","crypto.roomKeyRequest","crypto.roomKeyRequestCancellation","crypto.warning","crypto.devicesUpdated","crypto.willUpdateDevices","deviceVerificationChanged","userTrustStatusChanged","crossSigning.keysChanged"]),I.logger.log("Crypto: initialising crypto object..."),e.next=25,r.init({exportedOlmDevice:this.exportedOlmDeviceToImport,pickleKey:this.pickleKey});case 25:delete this.exportedOlmDeviceToImport,this.olmVersion=A.Crypto.getOlmVersion(),r.registerEventHandlers(this),this.crypto=r;case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isCryptoEnabled",value:function(){return!!this.crypto}},{key:"getDeviceEd25519Key",value:function(){return this.crypto?this.crypto.getDeviceEd25519Key():null}},{key:"getDeviceCurve25519Key",value:function(){return this.crypto?this.crypto.getDeviceCurve25519Key():null}},{key:"uploadKeys",value:function(){var e=s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return e.next=4,this.crypto.uploadDeviceKeys();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadKeys",value:function(e,t){return this.crypto?this.crypto.downloadKeys(e,t):Promise.reject(new Error("End-to-end encryption disabled"))}},{key:"getStoredDevicesForUser",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevicesForUser(e)||[]}},{key:"getStoredDevice",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevice(e,t)||null}},{key:"setDeviceVerified",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.setDeviceVerification(e,t,r,null,null);return e==this.credentials.userId&&this.checkKeyBackup(),n}},{key:"setDeviceBlocked",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setDeviceVerification(e,t,null,r,null)}},{key:"setDeviceKnown",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setDeviceVerification(e,t,null,null,r)}},{key:"setDeviceVerification",value:function(){var e=s(d().mark((function e(t,r,n,i,o){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return e.next=4,this.crypto.setDeviceVerification(t,r,n,i,o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"requestVerificationDM",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerificationDM(e,t)}},{key:"findVerificationRequestDMInProgress",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.findVerificationRequestDMInProgress(e)}},{key:"getVerificationRequestsToDeviceInProgress",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getVerificationRequestsToDeviceInProgress(e)}},{key:"requestVerification",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerification(e,t)}},{key:"beginKeyVerification",value:function(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.beginKeyVerification(e,t,r)}},{key:"checkSecretStorageKey",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkSecretStorageKey(e,t)}},{key:"setGlobalBlacklistUnverifiedDevices",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.setGlobalBlacklistUnverifiedDevices(e)}},{key:"getGlobalBlacklistUnverifiedDevices",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getGlobalBlacklistUnverifiedDevices()}},{key:"setGlobalErrorOnUnknownDevices",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.setGlobalErrorOnUnknownDevices(e)}},{key:"getGlobalErrorOnUnknownDevices",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getGlobalErrorOnUnknownDevices()}},{key:"getCrossSigningId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.CrossSigningKey.Master;if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getCrossSigningId(e)}},{key:"getStoredCrossSigningForUser",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredCrossSigningForUser(e)}},{key:"checkUserTrust",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkUserTrust(e)}},{key:"checkDeviceTrust",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkDeviceTrust(e,t)}},{key:"checkOwnCrossSigningTrust",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkOwnCrossSigningTrust(e)}},{key:"checkCrossSigningPrivateKey",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkCrossSigningPrivateKey(e,t)}},{key:"legacyDeviceVerification",value:function(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.legacyDeviceVerification(e,t,r)}},{key:"prepareToEncrypt",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.prepareToEncrypt(e)}},{key:"isCrossSigningReady",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isCrossSigningReady()}},{key:"bootstrapCrossSigning",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.bootstrapCrossSigning(e)}},{key:"getCryptoTrustCrossSignedDevices",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getCryptoTrustCrossSignedDevices()}},{key:"setCryptoTrustCrossSignedDevices",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.setCryptoTrustCrossSignedDevices(e)}},{key:"countSessionsNeedingBackup",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.countSessionsNeedingBackup()}},{key:"getEventEncryptionInfo",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getEventEncryptionInfo(e)}},{key:"createRecoveryKeyFromPassphrase",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.createRecoveryKeyFromPassphrase(e)}},{key:"isSecretStorageReady",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isSecretStorageReady()}},{key:"bootstrapSecretStorage",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.bootstrapSecretStorage(e)}},{key:"addSecretStorageKey",value:function(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.addSecretStorageKey(e,t,r)}},{key:"hasSecretStorageKey",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.hasSecretStorageKey(e)}},{key:"storeSecret",value:function(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.storeSecret(e,t,r)}},{key:"getSecret",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getSecret(e)}},{key:"isSecretStored",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isSecretStored(e,t)}},{key:"requestSecret",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestSecret(e,t)}},{key:"getDefaultSecretStorageKeyId",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getDefaultSecretStorageKeyId()}},{key:"setDefaultSecretStorageKeyId",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.setDefaultSecretStorageKeyId(e)}},{key:"checkSecretStoragePrivateKey",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkSecretStoragePrivateKey(e,t)}},{key:"getEventSenderDeviceInfo",value:function(){var e=s(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",this.crypto.getEventSenderDeviceInfo(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isEventSenderVerified",value:function(){var e=s(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEventSenderDeviceInfo(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",r.isVerified());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAndResendEventRoomKeyRequest",value:function(e){return e.cancelAndResendKeyRequest(this.crypto,this.getUserId())}},{key:"setRoomEncryption",value:function(e,t){if(!this.crypto)throw new Error("End-to-End encryption disabled");return this.crypto.setRoomEncryption(e,t)}},{key:"isRoomEncrypted",value:function(e){var t=this.getRoom(e);return!!t&&(!!t.currentState.getStateEvents(H.EventType.RoomEncryption,"")||this.roomList.isRoomEncrypted(e))}},{key:"forceDiscardSession",value:function(e){if(!this.crypto)throw new Error("End-to-End encryption disabled");this.crypto.forceDiscardSession(e)}},{key:"exportRoomKeys",value:function(){return this.crypto?this.crypto.exportRoomKeys():Promise.reject(new Error("End-to-end encryption disabled"))}},{key:"importRoomKeys",value:function(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.importRoomKeys(e,t)}},{key:"checkKeyBackup",value:function(){return this.crypto.backupManager.checkKeyBackup()}},{key:"getKeyBackupVersion",value:function(){var e=s(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.authedRequest(void 0,"GET","/room_keys/version",void 0,void 0,{prefix:C.PREFIX_UNSTABLE});case 3:t=e.sent,e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(0),"M_NOT_FOUND"!==e.t0.errcode){e.next=12;break}return e.abrupt("return",null);case 12:throw e.t0;case 13:e.prev=13,Y.BackupManager.checkBackupVersion(t),e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(13),e.t1;case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,this,[[0,6],[13,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"isKeyBackupTrusted",value:function(e){return this.crypto.backupManager.isKeyBackupTrusted(e)}},{key:"getKeyBackupEnabled",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.getKeyBackupEnabled()}},{key:"enableKeyBackup",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.enableKeyBackup(e)}},{key:"disableKeyBackup",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.backupManager.disableKeyBackup()}},{key:"prepareKeyBackupVersion",value:function(){var e=s(d().mark((function e(t){var r,n,i,o,a,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{secureSecretStorage:!1},this.crypto){e.next=3;break}throw new Error("End-to-end encryption disabled");case 3:return e.next=5,this.crypto.backupManager.prepareKeyBackupVersion(t);case 5:if(n=e.sent,i=n.algorithm,o=n.auth_data,a=n.recovery_key,s=n.privateKey,!r.secureSecretStorage){e.next=14;break}return e.next=13,this.storeSecret("m.megolm_backup.v1",(0,M.encodeBase64)(s));case 13:I.logger.info("Key backup private key stored in secret storage");case 14:return e.abrupt("return",{algorithm:i,auth_data:o,recovery_key:a});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isKeyBackupKeyStored",value:function(){return Promise.resolve(this.isSecretStored("m.megolm_backup.v1",!1))}},{key:"createKeyBackupVersion",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return e.next=4,this.crypto.backupManager.createKeyBackupVersion(t);case 4:return r={algorithm:t.algorithm,auth_data:t.auth_data},e.next=7,this.crypto.signObject(r.auth_data);case 7:if(!this.cryptoCallbacks.getCrossSigningKey||!this.crypto.crossSigningInfo.getId()){e.next=10;break}return e.next=10,this.crypto.crossSigningInfo.signObject(r.auth_data,"master");case 10:return e.next=12,this.http.authedRequest(void 0,"POST","/room_keys/version",void 0,r,{prefix:C.PREFIX_UNSTABLE});case 12:return n=e.sent,e.next=15,this.checkKeyBackup();case 15:return this.getKeyBackupEnabled()||I.logger.error("Key backup not usable even though we just created it"),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteKeyBackupVersion",value:function(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.backupManager.version&&this.crypto.backupManager.disableKeyBackup();var t=x.encodeUri("/room_keys/version/$version",{$version:e});return this.http.authedRequest(void 0,"DELETE",t,void 0,void 0,{prefix:C.PREFIX_UNSTABLE})}},{key:"makeKeyBackupPath",value:function(e,t,r){return{path:void 0!==t?x.encodeUri("/room_keys/keys/$roomId/$sessionId",{$roomId:e,$sessionId:t}):void 0!==e?x.encodeUri("/room_keys/keys/$roomId",{$roomId:e}):"/room_keys/keys",queryData:void 0===r?void 0:{version:r}}}},{key:"sendKeyBackup",value:function(e,t,r,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");var i=this.makeKeyBackupPath(e,t,r);return this.http.authedRequest(void 0,"PUT",i.path,i.queryData,n,{prefix:C.PREFIX_UNSTABLE})}},{key:"scheduleAllGroupSessionsForBackup",value:function(){var e=s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:return e.next=4,this.crypto.backupManager.scheduleAllGroupSessionsForBackup();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"flagAllGroupSessionsForBackup",value:function(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.flagAllGroupSessionsForBackup()}},{key:"isValidRecoveryKey",value:function(e){try{return(0,j.decodeRecoveryKey)(e),!0}catch(t){return!1}}},{key:"keyBackupKeyFromPassword",value:function(e,t){return(0,D.keyFromAuthData)(t.auth_data,e)}},{key:"keyBackupKeyFromRecoveryKey",value:function(e){return(0,j.decodeRecoveryKey)(e)}},{key:"restoreKeyBackupWithPassword",value:function(){var e=s(d().mark((function e(t,r,n,i,o){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.keyFromAuthData)(i.auth_data,t);case 2:return a=e.sent,e.abrupt("return",this.restoreKeyBackup(a,r,n,i,o));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"restoreKeyBackupWithSecretStorage",value:function(){var e=s(d().mark((function e(t,r,n,i){var o,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSecret("m.megolm_backup.v1");case 2:if(o=e.sent,!(s=(0,A.fixBackupKey)(o))){e.next=12;break}return e.next=7,this.crypto.getSecretStorageKey();case 7:return u=e.sent,c=a(u,1),l=c[0],e.next=12,this.storeSecret("m.megolm_backup.v1",s,[l]);case 12:return f=(0,M.decodeBase64)(s||o),e.abrupt("return",this.restoreKeyBackup(f,r,n,t,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"restoreKeyBackupWithRecoveryKey",value:function(e,t,r,n,i){var o=(0,j.decodeRecoveryKey)(e);return this.restoreKeyBackup(o,t,r,n,i)}},{key:"restoreKeyBackupWithCache",value:function(){var e=s(d().mark((function e(t,r,n,i){var o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.crypto.getSessionBackupPrivateKey();case 2:if(o=e.sent){e.next=5;break}throw new Error("Couldn't get key");case 5:return e.abrupt("return",this.restoreKeyBackup(o,t,r,n,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"restoreKeyBackup",value:function(){var e=s(d().mark((function e(t,r,n,u,c){var l,f,h,v,y,g,m,b,w,k,S,E,x,_,T,O,M,P,R,L,A,j;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=null===c||void 0===c?void 0:c.cacheCompleteCallback,f=null===c||void 0===c?void 0:c.progressCallback,this.crypto){e.next=4;break}throw new Error("End-to-end encryption disabled");case 4:return h=0,v=[],y=this.makeKeyBackupPath(r,n,u.version),e.next=9,Y.BackupManager.makeAlgorithm(u,s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))));case 9:return g=e.sent,m=g.untrusted,e.prev=11,e.next=14,g.keyMatches(t);case 14:if(e.sent){e.next=16;break}return e.abrupt("return",Promise.reject(new C.SendingNetworkError({errcode:p.RESTORE_BACKUP_ERROR_BAD_KEY})));case 16:return this.crypto.storeSessionBackupPrivateKey(t).catch((function(e){I.logger.warn("Error caching session backup key:",e)})).then(l),f&&f({stage:"fetch"}),e.next=20,this.http.authedRequest(void 0,"GET",y.path,y.queryData,void 0,{prefix:C.PREFIX_UNSTABLE});case 20:if(!(b=e.sent).rooms){e.next=38;break}w=0,k=Object.entries(b.rooms);case 23:if(!(w<k.length)){e.next=36;break}if(S=a(k[w],2),E=S[0],(x=S[1]).sessions){e.next=27;break}return e.abrupt("continue",33);case 27:return h+=Object.keys(x.sessions).length,e.next=30,g.decryptSessions(x.sessions);case 30:_=e.sent,T=o(_);try{for(T.s();!(O=T.n()).done;)(M=O.value).room_id=E,v.push(M)}catch(D){T.e(D)}finally{T.f()}case 33:w++,e.next=23;break;case 36:e.next=62;break;case 38:if(!b.sessions){e.next=47;break}return h=Object.keys(b.sessions).length,e.next=42,g.decryptSessions(b.sessions);case 42:v=e.sent,P=o(v);try{for(P.s();!(R=P.n()).done;)R.value.room_id=r}catch(D){P.e(D)}finally{P.f()}e.next=62;break;case 47:return h=1,e.prev=48,e.next=51,g.decryptSessions(i({},n,b));case 51:L=e.sent,A=a(L,1),(j=A[0]).room_id=r,j.session_id=n,v.push(j),e.next=62;break;case 59:e.prev=59,e.t0=e.catch(48),I.logger.log("Failed to decrypt megolm session from backup",e.t0);case 62:return e.prev=62,g.free(),e.finish(62);case 65:return e.next=67,this.importRoomKeys(v,{progressCallback:f,untrusted:m,source:"backup"});case 67:return e.next=69,this.checkKeyBackup();case 69:return e.abrupt("return",{total:h,imported:v.length});case 70:case"end":return e.stop()}}),e,this,[[11,,62,65],[48,59]])})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"deleteKeysFromBackup",value:function(e,t,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");var n=this.makeKeyBackupPath(e,t,r);return this.http.authedRequest(void 0,"DELETE",n.path,n.queryData,void 0,{prefix:C.PREFIX_UNSTABLE})}},{key:"sendSharedHistoryKeys",value:function(){var e=s(d().mark((function e(t,r){var n,i,o,s,u,c,l,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("End-to-end encryption disabled");case 2:if(n=this.roomList.getRoomEncryption(t)){e.next=6;break}return I.logger.error("Unknown room.  Not sharing decryption keys"),e.abrupt("return");case 6:return e.next=8,this.crypto.downloadKeys(r);case 8:for(i=e.sent,o={},s=0,u=Object.entries(i);s<u.length;s++)c=a(u[s],2),l=c[0],f=c[1],o[l]=Object.values(f);if(!(h=this.crypto.getRoomDecryptor(t,n.algorithm)).sendSharedHistoryInboundSessions){e.next=17;break}return e.next=15,h.sendSharedHistoryInboundSessions(o);case 15:e.next=18;break;case 17:I.logger.warn("Algorithm does not support sharing previous keys",n.algorithm);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getGroup",value:function(e){return this.store.getGroup(e)}},{key:"getGroups",value:function(){return this.store.getGroups()}},{key:"getMediaConfig",value:function(e){return this.http.authedRequest(e,"GET","/config",void 0,void 0,{prefix:C.PREFIX_MEDIA_R0})}},{key:"getRoom",value:function(e){return this.store.getRoom(e)}},{key:"getRooms",value:function(){return this.store.getRooms()}},{key:"getVisibleRooms",value:function(){var e,t=this.store.getRooms(),r=new Set,n=o(t);try{for(n.s();!(e=n.n()).done;){var i=e.value.currentState.getStateEvents(H.EventType.RoomCreate,"");if(i){var a=i.getContent().predecessor;a&&a.room_id&&r.add(a.room_id)}}}catch(s){n.e(s)}finally{n.f()}return t.filter((function(e){return!e.currentState.getStateEvents(H.EventType.RoomTombstone,"")||!r.has(e.roomId)})).filter((function(e){return"leave"!==e.getMyMembership()}))}},{key:"getUser",value:function(e){return this.store.getUser(e)}},{key:"getUsers",value:function(){return this.store.getUsers()}},{key:"setAccountData",value:function(e,t,r){var n=this,i=x.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e}),o=(0,C.retryNetworkOperation)(5,(function(){return n.http.authedRequest(void 0,"PUT",i,void 0,t)}));return r&&o.then((function(e){return r(null,e)}),r),o}},{key:"getAccountData",value:function(e){return this.store.getAccountData(e)}},{key:"getAccountDataFromServer",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitialSyncComplete()){e.next=5;break}if(r=this.store.getAccountData(t)){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",r.getContent());case 5:return n=x.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:t}),e.prev=6,e.next=9,this.http.authedRequest(void 0,"GET",n,void 0);case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),!e.t0.data||"M_NOT_FOUND"!==e.t0.data.errcode){e.next=16;break}return e.abrupt("return",null);case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getIgnoredUsers",value:function(){var e=this.getAccountData("m.ignored_user_list");return e&&e.getContent()&&e.getContent().ignored_users?Object.keys(e.getContent().ignored_users):[]}},{key:"setIgnoredUsers",value:function(e,t){var r={ignored_users:{}};return e.map((function(e){return r.ignored_users[e]={}})),this.setAccountData("m.ignored_user_list",r,t)}},{key:"setRemarkedUsers",value:function(e,t){var r={ignored_users:{}};return e.map((function(e){return r.ignored_users[e]={}})),this.setAccountData("m.remarked_user_list",r,t)}},{key:"isUserIgnored",value:function(e){return this.getIgnoredUsers().includes(e)}},{key:"joinRoom",value:function(){var e=s(d().mark((function e(t,r,n){var i,o,a,s,u,c,l,f,h,p,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.isFunction(r)){e.next=2;break}throw new Error("Expected 'opts' object, got function.");case 2:if(void 0===(r=r||{}).syncRoom&&(r.syncRoom=!0),!(i=this.getRoom(t))||!i.hasMembershipState(this.credentials.userId,"join")){e.next=7;break}return e.abrupt("return",Promise.resolve(i));case 7:return o=Promise.resolve(),r.inviteSignUrl&&(o=this.http.requestOtherUrl(void 0,"POST",r.inviteSignUrl,{mxid:this.credentials.userId})),a={},r.viaServers&&(a.server_name=r.viaServers),s={qsStringifyOptions:{arrayFormat:"repeat"}},e.prev=12,u={},e.next=16,o;case 16:return(c=e.sent)&&(u.third_party_signed=c),l=x.encodeUri("/join/$roomid",{$roomid:t}),e.next=21,this.http.authedRequest(void 0,"POST",l,a,u,s);case 21:if((f=e.sent).room_id||!1!==f.qualified){e.next=24;break}return e.abrupt("return",f);case 24:return h=f.room_id,p=new m.SyncApi(this,this.clientOpts),v=p.createRoom(h),r.syncRoom,null===n||void 0===n||n(null,v),e.abrupt("return",v);case 32:throw e.prev=32,e.t0=e.catch(12),null===n||void 0===n||n(e.t0),e.t0;case 36:case"end":return e.stop()}}),e,this,[[12,32]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"resendEvent",value:function(e,t){return this.updatePendingEventStatus(t,e,b.EventStatus.SENDING),this.encryptAndSendEvent(t,e)}},{key:"cancelPendingEvent",value:function(e){if([b.EventStatus.QUEUED,b.EventStatus.NOT_SENT].indexOf(e.status)<0)throw new Error("cannot cancel an event with status "+e.status);this.scheduler&&this.scheduler.removeEventFromQueue(e);var t=this.getRoom(e.getRoomId());this.updatePendingEventStatus(t,e,b.EventStatus.CANCELLED)}},{key:"setRoomName",value:function(e,t,r){return this.sendStateEvent(e,H.EventType.RoomName,{name:t},void 0,r)}},{key:"setRoomTopic",value:function(e,t,r){return this.sendStateEvent(e,H.EventType.RoomTopic,{topic:t},void 0,r)}},{key:"getRoomTags",value:function(e,t){var r=x.encodeUri("/user/$userId/rooms/$roomId/tags/",{$userId:this.credentials.userId,$roomId:e});return this.http.authedRequest(t,"GET",r,void 0)}},{key:"setRoomTag",value:function(e,t,r,n){var i=x.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(n,"PUT",i,void 0,r)}},{key:"deleteRoomTag",value:function(e,t,r){var n=x.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(r,"DELETE",n,void 0,void 0)}},{key:"setRoomAccountData",value:function(e,t,r,n){var i=x.encodeUri("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:e,$type:t});return this.http.authedRequest(n,"PUT",i,void 0,r)}},{key:"setPowerLevel",value:function(e,t,r,n,i){var o={users:{}};(null===n||void 0===n?void 0:n.getType())===H.EventType.RoomPowerLevels&&(o=x.deepCopy(n.getContent())),o.users[t]=r;var a=x.encodeUri("/rooms/$roomId/state/m.room.power_levels",{$roomId:e});return this.http.authedRequest(i,"PUT",a,void 0,o)}},{key:"sendEvent",value:function(e,t,r,n,i){return this.sendCompleteEvent(e,{type:t,content:r},n,i)}},{key:"sendCompleteEvent",value:function(e,t,r,n){x.isFunction(r)&&(n=r,r=void 0),r||(r=this.makeTxnId());var i=new b.SendingNetworkEvent(Object.assign(t,{event_id:"~"+e+":"+r,user_id:this.credentials.userId,sender:this.credentials.userId,room_id:e,origin_server_ts:(new Date).getTime()})),o=this.getRoom(e),a=i.getAssociatedId();if(a&&a.startsWith("~")){var s=o.getPendingEvents().find((function(e){return e.getId()===a}));s.once("Event.localEventIdReplaced",(function(){i.updateAssociatedId(s.getId())}))}var u=i.getType();return I.logger.log("sendEvent of type ".concat(u," in ").concat(e," with txnId ").concat(r)),i.setTxnId(r),i.setStatus(b.EventStatus.SENDING),o&&o.addPendingEvent(i,r),i.status===b.EventStatus.NOT_SENT?Promise.reject(new Error("Event blocked by other events not yet sent")):this.encryptAndSendEvent(o,i,n)}},{key:"encryptAndSendEvent",value:function(e,t,r){var n=this;return Promise.resolve().then((function(){var r=n.encryptEventIfNeeded(t,e);return r?(n.updatePendingEventStatus(e,t,b.EventStatus.ENCRYPTING),r.then((function(){return n.updatePendingEventStatus(e,t,b.EventStatus.SENDING)}))):null})).then((function(){var r;return n.scheduler&&(r=n.scheduler.queueEvent(t))&&n.scheduler.getQueueForEvent(t).length>1&&n.updatePendingEventStatus(e,t,b.EventStatus.QUEUED),r||(r=n.sendEventHttpRequest(t),e&&(r=r.then((function(r){return e.updatePendingEvent(t,b.EventStatus.SENT,r.event_id),r})))),r})).then((function(e){return null===r||void 0===r||r(null,e),e})).catch((function(i){I.logger.error("Error sending event",i.stack||i);try{t.error=i,n.updatePendingEventStatus(e,t,b.EventStatus.NOT_SENT),i.event=t,null===r||void 0===r||r(i)}catch(o){I.logger.error("Exception in error handler!",o.stack||i)}throw i}))}},{key:"encryptEventIfNeeded",value:function(e,t){if(e.isEncrypted())return null;if(!this.isRoomEncrypted(e.getRoomId()))return null;if(!this.crypto&&this.usingExternalCrypto)return null;if(e.getType()===H.EventType.Reaction)return null;if(!this.crypto)throw new Error("This room is configured to use encryption, but your client does not support encryption.");return this.crypto.encryptEvent(e,t)}},{key:"getEncryptedIfNeededEventType",value:function(e,t){return t===H.EventType.Reaction?t:this.isRoomEncrypted(e)?H.EventType.RoomMessageEncrypted:t}},{key:"updatePendingEventStatus",value:function(e,t,r){e?e.updatePendingEvent(t,r):t.setStatus(r)}},{key:"sendEventHttpRequest",value:function(e){var t=e.getTxnId();t||(t=this.makeTxnId(),e.setTxnId(t));var r,n={$roomId:e.getRoomId(),$eventType:e.getWireType(),$stateKey:e.getStateKey(),$txnId:t};if(e.isState()){var i="/rooms/$roomId/state/$eventType";e.getStateKey()&&e.getStateKey().length>0&&(i="/rooms/$roomId/state/$eventType/$stateKey"),r=x.encodeUri(i,n)}else if(e.isRedaction()){r=x.encodeUri("/rooms/$roomId/redact/$redactsEventId/$txnId",Object.assign({$redactsEventId:e.event.redacts},n))}else r=x.encodeUri("/rooms/$roomId/send/$eventType/$txnId",n);return this.http.authedRequest(void 0,"PUT",r,void 0,e.getWireContent()).then((function(t){return I.logger.log("Event sent to ".concat(e.getRoomId()," with event id ").concat(t.event_id)),t}))}},{key:"redactEvent",value:function(e,t,r,n){var i=("object"===typeof n?n:{}).reason,o="function"===typeof n?n:void 0;return this.sendCompleteEvent(e,{type:H.EventType.RoomRedaction,content:{reason:i},redacts:t},r,o)}},{key:"sendMessage",value:function(e,t,r,n){return x.isFunction(r)&&(n=r,r=void 0),this.sendEvent(e,H.EventType.RoomMessage,t,r,n)}},{key:"sendTextMessage",value:function(e,t,r,n){var i=G.makeTextMessage(t);return this.sendMessage(e,i,r,n)}},{key:"sendNotice",value:function(e,t,r,n){var i=G.makeNotice(t);return this.sendMessage(e,i,r,n)}},{key:"sendEmoteMessage",value:function(e,t,r,n){var i=G.makeEmoteMessage(t);return this.sendMessage(e,i,r,n)}},{key:"sendImageMessage",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Image",i=arguments.length>4?arguments[4]:void 0;x.isFunction(n)&&(i=n,n=void 0);var o={msgtype:H.MsgType.Image,url:t,info:r,body:n};return this.sendMessage(e,o,void 0,i)}},{key:"sendStickerMessage",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Sticker",i=arguments.length>4?arguments[4]:void 0;x.isFunction(n)&&(i=n,n=void 0);var o={url:t,info:r,body:n};return this.sendEvent(e,H.EventType.Sticker,o,void 0,i)}},{key:"sendHtmlMessage",value:function(e,t,r,n){var i=G.makeHtmlMessage(t,r);return this.sendMessage(e,i,void 0,n)}},{key:"sendHtmlNotice",value:function(e,t,r,n){var i=G.makeHtmlNotice(t,r);return this.sendMessage(e,i,void 0,n)}},{key:"sendHtmlEmote",value:function(e,t,r,n){var i=G.makeHtmlEmote(t,r);return this.sendMessage(e,i,void 0,n)}},{key:"sendReceipt",value:function(e,t,r,n){if("function"===typeof r&&(n=r,r={}),this.isGuest())return Promise.resolve({});var i=x.encodeUri("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:e.getRoomId(),$receiptType:t,$eventId:e.getId()}),o=this.http.authedRequest(n,"POST",i,void 0,r||{}),a=this.getRoom(e.getRoomId());return a&&a.addLocalEchoReceipt(this.credentials.userId,e,t),o}},{key:"sendReadReceipt",value:function(){var e=s(d().mark((function e(t,r,n){var i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof r&&(n=r,r={}),r||(r={}),i=t.getId(),!(o=this.getRoom(t.getRoomId()))||!o.hasPendingEvent(i)){e.next=6;break}throw new Error("Cannot set read receipt to a pending event (".concat(i,")"));case 6:return a={"org.sendingnetwork.msc2285.hidden":Boolean(r.hidden)},e.abrupt("return",this.sendReceipt(t,"m.read",a,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"setRoomReadMarkers",value:function(){var e=s(d().mark((function e(t,r,n,i){var o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=this.getRoom(t))||!o.hasPendingEvent(r)){e.next=3;break}throw new Error("Cannot set read marker to a pending event (".concat(r,")"));case 3:if(!n){e.next=8;break}if(a=n.getId(),!o||!o.hasPendingEvent(a)){e.next=7;break}throw new Error("Cannot set read receipt to a pending event (".concat(a,")"));case 7:o&&o.addLocalEchoReceipt(this.credentials.userId,n,"m.read");case 8:return e.abrupt("return",this.setRoomReadMarkersHttpRequest(t,r,a,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"getUrlPreview",value:function(e,t,r){t=6e4*Math.floor(t/6e4);var n=new URL(e);n.hash="";var i=t+"_"+(e=n.toString()),o=this.urlPreviewCache[i];if(o)return r&&o.then(r).catch(r),o;var a=this.http.authedRequest(r,"GET","/preview_url",{url:e,ts:t},void 0,{prefix:C.PREFIX_MEDIA_R0});return this.urlPreviewCache[i]=a,a}},{key:"sendTyping",value:function(e,t,r,n){if(this.isGuest())return Promise.resolve({});var i=x.encodeUri("/rooms/$roomId/typing/$userId",{$roomId:e,$userId:this.credentials.userId}),o={typing:t};return t&&(o.timeout=r||2e4),this.http.authedRequest(n,"PUT",i,void 0,o)}},{key:"getRoomUpgradeHistory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getRoom(e);if(!r)return[];for(var n=[r],i=r.currentState.getStateEvents(H.EventType.RoomCreate,"");i;){var o=i.getContent().predecessor;if(!o||!o.room_id)break;var a=this.getRoom(o.room_id);if(!a)break;if(t){var s=a.currentState.getStateEvents(H.EventType.RoomTombstone,"");if(!s||s.getContent().replacement_room!==a.roomId)break}n.splice(0,0,a),i=a.currentState.getStateEvents(H.EventType.RoomCreate,"")}for(var u=r.currentState.getStateEvents(H.EventType.RoomTombstone,"");u;){var c=this.getRoom(u.getContent().replacement_room);if(!c)break;if(c.roomId===r.roomId)break;if(t){if(!(i=c.currentState.getStateEvents(H.EventType.RoomCreate,""))||!i.getContent().predecessor)break;var l=i.getContent().predecessor;if(l.room_id!==r.roomId)break}n.push(c);var f=new Set(n.map((function(e){return e.roomId})));if(f.size<n.length)return n.slice(0,n.length-1);u=(r=c).currentState.getStateEvents(H.EventType.RoomTombstone,"")}return n}},{key:"invite",value:function(e,t,r,n){return this.membershipChange(e,t,"invite",n,r)}},{key:"inviteByEmail",value:function(e,t,r){return this.inviteByThreePid(e,"email",t,r)}},{key:"inviteByThreePid",value:function(){var e=s(d().mark((function e(t,r,n,i){var o,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=x.encodeUri("/rooms/$roomId/invite",{$roomId:t}),a=this.getIdentityServerUrl(!0)){e.next=4;break}return e.abrupt("return",Promise.reject(new C.SendingNetworkError({error:"No supplied identity server URL",errcode:"ORG.SENDINGNETWORK.JSSDK_MISSING_PARAM"})));case 4:if(s={id_server:a,medium:r,address:n},e.t0=this.identityServer&&this.identityServer.getAccessToken,!e.t0){e.next=10;break}return e.next=9,this.doesServerAcceptIdentityAccessToken();case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=15;break}return e.next=13,this.identityServer.getAccessToken();case 13:(u=e.sent)&&(s.id_access_token=u);case 15:return e.abrupt("return",this.http.authedRequest(i,"POST",o,void 0,s));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"leave",value:function(e,t){return this.membershipChange(e,void 0,"leave",void 0,t)}},{key:"leaveRoomChain",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getRoomUpgradeHistory(e),i=n;if(!r){i=[];var a,s=o(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(i.push(u),u.roomId===e)break}}catch(v){s.e(v)}finally{s.f()}}var c,l={},f=[],h=function(e){return t.leave(e).then((function(){l[e]=null})).catch((function(t){return l[e]=t,null}))},d=o(i);try{for(d.s();!(c=d.n()).done;){var p=c.value;f.push(h(p.roomId))}}catch(v){d.e(v)}finally{d.f()}return Promise.all(f).then((function(){return l}))}},{key:"ban",value:function(e,t,r,n){return this.membershipChange(e,t,"ban",r,n)}},{key:"forget",value:function(e,t,r){var n=this;void 0===t&&(t=!0);var i=this.membershipChange(e,void 0,"forget",void 0,r);return t?i.then((function(t){return n.store.removeRoom(e),n.emit("deleteRoom",e),t})):i}},{key:"unban",value:function(e,t,r){var n=x.encodeUri("/rooms/$roomId/unban",{$roomId:e}),i={user_id:t};return this.http.authedRequest(r,"POST",n,void 0,i)}},{key:"kick",value:function(e,t,r,n){var i=x.encodeUri("/rooms/$roomId/kick",{$roomId:e}),o={user_id:t,reason:r};return this.http.authedRequest(n,"POST",i,void 0,o)}},{key:"setMembershipState",value:function(e,t,r,n,i){x.isFunction(n)&&(i=n,n=void 0);var o=x.encodeUri("/rooms/$roomId/state/m.room.member/$userId",{$roomId:e,$userId:t});return this.http.authedRequest(i,"PUT",o,void 0,{membership:r,reason:n})}},{key:"membershipChange",value:function(e,t,r,n,i){x.isFunction(n)&&(i=n,n=void 0);var o=x.encodeUri("/rooms/$room_id/$membership",{$room_id:e,$membership:r});return this.http.authedRequest(i,"POST",o,void 0,{user_id:t,reason:n})}},{key:"getPushActionsForEvent",value:function(e){return e.getPushActions()||e.setPushActions(this.pushProcessor.actionsForEvent(e)),e.getPushActions()}},{key:"setProfileInfo",value:function(e,t,r){var n=x.encodeUri("/profile/$userId/$info",{$userId:this.credentials.userId,$info:e});return this.http.authedRequest(r,"PUT",n,void 0,t)}},{key:"setDisplayName",value:function(){var e=s(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProfileInfo("displayname",{displayname:t},r);case 2:return n=e.sent,(i=this.getUser(this.getUserId()))&&(i.displayName=t,i.emit("User.displayName",i.events.presence,i)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setSignature",value:function(){var e=s(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProfileInfo("signature",{signature:t},r);case 2:return n=e.sent,(i=this.getUser(this.getUserId()))&&(i.signature=t,i.emit("User.signature",i.events.presence,i)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setAvatarUrl",value:function(){var e=s(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setProfileInfo("avatar_url",{avatar_url:t},r);case 2:return n=e.sent,(i=this.getUser(this.getUserId()))&&(i.avatarUrl=t,i.emit("User.avatarUrl",i.events.presence,i)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mxcUrlToHttp",value:function(e,t,r,n,i){return(0,U.getHttpUriForMxc)(this.baseUrl,e,t,r,n,i)}},{key:"_unstable_setStatusMessage",value:function(e){var t=this,r="im.vector.user_status";return Promise.all(this.getRooms().map(function(){var n=s(d().mark((function n(i){var o,a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o="join"===i.getMyMembership(),a=2===i.getInvitedAndJoinedMemberCount(),o&&a){n.next=4;break}return n.abrupt("return");case 4:if(i.currentState.mayClientSendStateEvent(r,t)){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,t.sendStateEvent(i.roomId,r,{status:e},t.getUserId());case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then()}},{key:"setPresence",value:function(e,t){var r=x.encodeUri("/presence/$userId/status",{$userId:this.credentials.userId});"string"===typeof e&&(e={presence:e});if(-1===["offline","online","unavailable"].indexOf(e.presence))throw new Error("Bad presence value: "+e.presence);return this.http.authedRequest(t,"PUT",r,void 0,e)}},{key:"getPresence",value:function(e,t){var r=x.encodeUri("/presence/$userId/status",{$userId:e});return this.http.authedRequest(t,"GET",r,void 0,void 0)}},{key:"scrollback",value:function(e,t,r){var n=this;x.isFunction(t)&&(r=t,t=void 0),t=t||30;var i=0,o=this.ongoingScrollbacks[e.roomId]||{};if(o.promise)return o.promise;if(o.errorTs){var a=Date.now()-o.errorTs;i=Math.max(3e3-a,0)}if(null===e.oldState.paginationToken)return Promise.resolve(e);var s=this.store.scrollback(e,t).length;if(s===t)return Promise.resolve(e);t-=s;var u=new Promise((function(o,a){(0,x.sleep)(i).then((function(){return n.createMessagesRequest(e.roomId,e.oldState.paginationToken,t,_.Direction.Backward)})).then((function(t){var i,a=t.chunk.map(n.getEventMapper());if(t.state){var s=t.state.map(n.getEventMapper());e.currentState.setUnknownStateEvents(s)}e.addEventsToTimeline(a,!0,e.getLiveTimeline()),e.oldState.paginationToken=t.end,0===t.chunk.length&&(e.oldState.paginationToken=null),n.store.storeEvents(e,a,t.end,!0),n.ongoingScrollbacks[e.roomId]=null,null===(i=r)||void 0===i||i(null,e),o(e)})).catch((function(t){var i;n.ongoingScrollbacks[e.roomId]={errorTs:Date.now()},null===(i=r)||void 0===i||i(t),a(t)}))}));return o={promise:u,errorTs:null},this.ongoingScrollbacks[e.roomId]=o,u}},{key:"getEventMapper",value:function(e){return(0,W.eventMapperFor)(this,e||{})}},{key:"getEventTimeline",value:function(e,t){var r=this;if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating SendingNetworkClient to enable it.");if(e.getTimelineForEvent(t))return Promise.resolve(e.getTimelineForEvent(t));var n=x.encodeUri("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t}),i=void 0;return this.clientOpts.lazyLoadMembers&&(i={filter:JSON.stringify(S.Filter.LAZY_LOADING_MESSAGES_FILTER)}),this.http.authedRequest(void 0,"GET",n,i).then((function(n){if(!n.event)throw new Error("'event' not in '/context' result - node too old?");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);n.events_after.reverse();var i=n.events_after.concat([n.event]).concat(n.events_before).map(r.getEventMapper()),o=e.getTimelineForEvent(i[0].getId());if(o){var a=n.state.map(r.getEventMapper());o.getState(_.EventTimeline.BACKWARDS).setUnknownStateEvents(a)}else(o=e.addTimeline()).initialiseState(n.state.map(r.getEventMapper())),o.getState(_.EventTimeline.FORWARDS).paginationToken=n.end;return e.addEventsToTimeline(i,!0,o,n.start),e.getTimelineForEvent(t)||o}))}},{key:"createMessagesRequest",value:function(e,t,r,n,i){var o=x.encodeUri("/rooms/$roomId/messages",{$roomId:e});void 0===r&&(r=30);var a,s={from:t,limit:r,dir:n},u=null;(this.clientOpts.lazyLoadMembers&&(u=Object.assign({},S.Filter.LAZY_LOADING_MESSAGES_FILTER)),i)&&(u=u||{},Object.assign(u,null===(a=i.getRoomTimelineFilterComponent())||void 0===a?void 0:a.toJSON()));return u&&(s.filter=JSON.stringify(u)),this.http.authedRequest(void 0,"GET",o,s)}},{key:"paginateEventTimeline",value:function(e,t){var r=this,n=e.getTimelineSet()===this.notifTimelineSet,i=(t=t||{}).backwards||!1;if(n&&!i)throw new Error("paginateNotifTimeline can only paginate backwards");var o=i?_.EventTimeline.BACKWARDS:_.EventTimeline.FORWARDS,a=e.getPaginationToken(o);if(!a)return Promise.resolve(!1);var s,u,c=e.paginationRequests[o];if(c)return c;if(n)"/notifications",s={limit:"limit"in t?t.limit:30,only:"highlight"},a&&"end"!==a&&(s.from=a),u=this.http.authedRequest(void 0,"GET","/notifications",s,void 0).then((function(t){for(var n=t.next_token,a=[],s=0;s<t.notifications.length;s++){var u=t.notifications[s],c=r.getEventMapper()(u.event);c.setPushActions(T.PushProcessor.actionListToActionsObject(u.actions)),c.event.room_id=u.room_id,a[s]=c}return e.getTimelineSet().addEventsToTimeline(a,i,e,n),i&&!t.next_token&&e.setPaginationToken(null,o),!!t.next_token})).finally((function(){e.paginationRequests[o]=null})),e.paginationRequests[o]=u;else{if(!this.getRoom(e.getRoomId()))throw new Error("Unknown room "+e.getRoomId());(u=this.createMessagesRequest(e.getRoomId(),a,t.limit,o,e.getFilter())).then((function(t){if(t.state){var n=e.getState(o),a=t.state.map(r.getEventMapper());n.setUnknownStateEvents(a)}var s=t.end,u=t.chunk.map(r.getEventMapper());return e.getTimelineSet().addEventsToTimeline(u,i,e,s),i&&t.end==t.start&&e.setPaginationToken(null,o),t.end!=t.start})).finally((function(){e.paginationRequests[o]=null})),e.paginationRequests[o]=u}return u}},{key:"resetNotifTimelineSet",value:function(){this.notifTimelineSet&&this.notifTimelineSet.resetLiveTimeline("end",null)}},{key:"peekInRoom",value:function(e){return this.peekSync&&this.peekSync.stopPeeking(),this.peekSync=new m.SyncApi(this,this.clientOpts),this.peekSync.peek(e)}},{key:"stopPeeking",value:function(){this.peekSync&&(this.peekSync.stopPeeking(),this.peekSync=null)}},{key:"setGuestAccess",value:function(e,t){var r=this.sendStateEvent(e,H.EventType.RoomGuestAccess,{guest_access:t.allowJoin?"can_join":"forbidden"},""),n=Promise.resolve(void 0);return t.allowRead&&(n=this.sendStateEvent(e,H.EventType.RoomHistoryVisibility,{history_visibility:"world_readable"},"")),Promise.all([n,r]).then()}},{key:"requestRegisterEmailToken",value:function(e,t,r,n){return this.requestTokenFromEndpoint("/register/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}},{key:"requestRegisterMsisdnToken",value:function(e,t,r,n,i){return this.requestTokenFromEndpoint("/register/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}},{key:"requestAdd3pidEmailToken",value:function(e,t,r,n){return this.requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}},{key:"requestAdd3pidMsisdnToken",value:function(e,t,r,n,i){return this.requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}},{key:"requestPasswordEmailToken",value:function(e,t,r,n){return this.requestTokenFromEndpoint("/account/password/email/requestToken",{email:e,client_secret:t,send_attempt:r,next_link:n})}},{key:"requestPasswordMsisdnToken",value:function(e,t,r,n,i){return this.requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:e,phone_number:t,client_secret:r,send_attempt:n,next_link:i})}},{key:"requestTokenFromEndpoint",value:function(){var e=s(d().mark((function e(t,r){var n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},r),e.next=3,this.doesServerSupportSeparateAddAndBind();case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=this.idBaseUrl;case 6:if(!e.t0){e.next=19;break}if(i=new URL(this.idBaseUrl),n.id_server=i.host,e.t1=this.identityServer&&this.identityServer.getAccessToken,!e.t1){e.next=14;break}return e.next=13,this.doesServerAcceptIdentityAccessToken();case 13:e.t1=e.sent;case 14:if(!e.t1){e.next=19;break}return e.next=17,this.identityServer.getAccessToken();case 17:(o=e.sent)&&(n.id_access_token=o);case 19:return e.abrupt("return",this.http.request(void 0,"POST",t,void 0,n));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRoomPushRule",value:function(e,t){if(!this.pushRules)throw new Error("SyncApi.sync() must be done before accessing to push rules.");for(var r=0;r<this.pushRules[e].room.length;r++){var n=this.pushRules[e].room[r];if(n.rule_id===t)return n}}},{key:"setRoomMutePushRule",value:function(e,t,r){var n,i,o=this,a=this.getRoomPushRule(e,t);if(a&&0<=a.actions.indexOf("dont_notify")&&(i=!0),r?a?i||(n=x.defer(),this.deletePushRule(e,Q.PushRuleKind.RoomSpecific,a.rule_id).then((function(){o.addPushRule(e,Q.PushRuleKind.RoomSpecific,t,{actions:["dont_notify"]}).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})).catch((function(e){n.reject(e)})),n=n.promise):n=this.addPushRule(e,Q.PushRuleKind.RoomSpecific,t,{actions:["dont_notify"]}):i&&(n=this.deletePushRule(e,Q.PushRuleKind.RoomSpecific,a.rule_id)),n)return new Promise((function(e,t){n.then((function(){o.getPushRules().then((function(t){o.pushRules=t,e()})).catch((function(e){t(e)}))})).catch((function(e){o.getPushRules().then((function(r){o.pushRules=r,t(e)})).catch((function(r){t(e)}))}))}))}},{key:"searchMessageText",value:function(e,t){var r={search_term:e.query};return"keys"in e&&(r.keys=e.keys),this.search({body:{search_categories:{room_events:r}}},t)}},{key:"searchRoomEvents",value:function(e){var t=this,r={search_categories:{room_events:{search_term:e.term,filter:e.filter,order_by:J.SearchOrderBy.Recent,event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},n={_query:r,results:[],highlights:[]};return this.search({body:r}).then((function(e){return t.processRoomEventsSearch(n,e)}))}},{key:"backPaginateRoomEventsSearch",value:function(e){var t=this;if(!e.next_batch)return Promise.reject(new Error("Cannot backpaginate event search any further"));if(e.pendingRequest)return e.pendingRequest;var r={body:e._query,next_batch:e.next_batch},n=this.search(r).then((function(r){return t.processRoomEventsSearch(e,r)})).finally((function(){e.pendingRequest=null}));return e.pendingRequest=n,n}},{key:"processRoomEventsSearch",value:function(e,t){var r=t.search_categories.room_events;e.count=r.count,e.next_batch=r.next_batch;var n={};r.highlights.forEach((function(e){n[e]=1})),e.highlights.forEach((function(e){n[e]=1})),e.highlights=Object.keys(n);for(var i=r.results?r.results.length:0,o=0;o<i;o++){var a=B.SearchResult.fromJson(r.results[o],this.getEventMapper());e.results.push(a)}return e}},{key:"syncLeftRooms",value:function(){var e=this;if(this.syncedLeftRooms)return Promise.resolve([]);if(this.syncLeftRoomsPromise)return this.syncLeftRoomsPromise;var t=new m.SyncApi(this,this.clientOpts);return this.syncLeftRoomsPromise=t.syncLeftRooms(),this.syncLeftRoomsPromise.then((function(t){I.logger.log("Marking success of sync left room request"),e.syncedLeftRooms=!0})).finally((function(){e.syncLeftRoomsPromise=null})),this.syncLeftRoomsPromise}},{key:"createFilter",value:function(e){var t=this,r=x.encodeUri("/user/$userId/filter",{$userId:this.credentials.userId});return this.http.authedRequest(void 0,"POST",r,void 0,e).then((function(r){var n=S.Filter.fromJson(t.credentials.userId,r.filter_id,e);return t.store.storeFilter(n),n}))}},{key:"getFilter",value:function(e,t,r){var n=this;if(r){var i=this.store.getFilter(e,t);if(i)return Promise.resolve(i)}var o=x.encodeUri("/user/$userId/filter/$filterId",{$userId:e,$filterId:t});return this.http.authedRequest(void 0,"GET",o,void 0,void 0).then((function(r){var i=S.Filter.fromJson(e,t,r);return n.store.storeFilter(i),i}))}},{key:"getOrCreateFilter",value:function(){var e=s(d().mark((function e(t,r){var n,i,o,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.store.getFilterIdByName(t),i=void 0,!n){e.next=15;break}return e.prev=3,e.next=6,this.getFilter(this.credentials.userId,n,!0);case 6:(o=e.sent)&&(a=o.getDefinition(),s=r.getDefinition(),x.deepCompare(a,s)&&(i=n)),e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(3),"M_UNKNOWN"===e.t0.errcode||"M_NOT_FOUND"===e.t0.errcode){e.next=14;break}throw e.t0;case 14:i||this.store.setFilterIdByName(t,void 0);case 15:if(!i){e.next=17;break}return e.abrupt("return",i);case 17:return e.next=19,this.createFilter(r.getDefinition());case 19:return u=e.sent,this.store.setFilterIdByName(t,u.filterId),e.abrupt("return",u.filterId);case 22:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getOpenIdToken",value:function(){var e=x.encodeUri("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this.http.authedRequest(void 0,"POST",e,void 0,{})}},{key:"turnServer",value:function(e){return this.http.authedRequest(e,"GET","/voip/turnServer")}},{key:"getTurnServers",value:function(){return this.turnServers||[]}},{key:"getTurnServersExpiry",value:function(){return this.turnServersExpiry}},{key:"checkTurnServers",value:function(){var t=s(d().mark((function t(){var r,n,i,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canSupportVoip){t.next=2;break}return t.abrupt("return");case 2:if(r=!1,!((n=this.turnServersExpiry-Date.now())>6e5)){t.next=9;break}I.logger.debug("TURN creds are valid for another "+n+" ms: not fetching new ones."),r=!0,t.next=21;break;case 9:return I.logger.debug("Fetching new TURN credentials"),t.prev=10,t.next=13,this.turnServer();case 13:(i=t.sent).uris&&(I.logger.log("Got TURN URIs: "+i.uris+" refresh in "+i.ttl+" secs"),o={urls:i.uris,username:i.username,credential:i.password},this.turnServers=[o],this.turnServersExpiry=Date.now()+1e3*i.ttl,r=!0),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(10),I.logger.error("Failed to get TURN URIs",t.t0),403===t.t0.httpStatus&&(I.logger.info("TURN access unavailable for this account: stopping credentials checks"),null!==this.checkTurnServersIntervalID&&e.clearInterval(this.checkTurnServersIntervalID),this.checkTurnServersIntervalID=null);case 21:return t.abrupt("return",r);case 22:case"end":return t.stop()}}),t,this,[[10,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"setFallbackICEServerAllowed",value:function(e){this.fallbackICEServerAllowed=e}},{key:"isFallbackICEServerAllowed",value:function(){return this.fallbackICEServerAllowed}},{key:"isSynapseAdministrator",value:function(){var e=x.encodeUri("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this.http.authedRequest(void 0,"GET",e,void 0,void 0,{prefix:""}).then((function(e){return e.admin}))}},{key:"whoisSynapseUser",value:function(e){var t=x.encodeUri("/_synapse/admin/v1/whois/$userId",{$userId:e});return this.http.authedRequest(void 0,"GET",t,void 0,void 0,{prefix:""})}},{key:"deactivateSynapseUser",value:function(e){var t=x.encodeUri("/_synapse/admin/v1/deactivate/$userId",{$userId:e});return this.http.authedRequest(void 0,"POST",t,void 0,void 0,{prefix:""})}},{key:"fetchClientWellKnown",value:function(){var e=s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clientWellKnownPromise=O.AutoDiscovery.getRawClientConfig(this.getDomain()),e.next=3,this.clientWellKnownPromise;case 3:this.clientWellKnown=e.sent,this.emit("WellKnown.client",this.clientWellKnown);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getClientWellKnown",value:function(){return this.clientWellKnown}},{key:"waitForClientWellKnown",value:function(){return this.clientWellKnownPromise}},{key:"storeClientOptions",value:function(){var e=["boolean","string","number"],t=Object.entries(this.clientOpts).filter((function(t){var r=a(t,2),n=(r[0],r[1]);return e.includes(typeof n)})).reduce((function(e,t){var r=a(t,2),n=r[0],i=r[1];return e[n]=i,e}),{});return this.store.storeClientOptions(t)}},{key:"_unstable_getSharedRooms",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doesServerSupportUnstableFeature("uk.half-shot.msc2666");case 2:if(e.sent){e.next=4;break}throw Error("Server does not support shared_rooms API");case 4:return r=x.encodeUri("/uk.half-shot.msc2666/user/shared_rooms/$userId",{$userId:t}),e.next=7,this.http.authedRequest(void 0,"GET",r,void 0,void 0,{prefix:C.PREFIX_UNSTABLE});case 7:return n=e.sent,e.abrupt("return",n.joined);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersions",value:function(){var e=this;return this.serverVersionsPromise||(this.serverVersionsPromise=this.http.request(void 0,"GET","/_api/client/versions",void 0,void 0,{prefix:""}).catch((function(t){throw e.serverVersionsPromise=null,t}))),this.serverVersionsPromise}},{key:"isVersionSupported",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:return r=e.sent,n=r.versions,e.abrupt("return",n&&n.includes(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"doesServerSupportLazyLoading",value:function(){var e=s(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t.versions,n=t.unstable_features,e.abrupt("return",r&&r.includes("r0.5.0")||n&&n["m.lazy_load_members"]);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doesServerRequireIdServerParam",value:function(){var e=s(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(r=t.versions)||!r.includes("r0.6.0")){e.next=8;break}return e.abrupt("return",!1);case 8:if(n=t.unstable_features){e.next=11;break}return e.abrupt("return",!0);case 11:if(void 0!==n["m.require_identity_server"]){e.next=15;break}return e.abrupt("return",!0);case 15:return e.abrupt("return",n["m.require_identity_server"]);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doesServerAcceptIdentityAccessToken",value:function(){var e=s(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t.versions,n=t.unstable_features,e.abrupt("return",r&&r.includes("r0.6.0")||n&&n["m.id_access_token"]);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doesServerSupportSeparateAddAndBind",value:function(){var e=s(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t.versions,n=t.unstable_features,e.abrupt("return",r&&r.includes("r0.6.0")||n&&n["m.separate_add_and_bind"]);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doesServerSupportUnstableFeature",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return n=r.unstable_features,e.abrupt("return",n&&!!n[t]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"doesServerForceEncryptionForPreset",value:function(){var e=s(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVersions();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return n=r.unstable_features,i=t.includes("_chat")?t.substring(0,t.indexOf("_chat")):t,e.abrupt("return",n&&!!n["io.element.e2ee_forced.".concat(i)]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasLazyLoadMembersEnabled",value:function(){return!!this.clientOpts.lazyLoadMembers}},{key:"setCanResetTimelineCallback",value:function(e){this.canResetTimelineCallback=e}},{key:"getCanResetTimelineCallback",value:function(){return this.canResetTimelineCallback}},{key:"relations",value:function(){var e=s(d().mark((function e(t,r,n,i,o){var a,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getEncryptedIfNeededEventType(t,i),e.next=3,this.fetchRelations(t,r,n,a,o);case 3:if(s=e.sent,u=this.getEventMapper(),s.original_event&&(c=u(s.original_event)),l=s.chunk.map(u),a!==H.EventType.RoomMessageEncrypted){e.next=12;break}return f=c?l.concat(c):l,e.next=11,Promise.all(f.map((function(e){return new Promise((function(t){return e.once("Event.decrypted",t)}))})));case 11:l=l.filter((function(e){return e.getType()===i}));case 12:return c&&n===H.RelationType.Replace&&(l=l.filter((function(e){return e.getSender()===c.getSender()}))),e.abrupt("return",{originalEvent:c,events:l,nextBatch:s.next_batch});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"getCrossSigningCacheCallbacks",value:function(){var e;return null===(e=this.crypto)||void 0===e?void 0:e.crossSigningInfo.getCacheCallbacks()}},{key:"generateClientSecret",value:function(){return(0,X.randomString)(32)}},{key:"decryptEventIfNeeded",value:function(e,t){return e.shouldAttemptDecryption()&&e.attemptDecryption(this.crypto,t),e.isBeingDecrypted()?e.getDecryptionPromise():Promise.resolve()}},{key:"termsUrlForService",value:function(e,t){switch(e){case L.SERVICE_TYPES.IS:return t+C.PREFIX_IDENTITY_V2+"/terms";case L.SERVICE_TYPES.IM:return t+"/_api/integrations/v1/terms";default:throw new Error("Unsupported service type")}}},{key:"getNodeUrl",value:function(){return this.baseUrl}},{key:"getIdentityServerUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&(this.idBaseUrl.startsWith("http://")||this.idBaseUrl.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl}},{key:"setIdentityServerUrl",value:function(e){this.idBaseUrl=x.ensureNoTrailingSlash(e),this.http.setIdBaseUrl(this.idBaseUrl)}},{key:"getAccessToken",value:function(){return this.http.opts.accessToken||null}},{key:"isLoggedIn",value:function(){return void 0!==this.http.opts.accessToken}},{key:"makeTxnId",value:function(){return"m"+(new Date).getTime()+"."+this.txnCtr++}},{key:"isUsernameAvailable",value:function(e){return this.http.authedRequest(void 0,"GET","/register/available",{username:e}).then((function(e){return e.available}))}},{key:"register",value:function(e,t,r,n,i,o,a,s){!0===i?i={email:!0}:null!==i&&void 0!==i&&!1!==i||(i={}),"function"===typeof a&&(s=a,a=void 0),r&&(n.session=r);var u={auth:n};return void 0!==e&&null!==e&&(u.username=e),void 0!==t&&null!==t&&(u.password=t),i.email&&(u.bind_email=!0),i.msisdn&&(u.bind_msisdn=!0),void 0!==o&&null!==o&&(u.guest_access_token=o),void 0!==a&&null!==a&&(u.inhibit_login=a),void 0!==t&&null!==t&&(u.x_show_msisdn=!0),this.registerRequest(u,void 0,s)}},{key:"registerGuest",value:function(e,t){return(e=e||{}).body=e.body||{},this.registerRequest(e.body,"guest",t)}},{key:"registerRequest",value:function(e,t,r){var n={};return t&&(n.kind=t),this.http.request(r,"POST","/register",n,e)}},{key:"loginFlows",value:function(e){return this.http.request(e,"GET","/login")}},{key:"login",value:function(e,t,r){var n=this,i={type:e};return x.extend(i,t),this.http.authedRequest((function(e,t){t&&t.access_token&&t.user_id&&(n.http.opts.accessToken=t.access_token,n.credentials={userId:t.user_id}),r&&r(e,t)}),"POST","/login",void 0,i)}},{key:"loginWithPassword",value:function(e,t,r){return this.login("m.login.password",{user:e,password:t},r)}},{key:"loginWithSAML2",value:function(e,t){return this.login("m.login.saml2",{relay_state:e},t)}},{key:"getCasLoginUrl",value:function(e){return this.getSsoLoginUrl(e,"cas")}},{key:"getSsoLoginUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sso",r=arguments.length>2?arguments[2]:void 0,n="/login/"+t+"/redirect";return r&&(n+="/"+r),this.http.getUrl(n,{redirectUrl:e},C.PREFIX_R0)}},{key:"loginWithToken",value:function(e,t){return this.login("m.login.token",{token:e},t)}},{key:"logout",value:function(e){return this.http.authedRequest(e,"POST","/logout")}},{key:"deactivateAccount",value:function(e,t){if("function"===typeof t)throw new Error("deactivateAccount no longer accepts a callback parameter");var r={};return e&&(r.auth=e),void 0!==t&&(r.erase=t),this.http.authedRequest(void 0,"POST","/account/deactivate",void 0,r)}},{key:"getFallbackAuthUrl",value:function(e,t){var r=x.encodeUri("/auth/$loginType/fallback/web",{$loginType:e});return this.http.getUrl(r,{session:t},C.PREFIX_R0)}},{key:"createRoom",value:function(){var e=s(d().mark((function e(t,r){var n,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t.invite_3pid||[]).filter((function(e){return!e.id_access_token})),e.t0=n.length>0&&this.identityServer&&this.identityServer.getAccessToken,!e.t0){e.next=6;break}return e.next=5,this.doesServerAcceptIdentityAccessToken();case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=11;break}return e.next=9,this.identityServer.getAccessToken();case 9:if(i=e.sent){a=o(n);try{for(a.s();!(s=a.n()).done;)s.value.id_access_token=i}catch(u){a.e(u)}finally{a.f()}}case 11:return e.abrupt("return",this.http.authedRequest(r,"POST","/createRoom",void 0,t));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRelations",value:function(){var e=s(d().mark((function e(t,r,n,i,o){var a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o.from&&(a.from=o.from),s=x.encodeParams(a),u=x.encodeUri("/rooms/$roomId/relations/$eventId/$relationType/$eventType?"+s,{$roomId:t,$eventId:r,$relationType:n,$eventType:i}),e.next=6,this.http.authedRequest(void 0,"GET",u,null,null,{prefix:C.PREFIX_UNSTABLE});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"roomState",value:function(e,t){var r=x.encodeUri("/rooms/$roomId/state",{$roomId:e});return this.http.authedRequest(t,"GET",r)}},{key:"fetchRoomEvent",value:function(e,t,r){var n=x.encodeUri("/rooms/$roomId/event/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(r,"GET",n)}},{key:"members",value:function(e,t,r,n,i){var o={};t&&(o.membership=t),r&&(o.not_membership=r),n&&(o.at=n);var a=x.encodeParams(o),s=x.encodeUri("/rooms/$roomId/members?"+a,{$roomId:e});return this.http.authedRequest(i,"GET",s)}},{key:"upgradeRoom",value:function(e,t){var r=x.encodeUri("/rooms/$roomId/upgrade",{$roomId:e});return this.http.authedRequest(void 0,"POST",r,void 0,{new_version:t})}},{key:"getStateEvent",value:function(e,t,r,n){var i={$roomId:e,$eventType:t,$stateKey:r},o=x.encodeUri("/rooms/$roomId/state/$eventType",i);return void 0!==r&&(o=x.encodeUri(o+"/$stateKey",i)),this.http.authedRequest(n,"GET",o)}},{key:"sendStateEvent",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,o={$roomId:e,$eventType:t,$stateKey:n},a=x.encodeUri("/rooms/$roomId/state/$eventType",o);return void 0!==n&&(a=x.encodeUri(a+"/$stateKey",o)),this.http.authedRequest(i,"PUT",a,void 0,r)}},{key:"roomInitialSync",value:function(e,t,r){x.isFunction(t)&&(r=t,t=void 0);var n=x.encodeUri("/rooms/$roomId/initialSync",{$roomId:e});return t||(t=30),this.http.authedRequest(r,"GET",n,{limit:t})}},{key:"setRoomReadMarkersHttpRequest",value:function(e,t,r,n){var i=x.encodeUri("/rooms/$roomId/read_markers",{$roomId:e}),o={"m.fully_read":t,"m.read":r,"org.sendingnetwork.msc2285.hidden":Boolean(!!n&&n.hidden)};return this.http.authedRequest(void 0,"POST",i,void 0,o)}},{key:"getJoinedRooms",value:function(){var e=x.encodeUri("/joined_rooms",{});return this.http.authedRequest(void 0,"GET",e)}},{key:"getJoinedRoomMembers",value:function(e){var t=x.encodeUri("/rooms/$roomId/joined_members",{$roomId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"publicRooms",value:function(e,t){"function"==typeof e&&(t=e,e={}),void 0===e&&(e={});var r={};return e.server&&(r.server=e.server,delete e.server),0===Object.keys(e).length&&0===Object.keys(r).length?this.http.authedRequest(t,"GET","/publicRooms"):this.http.authedRequest(t,"POST","/publicRooms",r,e)}},{key:"createAlias",value:function(e,t,r){var n=x.encodeUri("/directory/room/$alias",{$alias:e}),i={room_id:t};return this.http.authedRequest(r,"PUT",n,void 0,i)}},{key:"deleteAlias",value:function(e,t){var r=x.encodeUri("/directory/room/$alias",{$alias:e});return this.http.authedRequest(t,"DELETE",r,void 0,void 0)}},{key:"unstableGetLocalAliases",value:function(e,t){var r=x.encodeUri("/rooms/$roomId/aliases",{$roomId:e}),n=C.PREFIX_UNSTABLE+"/org.sendingnetwork.msc2432";return this.http.authedRequest(t,"GET",r,null,null,{prefix:n})}},{key:"getRoomIdForAlias",value:function(e,t){var r=x.encodeUri("/directory/room/$alias",{$alias:e});return this.http.authedRequest(t,"GET",r)}},{key:"resolveRoomAlias",value:function(e,t){var r=x.encodeUri("/directory/room/$alias",{$alias:e});return this.http.request(t,"GET",r)}},{key:"getRoomDirectoryVisibility",value:function(e,t){var r=x.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(t,"GET",r)}},{key:"setRoomDirectoryVisibility",value:function(e,t,r){var n=x.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(r,"PUT",n,void 0,{visibility:t})}},{key:"setRoomDirectoryVisibilityAppService",value:function(e,t,r,n){var i=x.encodeUri("/directory/list/appservice/$networkId/$roomId",{$networkId:e,$roomId:t});return this.http.authedRequest(n,"PUT",i,void 0,{visibility:r})}},{key:"searchUserDirectory",value:function(e){var t={search_term:e.term};return void 0!==e.limit&&(t.limit=e.limit),this.http.authedRequest(void 0,"POST","/user_directory/search",void 0,t)}},{key:"uploadContent",value:function(e,t){return this.http.uploadContent(e,t)}},{key:"cancelUpload",value:function(e){return this.http.cancelUpload(e)}},{key:"getCurrentUploads",value:function(){return this.http.getCurrentUploads()}},{key:"getProfileInfo",value:function(e,t,r){x.isFunction(t)&&(r=t,t=void 0);var n=t?x.encodeUri("/profile/$userId/$info",{$userId:e,$info:t}):x.encodeUri("/profile/$userId",{$userId:e});return this.http.authedRequest(r,"GET",n)}},{key:"getThreePids",value:function(e){return this.http.authedRequest(e,"GET","/account/3pid",void 0,void 0)}},{key:"addThreePid",value:function(e,t,r){var n={threePidCreds:e,bind:t};return this.http.authedRequest(r,"POST","/account/3pid",null,n)}},{key:"addThreePidOnly",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/account/3pid/add",e.next=3,this.isVersionSupported("r0.6.0");case 3:if(!e.sent){e.next=7;break}e.t0=C.PREFIX_R0,e.next=8;break;case 7:e.t0=C.PREFIX_UNSTABLE;case 8:return n=e.t0,e.abrupt("return",this.http.authedRequest(void 0,"POST",r,null,t,{prefix:n}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bindThreePid",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/account/3pid/bind",e.next=3,this.isVersionSupported("r0.6.0");case 3:if(!e.sent){e.next=7;break}e.t0=C.PREFIX_R0,e.next=8;break;case 7:e.t0=C.PREFIX_UNSTABLE;case 8:return n=e.t0,e.abrupt("return",this.http.authedRequest(void 0,"POST",r,null,t,{prefix:n}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unbindThreePid",value:function(){var e=s(d().mark((function e(t,r){var n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/account/3pid/unbind",i={medium:t,address:r,id_server:this.getIdentityServerUrl(!0)},e.next=4,this.isVersionSupported("r0.6.0");case 4:if(!e.sent){e.next=8;break}e.t0=C.PREFIX_R0,e.next=9;break;case 8:e.t0=C.PREFIX_UNSTABLE;case 9:return o=e.t0,e.abrupt("return",this.http.authedRequest(void 0,"POST",n,null,i,{prefix:o}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteThreePid",value:function(e,t){return this.http.authedRequest(void 0,"POST","/account/3pid/delete",null,{medium:e,address:t})}},{key:"setPassword",value:function(e,t,r){var n={auth:e,new_password:t};return this.http.authedRequest(r,"POST","/account/password",null,n)}},{key:"getDevices",value:function(){return this.http.authedRequest(void 0,"GET","/devices",void 0,void 0)}},{key:"getDevice",value:function(e){var t=x.encodeUri("/devices/$device_id",{$device_id:e});return this.http.authedRequest(void 0,"GET",t,void 0,void 0)}},{key:"setDeviceDetails",value:function(e,t){var r=x.encodeUri("/devices/$device_id",{$device_id:e});return this.http.authedRequest(void 0,"PUT",r,void 0,t)}},{key:"deleteDevice",value:function(e,t){var r=x.encodeUri("/devices/$device_id",{$device_id:e}),n={};return t&&(n.auth=t),this.http.authedRequest(void 0,"DELETE",r,void 0,n)}},{key:"deleteMultipleDevices",value:function(e,t){var r={devices:e};t&&(r.auth=t);return this.http.authedRequest(void 0,"POST","/delete_devices",void 0,r)}},{key:"getPushers",value:function(e){return this.http.authedRequest(e,"GET","/pushers",void 0,void 0)}},{key:"setPusher",value:function(e,t){return this.http.authedRequest(t,"POST","/pushers/set",null,e)}},{key:"getPushRules",value:function(e){return this.http.authedRequest(e,"GET","/pushrules/").then((function(e){return T.PushProcessor.rewriteDefaultRules(e)}))}},{key:"addPushRule",value:function(e,t,r,n,i){var o=x.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:r});return this.http.authedRequest(i,"PUT",o,void 0,n)}},{key:"deletePushRule",value:function(e,t,r,n){var i=x.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:r});return this.http.authedRequest(n,"DELETE",i)}},{key:"setPushRuleEnabled",value:function(e,t,r,n,i){var o=x.encodeUri("/pushrules/"+e+"/$kind/$ruleId/enabled",{$kind:t,$ruleId:r});return this.http.authedRequest(i,"PUT",o,void 0,{enabled:n})}},{key:"setPushRuleActions",value:function(e,t,r,n,i){var o=x.encodeUri("/pushrules/"+e+"/$kind/$ruleId/actions",{$kind:t,$ruleId:r});return this.http.authedRequest(i,"PUT",o,void 0,{actions:n})}},{key:"search",value:function(e,t){var r={};return e.next_batch&&(r.next_batch=e.next_batch),this.http.authedRequest(t,"POST","/search",r,e.body)}},{key:"uploadKeysRequest",value:function(e,t,r){return this.http.authedRequest(r,"POST","/keys/upload",void 0,e)}},{key:"uploadKeySignatures",value:function(e){return this.http.authedRequest(void 0,"POST","/keys/signatures/upload",void 0,e,{prefix:C.PREFIX_UNSTABLE})}},{key:"downloadKeysForUsers",value:function(e,t){if(x.isFunction(t))throw new Error("downloadKeysForUsers no longer accepts a callback parameter");var r={device_keys:{}};return"token"in(t=t||{})&&(r.token=t.token),e.forEach((function(e){r.device_keys[e]=[]})),this.http.authedRequest(void 0,"POST","/keys/query",void 0,r)}},{key:"claimOneTimeKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signed_curve25519",r=arguments.length>2?arguments[2]:void 0,n={};void 0===t&&(t="signed_curve25519");for(var i=0;i<e.length;++i){var o=e[i][0],a=e[i][1],s=n[o]||{};n[o]=s,s[a]=t}var u={one_time_keys:n};r&&(u.timeout=r);var c="/keys/claim";return this.http.authedRequest(void 0,"POST",c,void 0,u)}},{key:"getKeyChanges",value:function(e,t){var r={from:e,to:t};return this.http.authedRequest(void 0,"GET","/keys/changes",r,void 0)}},{key:"uploadDeviceSigningKeys",value:function(e,t){var r=Object.assign({},t);return e&&Object.assign(r,{auth:e}),this.http.authedRequest(void 0,"POST","/keys/device_signing/upload",void 0,r,{prefix:C.PREFIX_UNSTABLE})}},{key:"registerWithIdentityServer",value:function(e){if(!this.idBaseUrl)throw new Error("No identity server base URL set");var t=this.idBaseUrl+C.PREFIX_IDENTITY_V2+"/account/register";return this.http.requestOtherUrl(void 0,"POST",t,null,e)}},{key:"requestEmailToken",value:function(){var e=s(d().mark((function e(t,r,n,i,o,a){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={client_secret:r,email:t,send_attempt:n,next_link:i},e.next=3,this.http.idServerRequest(o,"POST","/validate/email/requestToken",s,C.PREFIX_IDENTITY_V2,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}()},{key:"requestMsisdnToken",value:function(){var e=s(d().mark((function e(t,r,n,i,o,a,s){var u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={client_secret:n,country:t,phone_number:r,send_attempt:i,next_link:o},e.next=3,this.http.idServerRequest(a,"POST","/validate/msisdn/requestToken",u,C.PREFIX_IDENTITY_V2,s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o,a,s){return e.apply(this,arguments)}}()},{key:"submitMsisdnToken",value:function(){var e=s(d().mark((function e(t,r,n,i){var o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={sid:t,client_secret:r,token:n},e.next=3,this.http.idServerRequest(void 0,"POST","/validate/msisdn/submitToken",o,C.PREFIX_IDENTITY_V2,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"submitMsisdnTokenOtherUrl",value:function(e,t,r,n){var i={sid:t,client_secret:r,token:n};return this.http.requestOtherUrl(void 0,"POST",e,void 0,i)}},{key:"getIdentityHashDetails",value:function(e){return this.http.idServerRequest(void 0,"GET","/hash_details",null,C.PREFIX_IDENTITY_V2,e)}},{key:"identityHashedLookup",value:function(){var t=s(d().mark((function t(r,n){var i,o,a,s,u,c,l,f,h,p,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={},t.next=3,this.getIdentityHashDetails(n);case 3:if((o=t.sent)&&o.lookup_pepper&&o.algorithms){t.next=6;break}throw new Error("Unsupported identity server: bad response");case 6:if(i.pepper=o.lookup_pepper,a={},!o.algorithms.includes("sha256")){t.next=14;break}s=new e.Olm.Utility,i.addresses=r.map((function(e){var t=e[0].toLowerCase(),r=e[1].toLowerCase(),n=s.sha256("".concat(t," ").concat(r," ").concat(i.pepper)).replace(/\+/g,"-").replace(/\//g,"_");return a[n]=e[0],n})),i.algorithm="sha256",t.next=20;break;case 14:if(!o.algorithms.includes("none")){t.next=19;break}i.addresses=r.map((function(e){var t=e[0].toLowerCase(),r=e[1].toLowerCase(),n="".concat(t," ").concat(r);return a[n]=e[0],n})),i.algorithm="none",t.next=20;break;case 19:throw new Error("Unsupported identity server: unknown hash algorithm");case 20:return t.next=22,this.http.idServerRequest(void 0,"POST","/lookup",i,C.PREFIX_IDENTITY_V2,n);case 22:if((u=t.sent)&&u.mappings){t.next=25;break}return t.abrupt("return",[]);case 25:c=[],l=0,f=Object.keys(u.mappings);case 27:if(!(l<f.length)){t.next=37;break}if(h=f[l],p=u.mappings[h],v=a[h]){t.next=33;break}throw new Error("Identity server returned more results than expected");case 33:c.push({address:v,mxid:p});case 34:l++,t.next=27;break;case 37:return t.abrupt("return",c);case 38:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"lookupThreePid",value:function(){var e=s(d().mark((function e(t,r,n,i){var o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.identityHashedLookup([[r,t]],i);case 2:if(o=e.sent,a=o.find((function(e){return e.address===r}))){e.next=7;break}return n&&n(null,{}),e.abrupt("return",{});case 7:return s={address:r,medium:t,mxid:a.mxid},n&&n(null,s),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"bulkLookupThreePids",value:function(){var e=s(d().mark((function e(t,r){var n,i,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.identityHashedLookup(t.map((function(e){return[e[1],e[0]]})),r);case 2:n=e.sent,i=[],a=o(n);try{for(u=function(){var e=s.value,r=t.find((function(t){return t[1]===e.address}));if(!r)throw new Error("Identity sever returned unexpected results");i.push([r[0],e.address,e.mxid])},a.s();!(s=a.n()).done;)u()}catch(c){a.e(c)}finally{a.f()}return e.abrupt("return",{threepids:i});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getIdentityAccount",value:function(e){return this.http.idServerRequest(void 0,"GET","/account",void 0,C.PREFIX_IDENTITY_V2,e)}},{key:"sendToDevice",value:function(e,t,r){var n=x.encodeUri("/sendToDevice/$eventType/$txnId",{$eventType:e,$txnId:r||this.makeTxnId()}),i={messages:t},o=Object.keys(t).reduce((function(e,r){return e[r]=Object.keys(t[r]),e}),{});return I.logger.log("PUT ".concat(n),o),this.http.authedRequest(void 0,"PUT",n,void 0,i)}},{key:"getThirdpartyProtocols",value:function(){return this.http.authedRequest(void 0,"GET","/thirdparty/protocols",void 0,void 0).then((function(e){if(!e||"object"!==typeof e)throw new Error("/thirdparty/protocols did not return an object: ".concat(e));return e}))}},{key:"getThirdpartyLocation",value:function(e,t){var r=x.encodeUri("/thirdparty/location/$protocol",{$protocol:e});return this.http.authedRequest(void 0,"GET",r,t,void 0)}},{key:"getThirdpartyUser",value:function(e,t){var r=x.encodeUri("/thirdparty/user/$protocol",{$protocol:e});return this.http.authedRequest(void 0,"GET",r,t,void 0)}},{key:"getTerms",value:function(e,t){var r=this.termsUrlForService(e,t);return this.http.requestOtherUrl(void 0,"GET",r)}},{key:"agreeToTerms",value:function(e,t,r,n){var i=this.termsUrlForService(e,t),o={Authorization:"Bearer "+r};return this.http.requestOtherUrl(void 0,"POST",i,null,{user_accepts:n},{headers:o})}},{key:"reportEvent",value:function(e,t,r,n){var i=x.encodeUri("/rooms/$roomId/report/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(void 0,"POST",i,null,{score:r,reason:n})}},{key:"getSpaceSummary",value:function(e,t,r,n,i,o){var a=x.encodeUri("/rooms/$roomId/spaces",{$roomId:e});return this.http.authedRequest(void 0,"POST",a,null,{max_rooms_per_space:t,suggested_only:r,auto_join_only:n,limit:i,batch:o},{prefix:"/_api/client/unstable/org.sendingnetwork.msc2946"})}},{key:"getRoomHierarchy",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=x.encodeUri("/rooms/$roomId/hierarchy",{$roomId:e});return this.http.authedRequest(void 0,"GET",a,{suggested_only:i,max_depth:r,from:o,limit:t},void 0,{prefix:"/_api/client/unstable/org.sendingnetwork.msc2946"}).catch((function(r){if("M_UNRECOGNIZED"===r.errcode)return n.getSpaceSummary(e,void 0,i,void 0,t).then((function(e){var t=e.rooms,r=e.events,n=new Map(t.map((function(e){return[e.room_id,oe(oe({},e),{},{children_state:[]})]})));return r.forEach((function(e){var t;null===(t=n.get(e.room_id))||void 0===t||t.children_state.push(e)})),{rooms:Array.from(n.values())}}));throw r}))}},{key:"unstableCreateFileTree",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createRoom({name:t,preset:V.Preset.PrivateChat,power_level_content_override:oe(oe({},Z.DEFAULT_TREE_POWER_LEVELS_TEMPLATE),{},{users:i({},this.getUserId(),100)}),creation_content:i({},H.RoomCreateTypeField,H.RoomType.Space),initial_state:[{type:H.UNSTABLE_MSC3088_PURPOSE.name,state_key:H.UNSTABLE_MSC3089_TREE_SUBTYPE.name,content:i({},H.UNSTABLE_MSC3088_ENABLED.name,!0)},{type:H.EventType.RoomEncryption,state_key:"",content:{algorithm:M.MEGOLM_ALGORITHM}}]});case 2:return r=e.sent,n=r.room_id,e.abrupt("return",new Z.MSC3089TreeSpace(this,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unstableGetFileTreeSpace",value:function(e){var t,r,n=this.getRoom(e);if("join"!==(null===n||void 0===n?void 0:n.getMyMembership()))return null;var i=n.currentState.getStateEvents(H.EventType.RoomCreate,""),o=n.currentState.getStateEvents(H.UNSTABLE_MSC3088_PURPOSE.name,H.UNSTABLE_MSC3089_TREE_SUBTYPE.name);if(!i)throw new Error("Expected single room create event");return null!==o&&void 0!==o&&null!==(t=o.getContent())&&void 0!==t&&t[H.UNSTABLE_MSC3088_ENABLED.name]?(null===(r=i.getContent())||void 0===r?void 0:r[H.RoomCreateTypeField])!==H.RoomType.Space?null:new Z.MSC3089TreeSpace(this,e):null}},{key:"getGroupSummary",value:function(e){var t=x.encodeUri("/groups/$groupId/summary",{$groupId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"getGroupProfile",value:function(e){var t=x.encodeUri("/groups/$groupId/profile",{$groupId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"setGroupProfile",value:function(e,t){var r=x.encodeUri("/groups/$groupId/profile",{$groupId:e});return this.http.authedRequest(void 0,"POST",r,void 0,t)}},{key:"setGroupJoinPolicy",value:function(e,t){var r=x.encodeUri("/groups/$groupId/settings/m.join_policy",{$groupId:e});return this.http.authedRequest(void 0,"PUT",r,void 0,{"m.join_policy":t})}},{key:"getGroupUsers",value:function(e){var t=x.encodeUri("/groups/$groupId/users",{$groupId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"getGroupInvitedUsers",value:function(e){var t=x.encodeUri("/groups/$groupId/invited_users",{$groupId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"getGroupRooms",value:function(e){var t=x.encodeUri("/groups/$groupId/rooms",{$groupId:e});return this.http.authedRequest(void 0,"GET",t)}},{key:"inviteUserToGroup",value:function(e,t){var r=x.encodeUri("/groups/$groupId/admin/users/invite/$userId",{$groupId:e,$userId:t});return this.http.authedRequest(void 0,"PUT",r,void 0,{})}},{key:"removeUserFromGroup",value:function(e,t){var r=x.encodeUri("/groups/$groupId/admin/users/remove/$userId",{$groupId:e,$userId:t});return this.http.authedRequest(void 0,"PUT",r,void 0,{})}},{key:"addUserToGroupSummary",value:function(e,t,r){var n=x.encodeUri(r?"/groups/$groupId/summary/$roleId/users/$userId":"/groups/$groupId/summary/users/$userId",{$groupId:e,$roleId:r,$userId:t});return this.http.authedRequest(void 0,"PUT",n,void 0,{})}},{key:"removeUserFromGroupSummary",value:function(e,t){var r=x.encodeUri("/groups/$groupId/summary/users/$userId",{$groupId:e,$userId:t});return this.http.authedRequest(void 0,"DELETE",r,void 0,{})}},{key:"addRoomToGroupSummary",value:function(e,t,r){var n=x.encodeUri(r?"/groups/$groupId/summary/$categoryId/rooms/$roomId":"/groups/$groupId/summary/rooms/$roomId",{$groupId:e,$categoryId:r,$roomId:t});return this.http.authedRequest(void 0,"PUT",n,void 0,{})}},{key:"removeRoomFromGroupSummary",value:function(e,t){var r=x.encodeUri("/groups/$groupId/summary/rooms/$roomId",{$groupId:e,$roomId:t});return this.http.authedRequest(void 0,"DELETE",r,void 0,{})}},{key:"addRoomToGroup",value:function(e,t,r){void 0===r&&(r=!0);var n=x.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:e,$roomId:t});return this.http.authedRequest(void 0,"PUT",n,void 0,{"m.visibility":{type:r?"public":"private"}})}},{key:"updateGroupRoomVisibility",value:function(e,t,r){var n=x.encodeUri("/groups/$groupId/admin/rooms/$roomId/config/m.visibility",{$groupId:e,$roomId:t});return this.http.authedRequest(void 0,"PUT",n,void 0,{type:r?"public":"private"})}},{key:"removeRoomFromGroup",value:function(e,t){var r=x.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:e,$roomId:t});return this.http.authedRequest(void 0,"DELETE",r,void 0,{})}},{key:"acceptGroupInvite",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=x.encodeUri("/groups/$groupId/self/accept_invite",{$groupId:e});return this.http.authedRequest(void 0,"PUT",r,void 0,t||{})}},{key:"joinGroup",value:function(e){var t=x.encodeUri("/groups/$groupId/self/join",{$groupId:e});return this.http.authedRequest(void 0,"PUT",t,void 0,{})}},{key:"leaveGroup",value:function(e){var t=x.encodeUri("/groups/$groupId/self/leave",{$groupId:e});return this.http.authedRequest(void 0,"PUT",t,void 0,{})}},{key:"getJoinedGroups",value:function(){var e=x.encodeUri("/joined_groups",{});return this.http.authedRequest(void 0,"GET",e)}},{key:"createGroup",value:function(e){var t=x.encodeUri("/create_group",{});return this.http.authedRequest(void 0,"POST",t,void 0,e)}},{key:"getPublicisedGroups",value:function(e){var t=x.encodeUri("/publicised_groups",{});return this.http.authedRequest(void 0,"POST",t,void 0,{user_ids:e})}},{key:"setGroupPublicity",value:function(e,t){var r=x.encodeUri("/groups/$groupId/self/update_publicity",{$groupId:e});return this.http.authedRequest(void 0,"PUT",r,void 0,{publicise:t})}},{key:"supportsExperimentalThreads",value:function(){var e;return(null===(e=this.clientOpts)||void 0===e?void 0:e.experimentalThreadSupport)||!1}},{key:"getRoomSummary",value:function(){var e=s(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.encodeUri("/rooms/$roomid/summary",{$roomid:t}),e.abrupt("return",this.http.authedRequest(void 0,"GET",n,{via:r},null,{qsStringifyOptions:{arrayFormat:"repeat"},prefix:"/_api/client/unstable/im.nheko.summary"}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransferStatus",value:function(e,t){var r=this.getUserId(),n=x.encodeUri("/room/transaction/$userId",{$userId:r});return this.http.authedRequest(void 0,"POST",n,null,{room_id:e,event_id:t})}},{key:"updateTransferStatus",value:function(e,t,r){var n=this.getUserId(),i=r.state===ee.TransferStatus.Success?"/room/transaction_success/$userId":"/room/transaction_state/$userId",o=x.encodeUri(i,{$userId:n});return this.http.authedRequest(void 0,"PUT",o,null,oe({room_id:e,event_id:t},r))}},{key:"createTransferStatus",value:function(e,t,r){var n=r.type,i=(0,v.default)(r,te),o=this.getUserId(),a=x.encodeUri("/room/transaction/$userId",{$userId:o});return this.http.authedRequest(void 0,"PUT",a,null,oe({room_id:e,event_id:t,transaction_type:n},i))}},{key:"getWalletByUserId",value:function(e){return this.http.authedRequest(void 0,"POST","/account/3pid/did",null,{users:e})}},{key:"findDMRoomByUserId",value:function(){var e=s(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/find_dm_room/$userId",r=x.encodeUri("/find_dm_room/$userId",{$userId:t}),e.abrupt("return",this.http.authedRequest(void 0,"GET",r,null,null));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQRCode",value:function(e){return this.http.request(void 0,"GET","/login/showQRCode",{deviceId:e})}},{key:"checkQRCode",value:function(e){return e?this.http.request(void 0,"GET","/login/checkQRCode/".concat(e)):new Promise((function(e){e(null)}))}},{key:"getFavouriteList",value:function(){var e=this.getUserId();return this.http.authedRequest(void 0,"GET","/contacts_list/".concat(e),null,null)}},{key:"addFavourite",value:function(e,t){var r=this.getUserId(),n={contact_id:e,is_room:t?0:1};return this.http.authedRequest(void 0,"PUT","/contact/".concat(r),null,n)}},{key:"deleteFavourite",value:function(e,t){var r=this.getUserId(),n={contact_id:e,is_room:t?0:1};return this.http.authedRequest(void 0,"DELETE","/contact/".concat(r),null,n)}},{key:"getFavourite",value:function(e,t){var r=this.getUserId(),n={contact_id:e,is_room:t?1:0};return this.http.authedRequest(void 0,"POST","/contact/".concat(r),null,n)}},{key:"getAuthAppInfo",value:function(e){return this.http.authedRequest(void 0,"GET","/oauth/app/info?client_id=".concat(e.client_id,"&redirect_uri=").concat(encodeURIComponent(e.redirect_uri)))}},{key:"authorize",value:function(e){return this.http.authedRequest(void 0,"GET","/oauth/authorize?response_type=code&client_id=".concat(e.client_id,"&redirect_uri=").concat(encodeURIComponent(e.redirect_uri)))}},{key:"_getAssets",value:function(e,t,r){return this.http.requestOtherUrl(void 0,"GET","https://api.opensea.io/api/v1/assets",{format:"json",owner:e,cursor:t,limit:r})}},{key:"getAssets",value:function(){var e=s(d().mark((function e(t){var r,i,o,a,u,c,l,f,h,p,v,y=this,g=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]&&g[1],a=50,u="",r){e.next=7;break}return e.next=6,this.store.getAssets();case 6:c=e.sent;case 7:return l=[],f=function(){var e=s(d().mark((function e(){var r,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y._getAssets(t,u,a);case 2:if(r=e.sent,i=r.next,o=r.assets,u=i,l.push.apply(l,n(o.map((function(e){return oe(oe({id:e.id,image_url:e.image_url},e.collection?{collection:{name:e.collection.name,image_url:e.collection.image_url}}:{}),e.creator?{creator:{address:e.creator.address}}:{})})))),!u){e.next=10;break}return e.next=10,f();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=11,this._getAssets(t,u,a);case 11:if(h=e.sent,p=h.next,v=h.assets,!c||(null===(i=v[0])||void 0===i?void 0:i.id)!==(null===(o=c.data[0])||void 0===o?void 0:o.id)||c.version!==this.assetsVersion){e.next=16;break}return e.abrupt("return",c.data);case 16:return u=p,e.next=19,f();case 19:return e.next=21,this.store.storeAssets({version:this.assetsVersion,data:l});case 21:return e.abrupt("return",l);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadByUrl",value:function(e){return this.http.authedRequest(void 0,"POST","/upload_by_url",{url:e},null,{prefix:C.PREFIX_MEDIA_R0})}},{key:"getPartners",value:function(){return this.http.authedRequest(void 0,"GET","/preview_url_app",null,null,{prefix:C.PREFIX_R0}).then((function(e){return e.map((function(e){return{name:e.app_name,url:e.app_url,avatar:e.app_logo}}))}))}},{key:"setAccountGuide",value:function(e){return this.http.authedRequest(void 0,"POST","/account/guide",null,{step:e})}},{key:"setNickName",value:function(e,t,r,n){var i=x.encodeUri("/rooms/$roomId/state/m.room.member/$userId",{$roomId:e,$userId:t});return this.http.authedRequest(void 0,"PUT",i,void 0,{membership:r,nickname:n})}},{key:"smartTradingTextParse",value:function(e,t){return this.http.authedRequest(void 0,"GET","/smart_trading_text_parse?text=".concat(e,"&from_address=").concat(t),null,null,{prefix:"/_api/media/v3"})}},{key:"smartTradingLaunch",value:function(e){return this.http.authedRequest(void 0,"GET","/smart_trading_launch",null,oe({},e),{prefix:"/_api/media/v3"})}},{key:"querySocialGraph",value:function(){return this.http.authedRequest(void 0,"GET","/social_graph/query",null,null,{prefix:"/_api/client/unstable"})}},{key:"backupSocialGraph",value:function(e){return this.http.authedRequest(void 0,"POST","/social_graph/backup_transaction",null,oe({},e),{prefix:"/_api/client/unstable"})}},{key:"restoreSocialGraph",value:function(e){return this.http.authedRequest(void 0,"POST","/social_graph/restore_account",null,oe({},e),{prefix:"/_api/client/unstable"})}},{key:"getDIDList",value:function(e){return this.http.authedRequest(void 0,"GET","/address/".concat(e),null,null,{prefix:"/_api/client/unstable"})}},{key:"createDID",value:function(e){return this.http.authedRequest(void 0,"POST","/did/create",null,{address:e},{prefix:"/_api/client/unstable"})}},{key:"saveDID",value:function(e,t){return this.http.authedRequest(void 0,"POST","/did/".concat(e),null,oe({},t),{prefix:"/_api/client/unstable"})}},{key:"preDIDLogin",value:function(e){return this.http.authedRequest(void 0,"POST","/did/".concat(e,"/pre_login"),null,null,{prefix:"/_api/client/unstable"})}},{key:"DIDLogin",value:function(e){var t=this;return this.http.authedRequest((function(e,r){r&&r.access_token&&r.user_id&&(t.http.opts.accessToken=r.access_token,t.credentials={userId:r.user_id})}),"POST","/did/login",null,oe({},e),{prefix:"/_api/client/unstable"})}},{key:"queryDIDDetail",value:function(e){return this.http.authedRequest(void 0,"GET","/did/".concat(e,"/detail"),null,null,{prefix:"/_api/client/unstable"})}},{key:"updateDID",value:function(e,t){return this.http.authedRequest(void 0,"POST","/did/".concat(e,"/update"),null,oe({},t),{prefix:"/_api/client/unstable"})}},{key:"resolveDID",value:function(e){return this.http.authedRequest(void 0,"GET","/did/".concat(e),null,null,{prefix:"/_api/client/unstable"})}},{key:"createNftRoomToken",value:function(e){return this.http.authedRequest(void 0,"POST","/".concat(e,"/roomToken"),null,null,{prefix:"/_api/client/v3/rooms"})}},{key:"delNftRoomToken",value:function(e){return this.http.authedRequest(void 0,"DELETE","/".concat(e,"/roomToken"),null,null,{prefix:"/_api/client/v3/rooms"})}},{key:"createNftMemberToken",value:function(e){return this.http.authedRequest(void 0,"POST","/".concat(e,"/memberToken"),null,null,{prefix:"/_api/client/v3/rooms"})}},{key:"delNftMemberToken",value:function(e){return this.http.authedRequest(void 0,"DELETE","/".concat(e,"/memberToken"),null,null,{prefix:"/_api/client/v3/rooms"})}},{key:"queryMessageType",value:function(){return this.http.authedRequest(void 0,"GET","/query_message_type",null,null,{prefix:"/_api/media/v3"})}},{key:"getUrlPreviewNew",value:function(e,t,r){t=6e4*Math.floor(t/6e4);var n=new URL(e);n.hash="";var i=t+"_"+(e=n.toString()),o=this.urlPreviewCache[i];if(o)return r&&o.then(r).catch(r),o;var a=this.http.authedRequest(r,"GET","/preview_url_message_type",{url:e,ts:t},void 0,{prefix:"/_api/media/v3"});return this.urlPreviewCache[i]=a,a}}]),p}(g.EventEmitter);t.SendingNetworkClient=le,(0,y.default)(le,"RESTORE_BACKUP_ERROR_BAD_KEY","RESTORE_BACKUP_ERROR_BAD_KEY")}).call(this,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHttpUriForMxc=function(e,t,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if("string"!==typeof t||!t)return"";if(0!==t.indexOf("mxc://"))return a?t:"";var s=t.slice(6),u="/_api/media/r0/download/",c={};r&&(c.width=Math.round(r));i&&(c.height=Math.round(i));o&&(c.method=o);Object.keys(c).length>0&&(u="/_api/media/r0/thumbnail/");var l=s.indexOf("#"),f="";l>=0&&(f=s.substr(l),s=s.substr(0,l));var h=0===Object.keys(c).length?"":"?"+n.encodeParams(c);return e+u+s+h+f};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(19));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}},function(e,t,r){"use strict";var n=r(12),i=r(1),o=r(2),a=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ReEmitter=void 0;var s=a(r(4)),u=function(){function e(t){i(this,e),(0,s.default)(this,"target",void 0),this.target=t}return o(e,[{key:"reEmit",value:function(e,t){var r,i=this,o=n(t);try{var a=function(){var t=r.value;e.on(t,(function(){var r;if("error"!==t||0!==i.target.listenerCount("error")){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];(r=i.target).emit.apply(r,[t].concat(o,[e]))}}))};for(o.s();!(r=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}}]),e}();t.ReEmitter=u},function(e,t,r){"use strict";var n=r(2),i=r(1),o=r(14),a=r(15),s=r(37);function u(e,t){var r="Store is invalid because ".concat(e,", ")+"please stop the client, delete all data and start the client again",n=Reflect.construct(Error,[r]);return Reflect.setPrototypeOf(n,Reflect.getPrototypeOf(this)),n.reason=e,n.value=t,n}function c(e){var t="Crypto store is invalid because ".concat(e,", ")+"please stop the client, delete all data and start the client again",r=Reflect.construct(Error,[t]);return Reflect.setPrototypeOf(r,Reflect.getPrototypeOf(this)),r.reason=e,r.name="InvalidCryptoStoreError",r}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidCryptoStoreError=c,t.InvalidStoreError=u,t.KeySignatureUploadError=void 0,u.TOGGLED_LAZY_LOADING="TOGGLED_LAZY_LOADING",u.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Reflect.setPrototypeOf(u,Error),c.TOO_NEW="TOO_NEW",c.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Reflect.setPrototypeOf(c,Error);var l=function(e){o(r,e);var t=a(r);function r(e,n){var o;return i(this,r),(o=t.call(this,e)).value=n,o}return n(r)}(s(Error));t.KeySignatureUploadError=l},function(e,t,r){"use strict";for(var n=/[\\\"\x00-\x1F]/g,i={},o=0;o<32;++o)i[String.fromCharCode(o)]="\\U"+("0000"+o.toString(16)).slice(-4).toUpperCase();function a(e){return n.lastIndex=0,e.replace(n,(function(e){return i[e]}))}function s(e){switch(typeof e){case"string":return'"'+a(e)+'"';case"number":return isFinite(e)?e:"null";case"boolean":return e;case"object":return null===e?"null":Array.isArray(e)?function(e){for(var t="[",r="",n=0;n<e.length;++n)r+=t,t=",",r+=s(e[n]);return","!=t?"[]":r+"]"}(e):function(e){var t="{",r="",n=Object.keys(e);n.sort();for(var i=0;i<n.length;++i){var o=n[i];r+=t+'"'+a(o)+'":',t=",",r+=s(e[o])}return","!=t?"{}":r+"}"}(e);default:throw new Error("Cannot stringify: "+typeof e)}}i["\b"]="\\b",i["\t"]="\\t",i["\n"]="\\n",i["\f"]="\\f",i["\r"]="\\r",i['"']='\\"',i["\\"]="\\\\",e.exports={stringify:s}},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceInfo=void 0;var a,s=o(r(4));!function(e){e[e.Blocked=-1]="Blocked",e[e.Unverified=0]="Unverified",e[e.Verified=1]="Verified"}(a||(a={}));var u=function(){function e(t){n(this,e),this.deviceId=t,(0,s.default)(this,"algorithms",void 0),(0,s.default)(this,"keys",{}),(0,s.default)(this,"verified",a.Unverified),(0,s.default)(this,"known",!1),(0,s.default)(this,"unsigned",{}),(0,s.default)(this,"signatures",{})}return i(e,[{key:"toStorage",value:function(){return{algorithms:this.algorithms,keys:this.keys,verified:this.verified,known:this.known,unsigned:this.unsigned,signatures:this.signatures}}},{key:"getFingerprint",value:function(){return this.keys["ed25519:"+this.deviceId]}},{key:"getIdentityKey",value:function(){return this.keys["curve25519:"+this.deviceId]}},{key:"getDisplayName",value:function(){return this.unsigned.device_display_name||null}},{key:"isBlocked",value:function(){return this.verified==a.Blocked}},{key:"isVerified",value:function(){return this.verified==a.Verified}},{key:"isUnverified",value:function(){return this.verified==a.Unverified}},{key:"isKnown",value:function(){return!0===this.known}}],[{key:"fromStorage",value:function(t,r){var n=new e(r);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}}]),e}();t.DeviceInfo=u,(0,s.default)(u,"DeviceVerification",{VERIFIED:a.Verified,UNVERIFIED:a.Unverified,BLOCKED:a.Blocked})},function(e,t,r){"use strict";(function(e,n){var i=r(12),o=r(20),a=r(23),s=r(9),u=r(1),c=r(2),l=r(16),f=r(14),h=r(15);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var p=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.UserTrustLevel=t.DeviceTrustLevel=t.CrossSigningLevel=t.CrossSigningInfo=void 0,t.createCryptoStoreCacheCallbacks=function(e,t){return{getCrossSigningKeyCache:function(){var r=s(d().mark((function r(i,o){var a,s,u;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(t){return e.doTxn("readonly",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(function(r){e.getSecretStorePrivateKey(r,t,i)}))}));case 2:if(!(a=r.sent)||!a.ciphertext){r.next=11;break}return s=n.from(t.pickleKey),r.next=7,(0,w.decryptAES)(a,s,i);case 7:return u=r.sent,r.abrupt("return",(0,g.decodeBase64)(u));case 11:return r.abrupt("return",a);case 12:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),storeCrossSigningKeyCache:function(){var r=s(d().mark((function r(i,o){var a,s;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o instanceof Uint8Array){r.next=2;break}throw new Error("storeCrossSigningKeyCache expects Uint8Array, got ".concat(o));case 2:return a=n.from(t.pickleKey),r.next=5,(0,w.encryptAES)((0,g.encodeBase64)(o),a,i);case 5:return s=r.sent,r.abrupt("return",e.doTxn("readwrite",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(function(t){e.storeSecretStorePrivateKey(t,i,s)})));case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}},t.requestKeysDuringVerification=function(e,t,r){if(e.getUserId()!==t)return;return m.logger.log("Cross-signing: Self-verification done; requesting keys"),new Promise((function(t,n){var i=e,o=i.crypto.crossSigningInfo,a=new E(o.userId,{getCrossSigningKey:function(){var e=s(d().mark((function e(t){var n,o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.logger.debug("Cross-signing: requesting secret",t,r),n=i.requestSecret("m.cross_signing.".concat(t),[r]),o=n.promise,e.next=4,o;case 4:return a=e.sent,s=(0,g.decodeBase64)(a),e.abrupt("return",Uint8Array.from(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.getCacheCallbacks());a.keys=o.keys;var u=new Promise((function(e){setTimeout(e,6e4,new Error("Timeout"))})),c=s(d().mark((function e(){var t,n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.crypto.getSessionBackupPrivateKey();case 2:if(e.sent){e.next=19;break}return m.logger.info("No cached backup key found. Requesting..."),t=i.requestSecret("m.megolm_backup.v1",[r]),e.next=8,t.promise;case 8:return n=e.sent,m.logger.info("Got key backup key, decoding..."),o=(0,g.decodeBase64)(n),m.logger.info("Decoded backup key, storing..."),e.next=14,i.crypto.storeSessionBackupPrivateKey(Uint8Array.from(o));case 14:return m.logger.info("Backup key stored. Starting backup restore..."),e.next=17,i.getKeyBackupVersion();case 17:a=e.sent,i.restoreKeyBackupWithCache(void 0,void 0,a).then((function(){m.logger.info("Backup restored.")}));case 19:case"end":return e.stop()}}),e)})))();return Promise.race([Promise.all([a.getCrossSigningKey("master"),a.getCrossSigningKey("self_signing"),a.getCrossSigningKey("user_signing"),c]),u]).then(t,n)})).catch((function(e){m.logger.warn("Cross-signing: failure while requesting keys:",e)}))};var v=p(r(4)),y=r(17),g=r(28),m=r(8),b=r(33),w=r(51);function k(e){return Object.values(e.keys)[0]}var S,E=function(t){f(n,t);var r=h(n);function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this,n),(t=r.call(this)).userId=e,t.callbacks=i,t.cacheCallbacks=o,(0,v.default)(l(t),"keys",{}),(0,v.default)(l(t),"firstUse",!0),(0,v.default)(l(t),"crossSigningVerifiedBefore",!1),t}return c(n,[{key:"toStorage",value:function(){return{keys:this.keys,firstUse:this.firstUse,crossSigningVerifiedBefore:this.crossSigningVerifiedBefore}}},{key:"getCrossSigningKey",value:function(){var t=s(d().mark((function t(r,n){var i,o,a,s,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(t){if(t){var r=new e.Olm.PkSigning,i=r.init_with_seed(t);if(i===n)return[i,r];r.free()}},i=["master","self_signing","user_signing"].indexOf(r)>=0,this.callbacks.getCrossSigningKey){t.next=4;break}throw new Error("No getCrossSigningKey callback supplied");case 4:if(void 0===n&&(n=this.getId(r)),!this.cacheCallbacks.getCrossSigningKeyCache||!i){t.next=9;break}return t.next=8,this.cacheCallbacks.getCrossSigningKeyCache(r,n);case 8:a=t.sent;case 9:if(!(s=o(a))){t.next=12;break}return t.abrupt("return",s);case 12:return t.next=14,this.callbacks.getCrossSigningKey(r,n);case 14:if(a=t.sent,!(u=o(a))){t.next=21;break}if(!this.cacheCallbacks.storeCrossSigningKeyCache||!i){t.next=20;break}return t.next=20,this.cacheCallbacks.storeCrossSigningKeyCache(r,a);case 20:return t.abrupt("return",u);case 21:if(a){t.next=23;break}throw new Error("getCrossSigningKey callback for "+r+" returned falsey");case 23:throw new Error("Key type "+r+" from getCrossSigningKey callback did not match");case 24:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"isStoredInSecretStorage",value:function(){var e=s(d().mark((function e(t){var r,n,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){for(var t=0,n=Object.keys(r);t<n.length;t++){var i=n[t];e[i]||delete r[i]}},e.next=3,t.isStored("m.cross_signing.master",!1);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:r=e.t0,i=0,o=["self_signing","user_signing"];case 8:if(!(i<o.length)){e.next=21;break}return a=o[i],e.t1=n,e.next=13,t.isStored("m.cross_signing.".concat(a),!1);case 13:if(e.t2=e.sent,e.t2){e.next=16;break}e.t2={};case 16:e.t3=e.t2,(0,e.t1)(e.t3);case 18:i++,e.next=8;break;case 21:return e.abrupt("return",Object.keys(r).length?r:null);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isStoredInKeyCache",value:function(){var e=s(d().mark((function e(t){var r,n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.cacheCallbacks){e.next=3;break}return e.abrupt("return",!1);case 3:n=0,i=t?[t]:["master","self_signing","user_signing"];case 5:if(!(n<i.length)){e.next=14;break}return o=i[n],e.next=9,r.getCrossSigningKeyCache(o);case 9:if(e.sent){e.next=11;break}return e.abrupt("return",!1);case 11:n++,e.next=5;break;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCrossSigningKeysFromCache",value:function(){var e=s(d().mark((function e(){var t,r,n,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Map,r=this.cacheCallbacks){e.next=4;break}return e.abrupt("return",t);case 4:n=0,i=["master","self_signing","user_signing"];case 5:if(!(n<i.length)){e.next=16;break}return o=i[n],e.next=9,r.getCrossSigningKeyCache(o);case 9:if(a=e.sent){e.next=12;break}return e.abrupt("continue",13);case 12:t.set(o,a);case 13:n++,e.next=5;break;case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"master";if(!this.keys[e])return null;var t=this.keys[e];return k(t)}},{key:"resetKeys",value:function(){var t=s(d().mark((function t(r){var n,i,s,u,c,l,f,h,p,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.callbacks.saveCrossSigningKeys){t.next=2;break}throw new Error("No saveCrossSigningKeys callback supplied");case 2:if(!(void 0===r||r&S.MASTER)&&this.keys.master){t.next=6;break}r=S.MASTER|S.USER_SIGNING|S.SELF_SIGNING,t.next=8;break;case 6:if(0!==r){t.next=8;break}return t.abrupt("return");case 8:if(n={},i={},t.prev=10,!(r&S.MASTER)){t.next=18;break}s=new e.Olm.PkSigning,n.master=s.generate_seed(),u=s.init_with_seed(n.master),i.master={user_id:this.userId,usage:["master"],keys:a({},"ed25519:"+u,u)},t.next=24;break;case 18:return t.next=20,this.getCrossSigningKey("master");case 20:c=t.sent,l=o(c,2),u=l[0],s=l[1];case 24:if(r&S.SELF_SIGNING){f=new e.Olm.PkSigning;try{n.self_signing=f.generate_seed(),h=f.init_with_seed(n.self_signing),i.self_signing={user_id:this.userId,usage:["self_signing"],keys:a({},"ed25519:"+h,h)},(0,g.pkSign)(i.self_signing,s,this.userId,u)}finally{f.free()}}if(r&S.USER_SIGNING){p=new e.Olm.PkSigning;try{n.user_signing=p.generate_seed(),v=p.init_with_seed(n.user_signing),i.user_signing={user_id:this.userId,usage:["user_signing"],keys:a({},"ed25519:"+v,v)},(0,g.pkSign)(i.user_signing,s,this.userId,u)}finally{p.free()}}Object.assign(this.keys,i),this.callbacks.saveCrossSigningKeys(n);case 28:return t.prev=28,s&&s.free(),t.finish(28);case 31:case"end":return t.stop()}}),t,this,[[10,,28,31]])})));return function(e){return t.apply(this,arguments)}}()},{key:"clearKeys",value:function(){this.keys={}}},{key:"setKeys",value:function(e){var t={};if(e.master){if(e.master.user_id!==this.userId){var r="Mismatched user ID "+e.master.user_id+" in master key from "+this.userId;throw m.logger.error(r),new Error(r)}this.keys.master?k(e.master)!==this.getId()&&(this.firstUse=!1):this.firstUse=!0,t.master=e.master}else{if(!this.keys.master)throw new Error("Tried to set cross-signing keys without a master key");t.master=this.keys.master}var n=k(t.master);if(e.user_signing){if(e.user_signing.user_id!==this.userId){var i="Mismatched user ID "+e.master.user_id+" in user_signing key from "+this.userId;throw m.logger.error(i),new Error(i)}try{(0,g.pkVerify)(e.user_signing,n,this.userId)}catch(a){throw m.logger.error("invalid signature on user-signing key"),a}}if(e.self_signing){if(e.self_signing.user_id!==this.userId){var o="Mismatched user ID "+e.master.user_id+" in self_signing key from "+this.userId;throw m.logger.error(o),new Error(o)}try{(0,g.pkVerify)(e.self_signing,n,this.userId)}catch(a){throw m.logger.error("invalid signature on self-signing key"),a}}e.master&&(this.keys.master=e.master,this.keys.self_signing=null,this.keys.user_signing=null),e.self_signing&&(this.keys.self_signing=e.self_signing),e.user_signing&&(this.keys.user_signing=e.user_signing)}},{key:"updateCrossSigningVerifiedBefore",value:function(e){!this.crossSigningVerifiedBefore&&e&&(this.crossSigningVerifiedBefore=!0)}},{key:"signObject",value:function(){var e=s(d().mark((function e(t,r){var n,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keys[r]){e.next=2;break}throw new Error("Attempted to sign with "+r+" key but no such key present");case 2:return e.next=4,this.getCrossSigningKey(r);case 4:return n=e.sent,i=o(n,2),a=i[0],s=i[1],e.prev=8,(0,g.pkSign)(t,s,this.userId,a),e.abrupt("return",t);case 11:return e.prev=11,s.free(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[8,,11,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signUser",value:function(){var e=s(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keys.user_signing){e.next=3;break}return m.logger.info("No user signing key: not signing user"),e.abrupt("return");case 3:return e.abrupt("return",this.signObject(t.keys.master,"user_signing"));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signDevice",value:function(){var e=s(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.userId){e.next=2;break}throw new Error("Trying to sign ".concat(t,"'s device; can only sign our own device"));case 2:if(this.keys.self_signing){e.next=5;break}return m.logger.info("No self signing key: not signing device"),e.abrupt("return");case 5:return e.abrupt("return",this.signObject({algorithms:r.algorithms,keys:r.keys,device_id:r.deviceId,user_id:t},"self_signing"));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"checkUserTrust",value:function(e){if(this.userId===e.userId&&this.getId()&&this.getId()===e.getId()&&this.getId("self_signing")&&this.getId("self_signing")===e.getId("self_signing"))return new x(!0,!0,this.firstUse);if(!this.keys.user_signing)return new x(!1,!1,e.firstUse);var t,r=e.keys.master,n=this.getId("user_signing");try{(0,g.pkVerify)(r,n,this.userId),t=!0}catch(i){t=!1}return new x(t,e.crossSigningVerifiedBefore,e.firstUse)}},{key:"checkDeviceTrust",value:function(e,t,r,n){var i=this.checkUserTrust(e),o=e.keys.self_signing;if(!o)return new _(!1,!1,r,n);var a=function(e,t){return{algorithms:e.algorithms,keys:e.keys,device_id:e.deviceId,user_id:t,signatures:e.signatures}}(t,e.userId);try{return(0,g.pkVerify)(o,e.getId(),e.userId),(0,g.pkVerify)(a,k(o),e.userId),_.fromUserTrustLevel(i,r,n)}catch(s){return new _(!1,!1,r,n)}}},{key:"getCacheCallbacks",value:function(){return this.cacheCallbacks}}],[{key:"fromStorage",value:function(e,t){var r=new n(t);for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}},{key:"storeInSecretStorage",value:function(){var e=s(d().mark((function e(t,r){var n,a,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return s=o(a.value,2),u=s[0],c=s[1],l=(0,g.encodeBase64)(c),e.next=8,r.store("m.cross_signing.".concat(u),l);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getFromSecretStorage",value:function(){var e=s(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get("m.cross_signing.".concat(t));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",(0,g.decodeBase64)(n));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),n}(y.EventEmitter);t.CrossSigningInfo=E,t.CrossSigningLevel=S,function(e){e[e.MASTER=4]="MASTER",e[e.USER_SIGNING=2]="USER_SIGNING",e[e.SELF_SIGNING=1]="SELF_SIGNING"}(S||(t.CrossSigningLevel=S={}));var x=function(){function e(t,r,n){u(this,e),this.crossSigningVerified=t,this.crossSigningVerifiedBefore=r,this.tofu=n}return c(e,[{key:"isVerified",value:function(){return this.isCrossSigningVerified()}},{key:"isCrossSigningVerified",value:function(){return this.crossSigningVerified}},{key:"wasCrossSigningVerified",value:function(){return this.crossSigningVerifiedBefore}},{key:"isTofu",value:function(){return this.tofu}}]),e}();t.UserTrustLevel=x;var _=function(){function e(t,r,n,i){u(this,e),this.crossSigningVerified=t,this.tofu=r,this.localVerified=n,this.trustCrossSignedDevices=i}return c(e,[{key:"isVerified",value:function(){return Boolean(this.isLocallyVerified()||this.trustCrossSignedDevices&&this.isCrossSigningVerified())}},{key:"isCrossSigningVerified",value:function(){return this.crossSigningVerified}},{key:"isLocallyVerified",value:function(){return this.localVerified}},{key:"isTofu",value:function(){return this.tofu}}],[{key:"fromUserTrustLevel",value:function(t,r,n){return new e(t.isCrossSigningVerified(),t.isTofu(),r,n)}}]),e}();t.DeviceTrustLevel=_}).call(this,r(11),r(18).Buffer)},function(e,t,r){"use strict";(function(t){"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,r(21))},function(e,t,r){var n=r(10).Buffer;function i(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),i=0;i<t;i++)r[i]=e.readUInt32BE(4*i);return r}function o(e){for(;0<e.length;e++)e[0]=0}function a(e,t,r,n,i){for(var o,a,s,u,c=r[0],l=r[1],f=r[2],h=r[3],d=e[0]^t[0],p=e[1]^t[1],v=e[2]^t[2],y=e[3]^t[3],g=4,m=1;m<i;m++)o=c[d>>>24]^l[p>>>16&255]^f[v>>>8&255]^h[255&y]^t[g++],a=c[p>>>24]^l[v>>>16&255]^f[y>>>8&255]^h[255&d]^t[g++],s=c[v>>>24]^l[y>>>16&255]^f[d>>>8&255]^h[255&p]^t[g++],u=c[y>>>24]^l[d>>>16&255]^f[p>>>8&255]^h[255&v]^t[g++],d=o,p=a,v=s,y=u;return o=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[v>>>8&255]<<8|n[255&y])^t[g++],a=(n[p>>>24]<<24|n[v>>>16&255]<<16|n[y>>>8&255]<<8|n[255&d])^t[g++],s=(n[v>>>24]<<24|n[y>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^t[g++],u=(n[y>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&v])^t[g++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,r[a]=c,n[c]=a;var l=e[a],f=e[l],h=e[f],d=257*e[c]^16843008*c;i[0][a]=d<<24|d>>>8,i[1][a]=d<<16|d>>>16,i[2][a]=d<<8|d>>>24,i[3][a]=d,d=16843009*h^65537*f^257*l^16843008*a,o[0][c]=d<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===a?a=s=1:(a=l^e[e[e[h^l]]],s^=e[e[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function c(e){this._key=i(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),i=[],o=0;o<t;o++)i[o]=e[o];for(o=t;o<n;o++){var a=i[o-1];o%t===0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/t|0]<<24):t>6&&o%t===4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-t]^a}for(var c=[],l=0;l<n;l++){var f=n-l,h=i[f-(l%4?0:4)];c[l]=l<4||f<=4?h:u.INV_SUB_MIX[0][u.SBOX[h>>>24]]^u.INV_SUB_MIX[1][u.SBOX[h>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[h>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&h]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return a(e=i(e),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},c.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var r=a(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},e.exports.AES=c},function(e,t,r){var n=r(10).Buffer,i=r(91);e.exports=function(e,t,r,o){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=n.alloc(a),u=n.alloc(o||0),c=n.alloc(0);a>0||o>0;){var l=new i;l.update(c),l.update(e),t&&l.update(t),c=l.digest();var f=0;if(a>0){var h=s.length-a;f=Math.min(a,c.length),c.copy(s,h,0,f),a-=f}if(f<c.length&&o>0){var d=u.length-o,p=Math.min(o,c.length-f);c.copy(u,d,f,f+p),o-=p}}return c.fill(0),{key:s,iv:u}}},function(e,t,r){"use strict";var n=r(22),i=r(27),o=i.getNAF,a=i.getJSF,s=i.assert;function u(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(e,t){s(e.precomputed);var r=e._getDoubles(),n=o(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var a,u,c=[];for(a=0;a<n.length;a+=r.step){u=0;for(var l=a+r.step-1;l>=a;l--)u=(u<<1)+n[l];c.push(u)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=i;d>0;d--){for(a=0;a<c.length;a++)(u=c[a])===d?h=h.mixedAdd(r.points[a]):u===-d&&(h=h.mixedAdd(r.points[a].neg()));f=f.add(h)}return f.toP()},u.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=o(t,r,this._bitLength),u=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var l=0;c>=0&&0===a[c];c--)l++;if(c>=0&&l++,u=u.dblp(l),c<0)break;var f=a[c];s(0!==f),u="affine"===e.type?f>0?u.mixedAdd(i[f-1>>1]):u.mixedAdd(i[-f-1>>1].neg()):f>0?u.add(i[f-1>>1]):u.add(i[-f-1>>1].neg())}return"affine"===e.type?u.toP():u},u.prototype._wnafMulAdd=function(e,t,r,n,i){var s,u,c,l=this._wnafT1,f=this._wnafT2,h=this._wnafT3,d=0;for(s=0;s<n;s++){var p=(c=t[s])._getNAFPoints(e);l[s]=p.wnd,f[s]=p.points}for(s=n-1;s>=1;s-=2){var v=s-1,y=s;if(1===l[v]&&1===l[y]){var g=[t[v],null,null,t[y]];0===t[v].y.cmp(t[y].y)?(g[1]=t[v].add(t[y]),g[2]=t[v].toJ().mixedAdd(t[y].neg())):0===t[v].y.cmp(t[y].y.redNeg())?(g[1]=t[v].toJ().mixedAdd(t[y]),g[2]=t[v].add(t[y].neg())):(g[1]=t[v].toJ().mixedAdd(t[y]),g[2]=t[v].toJ().mixedAdd(t[y].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],b=a(r[v],r[y]);for(d=Math.max(b[0].length,d),h[v]=new Array(d),h[y]=new Array(d),u=0;u<d;u++){var w=0|b[0][u],k=0|b[1][u];h[v][u]=m[3*(w+1)+(k+1)],h[y][u]=0,f[v]=g}}else h[v]=o(r[v],l[v],this._bitLength),h[y]=o(r[y],l[y],this._bitLength),d=Math.max(h[v].length,d),d=Math.max(h[y].length,d)}var S=this.jpoint(null,null,null),E=this._wnafT4;for(s=d;s>=0;s--){for(var x=0;s>=0;){var _=!0;for(u=0;u<n;u++)E[u]=0|h[u][s],0!==E[u]&&(_=!1);if(!_)break;x++,s--}if(s>=0&&x++,S=S.dblp(x),s<0)break;for(u=0;u<n;u++){var T=E[u];0!==T&&(T>0?c=f[u][T-1>>1]:T<0&&(c=f[u][-T-1>>1].neg()),S="affine"===c.type?S.mixedAdd(c):S.add(c))}}for(s=0;s<n;s++)f[s]=null;return i?S:S.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?s(e[e.length-1]%2===0):7===e[0]&&s(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){var n=r(375),i=r(382),o=r(383),a=r(100),s=r(159),u=r(10).Buffer;function c(e){var t;"object"!==typeof e||u.isBuffer(e)||(t=e.passphrase,e=e.key),"string"===typeof e&&(e=u.from(e));var r,c,l=o(e,t),f=l.tag,h=l.data;switch(f){case"CERTIFICATE":c=n.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=n.PublicKey.decode(h,"der")),r=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=n.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,l=e.subjectPrivateKey,f=parseInt(o.split("-")[1],10)/8,h=s.pbkdf2Sync(t,r,n,f,"sha1"),d=a.createDecipheriv(o,h,c),p=[];return p.push(d.update(l)),p.push(d.final()),u.concat(p)}(h=n.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(r=(c=n.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:n.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=n.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=n.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+f)}}e.exports=c,c.signature=n.signature},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(58);function i(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n={request:!0,getRequest:!0,wrapRequest:!0,setCryptoStoreFactory:!0,createClient:!0,ContentHelpers:!0,createNewSendingNetworkCall:!0};t.ContentHelpers=void 0,t.createClient=function(t){"string"===typeof t&&(t={baseUrl:t});return t.request=t.request||P,t.store=t.store||new o.MemoryStore({localStorage:e.localStorage}),t.scheduler=t.scheduler||new a.SendingNetworkScheduler,t.cryptoStore=t.cryptoStore||L(),new s.SendingNetworkClient(t)},Object.defineProperty(t,"createNewSendingNetworkCall",{enumerable:!0,get:function(){return R.createNewSendingNetworkCall}}),t.getRequest=function(){return P},t.request=function(e){P=e},t.setCryptoStoreFactory=function(e){L=e},t.wrapRequest=function(e){var t=P;P=function(r,n){return e(t,r,n)}};var i=r(73);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=r(122);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(235);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=r(59);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var u=r(82);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=r(132);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=r(80);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var f=r(62);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var h=r(25);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var d=r(124);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var p=r(128);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var v=r(35);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=r(76);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var g=r(77);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var m=r(125);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var b=r(49);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var w=r(79);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var k=r(279);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var S=r(280);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var E=r(134);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var x=r(281);Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))}));var _=r(284);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var T=r(33);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}));var O=r(60);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(141));t.ContentHelpers=M;var P,R=r(81);function I(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var L=function(){return new i.MemoryCryptoStore}}).call(this,r(11))},function(e,t,r){"use strict";var n=r(23),i=r(20),o=r(12),a=r(9),s=r(1),u=r(2);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryCryptoStore=void 0;var f=l(r(4)),h=r(8),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(){function e(){s(this,e),(0,f.default)(this,"outgoingRoomKeyRequests",[]),(0,f.default)(this,"account",null),(0,f.default)(this,"crossSigningKeys",null),(0,f.default)(this,"privateKeys",{}),(0,f.default)(this,"sessions",{}),(0,f.default)(this,"sessionProblems",{}),(0,f.default)(this,"notifiedErrorDevices",{}),(0,f.default)(this,"inboundGroupSessions",{}),(0,f.default)(this,"inboundGroupSessionsWithheld",{}),(0,f.default)(this,"deviceData",null),(0,f.default)(this,"rooms",{}),(0,f.default)(this,"sessionsNeedingBackup",{}),(0,f.default)(this,"sharedHistoryInboundGroupSessions",{})}return u(e,[{key:"startup",value:function(){var e=a(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteAllData",value:function(){return Promise.resolve()}},{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){var t=this,r=e.requestBody;return d.promiseTry((function(){var n=t._getOutgoingRoomKeyRequest(r);return n?(h.logger.log("already have key request outstanding for "+"".concat(r.room_id," / ").concat(r.session_id,": ")+"not sending another"),n):(h.logger.log("enqueueing key request for ".concat(r.room_id," / ")+r.session_id),t.outgoingRoomKeyRequests.push(e),e)}))}},{key:"getOutgoingRoomKeyRequest",value:function(e){return Promise.resolve(this._getOutgoingRoomKeyRequest(e))}},{key:"_getOutgoingRoomKeyRequest",value:function(e){var t,r=o(this.outgoingRoomKeyRequests);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(d.deepCompare(n.requestBody,e))return n}}catch(i){r.e(i)}finally{r.f()}return null}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){var t,r=o(this.outgoingRoomKeyRequests);try{for(r.s();!(t=r.n()).done;){var n,i=t.value,a=o(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(i.state===s)return Promise.resolve(i)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return Promise.resolve(null)}},{key:"getAllOutgoingRoomKeyRequestsByState",value:function(e){return Promise.resolve(this.outgoingRoomKeyRequests.filter((function(t){return t.state==e})))}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,r){var n,i=[],a=o(this.outgoingRoomKeyRequests);try{for(a.s();!(n=a.n()).done;){var s,u=n.value,c=o(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;u.state===l&&u.recipients.includes({userId:e,deviceId:t})&&i.push(u)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){a.e(f)}finally{a.f()}return Promise.resolve(i)}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,r){var n,i=o(this.outgoingRoomKeyRequests);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.requestId===e)return a.state!==t?(h.logger.warn("Cannot update room key request from ".concat(t," ")+"as it was already updated to ".concat(a.state)),Promise.resolve(null)):(Object.assign(a,r),Promise.resolve(a))}}catch(s){i.e(s)}finally{i.f()}return Promise.resolve(null)}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){for(var r=0;r<this.outgoingRoomKeyRequests.length;r++){var n=this.outgoingRoomKeyRequests[r];if(n.requestId===e)return n.state!=t?(h.logger.warn("Cannot delete room key request in state ".concat(n.state," ")+"(expected ".concat(t,")")),Promise.resolve(null)):(this.outgoingRoomKeyRequests.splice(r,1),Promise.resolve(n))}return Promise.resolve(null)}},{key:"getAccount",value:function(e,t){t(this.account)}},{key:"storeAccount",value:function(e,t){this.account=t}},{key:"getCrossSigningKeys",value:function(e,t){t(this.crossSigningKeys)}},{key:"getSecretStorePrivateKey",value:function(e,t,r){t(this.privateKeys[r]||null)}},{key:"storeCrossSigningKeys",value:function(e,t){this.crossSigningKeys=t}},{key:"storeSecretStorePrivateKey",value:function(e,t,r){this.privateKeys[t]=r}},{key:"countEndToEndSessions",value:function(e,t){t(Object.keys(this.sessions).length)}},{key:"getEndToEndSession",value:function(e,t,r,n){n((this.sessions[e]||{})[t]||null)}},{key:"getEndToEndSessions",value:function(e,t,r){r(this.sessions[e]||{})}},{key:"getAllEndToEndSessions",value:function(e,t){Object.entries(this.sessions).forEach((function(e){var r=i(e,2),n=r[0],o=r[1];Object.entries(o).forEach((function(e){var r=i(e,2),o=r[0],a=r[1];t(y(y({},a),{},{deviceKey:n,sessionId:o}))}))}))}},{key:"storeEndToEndSession",value:function(e,t,r,n){var i=this.sessions[e];void 0===i&&(i={},this.sessions[e]=i),i[t]=r}},{key:"storeEndToEndSessionProblem",value:function(){var e=a(c().mark((function e(t,r,n){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=this.sessionProblems[t]=this.sessionProblems[t]||[]).push({type:r,fixed:n,time:Date.now()}),i.sort((function(e,t){return e.time-t.time}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getEndToEndSessionProblem",value:function(){var e=a(c().mark((function e(t,r){var n,i,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.sessionProblems[t]||[]).length){e.next=3;break}return e.abrupt("return",null);case 3:i=n[n.length-1],a=o(n),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=13;break}if(!((u=s.value).time>r)){e.next=11;break}return e.abrupt("return",Object.assign({},u,{fixed:i.fixed}));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:if(!i.fixed){e.next=25;break}return e.abrupt("return",null);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"filterOutNotifiedErrorDevices",value:function(){var e=a(c().mark((function e(t){var r,i,a,s,u,l,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.notifiedErrorDevices,i=[],a=o(t);try{for(a.s();!(s=a.n()).done;)u=s.value,l=u.userId,f=u.deviceInfo,l in r?f.deviceId in r[l]||(i.push(u),r[l][f.deviceId]=!0):(i.push(u),r[l]=n({},f.deviceId,!0))}catch(c){a.e(c)}finally{a.f()}return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEndToEndInboundGroupSession",value:function(e,t,r,n){var i=e+"/"+t;n(this.inboundGroupSessions[i]||null,this.inboundGroupSessionsWithheld[i]||null)}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){for(var r=0,n=Object.keys(this.inboundGroupSessions);r<n.length;r++){var i=n[r];t({senderKey:i.substr(0,43),sessionId:i.substr(44),sessionData:this.inboundGroupSessions[i]})}t(null)}},{key:"addEndToEndInboundGroupSession",value:function(e,t,r,n){var i=e+"/"+t;void 0===this.inboundGroupSessions[i]&&(this.inboundGroupSessions[i]=r)}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,r,n){this.inboundGroupSessions[e+"/"+t]=r}},{key:"storeEndToEndInboundGroupSessionWithheld",value:function(e,t,r,n){var i=e+"/"+t;this.inboundGroupSessionsWithheld[i]=r}},{key:"getEndToEndDeviceData",value:function(e,t){t(this.deviceData)}},{key:"storeEndToEndDeviceData",value:function(e,t){this.deviceData=e}},{key:"storeEndToEndRoom",value:function(e,t,r){this.rooms[e]=t}},{key:"getEndToEndRooms",value:function(e,t){t(this.rooms)}},{key:"getSessionsNeedingBackup",value:function(e){var t=[];for(var r in this.sessionsNeedingBackup)if(this.inboundGroupSessions[r]&&(t.push({senderKey:r.substr(0,43),sessionId:r.substr(44),sessionData:this.inboundGroupSessions[r]}),e&&r.length>=e))break;return Promise.resolve(t)}},{key:"countSessionsNeedingBackup",value:function(){return Promise.resolve(Object.keys(this.sessionsNeedingBackup).length)}},{key:"unmarkSessionsNeedingBackup",value:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.senderKey+"/"+n.sessionId;delete this.sessionsNeedingBackup[i]}}catch(a){r.e(a)}finally{r.f()}return Promise.resolve()}},{key:"markSessionsNeedingBackup",value:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.senderKey+"/"+n.sessionId;this.sessionsNeedingBackup[i]=!0}}catch(a){r.e(a)}finally{r.f()}return Promise.resolve()}},{key:"addSharedHistoryInboundGroupSession",value:function(e,t,r){var n=this.sharedHistoryInboundGroupSessions[e]||[];n.push([t,r]),this.sharedHistoryInboundGroupSessions[e]=n}},{key:"getSharedHistoryInboundGroupSessions",value:function(e){return Promise.resolve(this.sharedHistoryInboundGroupSessions[e]||[])}},{key:"doTxn",value:function(e,t,r){return Promise.resolve(r(null))}}]),e}();t.MemoryCryptoStore=g},function(e,t,r){var n=r(118);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(16),a=r(14),s=r(15),u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.EventTimelineSet=t.DuplicateStrategy=void 0;var c,l,f=u(r(4)),h=r(17),d=r(35),p=r(25),v=r(8),y=r(240);c=v.logger.log.bind(v.logger),t.DuplicateStrategy=l,function(e){e.Ignore="ignore",e.Replace="replace"}(l||(t.DuplicateStrategy=l={}));var g=function(e){a(r,e);var t=s(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).room=e,(0,f.default)(o(a),"timelineSupport",void 0),(0,f.default)(o(a),"unstableClientRelationAggregation",void 0),(0,f.default)(o(a),"liveTimeline",void 0),(0,f.default)(o(a),"timelines",void 0),(0,f.default)(o(a),"_eventIdToTimeline",void 0),(0,f.default)(o(a),"filter",void 0),(0,f.default)(o(a),"relations",void 0),a.timelineSupport=Boolean(i.timelineSupport),a.liveTimeline=new d.EventTimeline(o(a)),a.unstableClientRelationAggregation=!!i.unstableClientRelationAggregation,a.timelines=[a.liveTimeline],a._eventIdToTimeline={},a.filter=i.filter,a.unstableClientRelationAggregation&&(a.relations={}),a}return i(r,[{key:"getTimelines",value:function(){return this.timelines}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){this.filter=e}},{key:"getPendingEvents",value:function(){return this.room?this.filter?this.filter.filterRoomTimeline(this.room.getPendingEvents()):this.room.getPendingEvents():[]}},{key:"getLiveTimeline",value:function(){return this.liveTimeline}},{key:"eventIdToTimeline",value:function(e){return this._eventIdToTimeline[e]}},{key:"replaceEventId",value:function(e,t){var r=this._eventIdToTimeline[e];r&&(delete this._eventIdToTimeline[e],this._eventIdToTimeline[t]=r)}},{key:"resetLiveTimeline",value:function(e,t){var r=!this.timelineSupport||!t,n=this.liveTimeline,i=r?n.forkLive(d.EventTimeline.FORWARDS):n.fork(d.EventTimeline.FORWARDS);r?(this.timelines=[i],this._eventIdToTimeline={}):this.timelines.push(i),t&&n.setPaginationToken(t,d.EventTimeline.FORWARDS),i.setPaginationToken(e,d.EventTimeline.BACKWARDS),this.liveTimeline=i,this.emit("Room.timelineReset",this.room,this,r)}},{key:"getTimelineForEvent",value:function(e){var t=this._eventIdToTimeline[e];return void 0===t?null:t}},{key:"findEventById",value:function(e){var t=this.getTimelineForEvent(e);if(t)return t.getEvents().find((function(t){return t.getId()==e}))}},{key:"addTimeline",value:function(){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating SendingNetworkClient to enable it.");var e=new d.EventTimeline(this);return this.timelines.push(e),e}},{key:"addEventsToTimeline",value:function(e,t,r,n){if(!r)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!t&&r==this.liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(!this.filter||(e=this.filter.filterRoomTimeline(e)).length){for(var i=t?d.EventTimeline.BACKWARDS:d.EventTimeline.FORWARDS,o=t?d.EventTimeline.FORWARDS:d.EventTimeline.BACKWARDS,a=!1,s=!1,u=0;u<e.length;u++){var l=e[u],f=l.getId(),h=this._eventIdToTimeline[f];if(h)if(s=!1,h!=r){var p=r.getNeighbouringTimeline(i);if(p)c(h==p?"Event "+f+" in neighbouring timeline - switching to "+h:"Event "+f+" already in a different timeline "+h),r=h;else{v.logger.info("Already have timeline for "+f+" - joining timeline "+r+" to "+h);var y=h===this.liveTimeline,g=r===this.liveTimeline,m=i===d.EventTimeline.BACKWARDS&&y,b=i===d.EventTimeline.FORWARDS&&g;m||b?(m&&v.logger.warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+h+")"),b&&v.logger.warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+r+")")):(r.setNeighbouringTimeline(h,i),h.setNeighbouringTimeline(r,o),r=h,a=!0)}}else c("Event "+f+" already in timeline "+r);else this.addEventToTimeline(l,r,t),s=!0,a=!0}if(s||!a){if(i===d.EventTimeline.FORWARDS&&r===this.liveTimeline)return v.logger.warn({lastEventWasNew:s,didUpdate:a}),void v.logger.warn("Refusing to set forwards pagination token of live timeline "+"".concat(r," to ").concat(n));r.setPaginationToken(n,i)}}}},{key:"addLiveEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Ignore,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(this.filter){var i=this.filter.filterRoomTimeline([e]);if(!i.length)return}var o=this._eventIdToTimeline[e.getId()];if(o)if(t===l.Replace){c("EventTimelineSet.addLiveEvent: replacing duplicate event "+e.getId());for(var a=o.getEvents(),s=0;s<a.length;s++)if(a[s].getId()===e.getId()){n||(n=o.getState(d.EventTimeline.FORWARDS)),d.EventTimeline.setEventMetadata(e,n,!1),a[s]=e;break}}else c("EventTimelineSet.addLiveEvent: ignoring duplicate event "+e.getId());else this.addEventToTimeline(e,this.liveTimeline,!1,r,n)}},{key:"addEventToTimeline",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=e.getId();t.addEvent(e,r,i),this._eventIdToTimeline[o]=t,this.setRelationsTarget(e),this.aggregateRelations(e);var a={timeline:t,liveEvent:!r&&t==this.liveTimeline&&!n};this.emit("Room.timeline",e,this.room,Boolean(r),!1,a)}},{key:"handleRemoteEcho",value:function(e,t,r){var n=this._eventIdToTimeline[t];n?(delete this._eventIdToTimeline[t],this._eventIdToTimeline[r]=n):this.filter?this.filter.filterRoomTimeline([e]).length&&this.addEventToTimeline(e,this.liveTimeline,!1):this.addEventToTimeline(e,this.liveTimeline,!1)}},{key:"removeEvent",value:function(e){var t=this._eventIdToTimeline[e];if(!t)return null;var r=t.removeEvent(e);if(r){delete this._eventIdToTimeline[e];var n={timeline:t};this.emit("Room.timeline",r,this.room,void 0,!0,n)}return r}},{key:"compareEventOrdering",value:function(e,t){if(e==t)return 0;var r=this._eventIdToTimeline[e],n=this._eventIdToTimeline[t];if(void 0===r)return null;if(void 0===n)return null;if(r===n){for(var i,o,a=r.getEvents(),s=0;s<a.length&&(void 0===i||void 0===o);s++){var u=a[s].getId();u==e&&(i=s),u==t&&(o=s)}return i-o}for(var c=r;c;){if(c===n)return-1;c=c.getNeighbouringTimeline(d.EventTimeline.FORWARDS)}for(c=r;c;){if(c===n)return 1;c=c.getNeighbouringTimeline(d.EventTimeline.BACKWARDS)}return null}},{key:"getRelationsForEvent",value:function(e,t,r){if(!this.unstableClientRelationAggregation)throw new Error("Client-side relation aggregation is disabled");if(!e||!t||!r)throw new Error("Invalid arguments for `getRelationsForEvent`");return((this.relations[e]||{})[t]||{})[r]}},{key:"setRelationsTarget",value:function(e){if(this.unstableClientRelationAggregation){var t=this.relations[e.getId()];if(t)for(var r=0,n=Object.values(t);r<n.length;r++)for(var i=n[r],o=0,a=Object.values(i);o<a.length;o++){a[o].setTargetEvent(e)}}}},{key:"aggregateRelations",value:function(e){var t=this;if(this.unstableClientRelationAggregation&&!e.isRedacted()&&e.status!==p.EventStatus.CANCELLED)if(e.isBeingDecrypted()||e.shouldAttemptDecryption())e.once("Event.decrypted",(function(){t.aggregateRelations(e)}));else{var r=e.getRelation();if(r){var n=r.event_id,i=r.rel_type,o=e.getType(),a=this.relations[n];a||(a=this.relations[n]={});var s=a[i];s||(s=a[i]={});var u,c=s[o];c||(c=s[o]=new y.Relations(i,o,this.room),(u=this.findEventById(n)||this.room.getPendingEvent(n))&&c.setTargetEvent(u)),c.addEvent(e)}}}}]),r}(h.EventEmitter);t.EventTimelineSet=g},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(16),a=r(14),s=r(15),u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomMember=void 0;var c=u(r(4)),l=r(17),f=r(60),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=function(e){a(r,e);var t=s(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).roomId=e,a.userId=i,(0,c.default)(o(a),"_isOutOfBand",!1),(0,c.default)(o(a),"_modified",void 0),(0,c.default)(o(a),"_requestedProfileInfo",void 0),(0,c.default)(o(a),"typing",!1),(0,c.default)(o(a),"name",void 0),(0,c.default)(o(a),"rawDisplayName",void 0),(0,c.default)(o(a),"powerLevel",0),(0,c.default)(o(a),"powerLevelNorm",0),(0,c.default)(o(a),"user",null),(0,c.default)(o(a),"membership",null),(0,c.default)(o(a),"disambiguate",!1),(0,c.default)(o(a),"events",{member:null}),a.name=i,a.rawDisplayName=i,a.updateModifiedTime(),a}return i(r,[{key:"markOutOfBand",value:function(){this._isOutOfBand=!0}},{key:"isOutOfBand",value:function(){return this._isOutOfBand}},{key:"setMembershipEvent",value:function(e,t){var r=e.getDirectionalContent().displayname;if("m.room.member"===e.getType()){this._isOutOfBand=!1,this.events.member=e;var n=this.membership;this.membership=e.getDirectionalContent().membership,this.disambiguate=(this.userId,!1);var i=this.name;this.name=function(e,t,r,n){return n?h.removeDirectionOverrideChars(t)+" ("+e+")":t&&t!==e&&h.removeHiddenChars(t)?h.removeDirectionOverrideChars(t):e}(this.userId,r,0,this.disambiguate),this.rawDisplayName=h.removeDirectionOverrideChars(e.getDirectionalContent().displayname),this.rawDisplayName&&h.removeHiddenChars(this.rawDisplayName)||(this.rawDisplayName=this.userId),n!==this.membership&&(this.updateModifiedTime(),this.emit("RoomMember.membership",e,this,n)),i!==this.name&&(this.updateModifiedTime(),this.emit("RoomMember.name",e,this,i))}}},{key:"setPowerLevelEvent",value:function(e){if("m.room.power_levels"===e.getType()){var t=e.getDirectionalContent(),r=t.users_default||0,n=t.users||{};Object.values(n).forEach((function(e){r=Math.max(r,e)}));var i=this.powerLevel,o=this.powerLevelNorm;void 0!==n[this.userId]&&Number.isInteger(n[this.userId])?this.powerLevel=n[this.userId]:void 0!==t.users_default?this.powerLevel=t.users_default:this.powerLevel=0,this.powerLevelNorm=0,r>0&&(this.powerLevelNorm=100*this.powerLevel/r),i===this.powerLevel&&o===this.powerLevelNorm||(this.updateModifiedTime(),this.emit("RoomMember.powerLevel",e,this))}}},{key:"setTypingEvent",value:function(e){if("m.typing"===e.getType()){var t=this.typing;this.typing=!1;var r=e.getContent().user_ids;Array.isArray(r)&&(-1!==r.indexOf(this.userId)&&(this.typing=!0),t!==this.typing&&(this.updateModifiedTime(),this.emit("RoomMember.typing",e,this)))}}},{key:"updateModifiedTime",value:function(){this._modified=Date.now()}},{key:"getLastModifiedTime",value:function(){return this._modified}},{key:"isKicked",value:function(){return"leave"===this.membership&&this.events.member.getSender()!==this.events.member.getStateKey()}},{key:"getDMInviter",value:function(){if(this.events.member){var e=this.events.member,t=e.getContent(),r=e.getSender();if("join"===t.membership&&(t=e.getPrevContent(),r=e.getUnsigned().prev_sender),"invite"===t.membership&&t.is_direct)return r}}},{key:"getAvatarUrl",value:function(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0,a=this.getMxcAvatarUrl();if(!a&&!i)return null;var s=(0,f.getHttpUriForMxc)(e,a,t,r,n,o);return s||null}},{key:"getMxcAvatarUrl",value:function(){return this.events.member?this.events.member.getDirectionalContent().avatar_url:this.user?this.user.avatarUrl:null}}]),r}(l.EventEmitter);t.RoomMember=p},function(e,t,r){"use strict";var n,i,o,a,s,u,c;Object.defineProperty(t,"__esModule",{value:!0}),t.Visibility=t.TokenAccessLogic=t.RestrictedAllowType=t.Preset=t.JoinRule=t.HistoryVisibility=t.GuestAccess=void 0,t.Visibility=n,function(e){e.Public="public",e.Private="private"}(n||(t.Visibility=n={})),t.Preset=i,function(e){e.PrivateChat="private_chat",e.TrustedPrivateChat="trusted_private_chat",e.PublicChat="public_chat"}(i||(t.Preset=i={})),t.JoinRule=o,function(e){e.Token="token.access",e.Public="public",e.Invite="invite",e.Private="private",e.Knock="knock",e.Restricted="restricted"}(o||(t.JoinRule=o={})),t.RestrictedAllowType=a,function(e){e.RoomMembership="m.room_membership"}(a||(t.RestrictedAllowType=a={})),t.TokenAccessLogic=s,function(e){e.ALL="ALL",e.ANY="ANY"}(s||(t.TokenAccessLogic=s={})),t.GuestAccess=u,function(e){e.CanJoin="can_join",e.Forbidden="forbidden"}(u||(t.GuestAccess=u={})),t.HistoryVisibility=c,function(e){e.Invited="invited",e.Joined="joined",e.Shared="shared",e.WorldReadable="world_readable"}(c||(t.HistoryVisibility=c={}))},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var a=o(r(4)),s=r(242);function u(e,t,r){for(var n=t.split("."),i=e,o=0;o<n.length-1;o++)i[n[o]]||(i[n[o]]={}),i=i[n[o]];i[n[n.length-1]]=r}var c=function(){function e(t,r){n(this,e),this.userId=t,this.filterId=r,(0,a.default)(this,"definition",{}),(0,a.default)(this,"roomFilter",void 0),(0,a.default)(this,"roomTimelineFilter",void 0)}return i(e,[{key:"getFilterId",value:function(){return this.filterId}},{key:"getDefinition",value:function(){return this.definition}},{key:"setDefinition",value:function(e){this.definition=e;var t=e.room,r={};t&&(t.rooms&&(r.rooms=t.rooms),t.rooms&&(r.not_rooms=t.not_rooms)),this.roomFilter=new s.FilterComponent(r),this.roomTimelineFilter=new s.FilterComponent((null===t||void 0===t?void 0:t.timeline)||{})}},{key:"getRoomTimelineFilterComponent",value:function(){return this.roomTimelineFilter}},{key:"filterRoomTimeline",value:function(e){return this.roomTimelineFilter.filter(this.roomFilter.filter(e))}},{key:"setTimelineLimit",value:function(e){u(this.definition,"room.timeline.limit",e)}},{key:"setLazyLoadMembers",value:function(e){u(this.definition,"room.state.lazy_load_members",!!e)}},{key:"setIncludeLeaveRooms",value:function(e){u(this.definition,"room.include_leave",e)}}],[{key:"fromJson",value:function(t,r,n){var i=new e(t,r);return i.setDefinition(n),i}}]),e}();t.Filter=c,(0,a.default)(c,"LAZY_LOADING_MESSAGES_FILTER",{lazy_load_members:!0})},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncAccumulator=t.Category=void 0;var a,s=o(r(4)),u=r(8),c=r(19);t.Category=a,function(e){e.Invite="invite",e.Leave="leave",e.Join="join"}(a||(t.Category=a={}));var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.opts=t,(0,s.default)(this,"accountData",{}),(0,s.default)(this,"inviteRooms",{}),(0,s.default)(this,"joinRooms",{}),(0,s.default)(this,"nextBatch",null),(0,s.default)(this,"groups",{invite:{},join:{},leave:{}}),this.opts.maxTimelineEntries=this.opts.maxTimelineEntries||50}return i(e,[{key:"accumulate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.accumulateRooms(e,t),this.accumulateGroups(e),this.accumulateAccountData(e),this.nextBatch=e.next_batch}},{key:"accumulateAccountData",value:function(e){var t=this;e.account_data&&e.account_data.events&&e.account_data.events.forEach((function(e){t.accountData[e.type]=e}))}},{key:"accumulateRooms",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.rooms&&(e.rooms.invite&&Object.keys(e.rooms.invite).forEach((function(n){t.accumulateRoom(n,a.Invite,e.rooms.invite[n],r)})),e.rooms.join&&Object.keys(e.rooms.join).forEach((function(n){t.accumulateRoom(n,a.Join,e.rooms.join[n],r)})),e.rooms.leave&&Object.keys(e.rooms.leave).forEach((function(n){t.accumulateRoom(n,a.Leave,e.rooms.leave[n],r)})))}},{key:"accumulateRoom",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(t){case a.Invite:this.accumulateInviteState(e,r);break;case a.Join:this.inviteRooms[e]&&delete this.inviteRooms[e],this.accumulateJoinState(e,r,n);break;case a.Leave:this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:u.logger.error("Unknown cateogory: ",t)}}},{key:"accumulateInviteState",value:function(e,t){if(t.invite_state&&t.invite_state.events)if(this.inviteRooms[e]){var r=this.inviteRooms[e];t.invite_state.events.forEach((function(e){for(var t=!1,n=0;n<r.invite_state.events.length;n++){var i=r.invite_state.events[n];i.type===e.type&&i.state_key==e.state_key&&(r.invite_state.events[n]=e,t=!0)}t||r.invite_state.events.push(e)}))}else this.inviteRooms[e]={invite_state:t.invite_state}}},{key:"accumulateJoinState",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.joinRooms[e]||(this.joinRooms[e]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_summary:{},_readReceipts:{}});var n=this.joinRooms[e];if(t.account_data&&t.account_data.events&&t.account_data.events.forEach((function(e){n._accountData[e.type]=e})),t.unread_notifications&&(n._unreadNotifications=t.unread_notifications),t.summary){var i="m.heroes",o="m.invited_member_count",a="m.joined_member_count",s=n._summary,u=t.summary;s[i]=u[i]||s[i],s[a]=u[a]||s[a],s[o]=u[o]||s[o]}if(t.ephemeral&&t.ephemeral.events&&t.ephemeral.events.forEach((function(e){"m.receipt"===e.type&&e.content&&Object.keys(e.content).forEach((function(t){e.content[t]["m.read"]&&Object.keys(e.content[t]["m.read"]).forEach((function(r){n._readReceipts[r]={data:e.content[t]["m.read"][r],eventId:t}}))}))})),t.timeline&&t.timeline.limited&&(n._timeline=[]),t.state&&t.state.events&&t.state.events.forEach((function(e){f(n._currentState,e)})),t.timeline&&t.timeline.events&&t.timeline.events.forEach((function(e,i){var o;if(f(n._currentState,e),r)o=e;else{void 0!==(o=Object.assign({},e)).unsigned&&(o.unsigned=Object.assign({},o.unsigned));var a=e.unsigned?e.unsigned.age:e.age;void 0!==a&&(o._localTs=Date.now()-a)}n._timeline.push({event:o,token:0===i?t.timeline.prev_batch:null})})),n._timeline.length>this.opts.maxTimelineEntries)for(var c=n._timeline.length-this.opts.maxTimelineEntries,l=c;l<n._timeline.length;l++)if(n._timeline[l].token){n._timeline=n._timeline.slice(l,n._timeline.length);break}}},{key:"accumulateGroups",value:function(e){var t=this;e.groups&&(e.groups.invite&&Object.keys(e.groups.invite).forEach((function(r){t.accumulateGroup(r,a.Invite,e.groups.invite[r])})),e.groups.join&&Object.keys(e.groups.join).forEach((function(r){t.accumulateGroup(r,a.Join,e.groups.join[r])})),e.groups.leave&&Object.keys(e.groups.leave).forEach((function(r){t.accumulateGroup(r,a.Leave,e.groups.leave[r])})))}},{key:"accumulateGroup",value:function(e,t,r){for(var n=0,i=[a.Invite,a.Leave,a.Join];n<i.length;n++){var o=i[n];delete this.groups[o][e]}this.groups[t][e]=r}},{key:"getJSON",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={join:{},invite:{},leave:{}};Object.keys(this.inviteRooms).forEach((function(t){r.invite[t]=e.inviteRooms[t]})),Object.keys(this.joinRooms).forEach((function(n){var i=e.joinRooms[n],o={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:i._unreadNotifications,summary:i._summary};Object.keys(i._accountData).forEach((function(e){o.account_data.events.push(i._accountData[e])}));var a={type:"m.receipt",room_id:n,content:{}};Object.keys(i._readReceipts).forEach((function(e){var t=i._readReceipts[e];a.content[t.eventId]||(a.content[t.eventId]={"m.read":{}}),a.content[t.eventId]["m.read"][e]=t.data})),Object.keys(a.content).length>0&&o.ephemeral.events.push(a),i._timeline.forEach((function(e){if(!o.timeline.prev_batch){if(!e.token)return;o.timeline.prev_batch=e.token}var r;!t&&e.event._localTs?(void 0!==(r=Object.assign({},e.event)).unsigned&&(r.unsigned=Object.assign({},r.unsigned)),delete r._localTs,r.unsigned=r.unsigned||{},r.unsigned.age=Date.now()-e.event._localTs):r=e.event,o.timeline.events.push(r)}));for(var s=Object.create(null),u=o.timeline.events.length-1;u>=0;u--){var l=o.timeline.events[u];if(null!==l.state_key&&void 0!==l.state_key){var h=(0,c.deepCopy)(l);h.unsigned&&(h.unsigned.prev_content&&(h.content=h.unsigned.prev_content),h.unsigned.prev_sender&&(h.sender=h.unsigned.prev_sender)),f(s,h)}}Object.keys(i._currentState).forEach((function(e){Object.keys(i._currentState[e]).forEach((function(t){var r=i._currentState[e][t];s[e]&&s[e][t]&&(r=s[e][t]),o.state.events.push(r)}))})),r.join[n]=o}));var n=[];return Object.keys(this.accountData).forEach((function(t){n.push(e.accountData[t])})),{nextBatch:this.nextBatch,roomsData:r,groupsData:this.groups,accountData:n}}},{key:"getNextBatchToken",value:function(){return this.nextBatch}}]),e}();function f(e,t){null!==t.state_key&&void 0!==t.state_key&&t.type&&(e[t.type]||(e[t.type]=Object.create(null)),e[t.type][t.state_key]=t)}t.SyncAccumulator=l},function(e,t,r){"use strict";var n=r(31),i=r(23),o=r(12),a=r(9),s=r(2),u=r(1),c=r(16),l=r(14),f=r(15),h=r(37);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var p=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SendingNetworkCall=t.CallType=t.CallState=t.CallParty=t.CallEvent=t.CallErrorCode=t.CallError=t.CallDirection=void 0,t.createNewSendingNetworkCall=function(e,t,r){if("undefined"===typeof window||"undefined"===typeof document)return null;try{if(!Boolean(window.RTCPeerConnection||window.RTCSessionDescription||window.RTCIceCandidate||navigator.mediaDevices))return S.logger.error("WebRTC is not supported in this browser / environment"),null}catch(a){return S.logger.error("Exception thrown when trying to access WebRTC",a),null}var n=!!r&&r.forceTURN,i={client:e,roomId:t,turnServers:e.getTurnServers(),forceTURN:e.forceTURN||n},o=new L(i);return e.reEmitter.reEmit(o,Object.values(b)),o};var v,y,g,m,b,w,k=p(r(4)),S=r(8),E=r(17),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),_=r(24),T=r(50),O=r(244),M=r(245);function P(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}t.CallState=v,function(e){e.Fledgling="fledgling",e.InviteSent="invite_sent",e.WaitLocalMedia="wait_local_media",e.CreateOffer="create_offer",e.CreateAnswer="create_answer",e.Connecting="connecting",e.Connected="connected",e.Ringing="ringing",e.Ended="ended"}(v||(t.CallState=v={})),t.CallType=y,function(e){e.Voice="voice",e.Video="video"}(y||(t.CallType=y={})),t.CallDirection=g,function(e){e.Inbound="inbound",e.Outbound="outbound"}(g||(t.CallDirection=g={})),t.CallParty=m,function(e){e.Local="local",e.Remote="remote"}(m||(t.CallParty=m={})),t.CallEvent=b,function(e){e.Hangup="hangup",e.State="state",e.Error="error",e.Replaced="replaced",e.LocalHoldUnhold="local_hold_unhold",e.RemoteHoldUnhold="remote_hold_unhold",e.HoldUnhold="hold_unhold",e.FeedsChanged="feeds_changed",e.AssertedIdentityChanged="asserted_identity_changed",e.LengthChanged="length_changed",e.DataChannel="datachannel"}(b||(t.CallEvent=b={})),t.CallErrorCode=w,function(e){e.UserHangup="user_hangup",e.LocalOfferFailed="local_offer_failed",e.NoUserMedia="no_user_media",e.UnknownDevices="unknown_devices",e.SendInvite="send_invite",e.CreateAnswer="create_answer",e.SendAnswer="send_answer",e.SetRemoteDescription="set_remote_description",e.SetLocalDescription="set_local_description",e.AnsweredElsewhere="answered_elsewhere",e.IceFailed="ice_failed",e.InviteTimeout="invite_timeout",e.Replaced="replaced",e.SignallingFailed="signalling_timeout",e.UserBusy="user_busy",e.Transfered="transferred"}(w||(t.CallErrorCode=w={}));var R=function(e){l(r,e);var t=f(r);function r(e,n,i){var o;return u(this,r),o=t.call(this,n+": "+i),(0,k.default)(c(o),"code",void 0),o.code=e,o}return s(r)}(h(Error));function I(){return Date.now().toString()+(0,T.randomString)(16)}t.CallError=R;var L=function(e){l(r,e);var t=f(r);function r(e){var n;u(this,r),n=t.call(this),(0,k.default)(c(n),"roomId",void 0),(0,k.default)(c(n),"callId",void 0),(0,k.default)(c(n),"state",v.Fledgling),(0,k.default)(c(n),"hangupParty",void 0),(0,k.default)(c(n),"hangupReason",void 0),(0,k.default)(c(n),"direction",void 0),(0,k.default)(c(n),"ourPartyId",void 0),(0,k.default)(c(n),"client",void 0),(0,k.default)(c(n),"forceTURN",void 0),(0,k.default)(c(n),"turnServers",void 0),(0,k.default)(c(n),"candidateSendQueue",[]),(0,k.default)(c(n),"candidateSendTries",0),(0,k.default)(c(n),"sentEndOfCandidates",!1),(0,k.default)(c(n),"peerConn",void 0),(0,k.default)(c(n),"feeds",[]),(0,k.default)(c(n),"usermediaSenders",[]),(0,k.default)(c(n),"screensharingSenders",[]),(0,k.default)(c(n),"inviteOrAnswerSent",!1),(0,k.default)(c(n),"waitForLocalAVStream",void 0),(0,k.default)(c(n),"successor",void 0),(0,k.default)(c(n),"opponentMember",void 0),(0,k.default)(c(n),"opponentVersion",void 0),(0,k.default)(c(n),"opponentPartyId",void 0),(0,k.default)(c(n),"opponentCaps",void 0),(0,k.default)(c(n),"inviteTimeout",void 0),(0,k.default)(c(n),"remoteOnHold",!1),(0,k.default)(c(n),"callStatsAtEnd",void 0),(0,k.default)(c(n),"makingOffer",!1),(0,k.default)(c(n),"ignoreOffer",void 0),(0,k.default)(c(n),"remoteCandidateBuffer",new Map),(0,k.default)(c(n),"remoteAssertedIdentity",void 0),(0,k.default)(c(n),"remoteSDPStreamMetadata",void 0),(0,k.default)(c(n),"callLengthInterval",void 0),(0,k.default)(c(n),"callLength",0),(0,k.default)(c(n),"gotUserMediaForInvite",function(){var e=a(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.successor){e.next=3;break}return n.successor.gotUserMediaForAnswer(t),e.abrupt("return");case 3:if(!n.callHasEnded()){e.next=6;break}return n.stopAllMedia(),e.abrupt("return");case 6:n.pushLocalFeed(t,O.SDPStreamMetadataPurpose.Usermedia),n.setState(v.CreateOffer),S.logger.debug("gotUserMediaForInvite");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,k.default)(c(n),"gotUserMediaForAnswer",function(){var e=a(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.callHasEnded()){e.next=2;break}return e.abrupt("return");case 2:return n.pushLocalFeed(t,O.SDPStreamMetadataPurpose.Usermedia),n.setState(v.CreateAnswer),e.prev=4,n.getRidOfRTXCodecs(),e.next=8,n.peerConn.createAnswer();case 8:r=e.sent,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),S.logger.debug("Failed to create answer: ",e.t0),n.terminate(m.Local,w.CreateAnswer,!0),e.abrupt("return");case 16:return e.prev=16,e.next=19,n.peerConn.setLocalDescription(r);case 19:return n.setState(v.Connecting),e.next=22,new Promise((function(e){setTimeout(e,200)}));case 22:n.sendAnswer(),e.next=30;break;case 25:return e.prev=25,e.t1=e.catch(16),S.logger.debug("Error setting local description!",e.t1),n.terminate(m.Local,w.SetLocalDescription,!0),e.abrupt("return");case 30:case"end":return e.stop()}}),e,null,[[4,11],[16,25]])})));return function(t){return e.apply(this,arguments)}}()),(0,k.default)(c(n),"gotLocalIceCandidate",(function(e){if(e.candidate){if(S.logger.debug("Call "+n.callId+" got local ICE "+e.candidate.sdpMid+" candidate: "+e.candidate.candidate),n.callHasEnded())return;""===e.candidate.candidate&&n.sentEndOfCandidates||(n.queueCandidate(e.candidate),""===e.candidate.candidate&&(n.sentEndOfCandidates=!0))}})),(0,k.default)(c(n),"onIceGatheringStateChange",(function(e){if(S.logger.debug("ice gathering state changed to "+n.peerConn.iceGatheringState),"complete"===n.peerConn.iceGatheringState&&!n.sentEndOfCandidates){n.queueCandidate({candidate:""}),n.sentEndOfCandidates=!0}})),(0,k.default)(c(n),"gotLocalOffer",function(){var e=a(d().mark((function e(t){var r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.logger.debug("Created offer: ",t),!n.callHasEnded()){e.next=4;break}return S.logger.debug("Ignoring newly created offer on call ID "+n.callId+" because the call has ended"),e.abrupt("return");case 4:return e.prev=4,e.next=7,n.peerConn.setLocalDescription(t);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),S.logger.debug("Error setting local description!",e.t0),n.terminate(m.Local,w.SetLocalDescription,!0),e.abrupt("return");case 14:if("gathering"!==n.peerConn.iceGatheringState){e.next=17;break}return e.next=17,new Promise((function(e){setTimeout(e,200)}));case 17:if(!n.callHasEnded()){e.next=19;break}return e.abrupt("return");case 19:return r=n.state===v.CreateOffer?_.EventType.CallInvite:_.EventType.CallNegotiate,i={lifetime:6e4},n.state===v.CreateOffer?i.offer=n.peerConn.localDescription:i.description=n.peerConn.localDescription,i.capabilities={"m.call.transferee":n.client.supportsCallTransfer,"m.call.dtmf":!1},i[O.SDPStreamMetadataKey]=n.getLocalSDPStreamMetadata(),S.logger.info("Discarding ".concat(n.candidateSendQueue.length," candidates that will be sent in offer")),n.candidateSendQueue=[],e.prev=26,e.next=29,n.sendVoipEvent(r,i);case 29:e.next=42;break;case 31:return e.prev=31,e.t1=e.catch(26),S.logger.error("Failed to send invite",e.t1),e.t1.event&&n.client.cancelPendingEvent(e.t1.event),o=w.SignallingFailed,a="Signalling failed",n.state===v.CreateOffer&&(o=w.SendInvite,a="Failed to send invite"),"UnknownDeviceError"==e.t1.name&&(o=w.UnknownDevices,a="Unknown devices present in the room"),n.emit(b.Error,new R(o,a,e.t1)),n.terminate(m.Local,o,!1),e.abrupt("return");case 42:n.sendCandidateQueue(),n.state===v.CreateOffer&&(n.inviteOrAnswerSent=!0,n.setState(v.InviteSent),n.inviteTimeout=setTimeout((function(){n.inviteTimeout=null,n.state===v.InviteSent&&n.hangup(w.InviteTimeout,!1)}),6e4));case 44:case"end":return e.stop()}}),e,null,[[4,9],[26,31]])})));return function(t){return e.apply(this,arguments)}}()),(0,k.default)(c(n),"getLocalOfferFailed",(function(e){S.logger.error("Failed to get local offer",e),n.emit(b.Error,new R(w.LocalOfferFailed,"Failed to get local offer!",e)),n.terminate(m.Local,w.LocalOfferFailed,!1)})),(0,k.default)(c(n),"getUserMediaFailed",(function(e){n.successor?n.successor.getUserMediaFailed(e):(S.logger.warn("Failed to get user media - ending call",e),n.emit(b.Error,new R(w.NoUserMedia,"Couldn't start capturing media! Is your microphone set up and does this app have permission?",e)),n.terminate(m.Local,w.NoUserMedia,!1))})),(0,k.default)(c(n),"onIceConnectionStateChanged",(function(){n.callHasEnded()||(S.logger.debug("Call ID "+n.callId+": ICE connection state changed to: "+n.peerConn.iceConnectionState),"connected"==n.peerConn.iceConnectionState?(n.setState(v.Connected),n.callLengthInterval||(n.callLengthInterval=setInterval((function(){n.callLength++,n.emit(b.LengthChanged,n.callLength)}),1e3))):"failed"==n.peerConn.iceConnectionState&&n.hangup(w.IceFailed,!1))})),(0,k.default)(c(n),"onSignallingStateChanged",(function(){S.logger.debug("call "+n.callId+": Signalling state changed to: "+n.peerConn.signalingState)})),(0,k.default)(c(n),"onTrack",(function(e){if(0!==e.streams.length){var t=e.streams[0];n.pushRemoteFeed(t),t.addEventListener("removetrack",(function(){return n.deleteFeedByStream(t)}))}else S.logger.warn("Streamless ".concat(e.track.kind," found: ignoring."))})),(0,k.default)(c(n),"onDataChannel",(function(e){n.emit(b.DataChannel,e.channel)})),(0,k.default)(c(n),"onNegotiationNeeded",a(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.logger.info("Negotiation is needed!"),n.state===v.CreateOffer||0!==n.opponentVersion){e.next=4;break}return S.logger.info("Opponent does not support renegotiation: ignoring negotiationneeded event"),e.abrupt("return");case 4:return n.makingOffer=!0,e.prev=5,n.getRidOfRTXCodecs(),e.next=9,n.peerConn.createOffer();case 9:return t=e.sent,e.next=12,n.gotLocalOffer(t);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),n.getLocalOfferFailed(e.t0),e.abrupt("return");case 18:return e.prev=18,n.makingOffer=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,14,18,21]])})))),(0,k.default)(c(n),"onHangupReceived",(function(e){S.logger.debug("Hangup received for call ID "+n.callId),n.partyIdMatches(e)||n.state===v.Ringing?n.terminate(m.Remote,e.reason||w.UserHangup,!0):S.logger.info("Ignoring message from party ID ".concat(e.party_id,": our partner is ").concat(n.opponentPartyId))})),(0,k.default)(c(n),"onRejectReceived",(function(e){S.logger.debug("Reject received for call ID "+n.callId),[v.InviteSent,v.Ringing].includes(n.state)||n.state===v.Fledgling&&n.direction===g.Inbound?n.terminate(m.Remote,e.reason||w.UserHangup,!0):S.logger.debug("Call is in state: ".concat(n.state,": ignoring reject"))})),(0,k.default)(c(n),"onAnsweredElsewhere",(function(e){S.logger.debug("Call ID "+n.callId+" answered elsewhere"),n.terminate(m.Remote,w.AnsweredElsewhere,!0)})),n.roomId=e.roomId,n.client=e.client,n.forceTURN=e.forceTURN,n.ourPartyId=n.client.deviceId,n.turnServers=e.turnServers||[],0===n.turnServers.length&&n.client.isFallbackICEServerAllowed()&&n.turnServers.push({urls:["stun:turn.sending.network"]});var i,s=o(n.turnServers);try{for(s.s();!(i=s.n()).done;){var l=i.value;x.checkObjectHasKeys(l,["urls"])}}catch(f){s.e(f)}finally{s.f()}return n.callId=I(),n}return s(r,[{key:"placeVoiceCall",value:function(){var e=a(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.placeCall(!0,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"placeVideoCall",value:function(){var e=a(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.placeCall(!0,!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDataChannel",value:function(e,t){var r=this.peerConn.createDataChannel(e,t);return this.emit(b.DataChannel,r),S.logger.debug("created data channel"),r}},{key:"getOpponentMember",value:function(){return this.opponentMember}},{key:"opponentCanBeTransferred",value:function(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.transferee"])}},{key:"opponentSupportsDTMF",value:function(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.dtmf"])}},{key:"getRemoteAssertedIdentity",value:function(){return this.remoteAssertedIdentity}},{key:"type",get:function(){return this.hasLocalUserMediaVideoTrack||this.hasRemoteUserMediaVideoTrack?y.Video:y.Voice}},{key:"hasLocalUserMediaVideoTrack",get:function(){var e;return(null===(e=this.localUsermediaStream)||void 0===e?void 0:e.getVideoTracks().length)>0}},{key:"hasRemoteUserMediaVideoTrack",get:function(){return this.getRemoteFeeds().some((function(e){return e.purpose===O.SDPStreamMetadataPurpose.Usermedia&&e.stream.getVideoTracks().length>0}))}},{key:"hasLocalUserMediaAudioTrack",get:function(){var e;return(null===(e=this.localUsermediaStream)||void 0===e?void 0:e.getAudioTracks().length)>0}},{key:"hasRemoteUserMediaAudioTrack",get:function(){return this.getRemoteFeeds().some((function(e){return e.purpose===O.SDPStreamMetadataPurpose.Usermedia&&e.stream.getAudioTracks().length>0}))}},{key:"localUsermediaFeed",get:function(){return this.getLocalFeeds().find((function(e){return e.purpose===O.SDPStreamMetadataPurpose.Usermedia}))}},{key:"localScreensharingFeed",get:function(){return this.getLocalFeeds().find((function(e){return e.purpose===O.SDPStreamMetadataPurpose.Screenshare}))}},{key:"localUsermediaStream",get:function(){var e;return null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.stream}},{key:"localScreensharingStream",get:function(){var e;return null===(e=this.localScreensharingFeed)||void 0===e?void 0:e.stream}},{key:"getFeedByStreamId",value:function(e){return this.getFeeds().find((function(t){return t.stream.id===e}))}},{key:"getFeeds",value:function(){return this.feeds}},{key:"getLocalFeeds",value:function(){return this.feeds.filter((function(e){return e.isLocal()}))}},{key:"getRemoteFeeds",value:function(){return this.feeds.filter((function(e){return!e.isLocal()}))}},{key:"getLocalSDPStreamMetadata",value:function(){var e,t={},r=o(this.getLocalFeeds());try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.stream.id]={purpose:n.purpose,audio_muted:n.isAudioMuted(),video_muted:n.isVideoMuted()}}}catch(i){r.e(i)}finally{r.f()}return S.logger.debug("Got local SDPStreamMetadata",t),t}},{key:"noIncomingFeeds",value:function(){return!this.feeds.some((function(e){return!e.isLocal()}))}},{key:"pushRemoteFeed",value:function(e){if(this.opponentSupportsSDPStreamMetadata()){var t=this.getOpponentMember().userId,r=this.remoteSDPStreamMetadata[e.id].purpose,n=this.remoteSDPStreamMetadata[e.id].audio_muted,i=this.remoteSDPStreamMetadata[e.id].video_muted;if(r){var o=this.getRemoteFeeds().find((function(e){return e.purpose===r}));o?o.setNewStream(e):(this.feeds.push(new M.CallFeed({client:this.client,roomId:this.roomId,userId:t,stream:e,purpose:r,audioMuted:n,videoMuted:i})),this.emit(b.FeedsChanged,this.feeds)),S.logger.info('Pushed remote stream (id="'.concat(e.id,'", active="').concat(e.active,'", purpose=').concat(r,")"))}else S.logger.warn("Ignoring stream with id ".concat(e.id," because we didn't get any metadata about it"))}else this.pushRemoteFeedWithoutMetadata(e)}},{key:"pushRemoteFeedWithoutMetadata",value:function(e){var t,r=this.getOpponentMember().userId,n=O.SDPStreamMetadataPurpose.Usermedia,i=null===(t=this.feeds.find((function(e){return!e.isLocal()})))||void 0===t?void 0:t.stream;if(i&&e.id!==i.id)S.logger.warn("Ignoring new stream ID ".concat(e.id,": we already have stream ID ").concat(i.id));else{var o=this.getFeedByStreamId(e.id);o?o.setNewStream(e):(this.feeds.push(new M.CallFeed({client:this.client,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:r,stream:e,purpose:n})),this.emit(b.FeedsChanged,this.feeds)),S.logger.info('Pushed remote stream (id="'.concat(e.id,'", active="').concat(e.active,'")'))}}},{key:"pushLocalFeed",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.client.getUserId(),i=this.getLocalFeeds().find((function(e){return e.purpose===t}));if(i?i.setNewStream(e):(this.feeds.push(new M.CallFeed({client:this.client,roomId:this.roomId,audioMuted:0===e.getAudioTracks().length,videoMuted:0===e.getVideoTracks().length,userId:n,stream:e,purpose:t})),this.emit(b.FeedsChanged,this.feeds)),C(e.getAudioTracks(),!0),r){var a=t===O.SDPStreamMetadataPurpose.Usermedia?this.usermediaSenders:this.screensharingSenders;a.splice(0,a.length),this.emit(b.FeedsChanged,this.feeds);var s,u=o(e.getTracks());try{for(u.s();!(s=u.n()).done;){var c=s.value;S.logger.info("Adding track ("+'id="'.concat(c.id,'", ')+'kind="'.concat(c.kind,'", ')+'streamId="'.concat(e.id,'", ')+'streamPurpose="'.concat(t,'"')+") to peer connection"),a.push(this.peerConn.addTrack(c,e))}}catch(l){u.e(l)}finally{u.f()}}S.logger.info('Pushed local stream (id="'.concat(e.id,'", active="').concat(e.active,'", purpose="').concat(t,'")'))}},{key:"deleteAllFeeds",value:function(){var e,t=o(this.feeds);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(r){t.e(r)}finally{t.f()}this.feeds=[],this.emit(b.FeedsChanged,this.feeds)}},{key:"deleteFeedByStream",value:function(e){S.logger.debug("Removing feed with stream id ".concat(e.id));var t=this.getFeedByStreamId(e.id);t?(t.dispose(),this.feeds.splice(this.feeds.indexOf(t),1),this.emit(b.FeedsChanged,this.feeds)):S.logger.warn("Didn't find the feed with stream id ".concat(e.id," to delete"))}},{key:"getCurrentCallStats",value:function(){var e=a(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callHasEnded()){e.next=2;break}return e.abrupt("return",this.callStatsAtEnd);case 2:return e.abrupt("return",this.collectCallStats());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"collectCallStats",value:function(){var e=a(d().mark((function e(){var t,r,n,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConn){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.peerConn.getStats();case 4:t=e.sent,r=[],n=o(t);try{for(n.s();!(i=n.n()).done;)a=i.value,r.push(a[1])}catch(s){n.e(s)}finally{n.f()}return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initWithInvite",value:function(){var e=a(d().mark((function e(t){var r,n,i,o,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getContent(),this.direction=g.Inbound,e.next=4,this.client.checkTurnServers();case 4:return e.sent||S.logger.warn("Failed to get TURN credentials! Proceeding with call anyway..."),(i=n[O.SDPStreamMetadataKey])?this.updateRemoteSDPStreamMetadata(i):S.logger.debug("Did not get any SDPStreamMetadata! Can not send/receive multiple streams"),this.peerConn=this.createPeerConnection(),this.chooseOpponent(t),e.prev=10,e.next=13,this.peerConn.setRemoteDescription(n.offer);case 13:return e.next=15,this.addBufferedIceCandidates();case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(10),S.logger.debug("Failed to set remote description",e.t0),this.terminate(m.Local,w.SetRemoteDescription,!1),e.abrupt("return");case 22:if((o=null===(r=this.feeds.find((function(e){return!e.isLocal()})))||void 0===r?void 0:r.stream)&&0!==o.getTracks().length){e.next=27;break}return S.logger.error("No remote stream or no tracks after setting remote description!"),this.terminate(m.Local,w.SetRemoteDescription,!1),e.abrupt("return");case 27:this.setState(v.Ringing),t.getLocalAge()&&setTimeout((function(){a.state==v.Ringing&&(S.logger.debug("Call invite has expired. Hanging up."),a.hangupParty=m.Remote,a.setState(v.Ended),a.stopAllMedia(),"closed"!=a.peerConn.signalingState&&a.peerConn.close(),a.emit(b.Hangup))}),n.lifetime-t.getLocalAge());case 29:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initWithHangup",value:function(e){this.setState(v.Ended)}},{key:"shouldAnswerWithMediaType",value:function(e,t,r){return e&&!t?(S.logger.warn("Unable to answer with ".concat(r," because the other side isn't sending it either.")),!1):x.isNullOrUndefined(e)||e===t||this.opponentSupportsSDPStreamMetadata()?null!==e&&void 0!==e?e:t:(S.logger.warn("Unable to answer with ".concat(r,"=").concat(e," because the other side doesn't support it. ")+"Answering with ".concat(r,"=").concat(t,".")),t)}},{key:"answer",value:function(){var e=a(d().mark((function e(t,r){var n,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inviteOrAnswerSent){e.next=2;break}return e.abrupt("return");case 2:if(!1!==t||!1!==r){e.next=4;break}throw new Error("You CANNOT answer a call without media");case 4:if(S.logger.debug("Answering call ".concat(this.callId)),this.localUsermediaStream||this.waitForLocalAVStream){e.next=33;break}return n=this.state,i=this.shouldAnswerWithMediaType(t,this.hasRemoteUserMediaAudioTrack,"audio"),o=this.shouldAnswerWithMediaType(r,this.hasRemoteUserMediaVideoTrack,"video"),this.setState(v.WaitLocalMedia),this.waitForLocalAVStream=!0,e.prev=11,e.next=14,this.client.getMediaHandler().getUserMediaStream(i,o);case 14:a=e.sent,this.waitForLocalAVStream=!1,this.gotUserMediaForAnswer(a),e.next=31;break;case 19:if(e.prev=19,e.t0=e.catch(11),!o){e.next=29;break}return S.logger.warn("Failed to getUserMedia(), trying to getUserMedia() without video"),this.setState(n),this.waitForLocalAVStream=!1,e.next=27,this.answer(i,!1);case 27:e.next=31;break;case 29:return this.getUserMediaFailed(e.t0),e.abrupt("return");case 31:e.next=34;break;case 33:this.waitForLocalAVStream&&this.setState(v.WaitLocalMedia);case 34:case"end":return e.stop()}}),e,this,[[11,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"replacedBy",value:function(e){this.state===v.WaitLocalMedia?(S.logger.debug("Telling new call to wait for local media"),e.waitForLocalAVStream=!0):[v.CreateOffer,v.InviteSent].includes(this.state)&&(S.logger.debug("Handing local stream to new call"),e.gotUserMediaForAnswer(this.localUsermediaStream)),this.successor=e,this.emit(b.Replaced,e),this.hangup(w.Replaced,!0)}},{key:"hangup",value:function(e,t){if(!this.callHasEnded()&&(S.logger.debug("Ending call "+this.callId),this.terminate(m.Local,e,!t),this.state!==v.WaitLocalMedia)){var r={};(this.opponentVersion&&this.opponentVersion>=1||e!==w.UserHangup)&&(r.reason=e),this.sendVoipEvent(_.EventType.CallHangup,r)}}},{key:"reject",value:function(){if(this.state!==v.Ringing)throw Error("Call must be in 'ringing' state to reject!");if(this.opponentVersion<1)return S.logger.info("Opponent version is less than 1 (".concat(this.opponentVersion,"): sending hangup instead of reject")),void this.hangup(w.UserHangup,!0);S.logger.debug("Rejecting call: "+this.callId),this.terminate(m.Local,w.UserHangup,!0),this.sendVoipEvent(_.EventType.CallReject,{})}},{key:"upgradeCall",value:function(){var e=a(d().mark((function e(t,r){var n,i,o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||r){e.next=2;break}return e.abrupt("return");case 2:if(this.opponentSupportsSDPStreamMetadata()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,n=t&&!this.hasLocalUserMediaAudioTrack,i=r&&!this.hasLocalUserMediaVideoTrack,S.logger.debug("Upgrading call: audio?=".concat(n," video?=").concat(i)),e.next=10,this.client.getMediaHandler().getUserMediaStream(n,i);case 10:if(o=e.sent,!n||!i){e.next=19;break}if(!this.hasLocalUserMediaAudioTrack){e.next=14;break}return e.abrupt("return");case 14:if(!this.hasLocalUserMediaVideoTrack){e.next=16;break}return e.abrupt("return");case 16:this.pushLocalFeed(o,O.SDPStreamMetadataPurpose.Usermedia),e.next=33;break;case 19:if(!n){e.next=27;break}if(!this.hasLocalUserMediaAudioTrack){e.next=22;break}return e.abrupt("return");case 22:a=o.getAudioTracks()[0],this.localUsermediaStream.addTrack(a),this.peerConn.addTrack(a,this.localUsermediaStream),e.next=33;break;case 27:if(!i){e.next=33;break}if(!this.hasLocalUserMediaVideoTrack){e.next=30;break}return e.abrupt("return");case 30:s=o.getVideoTracks()[0],this.localUsermediaStream.addTrack(s),this.peerConn.addTrack(s,this.localUsermediaStream);case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(4),S.logger.error("Failed to upgrade the call",e.t0),this.emit(b.Error,new R(w.NoUserMedia,"Failed to get camera access: ",e.t0));case 39:case"end":return e.stop()}}),e,this,[[4,35]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"opponentSupportsSDPStreamMetadata",value:function(){return Boolean(this.remoteSDPStreamMetadata)}},{key:"isScreensharing",value:function(){return Boolean(this.localScreensharingStream)}},{key:"setScreensharingEnabled",value:function(){var e=a(d().mark((function e(t,r){var n,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!this.isScreensharing()){e.next=5;break}return S.logger.warn("There is already a screensharing stream - there is nothing to do!"),e.abrupt("return",!0);case 5:if(t||this.isScreensharing()){e.next=8;break}return S.logger.warn("There already isn't a screensharing stream - there is nothing to do!"),e.abrupt("return",!1);case 8:if(this.opponentSupportsSDPStreamMetadata()){e.next=12;break}return e.next=11,this.setScreensharingEnabledWithoutMetadataSupport(t,r);case 11:return e.abrupt("return",e.sent);case 12:if(S.logger.debug("Set screensharing enabled? ".concat(t)),!t){e.next=30;break}return e.prev=14,e.next=17,this.client.getMediaHandler().getScreensharingStream(r);case 17:if(n=e.sent){e.next=20;break}return e.abrupt("return",!1);case 20:return this.pushLocalFeed(n,O.SDPStreamMetadataPurpose.Screenshare),e.abrupt("return",!0);case 24:return e.prev=24,e.t0=e.catch(14),this.emit(b.Error,new R(w.NoUserMedia,"Failed to get screen-sharing stream: ",e.t0)),e.abrupt("return",!1);case 28:e.next=35;break;case 30:i=o(this.screensharingSenders);try{for(i.s();!(a=i.n()).done;)s=a.value,this.peerConn.removeTrack(s)}catch(u){i.e(u)}finally{i.f()}return this.client.getMediaHandler().stopScreensharingStream(this.localScreensharingStream),this.deleteFeedByStream(this.localScreensharingStream),e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this,[[14,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setScreensharingEnabledWithoutMetadataSupport",value:function(){var e=a(d().mark((function e(t,r){var n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.logger.debug("Set screensharing enabled? ".concat(t," using replaceTrack()")),!t){e.next=21;break}return e.prev=2,e.next=5,this.client.getMediaHandler().getScreensharingStream(r);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:return i=n.getTracks().find((function(e){return"video"===e.kind})),this.usermediaSenders.find((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)})).replaceTrack(i),this.pushLocalFeed(n,O.SDPStreamMetadataPurpose.Screenshare,!1),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(2),this.emit(b.Error,new R(w.NoUserMedia,"Failed to get screen-sharing stream: ",e.t0)),e.abrupt("return",!1);case 19:e.next=27;break;case 21:return o=this.localUsermediaStream.getTracks().find((function(e){return"video"===e.kind})),this.usermediaSenders.find((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)})).replaceTrack(o),this.client.getMediaHandler().stopScreensharingStream(this.localScreensharingStream),this.deleteFeedByStream(this.localScreensharingStream),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setLocalVideoMuted",value:function(){var e=a(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getMediaHandler().hasVideoDevice();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",this.isLocalVideoMuted());case 4:if(this.hasLocalUserMediaVideoTrack||t){e.next=8;break}return e.next=7,this.upgradeCall(!1,!0);case 7:return e.abrupt("return",this.isLocalVideoMuted());case 8:return null===(r=this.localUsermediaFeed)||void 0===r||r.setVideoMuted(t),this.updateMuteStatus(),e.abrupt("return",this.isLocalVideoMuted());case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isLocalVideoMuted",value:function(){var e;return null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.isVideoMuted()}},{key:"setMicrophoneMuted",value:function(){var e=a(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getMediaHandler().hasAudioDevice();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",this.isMicrophoneMuted());case 4:if(this.hasLocalUserMediaAudioTrack||t){e.next=8;break}return e.next=7,this.upgradeCall(!0,!1);case 7:return e.abrupt("return",this.isMicrophoneMuted());case 8:return null===(r=this.localUsermediaFeed)||void 0===r||r.setAudioMuted(t),this.updateMuteStatus(),e.abrupt("return",this.isMicrophoneMuted());case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isMicrophoneMuted",value:function(){var e;return null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.isAudioMuted()}},{key:"isRemoteOnHold",value:function(){return this.remoteOnHold}},{key:"setRemoteOnHold",value:function(e){if(this.isRemoteOnHold()!==e){this.remoteOnHold=e;var t,r=o(this.peerConn.getTransceivers());try{for(r.s();!(t=r.n()).done;){t.value.direction=e?"sendonly":"sendrecv"}}catch(n){r.e(n)}finally{r.f()}this.updateMuteStatus(),this.emit(b.RemoteHoldUnhold,this.remoteOnHold)}}},{key:"isLocalOnHold",value:function(){if(this.state!==v.Connected)return!1;var e,t=!0,r=o(this.peerConn.getTransceivers());try{for(r.s();!(e=r.n()).done;){var n=e.value;["inactive","recvonly"].includes(n.currentDirection)||(t=!1)}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"sendDtmfDigit",value:function(e){var t,r=o(this.peerConn.getSenders());try{for(r.s();!(t=r.n()).done;){var n=t.value;if("audio"===n.track.kind&&n.dtmf)return void n.dtmf.insertDTMF(e)}}catch(i){r.e(i)}finally{r.f()}throw new Error("Unable to find a track to send DTMF on")}},{key:"updateMuteStatus",value:function(){var e,t;this.sendVoipEvent(_.EventType.CallSDPStreamMetadataChangedPrefix,i({},O.SDPStreamMetadataKey,this.getLocalSDPStreamMetadata()));var r=(null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.isAudioMuted())||this.remoteOnHold,n=(null===(t=this.localUsermediaFeed)||void 0===t?void 0:t.isVideoMuted())||this.remoteOnHold;C(this.localUsermediaStream.getAudioTracks(),!r),C(this.localUsermediaStream.getVideoTracks(),!n)}},{key:"sendAnswer",value:function(){var e=a(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i({answer:{sdp:this.peerConn.localDescription.sdp,type:this.peerConn.localDescription.type}},O.SDPStreamMetadataKey,this.getLocalSDPStreamMetadata())).capabilities={"m.call.transferee":this.client.supportsCallTransfer,"m.call.dtmf":!1},S.logger.info("Discarding ".concat(this.candidateSendQueue.length," candidates that will be sent in answer")),this.candidateSendQueue=[],e.prev=4,e.next=7,this.sendVoipEvent(_.EventType.CallAnswer,t);case 7:this.inviteOrAnswerSent=!0,e.next=19;break;case 10:throw e.prev=10,e.t0=e.catch(4),this.setState(v.Ringing),this.client.cancelPendingEvent(e.t0.event),r=w.SendAnswer,n="Failed to send answer","UnknownDeviceError"==e.t0.name&&(r=w.UnknownDevices,n="Unknown devices present in the room"),this.emit(b.Error,new R(r,n,e.t0)),e.t0;case 19:this.sendCandidateQueue();case 20:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"onRemoteIceCandidatesReceived",value:function(){var e=a(d().mark((function e(t){var r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callHasEnded()){e.next=2;break}return e.abrupt("return");case 2:if(r=t.getContent(),i=r.candidates){e.next=7;break}return S.logger.info("Ignoring candidates event with no candidates!"),e.abrupt("return");case 7:if(o=0===r.version?null:r.party_id||null,void 0!==this.opponentPartyId){e.next=14;break}return S.logger.info("Buffering ".concat(i.length," candidates until we pick an opponent")),(a=this.remoteCandidateBuffer.get(o)||[]).push.apply(a,n(i)),this.remoteCandidateBuffer.set(o,a),e.abrupt("return");case 14:if(this.partyIdMatches(r)){e.next=17;break}return S.logger.info("Ignoring candidates from party ID ".concat(r.party_id,": ")+"we have chosen party ID ".concat(this.opponentPartyId)),e.abrupt("return");case 17:return e.next=19,this.addIceCandidates(i);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAnswerReceived",value:function(){var e=a(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getContent(),S.logger.debug("Got answer for call ID ".concat(this.callId," from party ID ").concat(r.party_id)),!this.callHasEnded()){e.next=5;break}return S.logger.debug("Ignoring answer because call ID ".concat(this.callId," has ended")),e.abrupt("return");case 5:if(void 0===this.opponentPartyId){e.next=8;break}return S.logger.info("Ignoring answer from party ID ".concat(r.party_id,": ")+"we already have an answer/reject from ".concat(this.opponentPartyId)),e.abrupt("return");case 8:return this.chooseOpponent(t),e.next=11,this.addBufferedIceCandidates();case 11:return this.setState(v.Connecting),(n=r[O.SDPStreamMetadataKey])?this.updateRemoteSDPStreamMetadata(n):S.logger.warn("Did not get any SDPStreamMetadata! Can not send/receive multiple streams"),e.prev=14,e.next=17,this.peerConn.setRemoteDescription(r.answer);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(14),S.logger.debug("Failed to set remote description",e.t0),this.terminate(m.Local,w.SetRemoteDescription,!1),e.abrupt("return");case 24:if(null===this.opponentPartyId){e.next=33;break}return e.prev=25,e.next=28,this.sendVoipEvent(_.EventType.CallSelectAnswer,{selected_party_id:this.opponentPartyId});case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(25),S.logger.warn("Failed to send select_answer event",e.t1);case 33:case"end":return e.stop()}}),e,this,[[14,19],[25,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSelectAnswerReceived",value:function(){var e=a(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.direction===g.Inbound){e.next=3;break}return S.logger.warn("Got select_answer for an outbound call: ignoring"),e.abrupt("return");case 3:if(void 0!==(r=t.getContent().selected_party_id)&&null!==r){e.next=7;break}return S.logger.warn("Got nonsensical select_answer with null/undefined selected_party_id: ignoring"),e.abrupt("return");case 7:r!==this.ourPartyId&&(S.logger.info("Got select_answer for party ID ".concat(r,": we are party ID ").concat(this.ourPartyId,".")),this.terminate(m.Remote,w.AnsweredElsewhere,!0));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onNegotiateReceived",value:function(){var e=a(d().mark((function e(t){var r,n,o,a,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getContent(),(n=r.description)&&n.sdp&&n.type){e.next=5;break}return S.logger.info("Ignoring invalid m.call.negotiate event"),e.abrupt("return");case 5:if(o=this.direction===g.Inbound,a="offer"===n.type&&(this.makingOffer||"stable"!==this.peerConn.signalingState),this.ignoreOffer=!o&&a,!this.ignoreOffer){e.next=11;break}return S.logger.info("Ignoring colliding negotiate event because we're impolite"),e.abrupt("return");case 11:return s=this.isLocalOnHold(),(u=r[O.SDPStreamMetadataKey])?this.updateRemoteSDPStreamMetadata(u):S.logger.warn("Received negotiation event without SDPStreamMetadata!"),e.prev=14,e.next=17,this.peerConn.setRemoteDescription(n);case 17:if("offer"!==n.type){e.next=25;break}return this.getRidOfRTXCodecs(),e.next=21,this.peerConn.createAnswer();case 21:return c=e.sent,e.next=24,this.peerConn.setLocalDescription(c);case 24:this.sendVoipEvent(_.EventType.CallNegotiate,i({description:this.peerConn.localDescription},O.SDPStreamMetadataKey,this.getLocalSDPStreamMetadata()));case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(14),S.logger.warn("Failed to complete negotiation",e.t0);case 30:l=this.isLocalOnHold(),s!==l&&(this.emit(b.LocalHoldUnhold,l),this.emit(b.HoldUnhold,l));case 32:case"end":return e.stop()}}),e,this,[[14,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRemoteSDPStreamMetadata",value:function(e){this.remoteSDPStreamMetadata=x.recursivelyAssign(this.remoteSDPStreamMetadata||{},e,!0);var t,r=o(this.getRemoteFeeds());try{for(r.s();!(t=r.n()).done;){var n,i,a,s=t.value,u=s.stream.id;s.setAudioMuted(null===(n=this.remoteSDPStreamMetadata[u])||void 0===n?void 0:n.audio_muted),s.setVideoMuted(null===(i=this.remoteSDPStreamMetadata[u])||void 0===i?void 0:i.video_muted),s.purpose=null===(a=this.remoteSDPStreamMetadata[u])||void 0===a?void 0:a.purpose}}catch(c){r.e(c)}finally{r.f()}}},{key:"onSDPStreamMetadataChangedReceived",value:function(e){var t=e.getContent()[O.SDPStreamMetadataKey];this.updateRemoteSDPStreamMetadata(t)}},{key:"onAssertedIdentityReceived",value:function(){var e=a(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.getContent()).asserted_identity){e.next=3;break}return e.abrupt("return");case 3:this.remoteAssertedIdentity={id:r.asserted_identity.id,displayName:r.asserted_identity.display_name},this.emit(b.AssertedIdentityChanged);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callHasEnded",value:function(){return this.state===v.Ended}},{key:"getRidOfRTXCodecs",value:function(){if(RTCRtpReceiver.getCapabilities&&RTCRtpSender.getCapabilities){var e,t=RTCRtpReceiver.getCapabilities("video").codecs,r=RTCRtpSender.getCapabilities("video").codecs,i=[].concat(n(r),n(t)),a=o(i);try{for(a.s();!(e=a.n()).done;){var s=e.value;if("video/rtx"===s.mimeType){var u=i.indexOf(s);i.splice(u,1)}}}catch(p){a.e(p)}finally{a.f()}var c,l=o(this.peerConn.getTransceivers());try{for(l.s();!(c=l.n()).done;){var f,h,d=c.value;!this.screensharingSenders.includes(d.sender)||"video"!==(null===(f=d.sender.track)||void 0===f?void 0:f.kind)&&"video"!==(null===(h=d.receiver.track)||void 0===h?void 0:h.kind)||d.setCodecPreferences(i)}}catch(p){l.e(p)}finally{l.f()}}}},{key:"setState",value:function(e){var t=this.state;this.state=e,this.emit(b.State,e,t)}},{key:"sendVoipEvent",value:function(e,t){return this.client.sendEvent(this.roomId,e,Object.assign({},t,{version:1,call_id:this.callId,party_id:this.ourPartyId}))}},{key:"queueCandidate",value:function(e){var t=this;if(this.candidateSendQueue.push(e),this.state!==v.Ringing&&this.inviteOrAnswerSent){var r=this.direction===g.Inbound?500:2e3;0===this.candidateSendTries&&setTimeout((function(){t.sendCandidateQueue()}),r)}}},{key:"transfer",value:function(){var e=a(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getProfileInfo(t);case 2:return r=e.sent,n=I(),i={replacement_id:I(),target_user:{id:t,display_name:r.displayname,avatar_url:r.avatar_url},create_call:n},e.next=7,this.sendVoipEvent(_.EventType.CallReplaces,i);case 7:return e.next=9,this.terminate(m.Local,w.Transfered,!0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferToCall",value:function(){var e=a(d().mark((function e(t){var r,n,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getProfileInfo(t.getOpponentMember().userId);case 2:return r=e.sent,e.next=5,this.client.getProfileInfo(this.getOpponentMember().userId);case 5:return n=e.sent,i=I(),o={replacement_id:I(),target_user:{id:this.getOpponentMember().userId,display_name:n.displayname,avatar_url:n.avatar_url},await_call:i},e.next=10,t.sendVoipEvent(_.EventType.CallReplaces,o);case 10:return a={replacement_id:I(),target_user:{id:t.getOpponentMember().userId,display_name:r.displayname,avatar_url:r.avatar_url},create_call:i},e.next=13,this.sendVoipEvent(_.EventType.CallReplaces,a);case 13:return e.next=15,this.terminate(m.Local,w.Replaced,!0);case 15:return e.next=17,t.terminate(m.Local,w.Transfered,!0);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"terminate",value:function(){var e=a(d().mark((function e(t,r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.callHasEnded()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.collectCallStats();case 4:this.callStatsAtEnd=e.sent,this.inviteTimeout&&(clearTimeout(this.inviteTimeout),this.inviteTimeout=null),this.callLengthInterval&&(clearInterval(this.callLengthInterval),this.callLengthInterval=null),r!==w.Replaced&&this.stopAllMedia(),this.deleteAllFeeds(),this.hangupParty=t,this.hangupReason=r,this.setState(v.Ended),this.peerConn&&"closed"!==this.peerConn.signalingState&&this.peerConn.close(),n&&this.emit(b.Hangup,this);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"stopAllMedia",value:function(){S.logger.debug("stopAllMedia (stream=".concat(this.localUsermediaStream,")"));var e,t=o(this.feeds);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.isLocal()&&r.purpose===O.SDPStreamMetadataPurpose.Usermedia)this.client.getMediaHandler().stopUserMediaStream(r.stream);else if(r.isLocal()&&r.purpose===O.SDPStreamMetadataPurpose.Screenshare)this.client.getMediaHandler().stopScreensharingStream(r.stream);else{var n,i=o(r.stream.getTracks());try{for(i.s();!(n=i.n()).done;){n.value.stop()}}catch(a){i.e(a)}finally{i.f()}}}}catch(a){t.e(a)}finally{t.f()}}},{key:"checkForErrorListener",value:function(){if(0===this.listeners("error").length)throw new Error("You MUST attach an error listener using call.on('error', function() {})")}},{key:"sendCandidateQueue",value:function(){var e=a(d().mark((function e(){var t,r,i,o,a,s=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.candidateSendQueue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.candidateSendQueue,this.candidateSendQueue=[],++this.candidateSendTries,r={candidates:t},S.logger.debug("Attempting to send "+t.length+" candidates"),e.prev=7,e.next=10,this.sendVoipEvent(_.EventType.CallCandidates,r);case 10:this.candidateSendTries=0,e.next=28;break;case 13:if(e.prev=13,e.t0=e.catch(7),e.t0.event&&this.client.cancelPendingEvent(e.t0.event),(i=this.candidateSendQueue).push.apply(i,n(t)),!(this.candidateSendTries>5)){e.next=24;break}return S.logger.debug("Failed to send candidates on attempt "+this.candidateSendTries+". Giving up on this call.",e.t0),o=w.SignallingFailed,"Signalling failed",this.emit(b.Error,new R(o,"Signalling failed",e.t0)),this.hangup(o,!1),e.abrupt("return");case 24:a=500*Math.pow(2,this.candidateSendTries),++this.candidateSendTries,S.logger.debug("Failed to send candidates. Retrying in "+a+"ms",e.t0),setTimeout((function(){s.sendCandidateQueue()}),a);case 28:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"placeCall",value:function(){var e=a(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.logger.debug("placeCall audio=".concat(t," video=").concat(r)),t){e.next=3;break}throw new Error("You CANNOT start a call without audio");case 3:return this.checkForErrorListener(),this.client.callEventHandler.calls.set(this.callId,this),this.setState(v.WaitLocalMedia),this.direction=g.Outbound,e.next=9,this.client.checkTurnServers();case 9:return e.sent||S.logger.warn("Failed to get TURN credentials! Proceeding with call anyway..."),this.peerConn=this.createPeerConnection(),e.prev=12,e.next=15,this.client.getMediaHandler().getUserMediaStream(t,r);case 15:n=e.sent,this.gotUserMediaForInvite(n),e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(12),this.getUserMediaFailed(e.t0),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this,[[12,19]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createPeerConnection",value:function(){var e=new window.RTCPeerConnection({iceTransportPolicy:this.forceTURN?"relay":void 0,iceServers:this.turnServers,iceCandidatePoolSize:this.client.iceCandidatePoolSize});return e.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChanged),e.addEventListener("signalingstatechange",this.onSignallingStateChanged),e.addEventListener("icecandidate",this.gotLocalIceCandidate),e.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),e.addEventListener("track",this.onTrack),e.addEventListener("negotiationneeded",this.onNegotiationNeeded),e.addEventListener("datachannel",this.onDataChannel),e}},{key:"partyIdMatches",value:function(e){return(0===e.version?null:e.party_id||null)===this.opponentPartyId}},{key:"chooseOpponent",value:function(e){var t=e.getContent();S.logger.debug("Choosing party ID ".concat(t.party_id," for call ID ").concat(this.callId)),this.opponentVersion=t.version,0===this.opponentVersion?this.opponentPartyId=null:this.opponentPartyId=t.party_id||null,this.opponentCaps=t.capabilities||{},this.opponentMember=e.sender}},{key:"addBufferedIceCandidates",value:function(){var e=a(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.remoteCandidateBuffer.get(this.opponentPartyId))){e.next=5;break}return S.logger.info("Adding ".concat(t.length," buffered candidates for opponent ").concat(this.opponentPartyId)),e.next=5,this.addIceCandidates(t);case 5:this.remoteCandidateBuffer=null;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addIceCandidates",value:function(){var e=a(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=19;break}if(null!==(i=n.value).sdpMid&&void 0!==i.sdpMid||null!==i.sdpMLineIndex&&void 0!==i.sdpMLineIndex){e.next=8;break}return S.logger.debug("Ignoring remote ICE candidate with no sdpMid or sdpMLineIndex"),e.abrupt("continue",17);case 8:return S.logger.debug("Call "+this.callId+" got remote ICE "+i.sdpMid+" candidate: "+i.candidate),e.prev=9,e.next=12,this.peerConn.addIceCandidate(i);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),this.ignoreOffer||S.logger.info("Failed to add remote ICE candidate",e.t0);case 17:e.next=3;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),r.e(e.t1);case 24:return e.prev=24,r.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[1,21,24,27],[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"hasPeerConnection",get:function(){return Boolean(this.peerConn)}}]),r}(E.EventEmitter);function C(e,t){for(var r=0;r<e.length;r++)e[r].enabled=t}t.SendingNetworkCall=L},function(e,t,r){"use strict";(function(e){var n=r(9),i=r(2),o=r(1),a=r(14),s=r(15),u=r(37);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SendingNetworkError=t.PREFIX_UNSTABLE=t.PREFIX_R0=t.PREFIX_MEDIA_R0=t.PREFIX_IDENTITY_V2=t.PREFIX_IDENTITY_V1=t.ConnectionError=t.AbortError=void 0,t.SendingNetworkHttpApi=w,t.retryNetworkOperation=function(e,t){return _.apply(this,arguments)};var f=l(r(4)),h=r(256),d=g(r(19)),p=r(8),v=g(r(257));function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.PREFIX_R0="/_api/client/r0";t.PREFIX_UNSTABLE="/_api/client/unstable";t.PREFIX_IDENTITY_V1="/_api/identity/api/v1";t.PREFIX_IDENTITY_V2="/_api/identity/v2";function w(e,t){d.checkObjectHasKeys(t,["baseUrl","request","prefix"]),t.onlyData=t.onlyData||!1,this.event_emitter=e,this.opts=t,this.useAuthorizationHeader=Boolean(t.useAuthorizationHeader),this.uploads=[]}t.PREFIX_MEDIA_R0="/_api/media/r0",w.prototype={setIdBaseUrl:function(e){this.opts.idBaseUrl=e},getContentUri:function(){var e={access_token:this.opts.accessToken};return{base:this.opts.baseUrl,path:"/_api/media/r0/upload",params:e}},uploadContent:function(t,r){d.isFunction(r)?r={callback:r}:void 0===r&&(r={});var n=!1!==r.includeFilename,i=r.type||t.type||"application/octet-stream",o=r.name||t.name,a=t;a.stream&&"function"!==typeof a.stream&&(p.logger.warn("Using `file.stream` as the content to upload. Future versions of the js-sdk will change this to expect `file` to be the content directly."),a=a.stream);var s=r.rawResponse;void 0===s&&(e.XMLHttpRequest?s=!1:(p.logger.warn("Returning the raw JSON from uploadContent(). Future versions of the js-sdk will change this default, to return the parsed object. Set opts.rawResponse=false to change this behaviour now."),s=!0));var u=r.onlyContentUri;s||void 0!==u||(e.XMLHttpRequest?(p.logger.warn("Returning only the content-uri from uploadContent(). Future versions of the js-sdk will change this default, to return the whole response object. Set opts.onlyContentUri=false to change this behaviour now."),u=!0):u=!1);var c,l={loaded:0,total:0},f=null;if(s||(f=function(e){var t=JSON.parse(e);if(u&&void 0===(t=t.content_uri))throw Error("Bad response");return t}),e.XMLHttpRequest){var h=d.defer(),y=new e.XMLHttpRequest;l.xhr=y;var g=k(h,r.callback,this.opts.onlyData),m=function(){y.abort(),g(new Error("Timeout"))};y.timeout_timer=v.setTimeout(m,3e4),y.onreadystatechange=function(){var t;switch(y.readyState){case e.XMLHttpRequest.DONE:v.clearTimeout(y.timeout_timer);try{if(0===y.status)throw new x;if(!y.responseText)throw new Error("No response body.");t=y.responseText,f&&(t=f(t))}catch(r){return r.http_status=y.status,void g(r)}g(void 0,y,t)}},y.upload.addEventListener("progress",(function(e){v.clearTimeout(y.timeout_timer),l.loaded=e.loaded,l.total=e.total,y.timeout_timer=v.setTimeout(m,3e4),r.progressHandler&&r.progressHandler({loaded:e.loaded,total:e.total})}));var b=this.opts.baseUrl+"/_api/media/r0/upload",w=[];n&&o&&w.push("filename="+encodeURIComponent(o)),this.useAuthorizationHeader||w.push("access_token="+encodeURIComponent(this.opts.accessToken)),w.length>0&&(b+="?"+w.join("&")),y.open("POST",b),this.useAuthorizationHeader&&y.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),y.setRequestHeader("Content-Type",i),y.send(a),(c=h.promise).abort=y.abort.bind(y)}else{var S={};n&&o&&(S.filename=o),c=this.authedRequest(r.callback,"POST","/upload",S,a,{prefix:"/_api/media/r0",headers:{"Content-Type":i},json:!1,bodyParser:f})}var E=this,_=c.finally((function(){for(var e=0;e<E.uploads.length;++e)if(E.uploads[e]===l)return void E.uploads.splice(e,1)}));return _.abort=c.abort,l.promise=_,this.uploads.push(l),_},cancelUpload:function(e){return!!e.abort&&(e.abort(),!0)},getCurrentUploads:function(){return this.uploads},idServerRequest:function(e,t,r,n,i,o){if(!this.opts.idBaseUrl)throw new Error("No identity server base URL set");var a=this.opts.idBaseUrl+i+r;if(void 0!==e&&!d.isFunction(e))throw Error("Expected callback to be a function but got "+typeof e);var s={uri:a,method:t,withCredentials:!1,json:!0,_sendingnetwork_opts:this.opts,headers:{}};"GET"===t?s.qs=n:"object"===typeof n&&(s.json=n),o&&(s.headers.Authorization="Bearer ".concat(o));var u=d.defer();return this.opts.request(s,k(u,e,this.opts.onlyData)),u.promise},authedRequest:function(e,t,r,n,i,o){n||(n={}),this.useAuthorizationHeader?(isFinite(o)&&(o={localTimeoutMs:o}),o||(o={}),o.headers||(o.headers={}),o.headers.Authorization||(o.headers.Authorization="Bearer "+this.opts.accessToken),n.access_token&&delete n.access_token):n.access_token||(n.access_token=this.opts.accessToken);var a=this.request(e,t,r,n,i,o),s=this;return a.catch((function(e){"M_UNKNOWN_TOKEN"==e.errcode?s.event_emitter.emit("Session.logged_out",e):"M_CONSENT_NOT_GIVEN"==e.errcode&&s.event_emitter.emit("no_consent",e.message,e.data.consent_uri)})),a},request:function(e,t,r,n,i,o){var a=void 0!==(o=o||{}).prefix?o.prefix:this.opts.prefix,s=this.opts.baseUrl+a+r;return this.requestOtherUrl(e,t,s,n,i,o)},requestOtherUrl:function(e,t,r,n,i,o){return void 0===o||null===o?o={}:isFinite(o)&&(o={localTimeoutMs:o}),this._request(e,t,r,n,i,o)},getUrl:function(e,t,r){var n="";return t&&(n="?"+d.encodeParams(t)),this.opts.baseUrl+r+e+n},_request:function(e,t,r,n,i,o){if(void 0!==e&&!d.isFunction(e))throw Error("Expected callback to be a function but got "+typeof e);o=o||{};var a=this;this.opts.extraParams&&(n=b(b({},n),this.opts.extraParams));var s=d.extend({},o.headers||{}),u=void 0===o.json||o.json,c=o.bodyParser;u&&(i&&(i=JSON.stringify(i),s["content-type"]="application/json"),s.accept||(s.accept="application/json"),void 0===c&&(c=function(e){return JSON.parse(e)}));var l,f,h=d.defer(),p=!1,y=o.localTimeoutMs||this.opts.localTimeoutMs,g=function(){y&&(l&&v.clearTimeout(l),l=v.setTimeout((function(){p=!0,f&&f.abort&&f.abort(),h.reject(new S({error:"Locally timed out waiting for a response",errcode:"ORG.SENDINGNETWORK.JSSDK_TIMEOUT",timeout:y}))}),y))};g();var m=h.promise;try{(f=this.opts.request({uri:r,method:t,withCredentials:!1,qs:n,qsStringifyOptions:o.qsStringifyOptions,useQuerystring:!0,body:i,json:!1,timeout:y,headers:s||{},_sendingnetwork_opts:this.opts},(function(t,r,n){y&&(v.clearTimeout(l),p)||k(h,e,a.opts.onlyData,c)(t,r,n)})))&&("onprogress"in f&&(f.onprogress=function(e){g()}),f.abort&&(m.abort=f.abort.bind(f)))}catch(w){h.reject(w),e&&e(w)}return m}};var k=function(e,t,r,n){return t=t||function(){},function(i,o,a){i&&("AbortError"===i.name||"aborted"===i||i instanceof S||(i=new E("request failed",i)));if(!i)try{(o.status||o.statusCode)>=400?i=function(e,t){var r,n=e.status||e.statusCode,i=function(e){var t;e.getResponseHeader?t=e.getResponseHeader("Content-Type"):e.headers&&(t=e.headers["content-type"]||null);if(!t)return null;try{return(0,h.parse)(t)}catch(r){throw new Error("Error parsing Content-Type '".concat(t,"': ").concat(r))}}(e);if(i)if("application/json"===i.type){var o="object"===typeof t?t:JSON.parse(t);r=new S(o)}else"text/plain"===i.type&&(r=new Error("Server returned ".concat(n," error: ").concat(t)));r||(r=new Error("Server returned ".concat(n," error")));return r.httpStatus=n,r}(o,a):n&&(a=n(a))}catch(u){i=new Error("Error parsing server response: ".concat(u))}if(i)e.reject(i),t(i);else{var s={code:o.status||o.statusCode,headers:o.headers,data:a};e.resolve(r?a:s),t(null,r?a:s)}}};var S=function(e){a(r,e);var t=s(r);function r(e){var n;return o(this,r),e=e||{},(n=t.call(this,"SendingNetworkError: ".concat(e.errcode))).errcode=e.errcode,n.name=e.errcode||"Unknown error code",n.message=e.error||"Unknown message",n.data=e,n}return i(r)}(u(Error));t.SendingNetworkError=S;var E=function(e){a(r,e);var t=s(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return o(this,r),(n=t.call(this,e+(i?": ".concat(i.message):"")))._cause=i,n}return i(r,[{key:"name",get:function(){return"ConnectionError"}},{key:"cause",get:function(){return this._cause}}]),r}(u(Error));t.ConnectionError=E;var x=function(e){a(r,e);var t=s(r);function r(){return o(this,r),t.call(this,"Operation aborted")}return i(r,[{key:"name",get:function(){return"AbortError"}}]),r}(u(Error));function _(){return(_=n(c().mark((function e(t,r){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,i=null;case 2:if(!(n<t)){e.next=21;break}if(e.prev=3,!(n>0)){e.next=6;break}return e.delegateYield(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=1e3*Math.pow(2,n),p.logger.log("network operation failed ".concat(n," times,")+" retrying in ".concat(t,"ms...")),e.next=4,new Promise((function(e){return setTimeout(e,t)}));case 4:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:return e.next=8,r();case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t1=e.catch(3),!(e.t1 instanceof E)){e.next=18;break}n+=1,i=e.t1,e.next=19;break;case 18:throw e.t1;case 19:e.next=2;break;case 21:throw i;case 22:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}t.AbortError=x}).call(this,r(11))},function(e,t,r){"use strict";var n=r(16),i=r(14),o=r(15),a=r(37),s=r(9),u=r(1),c=r(2);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownDeviceError=t.EncryptionAlgorithm=t.ENCRYPTION_CLASSES=t.DecryptionError=t.DecryptionAlgorithm=t.DECRYPTION_CLASSES=void 0,t.registerAlgorithm=function(e,t,r){d[e]=t,p[e]=r};var h=f(r(4)),d={};t.ENCRYPTION_CLASSES=d;var p={};t.DECRYPTION_CLASSES=p;var v=function(){function e(t){u(this,e),(0,h.default)(this,"userId",void 0),(0,h.default)(this,"deviceId",void 0),(0,h.default)(this,"crypto",void 0),(0,h.default)(this,"olmDevice",void 0),(0,h.default)(this,"baseApis",void 0),(0,h.default)(this,"roomId",void 0),this.userId=t.userId,this.deviceId=t.deviceId,this.crypto=t.crypto,this.olmDevice=t.olmDevice,this.baseApis=t.baseApis,this.roomId=t.roomId}return c(e,[{key:"prepareToEncrypt",value:function(e){}},{key:"onRoomMembership",value:function(e,t,r){}}]),e}();t.EncryptionAlgorithm=v;var y=function(){function e(t){u(this,e),(0,h.default)(this,"userId",void 0),(0,h.default)(this,"crypto",void 0),(0,h.default)(this,"olmDevice",void 0),(0,h.default)(this,"baseApis",void 0),(0,h.default)(this,"roomId",void 0),this.userId=t.userId,this.crypto=t.crypto,this.olmDevice=t.olmDevice,this.baseApis=t.baseApis,this.roomId=t.roomId}return c(e,[{key:"onRoomKeyEvent",value:function(e){}},{key:"importRoomKey",value:function(){var e=s(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"hasKeysForKeyRequest",value:function(e){return Promise.resolve(!1)}},{key:"shareKeysWithDevice",value:function(e){throw new Error("shareKeysWithDevice not supported for this DecryptionAlgorithm")}},{key:"retryDecryptionFromSender",value:function(){var e=s(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.DecryptionAlgorithm=y;var g=function(e){i(r,e);var t=o(r);function r(e,i,o){var a;return u(this,r),(a=t.call(this,i)).code=e,(0,h.default)(n(a),"detailedString",void 0),a.code=e,a.name="DecryptionError",a.detailedString=function(e,t){var r=e.name+"[msg: "+e.message;t&&(r+=", "+Object.keys(t).map((function(e){return e+": "+t[e]})).join(", "));return r+="]"}(n(a),o),a}return c(r)}(a(Error));t.DecryptionError=g;var m=function(e){i(r,e);var t=o(r);function r(e,n){var i;return u(this,r),(i=t.call(this,e)).devices=n,i.name="UnknownDeviceError",i.devices=n,i}return c(r)}(a(Error));t.UnknownDeviceError=m},function(e,t,r){"use strict";var n=r(23),i=r(20),o=r(9),a=r(16),s=r(2),u=r(1),c=r(14),l=r(15),f=r(37);function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var d=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.VerificationBase=t.SwitchStartEventError=void 0;var p=d(r(4)),v=r(25),y=r(17),g=r(8),m=r(64),b=r(52),w=r(65),k=new Error("Verification timed out"),S=function(e){c(r,e);var t=l(r);function r(e){var n;return u(this,r),(n=t.call(this)).startEvent=e,n}return s(r)}(f(Error));t.SwitchStartEventError=S;var E=function(e){c(r,e);var t=l(r);function r(e,n,i,o,s,c){var l;return u(this,r),(l=t.call(this)).channel=e,l.baseApis=n,l.userId=i,l.deviceId=o,l.startEvent=s,l.request=c,(0,p.default)(a(l),"cancelled",!1),(0,p.default)(a(l),"_done",!1),(0,p.default)(a(l),"promise",null),(0,p.default)(a(l),"transactionTimeoutTimer",null),(0,p.default)(a(l),"expectedEvent",void 0),(0,p.default)(a(l),"resolve",void 0),(0,p.default)(a(l),"reject",void 0),(0,p.default)(a(l),"resolveEvent",void 0),(0,p.default)(a(l),"rejectEvent",void 0),(0,p.default)(a(l),"started",void 0),(0,p.default)(a(l),"doVerification",void 0),l}return s(r,[{key:"initiatedByMe",get:function(){if(!this.startEvent)return!0;var e=this.startEvent.getSender(),t=this.startEvent.getContent();return e===this.baseApis.getUserId()&&t.from_device===this.baseApis.getDeviceId()}},{key:"hasBeenCancelled",get:function(){return this.cancelled}},{key:"resetTimer",value:function(){var e=this;g.logger.info("Refreshing/starting the verification transaction timeout timer"),null!==this.transactionTimeoutTimer&&clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=setTimeout((function(){e._done||e.cancelled||(g.logger.info("Triggering verification timeout"),e.cancel(k))}),6e5)}},{key:"endTimer",value:function(){null!==this.transactionTimeoutTimer&&(clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=null)}},{key:"send",value:function(e,t){return this.channel.send(e,t)}},{key:"waitForEvent",value:function(e){var t=this;if(this._done)return Promise.reject(new Error("Verification is already done"));var r=this.request.getEventFromOtherParty(e);return r?Promise.resolve(r):(this.expectedEvent=e,new Promise((function(e,r){t.resolveEvent=e,t.rejectEvent=r})))}},{key:"canSwitchStartEvent",value:function(e){return!1}},{key:"switchStartEvent",value:function(e){if(this.canSwitchStartEvent(e))if(g.logger.log("Verification Base: switching verification start event",{restartingFlow:!!this.rejectEvent}),this.rejectEvent){var t=this.rejectEvent;this.rejectEvent=void 0,t(new S(e))}else this.startEvent=e}},{key:"handleEvent",value:function(e){if(!this._done)if(e.getType()===this.expectedEvent)"m.key.verification.done"!==this.expectedEvent&&(this.expectedEvent=void 0,this.rejectEvent=void 0,this.resetTimer(),this.resolveEvent(e));else if("m.key.verification.cancel"===e.getType()){var t=this.reject;if(this.reject=void 0,t){var r=e.getContent(),n=r.reason,i=r.code;t(new Error("Other side cancelled verification "+"because ".concat(n," (").concat(i,")")))}}else if(this.expectedEvent){var o=new Error("Unexpected message: expecting "+this.expectedEvent+" but got "+e.getType());if(this.expectedEvent=void 0,this.rejectEvent){var a=this.rejectEvent;this.rejectEvent=void 0,a(o)}this.cancel(o)}}},{key:"done",value:function(){if(this.endTimer(),!this._done)return this.request.onVerifierFinished(),this.resolve(),(0,w.requestKeysDuringVerification)(this.baseApis,this.userId,this.deviceId)}},{key:"cancel",value:function(e){if(this.endTimer(),!this._done){if(this.cancelled=!0,this.request.onVerifierCancelled(),this.userId&&this.deviceId)if(e===k){var t=(0,b.newTimeoutError)();this.send(t.getType(),t.getContent())}else if(e instanceof v.SendingNetworkEvent){if(e.getSender()!==this.userId){var r=e.getContent();"m.key.verification.cancel"===e.getType()?(r.code=r.code||"m.unknown",r.reason=r.reason||r.body||"Unknown reason",this.send("m.key.verification.cancel",r)):this.send("m.key.verification.cancel",{code:"m.unknown",reason:r.body||"Unknown reason"})}}else this.send("m.key.verification.cancel",{code:"m.unknown",reason:e.toString()});null!==this.promise?this.reject&&this.reject(e):this.promise=Promise.reject(e),this.emit("cancel",e)}}},{key:"verify",value:function(){var e=this;return this.promise||(this.promise=new Promise((function(t,r){e.resolve=function(){e._done=!0,e.endTimer(),t.apply(void 0,arguments)},e.reject=function(t){e._done=!0,e.endTimer(),r(t)}})),this.doVerification&&!this.started&&(this.started=!0,this.resetTimer(),Promise.resolve(this.doVerification()).then(this.done.bind(this),this.cancel.bind(this)))),this.promise}},{key:"verifyKeys",value:function(){var e=o(h().mark((function e(t,r,o){var a,s,u,c,l,f,d,p,v,y,b,w;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],s=0,u=Object.entries(r);s<u.length;s++)c=i(u[s],2),l=c[0],f=c[1],d=l.split(":",2)[1],(p=this.baseApis.getStoredDevice(t,d))?(o(l,p,f),a.push(d)):(v=this.baseApis.crypto.deviceList.getStoredCrossSigningForUser(t))&&v.getId()===d?(o(l,m.DeviceInfo.fromStorage({keys:n({},l,d)},d),f),a.push(d)):g.logger.warn("verification: Could not find device ".concat(d," to verify"));if(a.length){e.next=4;break}throw new Error("No devices could be verified");case 4:g.logger.info("Verification completed! Marking devices verified: ",a),y=0,b=a;case 6:if(!(y<b.length)){e.next=13;break}return w=b[y],e.next=10,this.baseApis.setDeviceVerified(t,w);case 10:y++,e.next=6;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"events",get:function(){}}]),r}(y.EventEmitter);t.VerificationBase=E},function(e,t,r){"use strict";(function(e){var n=r(9);function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,a)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKey=u,t.keyFromAuthData=function(e,t){return a.apply(this,arguments)},t.keyFromPassphrase=function(e){return s.apply(this,arguments)};var o=r(50);function a(){return(a=n(i().mark((function t(r,n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Olm){t.next=2;break}throw new Error("Olm is not available");case 2:if(r.private_key_salt&&r.private_key_iterations){t.next=4;break}throw new Error("Salt and/or iterations not found: this backup cannot be restored with a passphrase");case 4:return t.next=6,u(n,r.private_key_salt,r.private_key_iterations,r.private_key_bits||256);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=n(i().mark((function t(r){var n,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Olm){t.next=2;break}throw new Error("Olm is not available");case 2:return n=(0,o.randomString)(32),t.next=5,u(r,n,5e5,256);case 5:return a=t.sent,t.abrupt("return",{key:a,salt:n,iterations:5e5});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(e,t,r){return c.apply(this,arguments)}function c(){return(c=n(i().mark((function t(r,n,o){var a,s,u,c,l,f=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=f.length>3&&void 0!==f[3]?f[3]:256,s=e.crypto.subtle,u=e.TextEncoder,s&&u){t.next=5;break}throw new Error("Password-based backup is not avaiable on this platform");case 5:return t.next=7,s.importKey("raw",(new u).encode(r),{name:"PBKDF2"},!1,["deriveBits"]);case 7:return c=t.sent,t.next=10,s.deriveBits({name:"PBKDF2",salt:(new u).encode(n),iterations:o,hash:"SHA-512"},c,a);case 10:return l=t.sent,t.abrupt("return",new Uint8Array(l));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,r(11))},function(e,t,r){"use strict";(function(e,n){var i=r(12),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRecoveryKey=function(e){var t,r=a.default.decode(e.replace(/ /g,"")),o=0,u=i(r);try{for(u.s();!(t=u.n()).done;){var c=t.value;o^=c}}catch(f){u.e(f)}finally{u.f()}if(0!==o)throw new Error("Incorrect parity");for(var l=0;l<s.length;++l)if(r[l]!==s[l])throw new Error("Incorrect prefix");if(r.length!==s.length+n.Olm.PRIVATE_KEY_LENGTH+1)throw new Error("Incorrect length");return Uint8Array.from(r.slice(s.length,s.length+n.Olm.PRIVATE_KEY_LENGTH))},t.encodeRecoveryKey=function(t){var r=new e(s.length+t.length+1);r.set(s,0),r.set(t,s.length);for(var n=0,i=0;i<r.length-1;++i)n^=r[i];return r[r.length-1]=n,a.default.encode(r).match(/.{1,4}/g).join(" ")};var a=o(r(265)),s=[139,1]}).call(this,r(18).Buffer,r(11))},function(e,t,r){"use strict";var n=r(20),i=r(12),o=r(31),a=r(9),s=r(1),u=r(2),c=r(16),l=r(14),f=r(15);function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var d=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.VerificationRequest=t.START_TYPE=t.REQUEST_TYPE=t.READY_TYPE=t.Phase=t.PHASE_UNSENT=t.PHASE_STARTED=t.PHASE_REQUESTED=t.PHASE_READY=t.PHASE_DONE=t.PHASE_CANCELLED=t.EVENT_PREFIX=t.DONE_TYPE=t.CANCEL_TYPE=void 0;var p=d(r(4)),v=r(8),y=r(17),g=r(52),m=r(138),b="m.key.verification.";t.EVENT_PREFIX=b;var w=b+"request";t.REQUEST_TYPE=w;var k=b+"start";t.START_TYPE=k;var S=b+"cancel";t.CANCEL_TYPE=S;t.DONE_TYPE="m.key.verification.done";var E,x=b+"ready";t.READY_TYPE=x,t.Phase=E,function(e){e[e.Unsent=1]="Unsent",e[e.Requested=2]="Requested",e[e.Ready=3]="Ready",e[e.Started=4]="Started",e[e.Cancelled=5]="Cancelled",e[e.Done=6]="Done"}(E||(t.Phase=E={}));var _=E.Unsent;t.PHASE_UNSENT=_;var T=E.Requested;t.PHASE_REQUESTED=T;var O=E.Ready;t.PHASE_READY=O;var M=E.Started;t.PHASE_STARTED=M;var P=E.Cancelled;t.PHASE_CANCELLED=P;var R=E.Done;t.PHASE_DONE=R;var I=function(e){l(r,e);var t=f(r);function r(e,n,i){var o;return s(this,r),(o=t.call(this)).channel=e,o.verificationMethods=n,o.client=i,(0,p.default)(c(o),"eventsByUs",new Map),(0,p.default)(c(o),"eventsByThem",new Map),(0,p.default)(c(o),"_observeOnly",!1),(0,p.default)(c(o),"timeoutTimer",null),(0,p.default)(c(o),"_accepting",!1),(0,p.default)(c(o),"_declining",!1),(0,p.default)(c(o),"verifierHasFinished",!1),(0,p.default)(c(o),"_cancelled",!1),(0,p.default)(c(o),"_chosenMethod",null),(0,p.default)(c(o),"_qrCodeData",null),(0,p.default)(c(o),"requestReceivedAt",null),(0,p.default)(c(o),"commonMethods",[]),(0,p.default)(c(o),"_phase",void 0),(0,p.default)(c(o),"_cancellingUserId",void 0),(0,p.default)(c(o),"_verifier",void 0),(0,p.default)(c(o),"cancelOnTimeout",(function(){try{o.initiatedByMe?o.cancel({reason:"Other party didn't accept in time",code:"m.timeout"}):o.cancel({reason:"User didn't accept in time",code:"m.timeout"})}catch(e){v.logger.error("Error while cancelling verification request",e)}})),o.channel.request=c(o),o.setPhase(_,!1),o}return u(r,[{key:"invalid",get:function(){return this.phase===_}},{key:"requested",get:function(){return this.phase===T}},{key:"cancelled",get:function(){return this.phase===P}},{key:"ready",get:function(){return this.phase===O}},{key:"started",get:function(){return this.phase===M}},{key:"done",get:function(){return this.phase===R}},{key:"methods",get:function(){return this.commonMethods}},{key:"chosenMethod",get:function(){return this._chosenMethod}},{key:"calculateEventTimeout",value:function(e){var t=this.channel.getTimestamp(e)+6e5;if(this.requestReceivedAt&&!this.initiatedByMe&&this.phase<=T){var r=this.requestReceivedAt+12e4;t=Math.min(t,r)}return Math.max(0,t-Date.now())}},{key:"timeout",get:function(){var e=this.getEventByEither(w);return e?this.calculateEventTimeout(e):0}},{key:"requestEvent",get:function(){return this.getEventByEither(w)}},{key:"phase",get:function(){return this._phase}},{key:"verifier",get:function(){return this._verifier}},{key:"canAccept",get:function(){return this.phase<O&&!this._accepting&&!this._declining}},{key:"accepting",get:function(){return this._accepting}},{key:"declining",get:function(){return this._declining}},{key:"pending",get:function(){return!this.observeOnly&&this._phase!==R&&this._phase!==P}},{key:"qrCodeData",get:function(){return this._qrCodeData}},{key:"otherPartySupportsMethod",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&!this.ready&&!this.started)return!1;var r=this.eventsByThem.get(w)||this.eventsByThem.get(x);if(!r){if(this.started&&this.initiatedByMe){var n=this.eventsByUs.get(k),i=n&&n.getContent(),o=i&&i.method;return e==o}return!1}var a=r.getContent();if(!a)return!1;var s=a.methods;return!!Array.isArray(s)&&s.includes(e)}},{key:"initiatedByMe",get:function(){var e=this.eventsByUs.size+this.eventsByThem.size===0;if(this._phase===_&&e)return!0;var t=this.eventsByUs.has(w),r=this.eventsByThem.has(w);if(t&&!r)return!0;if(!t&&r)return!1;var n=this.eventsByUs.has(k),i=this.eventsByThem.has(k);return!(!n||i)}},{key:"requestingUserId",get:function(){return this.initiatedByMe?this.client.getUserId():this.otherUserId}},{key:"receivingUserId",get:function(){return this.initiatedByMe?this.otherUserId:this.client.getUserId()}},{key:"otherUserId",get:function(){return this.channel.userId}},{key:"isSelfVerification",get:function(){return this.client.getUserId()===this.otherUserId}},{key:"cancellingUserId",get:function(){var e=this.eventsByUs.get(S),t=this.eventsByThem.get(S);return e&&(!t||e.getId()<t.getId())?e.getSender():t?t.getSender():void 0}},{key:"cancellationCode",get:function(){var e=this.getEventByEither(S);return e?e.getContent().code:null}},{key:"observeOnly",get:function(){return this._observeOnly}},{key:"targetDevice",get:function(){var e=(this.eventsByThem.get(w)||this.eventsByThem.get(x)||this.eventsByThem.get(k)).getContent().from_device;return{userId:this.otherUserId,deviceId:e}}},{key:"beginKeyVerification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.observeOnly&&!this._verifier){var r=this.phase===T||this.phase===O||this.phase===_&&this.channel.canCreateRequest(k);if(r){if(this.commonMethods.length&&!this.commonMethods.includes(e))throw(0,g.newUnknownMethodError)();if(this._verifier=this.createVerifier(e,null,t),!this._verifier)throw(0,g.newUnknownMethodError)();this._chosenMethod=e}}return this._verifier}},{key:"sendRequest",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.observeOnly||this._phase!==_){e.next=4;break}return t=o(this.verificationMethods.keys()),e.next=4,this.channel.send(w,{methods:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){var e=a(h().mark((function e(){var t,r,n,i,o,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.reason,n=void 0===r?"User declined":r,i=t.code,o=void 0===i?"m.user":i,this.observeOnly||this._phase===P){e.next=11;break}if(this._declining=!0,this.emit("change"),!this._verifier){e.next=8;break}return e.abrupt("return",this._verifier.cancel((0,g.errorFactory)(o,n)()));case 8:return this._cancellingUserId=this.client.getUserId(),e.next=11,this.channel.send(S,{code:o,reason:n});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accept",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.observeOnly||this.phase!==T||this.initiatedByMe){e.next=6;break}return t=o(this.verificationMethods.keys()),this._accepting=!0,this.emit("change"),e.next=6,this.channel.send(x,{methods:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitFor",value:function(e){var t=this;return new Promise((function(r,n){var i=function i(){var o=!1;return e(t)?(r(t),o=!0):t.cancelled&&(n(new Error("cancelled")),o=!0),o&&t.off("change",i),o};i()||t.on("change",i)}))}},{key:"setPhase",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._phase=e,t&&this.emit("change")}},{key:"getEventByEither",value:function(e){return this.eventsByThem.get(e)||this.eventsByUs.get(e)}},{key:"getEventBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.eventsByThem.get(e):this.eventsByUs.get(e)}},{key:"calculatePhaseTransitions",value:function(){var e=[{phase:_}],t=function(){return e[e.length-1].phase},r=this.eventsByThem.has(w),n=this.getEventBy(w,r);n&&e.push({phase:T,event:n});var i,o=n&&this.getEventBy(x,!r);if(o&&t()===T&&e.push({phase:O,event:o}),o||!n){var a=this.eventsByThem.get(k),s=this.eventsByUs.get(k);i=a&&s?a.getSender()<s.getSender()?a:s:a||s}else i=this.getEventBy(k,!r);if(i){var u=t()===T&&n.getSender()!==i.getSender(),c=t()===_&&this.channel.canCreateRequest(k);(u||t()===O||c)&&e.push({phase:M,event:i})}var l=this.eventsByUs.get("m.key.verification.done");(this.verifierHasFinished||l&&t()===M)&&e.push({phase:R});var f=this.getEventByEither(S);return(this._cancelled||f)&&t()!==R?(e.push({phase:P,event:f}),e):e}},{key:"transitionToPhase",value:function(e){var t=this,r=e.phase,n=e.event;if((r===T||r===O)&&!this.wasSentByOwnDevice(n)){var i=n.getContent();this.commonMethods=i.methods.filter((function(e){return t.verificationMethods.has(e)}))}if(this.observeOnly||r!==T&&r!==M&&r!==O||this.channel.receiveStartFromOtherDevices&&this.wasSentByOwnUser(n)&&!this.wasSentByOwnDevice(n)&&(this._observeOnly=!0),r===M){var o=n.getContent().method;this._verifier||this.observeOnly||(this._verifier=this.createVerifier(o,n),this._verifier?this._chosenMethod=o:this.cancel({code:"m.unknown_method",reason:"Unknown method: ".concat(o)}))}}},{key:"applyPhaseTransitions",value:function(){var e,t=this,r=this.calculatePhaseTransitions(),n=r.findIndex((function(e){return e.phase===t.phase})),o=r.slice(n+1),a=i(o);try{for(a.s();!(e=a.n()).done;){var s=e.value;this.transitionToPhase(s)}}catch(u){a.e(u)}finally{a.f()}return o}},{key:"isWinningStartRace",value:function(e){if(e.getType()!==k)return!1;var t,r,n=this._verifier.startEvent;if(this.isSelfVerification)if(n){var i=n.getContent();t=i&&i.from_device}else t=this.client.getDeviceId();else t=n?n.getSender():this.client.getUserId();if(this.isSelfVerification){var o=e.getContent();r=o&&o.from_device}else r=e.getSender();return r<t}},{key:"hasEventId",value:function(e){var t,r=i(this.eventsByUs.values());try{for(r.s();!(t=r.n()).done;){if(t.value.getId()===e)return!0}}catch(a){r.e(a)}finally{r.f()}var n,o=i(this.eventsByThem.values());try{for(o.s();!(n=o.n()).done;){if(n.value.getId()===e)return!0}}catch(a){o.e(a)}finally{o.f()}return!1}},{key:"handleEvent",value:function(){var e=a(h().mark((function e(t,r,n,i,o){var a,s,u,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.done&&!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:if(a=this._observeOnly,this.adjustObserveOnly(r,n),this.observeOnly||i){e.next=9;break}return e.next=7,this.cancelOnError(t,r);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:if(!(o?this.eventsByUs.has(t):this.eventsByThem.has(t))){e.next=12;break}return e.abrupt("return");case 12:if(s=this.phase,this.addEvent(t,r,o),u=this.applyPhaseTransitions(),e.prev=15,this._verifier&&!this.observeOnly&&(c=this.isWinningStartRace(r),this._verifier.canSwitchStartEvent(r)&&c?this._verifier.switchStartEvent(r):i||(t===S||null!==(l=this._verifier.events)&&void 0!==l&&l.includes(t))&&this._verifier.handleEvent(r)),!u.length){e.next=30;break}if(!n||!u.some((function(e){return e.phase===O}))){e.next=24;break}if(!this.otherPartySupportsMethod(m.SCAN_QR_CODE_METHOD,!0)){e.next=24;break}return e.next=23,m.QRCodeData.create(this,this.client);case 23:this._qrCodeData=e.sent;case 24:f=u[u.length-1],d=f.phase,this.setupTimeout(d),this.setPhase(d),e.next=31;break;case 30:this._observeOnly!==a&&this.emit("change");case 31:return e.prev=31,v.logger.log("Verification request ".concat(this.channel.transactionId,": ")+"".concat(t," event with id:").concat(r.getId(),", ")+"content:".concat(JSON.stringify(r.getContent())," ")+"deviceId:".concat(this.channel.deviceId,", ")+"sender:".concat(r.getSender(),", isSentByUs:").concat(o,", ")+"isLiveEvent:".concat(n,", isRemoteEcho:").concat(i,", ")+"phase:".concat(s,"=>").concat(this.phase,", ")+"observeOnly:".concat(a,"=>").concat(this._observeOnly)),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[15,,31,34]])})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"setupTimeout",value:function(e){(!this.timeoutTimer&&!this.observeOnly&&e===T&&(this.timeoutTimer=setTimeout(this.cancelOnTimeout,this.timeout)),this.timeoutTimer)&&((e===M||e===O||e===R||e===P)&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null))}},{key:"cancelOnError",value:function(){var e=a(h().mark((function e(t,r){var n,i,o,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==k){e.next=6;break}if(n=r.getContent().method,this.verificationMethods.has(n)){e.next=6;break}return e.next=5,this.cancel((0,g.errorFromEvent)((0,g.newUnknownMethodError)()));case 5:return e.abrupt("return",!0);case 6:if(i=t===w&&this.phase!==_,o=t===x&&this.phase!==T,this.phase===_||!i&&!o){e.next=14;break}return v.logger.warn("Cancelling, unexpected ".concat(t," verification ")+"event from ".concat(r.getSender())),a="Unexpected ".concat(t," event in phase ").concat(this.phase),e.next=13,this.cancel((0,g.errorFromEvent)((0,g.newUnexpectedMessageError)({reason:a})));case 13:return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"adjustObserveOnly",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(this._observeOnly=!0),this.calculateEventTimeout(e)<3e3&&(this._observeOnly=!0)}},{key:"addEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r?this.eventsByUs.set(e,t):this.eventsByThem.set(e,t),e===w){var o,a=i(this.eventsByThem.entries());try{for(a.s();!(o=a.n()).done;){var s=n(o.value,2),u=s[0],c=s[1];c.getSender()!==this.otherUserId&&this.eventsByThem.delete(u)}}catch(l){a.e(l)}finally{a.f()}this.requestReceivedAt=Date.now()}}},{key:"createVerifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=this.targetDevice);var n=r,i=n.userId,o=n.deviceId,a=this.verificationMethods.get(e);if(a)return new a(this.channel,this.client,i,o,t,this);v.logger.warn("could not find verifier constructor for method",e)}},{key:"wasSentByOwnUser",value:function(e){return e.getSender()===this.client.getUserId()}},{key:"wasSentByOwnDevice",value:function(e){if(!this.wasSentByOwnUser(e))return!1;var t=e.getContent();return!(!t||t.from_device!==this.client.getDeviceId())}},{key:"onVerifierCancelled",value:function(){this._cancelled=!0;var e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}},{key:"onVerifierFinished",value:function(){this.channel.send("m.key.verification.done",{}),this.verifierHasFinished=!0;var e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}},{key:"getEventFromOtherParty",value:function(e){return this.eventsByThem.get(e)}}],[{key:"validateEvent",value:function(e,t,r){var n=t.getContent();return!(!e||!e.startsWith(b))&&(n?e!==w&&e!==x||Array.isArray(n.methods)?e!==w&&e!==x&&e!==k||"string"===typeof n.from_device&&0!==n.from_device.length||(v.logger.log("VerificationRequest: validateEvent: fail because from_device"),!1):(v.logger.log("VerificationRequest: validateEvent: fail because methods"),!1):(v.logger.log("VerificationRequest: validateEvent: no content"),!1))}}]),r}(y.EventEmitter);t.VerificationRequest=I},function(e,t,r){"use strict";var n=SyntaxError,i=Function,o=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(O){s=null}var u=function(){throw new o},c=s?function(){try{return u}catch(e){try{return s(arguments,"callee").get}catch(t){return u}}}():u,l=r(289)(),f=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"===typeof Uint8Array?void 0:f(Uint8Array),p={"%AggregateError%":"undefined"===typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?f([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"===typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?f(f([][Symbol.iterator]())):void 0,"%JSON%":"object"===typeof JSON?JSON:void 0,"%Map%":"undefined"===typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&l?f((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?void 0:Promise,"%Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&l?f((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?f(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":n,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=r(89),g=r(292),m=y.call(Function.call,Array.prototype.concat),b=y.call(Function.apply,Array.prototype.splice),w=y.call(Function.call,String.prototype.replace),k=y.call(Function.call,String.prototype.slice),S=y.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,_=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var i=[];return w(e,E,(function(e,t,r,n){i[i.length]=r?w(n,x,"$1"):t||e})),i},T=function(e,t){var r,i=e;if(g(v,i)&&(i="%"+(r=v[i])[0]+"%"),g(p,i)){var s=p[i];if(s===h&&(s=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=f(i.prototype))}return p[t]=r,r}(i)),"undefined"===typeof s&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new n("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,e))throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=_(e),i=r.length>0?r[0]:"",a=T("%"+i+"%",t),u=a.name,c=a.value,l=!1,f=a.alias;f&&(i=f[0],b(r,m([0,1],f)));for(var h=1,d=!0;h<r.length;h+=1){var v=r[h],y=k(v,0,1),w=k(v,-1);if(('"'===y||"'"===y||"`"===y||'"'===w||"'"===w||"`"===w)&&y!==w)throw new n("property names with quotes must have matching quotes");if("constructor"!==v&&d||(l=!0),g(p,u="%"+(i+="."+v)+"%"))c=p[u];else if(null!=c){if(!(v in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&h+1>=r.length){var E=s(c,v);c=(d=!!E)&&"get"in E&&!("originalValue"in E.get)?E.get:c[v]}else d=g(c,v),c=c[v];d&&!l&&(p[u]=c)}}return c}},function(e,t,r){"use strict";var n=r(291);e.exports=Function.prototype.bind||n},function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g,o="RFC1738",a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:o,RFC3986:a}},function(e,t,r){"use strict";var n=r(7),i=r(143),o=r(10).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,i,o,a){return u(e+(t&r|~t&n)+i+o|0,a)+t|0}function l(e,t,r,n,i,o,a){return u(e+(t&n|r&~n)+i+o|0,a)+t|0}function f(e,t,r,n,i,o,a){return u(e+(t^r^n)+i+o|0,a)+t|0}function h(e,t,r,n,i,o,a){return u(e+(r^(t|~n))+i+o|0,a)+t|0}n(s,i),s.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=c(r,n,i,o,e[0],3614090360,7),o=c(o,r,n,i,e[1],3905402710,12),i=c(i,o,r,n,e[2],606105819,17),n=c(n,i,o,r,e[3],3250441966,22),r=c(r,n,i,o,e[4],4118548399,7),o=c(o,r,n,i,e[5],1200080426,12),i=c(i,o,r,n,e[6],2821735955,17),n=c(n,i,o,r,e[7],4249261313,22),r=c(r,n,i,o,e[8],1770035416,7),o=c(o,r,n,i,e[9],2336552879,12),i=c(i,o,r,n,e[10],4294925233,17),n=c(n,i,o,r,e[11],2304563134,22),r=c(r,n,i,o,e[12],1804603682,7),o=c(o,r,n,i,e[13],4254626195,12),i=c(i,o,r,n,e[14],2792965006,17),r=l(r,n=c(n,i,o,r,e[15],1236535329,22),i,o,e[1],4129170786,5),o=l(o,r,n,i,e[6],3225465664,9),i=l(i,o,r,n,e[11],643717713,14),n=l(n,i,o,r,e[0],3921069994,20),r=l(r,n,i,o,e[5],3593408605,5),o=l(o,r,n,i,e[10],38016083,9),i=l(i,o,r,n,e[15],3634488961,14),n=l(n,i,o,r,e[4],3889429448,20),r=l(r,n,i,o,e[9],568446438,5),o=l(o,r,n,i,e[14],3275163606,9),i=l(i,o,r,n,e[3],4107603335,14),n=l(n,i,o,r,e[8],1163531501,20),r=l(r,n,i,o,e[13],2850285829,5),o=l(o,r,n,i,e[2],4243563512,9),i=l(i,o,r,n,e[7],1735328473,14),r=f(r,n=l(n,i,o,r,e[12],2368359562,20),i,o,e[5],4294588738,4),o=f(o,r,n,i,e[8],2272392833,11),i=f(i,o,r,n,e[11],1839030562,16),n=f(n,i,o,r,e[14],4259657740,23),r=f(r,n,i,o,e[1],2763975236,4),o=f(o,r,n,i,e[4],1272893353,11),i=f(i,o,r,n,e[7],4139469664,16),n=f(n,i,o,r,e[10],3200236656,23),r=f(r,n,i,o,e[13],681279174,4),o=f(o,r,n,i,e[0],3936430074,11),i=f(i,o,r,n,e[3],3572445317,16),n=f(n,i,o,r,e[6],76029189,23),r=f(r,n,i,o,e[9],3654602809,4),o=f(o,r,n,i,e[12],3873151461,11),i=f(i,o,r,n,e[15],530742520,16),r=h(r,n=f(n,i,o,r,e[2],3299628645,23),i,o,e[0],4096336452,6),o=h(o,r,n,i,e[7],1126891415,10),i=h(i,o,r,n,e[14],2878612391,15),n=h(n,i,o,r,e[5],4237533241,21),r=h(r,n,i,o,e[12],1700485571,6),o=h(o,r,n,i,e[3],2399980690,10),i=h(i,o,r,n,e[10],4293915773,15),n=h(n,i,o,r,e[1],2240044497,21),r=h(r,n,i,o,e[8],1873313359,6),o=h(o,r,n,i,e[15],4264355552,10),i=h(i,o,r,n,e[6],2734768916,15),n=h(n,i,o,r,e[13],1309151649,21),r=h(r,n,i,o,e[4],4149444226,6),o=h(o,r,n,i,e[11],3174756917,10),i=h(i,o,r,n,e[2],718787259,15),n=h(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(n){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(11))},function(e,t,r){"use strict";var n=r(42).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"===typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?v():t.on("request",v)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},function(e,t,r){"use strict";var n=r(18).Buffer,i=r(7),o=r(143),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function v(e,t,r,n,i,o,a,s){return p(e+(t^r^n)+o+a|0,s)+i|0}function y(e,t,r,n,i,o,a,s){return p(e+(t&r|~t&n)+o+a|0,s)+i|0}function g(e,t,r,n,i,o,a,s){return p(e+((t|~r)^n)+o+a|0,s)+i|0}function m(e,t,r,n,i,o,a,s){return p(e+(t&n|r&~n)+o+a|0,s)+i|0}function b(e,t,r,n,i,o,a,s){return p(e+(t^(r|~n))+o+a|0,s)+i|0}i(d,o),d.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,w=0|this._a,k=0|this._b,S=0|this._c,E=0|this._d,x=0|this._e,_=0;_<80;_+=1){var T,O;_<16?(T=v(r,n,i,o,d,e[s[_]],f[0],c[_]),O=b(w,k,S,E,x,e[u[_]],h[0],l[_])):_<32?(T=y(r,n,i,o,d,e[s[_]],f[1],c[_]),O=m(w,k,S,E,x,e[u[_]],h[1],l[_])):_<48?(T=g(r,n,i,o,d,e[s[_]],f[2],c[_]),O=g(w,k,S,E,x,e[u[_]],h[2],l[_])):_<64?(T=m(r,n,i,o,d,e[s[_]],f[3],c[_]),O=y(w,k,S,E,x,e[u[_]],h[3],l[_])):(T=b(r,n,i,o,d,e[s[_]],f[4],c[_]),O=v(w,k,S,E,x,e[u[_]],h[4],l[_])),r=d,d=o,o=p(i,10),i=n,n=T,w=x,x=E,E=p(S,10),S=k,k=O}var M=this._b+i+E|0;this._b=this._c+o+x|0,this._c=this._d+d+w|0,this._d=this._e+r+k|0,this._e=this._a+n+S|0,this._a=M},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=d},function(e,t,r){(t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r}).sha=r(306),t.sha1=r(307),t.sha224=r(308),t.sha256=r(150),t.sha384=r(309),t.sha512=r(151)},function(e,t,r){(t=e.exports=r(152)).Stream=t,t.Readable=t,t.Writable=r(98),t.Duplex=r(39),t.Transform=r(155),t.PassThrough=r(316)},function(e,t,r){var n=r(18),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n,i){var o=r(66);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;m.WritableState=g;var c=Object.create(r(54));c.inherits=r(7);var l={deprecate:r(92)},f=r(153),h=r(97).Buffer,d=i.Uint8Array||function(){};var p,v=r(154);function y(){}function g(e,t){s=s||r(39),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),x(e,t))}(e,r,n,t,i);else{var a=S(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),n?u(w,e,r,a,i):w(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function m(e){if(s=s||r(39),!p.call(m,this)&&!(this instanceof s))return new m(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),x(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var r=S(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(m,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===m&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=e,h.isBuffer(n)||n instanceof d);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof r&&(r=y),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=h.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,n,i,o);return u}(this,i,s,e,t,r)),a},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||k(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,r){var n=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=v.destroy,m.prototype._undestroy=v.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(21),r(314).setImmediate,r(11))},function(e,t,r){"use strict";var n=r(26);function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},i.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,r){var n=r(329),i=r(337),o=r(168);t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(o)}},function(e,t,r){var n={ECB:r(330),CBC:r(331),CFB:r(332),CFB8:r(333),CFB1:r(334),OFB:r(335),CTR:r(166),GCM:r(166)},i=r(168);for(var o in i)i[o].module=n[i[o].mode];e.exports=i},function(e,t,r){var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(341);if("function"!==typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(a){}},function(e,t,r){"use strict";var n=r(45).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"===typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?v():t.on("request",v)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},function(e,t,r){(function(t){var n=r(354),i=r(41);function o(e){var t,r=e.modulus.byteLength();do{t=new n(i(r))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function a(e,r){var i=function(e){var t=o(e);return{blinder:t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(r),a=r.modulus.byteLength(),s=new n(e).mul(i.blinder).umod(r.modulus),u=s.toRed(n.mont(r.prime1)),c=s.toRed(n.mont(r.prime2)),l=r.coefficient,f=r.prime1,h=r.prime2,d=u.redPow(r.exponent1).fromRed(),p=c.redPow(r.exponent2).fromRed(),v=d.isub(p).imul(l).umod(f).imul(h);return p.iadd(v).imul(i.unblinder).umod(r.modulus).toArrayLike(t,"be",a)}a.getr=o,e.exports=a}).call(this,r(18).Buffer)},function(e,t,r){"use strict";var n=t;n.version=r(356).version,n.utils=r(27),n.rand=r(102),n.curve=r(180),n.curves=r(106),n.ec=r(367),n.eddsa=r(371)},function(e,t,r){"use strict";var n,i=t,o=r(107),a=r(180),s=r(27).assert;function u(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new u(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(366)}catch(l){n=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(e,t,r){var n=t;n.utils=r(32),n.common=r(56),n.sha=r(360),n.ripemd=r(364),n.hmac=r(365),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(e,t,r){"use strict";(function(t){var n,i=r(18),o=i.Buffer,a={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=i[n]);var s=a.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=o[n]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,r){if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&"undefined"===typeof e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,r)}),s.alloc||(s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=o(e);return t&&0!==t.length?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(u){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a}).call(this,r(21))},function(e,t,r){"use strict";var n=r(110).Reporter,i=r(57).EncoderBuffer,o=r(57).DecoderBuffer,a=r(26),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function c(e,t,r){var n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=c;var l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var e=this._baseState,t={};l.forEach((function(r){t[r]=e[r]}));var r=new this.constructor(t.parent);return r._baseState=t,r},c.prototype._wrap=function(){var e=this._baseState;u.forEach((function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},c.prototype._init=function(e){var t=this._baseState;a(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),a.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){var t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(a(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(a(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!==typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),s.forEach((function(e){c.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===t.tag),t.tag=e,this._useArgs(r),this}})),c.prototype.use=function(e){a(e);var t=this._baseState;return a(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){var t=this._baseState;return a(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){var t=this._baseState;return a(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){var t=this._baseState;return a(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){var t=this._baseState;return a(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var n,i=r.default,a=!0,s=null;if(null!==r.key&&(s=e.enterKey(r.key)),r.optional){var u=null;if(null!==r.explicit?u=r.explicit:null!==r.implicit?u=r.implicit:null!==r.tag&&(u=r.tag),null!==u||r.any){if(a=this._peekTag(e,u,r.any),e.isError(a))return a}else{var c=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),a=!0}catch(v){a=!1}e.restore(c)}}if(r.obj&&a&&(n=e.enterObject()),a){if(null!==r.explicit){var l=this._decodeTag(e,r.explicit);if(e.isError(l))return l;e=l}var f=e.offset;if(null===r.use&&null===r.choice){var h;r.any&&(h=e.save());var d=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(d))return d;r.any?i=e.raw(h):e=d}if(t&&t.track&&null!==r.tag&&t.track(e.path(),f,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var p=new o(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(p,t)}}return r.obj&&a&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==a?null!==s&&e.exitKey(s):e.leaveKey(s,r.key,i),i},c.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},c.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some((function(o){var a=e.save(),s=r.choice[o];try{var u=s._decode(e,t);if(e.isError(u))return!1;n={type:o,value:u},i=!0}catch(c){return e.restore(a),!1}return!0}),this),i?n:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},c.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},c.prototype._encodeValue=function(e,t,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);var o=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var a=null,s=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,r)._encode(e,t),s=!0;else if(i.children)a=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var n=t.enterKey(r._baseState.key);if("object"!==typeof e)return t.error("Child expected, but input is not object");var i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i}),this).filter((function(e){return e})),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(e.map((function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),u))}else null!==i.use?o=this._getUse(i.use,r)._encode(e,t):(a=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,l=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(c,s,l,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||a(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,r){"use strict";var n=r(7);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function o(e,t){this.path=e,this.rethrow(t)}t.Reporter=i,i.prototype.isError=function(e){return e instanceof o},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof o;if(t=n?e:new o(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(o,Error),o.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(e,t,r){"use strict";function n(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},function(e,t,r){"use strict";r.r(t);var n=r(29),i=r(30);function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return function(){var t,r=s(e);if(u()){var n=s(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return l(this,t)}}function h(e,t,r){return(h=u()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&o(i,r.prototype),i}).apply(null,arguments)}function d(e){var t="function"===typeof Map?new Map:void 0;return(d=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}var p=r(5),v=r(0),y=r.n(v),g=r(47),m=r.n(g),b=r(194),w=r.n(b),k=function(e){var t=e.targetElement;return Object(g.createPortal)(e.children,t)},S=new WeakMap,E=function(e,t){return new Proxy({open:null,closed:null},{get:function(r,n){if(S.get(e))return S.get(e);var i,o=(i={webComponent:e,mode:n,shadowChildren:t},function(e){var t=i.webComponent.shadowRoot||i.webComponent.attachShadow({mode:i.mode});return i.shadowChildren.forEach((function(e){t.appendChild(e)})),y.a.createElement(k,{targetElement:t},e.children)});return S.set(e,o),o}})},x=Object(v.createContext)((function(){})),_=x.Provider,T=(x.Consumer,function(e){return function(t,r,n){return e(t,r,n)}}),O=function(e,t,n){if(null===t||void 0===t?void 0:t.find((function(e){return"styled-components"===e.name})))try{var i=r(!function(){var e=new Error("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}()).StyleSheetManager,o=document.createElement("span");return o.id="direflow_styled-components-styles",[y.a.createElement(i,{target:o},n),o]}catch(a){console.error("Could not load styled-components. Did you remember to install styled-components?")}},M=function(e){P(e,document.head)||document.head.append(e)},P=function(e,t){var r=t.children;return Array.from(r).some((function(t){return e.isEqualNode(t)}))},R=function(e,t,r){var n,i=null===t||void 0===t?void 0:t.find((function(e){return"external-loader"===e.name})),o=null===(n=null===i||void 0===i?void 0:i.options)||void 0===n?void 0:n.paths;if(o&&o.length&&r){var a=[],s=[];o.forEach((function(e){var t="string"===typeof e?e:e.src,r="string"!==typeof e&&e.async,n="string"===typeof e?void 0:e.useHead;if(t.endsWith(".js")){var i=document.createElement("script");i.src=t,i.async=!!r,void 0===n||n?i.setAttribute("use-head","true"):i.setAttribute("use-head","false"),a.push(i)}if(t.endsWith(".css")){var o=document.createElement("link");o.rel="stylesheet",o.href=t,n?o.setAttribute("use-head","true"):o.setAttribute("use-head","false"),s.push(o)}}));var u=document.createElement("span");return u.id="direflow_external-sources",window.externalSourcesLoaded||(window.externalSourcesLoaded={}),a.forEach((function(e){"true"===e.getAttribute("use-head")?M(e):u.appendChild(e),window.externalSourcesLoaded[e.src]={state:"loading"},e.addEventListener("load",(function(){var t,r;window.externalSourcesLoaded[e.src].state="completed",null===(r=(t=window.externalSourcesLoaded[e.src]).callback)||void 0===r||r.call(t)}))})),s.forEach((function(e){"true"===e.getAttribute("use-head")?M(e):u.appendChild(e),window.externalSourcesLoaded[e.href]={state:"loading"},e.addEventListener("load",(function(){var t,r;window.externalSourcesLoaded[e.href].state="completed",null===(r=(t=window.externalSourcesLoaded[e.href]).callback)||void 0===r||r.call(t)}))})),[r,u]}},I=r(195),L=r.n(I),C=!1,A=function(e,t){if(!C){var r=null===t||void 0===t?void 0:t.find((function(e){return"font-loader"===e.name}));(null===r||void 0===r?void 0:r.options)&&(L.a.load(r.options),C=!0)}},j=function(e,t,r){var n,i=null===t||void 0===t?void 0:t.find((function(e){return"icon-loader"===e.name}));if(r&&(null===(n=null===i||void 0===i?void 0:i.options)||void 0===n?void 0:n.packs.includes("material-icons"))){var o=document.createElement("link");o.rel="stylesheet",o.href="https://fonts.googleapis.com/icon?family=Material+Icons";var a=document.createElement("span");return a.id="direflow_material-icons",a.appendChild(o),[r,a]}},D=r(196),N=r.n(D),U=new WeakMap,B=function(e,t,n){if(null===t||void 0===t?void 0:t.find((function(e){return"material-ui"===e.name})))try{var i,o=r(!function(){var e=new Error("Cannot find module 'jss'");throw e.code="MODULE_NOT_FOUND",e}()).create,a=r(!function(){var e=new Error("Cannot find module '@material-ui/core/styles'");throw e.code="MODULE_NOT_FOUND",e}()),s=a.jssPreset,u=a.StylesProvider,c=a.createGenerateClassName,l=N()("".concat(e.tagName.toLowerCase(),"-")),f=document.createElement("span");return f.id="direflow_material-ui-styles",U.has(e)?i=U.get(e):(i=o(Object.assign(Object.assign({},s()),{insertionPoint:f})),U.set(e,i)),[y.a.createElement(u,{jss:i,sheetsManager:new Map,generateClassName:c({seed:l})},n),f]}catch(h){console.error("Could not load Material-UI. Did you remember to install @material-ui/core?")}},F=[T(A),T(j),T(R),T(O),T(B)],q=function(e){if(""===e)return!0;if("true"===e||"false"===e)return"true"===e;try{return JSON.parse(e.replace(/'/g,'"'))}catch(t){return e}},K=function(){function e(t,r,i,o,a,s){Object(n.a)(this,e),this.componentProperties=t,this.rootComponent=r,this.shadow=i,this.anonymousSlot=o,this.plugins=a,this.connectCallback=s,this.componentAttributes={},this.reflectPropertiesToAttributes()}return Object(i.a)(e,[{key:"reflectPropertiesToAttributes",value:function(){var e=this;Object.entries(this.componentProperties).forEach((function(t){var r=Object(p.a)(t,2),n=r[0],i=r[1];"number"!==typeof i&&"string"!==typeof i&&"boolean"!==typeof i||(e.componentAttributes[n.toLowerCase()]={property:n,value:i})}))}},{key:"create",value:function(){var e=this;return function(t){a(o,t);var r=f(o);function o(){var t;return Object(n.a)(this,o),(t=r.call(this)).initialProperties=w()(e.componentProperties),t.properties={},t.hasConnected=!1,t.eventDispatcher=function(e){t.dispatchEvent(e)},t.transferInitialProperties(),t.subscribeToProperties(),t}return Object(i.a)(o,[{key:"connectedCallback",value:function(){var t;this.mountReactApp({initial:!0}),this.hasConnected=!0,null===(t=e.connectCallback)||void 0===t||t.call(e,this)}},{key:"attributeChangedCallback",value:function(t,r,n){if(this.hasConnected&&r!==n&&e.componentAttributes.hasOwnProperty(t)){var i=e.componentAttributes[t].property;this.properties[i]=q(n),this.mountReactApp()}}},{key:"propertyChangedCallback",value:function(e,t,r){this.hasConnected&&t!==r&&(this.properties[e]=r,this.mountReactApp())}},{key:"disconnectedCallback",value:function(){m.a.unmountComponentAtNode(this)}},{key:"subscribeToProperties",value:function(){var e=this,t={};Object.keys(this.initialProperties).forEach((function(r){t[r]={configurable:!0,enumerable:!0,get:function(){return e.properties.hasOwnProperty(r)?e.properties[r]:e.initialProperties[r]},set:function(t){var n=e.properties.hasOwnProperty(r)?e.properties[r]:e.initialProperties[r];e.propertyChangedCallback(r,n,t)}}})),Object.defineProperties(this,t)}},{key:"syncronizePropertiesAndAttributes",value:function(){var e=this;Object.keys(this.initialProperties).forEach((function(t){e.properties.hasOwnProperty(t)||(null===e.getAttribute(t)?e.properties[t]=e.initialProperties[t]:e.properties[t]=q(e.getAttribute(t)))}))}},{key:"transferInitialProperties",value:function(){var e=this;Object.keys(this.initialProperties).forEach((function(t){e.hasOwnProperty(t)&&(e.properties[t]=e[t])}))}},{key:"applyPlugins",value:function(t){var r=this,n=[];return[F.reduce((function(t,i){var o=i(r,e.plugins,t);if(!o)return t;var a=Object(p.a)(o,2),s=a[0],u=a[1];return u&&n.push(u),s}),t),n]}},{key:"reactProps",value:function(){return this.syncronizePropertiesAndAttributes(),this.properties}},{key:"mountReactApp",value:function(t){var r=this,n=e.anonymousSlot?y.a.createElement("slot"):void 0,i=y.a.createElement(_,{value:this.eventDispatcher},y.a.createElement(e.rootComponent,this.reactProps(),n)),o=this.applyPlugins(i),a=Object(p.a)(o,2),s=a[0],u=a[1];if(e.shadow){var c;(null===t||void 0===t?void 0:t.initial)&&(c=Array.from(this.children).map((function(e){return e.cloneNode(!0)})));var l=E(this,u);m.a.render(y.a.createElement(l.open,null,s),this),c&&c.forEach((function(e){return r.append(e)}))}else m.a.render(s,this)}}],[{key:"observedAttributes",get:function(){return Object.keys(e.componentAttributes)}}]),o}(d(HTMLElement))}}]),e}(),z=function(e,t){return new Promise((function(r,n){var i=document.createElement("script");i.async=!0,i.src=e,window[t]||(window[t]=[]);var o=window[t].find((function(e){return e.script.isEqualNode(i)}));if(o)return o.hasLoaded&&r(),void o.script.addEventListener("load",(function(){return r()}));var a={script:i,hasLoaded:!1};window[t].push(a),i.addEventListener("load",(function(){a.hasLoaded=!0,r()})),i.addEventListener("error",(function(){return n(new Error("Polyfill failed to load"))})),document.head.appendChild(i)}))};function G(){G=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var H=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},V=!1,W="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.4.1/bundles/webcomponents-sd.js",X="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.4.1/bundles/webcomponents-ce.js",Y="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.4.1/custom-elements-es5-adapter.js",Z=function(e,t){return H(void 0,void 0,void 0,G().mark((function r(){var n,i,o,a,s,u,c,l,f,h,d,p,v,y,g,m,b;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!V){r.next=2;break}return r.abrupt("return");case 2:return c=[],l="",f="",h="",(d=null===t||void 0===t?void 0:t.find((function(e){return"polyfill-loader"===e.name})))&&console.warn("polyfill-loader plugin is deprecated. Use direflow-config.json instead.\nSee more: https://direflow.io/configuration"),p=null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DIREFLOW_SD)&&void 0!==n?n:null===(i=null===d||void 0===d?void 0:d.options)||void 0===i?void 0:i.use.sd,v=null!==(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DIREFLOW_CE)&&void 0!==o?o:null===(a=null===d||void 0===d?void 0:d.options)||void 0===a?void 0:a.use.ce,y=null!==(s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).DIREFLOW_ADAPTER)&&void 0!==s?s:null===(u=null===d||void 0===d?void 0:d.options)||void 0===u?void 0:u.use.adapter,g=!1===p,m=!1===v,b=!1===y,p&&(l="string"===typeof p?p:W),v&&(f="string"===typeof v?v:X),y&&(h="string"===typeof y?y:Y),e.usesShadow&&!g&&c.push(z(l||W,"wcPolyfillsLoaded")),m||c.push(z(f||X,"wcPolyfillsLoaded")),b||c.push(z(h||Y,"wcPolyfillsLoaded")),r.prev=20,r.next=23,Promise.all(c);case 23:V=!0,r.next=29;break;case 26:r.prev=26,r.t0=r.catch(20),console.error(r.t0);case 29:case"end":return r.stop()}}),r,null,[[20,26]])})))};function J(){J=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var Q,$=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ee=function(e){null===Q||void 0===Q||Q(e)},te=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,null,[{key:"createAll",value:function(t){return t.map(e.create)}},{key:"create",value:function(e){var t=this,r=e.component,n=r.plugins||e.plugins,i=r.configuration||e.configuration;if(!r)throw Error("Root component has not been set");if(!i)throw Error("No configuration found");var o=Object.assign(Object.assign(Object.assign({},null===e||void 0===e?void 0:e.properties),r.properties),r.defaultProps),a=i.tagname||"direflow-component",s=void 0===i.useShadow||i.useShadow,u=void 0!==i.useAnonymousSlot&&i.useAnonymousSlot;return $(t,void 0,void 0,J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Z({usesShadow:!!s},n)]);case 2:t=new K(o,r,s,u,n,ee).create(),customElements.define(a,t);case 4:case"end":return e.stop()}}),e)}))),{then:function(e){return $(t,void 0,void 0,J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(Q=e);case 1:case"end":return t.stop()}}),t)})))}}}}]),e}();var re=r(197),ne=r.n(re),ie=function(e){a(r,e);var t=f(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).scopeClassNameCache={},e.scopedCSSTextCache={},e.scoped=void 0===e.props.scoped||e.props.scoped,e.pepper="",e.getStyleString=function(){if(e.props.children instanceof Array){var t=e.props.children.filter((function(e){return!Object(v.isValidElement)(e)&&"string"===typeof e}));if(t.length>1)throw new Error("Multiple style objects as direct descedents of a\n        Style component are not supported (".concat(t.length," style objects detected):\n\n        ").concat(t[0],"\n        "));return t[0]}return"string"!==typeof e.props.children||Object(v.isValidElement)(e.props.children)?null:e.props.children},e.getRootElement=function(){if(e.props.children instanceof Array){var t=e.props.children.filter((function(e){return Object(v.isValidElement)(e)}));return t[0]}return Object(v.isValidElement)(e.props.children)?e.props.children:null},e.getRootSelectors=function(e){var t=[];return e.props.id&&t.push("#".concat(e.props.id)),e.props.className&&e.props.className.trim().split(/\s+/g).forEach((function(e){return t.push(e)})),t.length||"function"===typeof e.type||t.push(e.type),t},e.processCSSText=function(t,r,n){return t.replace(/\s*\/\/(?![^(]*\)).*|\s*\/\*.*\*\//g,"").replace(/\s\s+/g," ").split("}").map((function(t){var i=/.*:.*;/g,o=/.*:.*(;|$|\s+)/g,a=/\s*@/g,s=/\s*(([0-9][0-9]?|100)\s*%)|\s*(to|from)\s*$/g;return t.split("{").map((function(t,u,c){if(!t.trim().length)return"";var l=c.length-1===u&&t.match(o);if(t.match(i)||l)return e.escapeTextContentForBrowser(t);var f=t;return r&&!/:target/gi.test(f)?f.match(a)||f.match(s)?f:e.scopeSelector(r,f,n):f})).join("{\n")})).join("}\n")},e.escaper=function(e){return{">":"&gt;","<":"&lt;"}[e]},e.escapeTextContentForBrowser=function(t){return"".concat(t).replace(/[><]/g,e.escaper)},e.scopeSelector=function(t,r,n){var i=[];return r.split(/,(?![^(|[]*\)|\])/g).forEach((function(r){var o,a;if((null===n||void 0===n?void 0:n.length)&&n.some((function(e){return r.match(e)}))){a=r;var s=null===n||void 0===n?void 0:n.map((function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}));a=a.replace(new RegExp("(".concat(null===s||void 0===s?void 0:s.join("|"),")")),"$1".concat(t)),o=e.scoped?"".concat(t," ").concat(r):r,i.push(a,o)}else o=e.scoped?"".concat(t," ").concat(r):r,i.push(o)})),!e.scoped&&i.length>1?i[1]:i.join(", ")},e.getScopeClassName=function(t,r){var n=t;return r&&(e.pepper="",e.traverseObjectToGeneratePepper(r),n+=e.pepper),"s"+ne()(n)},e.traverseObjectToGeneratePepper=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r>32||e.pepper.length>1e4||Object.keys(t).forEach((function(n){var i=/^[_$]|type|ref|^value$/.test(n);t[n]&&"object"===typeof t[n]&&!i?e.traverseObjectToGeneratePepper(t[n],r+1):t[n]&&!i&&"function"!==typeof t[n]&&(e.pepper+=t[n])}))},e.isVoidElement=function(e){return["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].some((function(t){return e===t}))},e.createStyleElement=function(e,t){return y.a.createElement("style",{id:"direflow_styles",type:"text/css",key:t,dangerouslySetInnerHTML:{__html:e||""}})},e.getNewChildrenForCloneElement=function(t,r,n){return[e.createStyleElement(t,n)].concat(r.props.children)},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this.getStyleString(),t=this.getRootElement();if(!e&&t)return t.props.children;if(e&&!t)return this.createStyleElement(this.processCSSText(e),this.getScopeClassName(e,t));var r,n,i=t.props.id?t.props.id:"",o=t.props.className?"".concat(t.props.className," "):"",a=o+i+e;this.scopeClassNameCache[a]?(r=this.scopeClassNameCache[a],n=this.scopedCSSTextCache[r]):(r=this.getScopeClassName(e,t),n=this.processCSSText(e,".".concat(r),this.getRootSelectors(t)),this.scopeClassNameCache[a]=r,this.scopedCSSTextCache[r]=n);var s=this.scoped?"".concat(o).concat(r):o;return Object(v.cloneElement)(t,Object.assign(Object.assign({},t.props),{className:s.trim()}),this.getNewChildrenForCloneElement(n,t,r))}}]),r}(v.Component),oe=function(e){var t;return t="string"===typeof e.styles?e.styles.toString():e.styles.reduce((function(e,t){return"".concat(e," ").concat(t)})),y.a.createElement(ie,{scoped:e.scoped},t,e.children)},ae=r(58);var se=r(71);function ue(e){return function(e){if(Array.isArray(e))return Object(ae.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(se.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ce=r(13),le=r(198),fe=r.n(le),he=r(6),de=function(e){var t=e.rooms,r=e.enterRoom,n=Object(v.useState)(""),i=Object(p.a)(n,2),o=i[0],a=i[1],s=Object(v.useState)([]),u=Object(p.a)(s,2),c=u[0],l=u[1];Object(v.useEffect)((function(){l((function(e){return ue(t.filter((function(e){return-1!==e.name.indexOf(o)})))}))}),[t,o]);var f=function(e){return e.length&&e.length>13?"".concat(e.slice(0,5),"...").concat(e.slice(e.length-5)):e},h=function(e){return"join"===e.getMyMembership()?y.a.createElement("div",{className:"room",key:e.roomId,onClick:function(){return r(e.roomId)}},f(e.name),e.notificationCounts.total>0&&y.a.createElement("div",{className:"bage"},e.notificationCounts.total)):"invite"===e.getMyMembership()?y.a.createElement("div",{className:"room-invite",key:e.roomId},y.a.createElement("span",null,f(e.name)),y.a.createElement("div",{className:"btns"},y.a.createElement("div",{className:"accept",onClick:function(){var t;t=e.roomId,he.a.joinRoom(t)}},"accept"),y.a.createElement("div",{className:"reject",onClick:function(){var t;t=e.roomId,he.a.leave(t)}},"reject"))):void 0};return y.a.createElement(oe,{styles:fe.a},y.a.createElement("div",{className:"rooms"},y.a.createElement("input",{className:"filter-box",placeholder:"Room Name..",value:o,onChange:function(e){a(e.target.value)}}),y.a.createElement("div",{className:"rooms-list"},c.map((function(e){return h(e)})))))};function pe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ve=function(e,t){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var ye=function(){return(ye=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var ge="Pixel",me="Percent",be={unit:me,value:.8};function we(e){return"number"===typeof e?{unit:me,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:ge,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:me,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),be):(console.warn("scrollThreshold should be string or number"),be)}var ke=function(e){function t(t){var r=e.call(this,t)||this;return r.lastScrollTop=0,r.actionTriggered=!1,r.startY=0,r.currentY=0,r.dragging=!1,r.maxPullDownDistance=0,r.getScrollableTarget=function(){return r.props.scrollableTarget instanceof HTMLElement?r.props.scrollableTarget:"string"===typeof r.props.scrollableTarget?document.getElementById(r.props.scrollableTarget):(null===r.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},r.onStart=function(e){r.lastScrollTop||(r.dragging=!0,e instanceof MouseEvent?r.startY=e.pageY:e instanceof TouchEvent&&(r.startY=e.touches[0].pageY),r.currentY=r.startY,r._infScroll&&(r._infScroll.style.willChange="transform",r._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},r.onMove=function(e){r.dragging&&(e instanceof MouseEvent?r.currentY=e.pageY:e instanceof TouchEvent&&(r.currentY=e.touches[0].pageY),r.currentY<r.startY||(r.currentY-r.startY>=Number(r.props.pullDownToRefreshThreshold)&&r.setState({pullToRefreshThresholdBreached:!0}),r.currentY-r.startY>1.5*r.maxPullDownDistance||r._infScroll&&(r._infScroll.style.overflow="visible",r._infScroll.style.transform="translate3d(0px, "+(r.currentY-r.startY)+"px, 0px)")))},r.onEnd=function(){r.startY=0,r.currentY=0,r.dragging=!1,r.state.pullToRefreshThresholdBreached&&(r.props.refreshFunction&&r.props.refreshFunction(),r.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){r._infScroll&&(r._infScroll.style.overflow="auto",r._infScroll.style.transform="none",r._infScroll.style.willChange="unset")}))},r.onScrollListener=function(e){"function"===typeof r.props.onScroll&&setTimeout((function(){return r.props.onScroll&&r.props.onScroll(e)}),0);var t=r.props.height||r._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;r.actionTriggered||((r.props.inverse?r.isElementAtTop(t,r.props.scrollThreshold):r.isElementAtBottom(t,r.props.scrollThreshold))&&r.props.hasMore&&(r.actionTriggered=!0,r.setState({showLoader:!0}),r.props.next&&r.props.next()),r.lastScrollTop=t.scrollTop)},r.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},r.throttledOnScrollListener=function(e,t,r,n){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function u(){var u=this,c=Date.now()-a,l=arguments;function f(){a=Date.now(),r.apply(u,l)}function h(){i=void 0}o||(n&&!i&&f(),s(),void 0===n&&c>e?f():!0!==t&&(i=setTimeout(n?h:f,void 0===n?e-c:e)))}return"boolean"!==typeof t&&(n=r,r=t,t=void 0),u.cancel=function(){s(),o=!0},u}(150,r.onScrollListener).bind(r),r.onStart=r.onStart.bind(r),r.onMove=r.onMove.bind(r),r.onEnd=r.onEnd.bind(r),r}return function(e,t){function r(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?ye(ye({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var r=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=we(t);return n.unit===ge?e.scrollTop<=n.value+r-e.scrollHeight+1:e.scrollTop<=n.value/100+r-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var r=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=we(t);return n.unit===ge?e.scrollTop+r>=e.scrollHeight-n.value:e.scrollTop+r>=n.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=ye({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),r=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return y.a.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},y.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&y.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},y.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!r&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(v.Component),Se=r(201),Ee=r.n(Se);function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"===typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ie=r(203),Le=r.n(Ie),Ce=Object(v.createContext)({});function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function De(e){return e<=1?"".concat(100*Number(e),"%"):e}function Ne(e){return 1===e.length?"0"+e:String(e)}function Ue(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*r*(t-e):r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Be(e){return Fe(e)/255}function Fe(e){return parseInt(e,16)}var qe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ke(e){var t,r,n,i={r:0,g:0,b:0},o=1,a=null,s=null,u=null,c=!1,l=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(qe[e])e=qe[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var r=Ve.rgb.exec(e);if(r)return{r:r[1],g:r[2],b:r[3]};if(r=Ve.rgba.exec(e))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=Ve.hsl.exec(e))return{h:r[1],s:r[2],l:r[3]};if(r=Ve.hsla.exec(e))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=Ve.hsv.exec(e))return{h:r[1],s:r[2],v:r[3]};if(r=Ve.hsva.exec(e))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=Ve.hex8.exec(e))return{r:Fe(r[1]),g:Fe(r[2]),b:Fe(r[3]),a:Be(r[4]),format:t?"name":"hex8"};if(r=Ve.hex6.exec(e))return{r:Fe(r[1]),g:Fe(r[2]),b:Fe(r[3]),format:t?"name":"hex"};if(r=Ve.hex4.exec(e))return{r:Fe(r[1]+r[1]),g:Fe(r[2]+r[2]),b:Fe(r[3]+r[3]),a:Be(r[4]+r[4]),format:t?"name":"hex8"};if(r=Ve.hex3.exec(e))return{r:Fe(r[1]+r[1]),g:Fe(r[2]+r[2]),b:Fe(r[3]+r[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(We(e.r)&&We(e.g)&&We(e.b)?(t=e.r,r=e.g,n=e.b,i={r:255*je(t,255),g:255*je(r,255),b:255*je(n,255)},c=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):We(e.h)&&We(e.s)&&We(e.v)?(a=De(e.s),s=De(e.v),i=function(e,t,r){e=6*je(e,360),t=je(t,100),r=je(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),a=r*(1-i*t),s=r*(1-(1-i)*t),u=n%6;return{r:255*[r,a,o,o,s,r][u],g:255*[s,r,r,a,o,o][u],b:255*[o,o,s,r,r,a][u]}}(e.h,a,s),c=!0,l="hsv"):We(e.h)&&We(e.s)&&We(e.l)&&(a=De(e.s),u=De(e.l),i=function(e,t,r){var n,i,o;if(e=je(e,360),t=je(t,100),r=je(r,100),0===t)i=r,o=r,n=r;else{var a=r<.5?r*(1+t):r+t-r*t,s=2*r-a;n=Ue(s,a,e+1/3),i=Ue(s,a,e),o=Ue(s,a,e-1/3)}return{r:255*n,g:255*i,b:255*o}}(e.h,a,u),c=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(o),{ok:c,format:e.format||l,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o}}var ze="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Ge="[\\s|\\(]+(".concat(ze,")[,|\\s]+(").concat(ze,")[,|\\s]+(").concat(ze,")\\s*\\)?"),He="[\\s|\\(]+(".concat(ze,")[,|\\s]+(").concat(ze,")[,|\\s]+(").concat(ze,")[,|\\s]+(").concat(ze,")\\s*\\)?"),Ve={CSS_UNIT:new RegExp(ze),rgb:new RegExp("rgb"+Ge),rgba:new RegExp("rgba"+He),hsl:new RegExp("hsl"+Ge),hsla:new RegExp("hsla"+He),hsv:new RegExp("hsv"+Ge),hsva:new RegExp("hsva"+He),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function We(e){return Boolean(Ve.CSS_UNIT.exec(String(e)))}var Xe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Ye(e){var t=function(e,t,r){e=je(e,255),t=je(t,255),r=je(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o=0,a=n,s=n-i,u=0===n?0:s/n;if(n===i)o=0;else{switch(n){case e:o=(t-r)/s+(t<r?6:0);break;case t:o=(r-e)/s+2;break;case r:o=(e-t)/s+4}o/=6}return{h:o,s:u,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function Ze(e){var t=e.r,r=e.g,n=e.b;return"#".concat(function(e,t,r,n){var i=[Ne(Math.round(e).toString(16)),Ne(Math.round(t).toString(16)),Ne(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}(t,r,n,!1))}function Je(e,t,r){var n=r/100;return{r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b}}function Qe(e,t,r){var n;return(n=Math.round(e.h)>=60&&Math.round(e.h)<=240?r?Math.round(e.h)-2*t:Math.round(e.h)+2*t:r?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?n+=360:n>=360&&(n-=360),n}function $e(e,t,r){return 0===e.h&&0===e.s?e.s:((n=r?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(n=1),r&&5===t&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function et(e,t,r){var n;return(n=r?e.v+.05*t:e.v-.15*t)>1&&(n=1),Number(n.toFixed(2))}function tt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=Ke(e),i=5;i>0;i-=1){var o=Ye(n),a=Ze(Ke({h:Qe(o,i,!0),s:$e(o,i,!0),v:et(o,i,!0)}));r.push(a)}r.push(Ze(n));for(var s=1;s<=4;s+=1){var u=Ye(n),c=Ze(Ke({h:Qe(u,s),s:$e(u,s),v:et(u,s)}));r.push(c)}return"dark"===t.theme?Xe.map((function(e){var n=e.index,i=e.opacity;return Ze(Je(Ke(t.backgroundColor||"#141414"),Ke(r[n]),100*i))})):r}var rt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},nt={},it={};Object.keys(rt).forEach((function(e){nt[e]=tt(rt[e]),nt[e].primary=nt[e][5],it[e]=tt(rt[e],{theme:"dark",backgroundColor:"#141414"}),it[e].primary=it[e][5]}));nt.red,nt.volcano,nt.gold,nt.orange,nt.yellow,nt.lime,nt.green,nt.cyan,nt.blue,nt.geekblue,nt.purple,nt.magenta,nt.grey;var ot={};function at(e,t){0}function st(e,t,r){t||ot[r]||(e(!1,r),ot[r]=!0)}var ut=function(e,t){st(at,e,t)};function ct(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var lt=new Map;function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):"rc-util-key"}function ht(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function dt(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function pt(e){return Array.from((lt.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ct())return null;var r=t.csp,n=t.prepend,i=document.createElement("style");i.setAttribute("data-rc-order",dt(n)),(null===r||void 0===r?void 0:r.nonce)&&(i.nonce=null===r||void 0===r?void 0:r.nonce),i.innerHTML=e;var o=ht(t),a=o.firstChild;if(n){if("queue"===n){var s=pt(o).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute("data-rc-order"))}));if(s.length)return o.insertBefore(i,s[s.length-1].nextSibling),i}o.insertBefore(i,a)}else o.appendChild(i);return i}function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ht(t);return pt(r).find((function(r){return r.getAttribute(ft(t))===e}))}function gt(e,t){var r=lt.get(e);if(!r||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}(document,r)){var n=vt("",t),i=n.parentNode;lt.set(e,i),e.removeChild(n)}}function mt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ht(r);gt(n,r);var i=yt(t,r);if(i){var o,a,s;if((null===(o=r.csp)||void 0===o?void 0:o.nonce)&&i.nonce!==(null===(a=r.csp)||void 0===a?void 0:a.nonce))i.nonce=null===(s=r.csp)||void 0===s?void 0:s.nonce;return i.innerHTML!==e&&(i.innerHTML=e),i}var u=vt(e,r);return u.setAttribute(ft(r),t),u}function bt(e){return"object"===Ae(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Ae(e.icon)||"function"===typeof e.icon)}function wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){var n=e[r];switch(r){case"class":t.className=n,delete t.class;break;default:t[r]=n}return t}),{})}function kt(e){return tt(e)[0]}function St(e){return e?Array.isArray(e)?e:[e]:[]}var Et="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",xt=["icon","className","onClick","style","primaryColor","secondaryColor"],_t={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Tt=function(e){var t,r,n=e.icon,i=e.className,o=e.onClick,a=e.style,s=e.primaryColor,u=e.secondaryColor,c=Re(e,xt),l=_t;if(s&&(l={primaryColor:s,secondaryColor:u||kt(s)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=Object(v.useContext)(Ce),r=t.csp;Object(v.useEffect)((function(){mt(e,"@ant-design-icons",{prepend:!0,csp:r})}),[])}(),t=bt(n),r="icon should be icon definiton, but got ".concat(n),ut(t,"[@ant-design/icons] ".concat(r)),!bt(n))return null;var f=n;return f&&"function"===typeof f.icon&&(f=Te(Te({},f),{},{icon:f.icon(l.primaryColor,l.secondaryColor)})),function e(t,r,n){return n?y.a.createElement(t.tag,Te(Te({key:r},wt(t.attrs)),n),(t.children||[]).map((function(n,i){return e(n,"".concat(r,"-").concat(t.tag,"-").concat(i))}))):y.a.createElement(t.tag,Te({key:r},wt(t.attrs)),(t.children||[]).map((function(n,i){return e(n,"".concat(r,"-").concat(t.tag,"-").concat(i))})))}(f.icon,"svg-".concat(f.name),Te({className:i,onClick:o,style:a,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};Tt.displayName="IconReact",Tt.getTwoToneColors=function(){return Te({},_t)},Tt.setTwoToneColors=function(e){var t=e.primaryColor,r=e.secondaryColor;_t.primaryColor=t,_t.secondaryColor=r||kt(t),_t.calculated=!!r};var Ot=Tt;function Mt(e){var t=Pe(St(e),2),r=t[0],n=t[1];return Ot.setTwoToneColors({primaryColor:r,secondaryColor:n})}var Pt=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Mt("#1890ff");var Rt=v.forwardRef((function(e,t){var r,n=e.className,i=e.icon,o=e.spin,a=e.rotate,s=e.tabIndex,u=e.onClick,c=e.twoToneColor,l=Re(e,Pt),f=v.useContext(Ce),h=f.prefixCls,d=void 0===h?"anticon":h,p=f.rootClassName,y=Le()(p,d,(xe(r={},"".concat(d,"-").concat(i.name),!!i.name),xe(r,"".concat(d,"-spin"),!!o||"loading"===i.name),r),n),g=s;void 0===g&&u&&(g=-1);var m=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,b=Pe(St(c),2),w=b[0],k=b[1];return v.createElement("span",Te(Te({role:"img","aria-label":i.name},l),{},{ref:t,tabIndex:g,onClick:u,className:y}),v.createElement(Ot,{icon:i,primaryColor:w,secondaryColor:k,style:m}))}));Rt.displayName="AntdIcon",Rt.getTwoToneColor=function(){var e=Ot.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Rt.setTwoToneColor=Mt;var It=Rt,Lt=function(e,t){return v.createElement(It,Te(Te({},e),{},{ref:t,icon:Oe}))};Lt.displayName="UploadOutlined";var Ct=v.forwardRef(Lt),At=r(202),jt=r.n(At),Dt=function(e){var t=Object(v.useState)(""),r=Object(p.a)(t,2),n=r[0],i=r[1],o=Object(v.useState)(""),a=Object(p.a)(o,2),s=a[0],u=a[1],c=Object(v.useState)(""),l=Object(p.a)(c,2),f=l[0],h=l[1];return Object(v.useEffect)((function(){he.a.getUrlPreview(e.url,e.ts).then((function(e){var t=e["og:image"],r=e["og:description"],n=e["og:title"];i(t),h(n),u(r)}))}),[e.url,e.ts]),y.a.createElement(oe,{styles:jt.a},y.a.createElement("div",{className:"urlPreview"},y.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){window.open(e.url)},className:"urlPreview_url"},e.message),y.a.createElement("div",{className:"urlPreview_title"},f),y.a.createElement("div",{className:"urlPreview_description"},s),y.a.createElement("img",{className:"urlPreview_img",style:{maxWidth:"100%"},src:"".concat(n)})))},Nt=["body","msgtype"];function Ut(){Ut=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var Bt=function(e,t){var r=e.roomId,n=e.openUrlPreviewWidget,i=e.dapps,o=he.a._client.getRoom(r),a=o.myUserId,s=Object(v.useState)(""),u=Object(p.a)(s,2),c=u[0],l=u[1],f=Object(v.useState)([]),h=Object(p.a)(f,2),d=h[0],g=h[1],m=Object(v.useState)(!1),b=Object(p.a)(m,2),w=b[0],k=b[1],S=Object(v.useState)([]),E=Object(p.a)(S,2),x=E[0],_=E[1],T=Object(v.useState)(""),O=Object(p.a)(T,2),M=O[0],P=O[1],R=Object(v.useState)(null),I=Object(p.a)(R,2),L=I[0],C=I[1],A=Object(v.useState)(""),j=Object(p.a)(A,2),D=(j[0],j[1]),N=Object(v.useState)(!1),U=Object(p.a)(N,2),B=U[0],F=U[1],q=Object(v.useState)(""),K=Object(p.a)(q,2),z=K[0],G=K[1],H=Object(v.useRef)(null),V=Object(v.useRef)(null);Object(v.useEffect)((function(){return W(),he.a._client.on("Room.timeline",Z),function(){he.a._client.removeListener("Room.timeline",Z)}}),[]),Object(v.useEffect)((function(){L&&L.on("state",ie)}),[L]);var W=function(){var e=Object(ce.a)(Ut().mark((function e(){return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.prev=7,e.next=10,X();case 10:e.next=14;break;case 12:e.prev=12,e.t1=e.catch(7);case 14:setTimeout(te,100);case 15:case"end":return e.stop()}}),e,null,[[0,5],[7,12]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(ce.a)(Ut().mark((function e(t){var n,i,o,a,s,u,f;return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||c){e.next=9;break}return e.next=3,he.a._client.createMessagesRequest(r,c,20,"b");case 3:n=e.sent,i=n.end,o=n.chunk,a=o.reverse(),l(i),g(a);case 9:if("start"!==t||!c){e.next=17;break}return e.next=12,he.a._client.createMessagesRequest(r,c,20,"b");case 12:s=e.sent,u=s.end,f=s.chunk,l(u),g((function(e){return[].concat(ue(f.reverse()),ue(e))}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(ce.a)(Ut().mark((function e(){var t;return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.getJoinedMembers(),console.log(t,"membersmembersmembers"),t.forEach((function(e){if(!e.user){var t=he.a._client.getUser(e.userId),r=e.userId.split(":"),n=Object(p.a)(r,2)[1];t.setWalletAddress("0x".concat(n)),e.user=t}})),_(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(ce.a)(Ut().mark((function e(t){return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"m.call.invite"==t.getType()||(g((function(e){return[].concat(ue(e),[t.event])})),setTimeout(te,100));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){return"".concat(new Date(e).getMonth()+1,"-").concat(new Date(e).getDate()," ").concat(new Date(e).getHours(),":").concat(new Date(e).getMinutes())},Q=function(e,t){var r=e.body,i=e.msgtype,o=pe(e,Nt),a=null;switch(i){case"m.text":var s=r.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g);if(s){var u=Object(p.a)(s,1)[0];a=y.a.createElement(Dt,{url:u,message:r,ts:t,openUrlPreviewWidget:n})}else a=r;break;case"m.image":var c=he.a._client.mxcUrlToHttp(o.url);a=y.a.createElement("img",{style:{maxWidth:"100%"},src:"".concat(c),onClick:function(){!function(e){G(e),F(!0)}(c)}})}return a},$=function(e,t){e.event_id;var r=e.sender,n=e.type,i=(e.content,null);switch(n){case"m.room.message":var o=Q(e.content,e.origin_server_ts);i=r===a?y.a.createElement("div",{className:"chat_message_box right",key:e.event_id},y.a.createElement("div",{className:"chat_message"},o,y.a.createElement("div",{className:"chat_message_ts"},J(e.origin_server_ts)))):y.a.createElement("div",{className:"chat_message_box left",key:e.event_id},y.a.createElement("div",{className:"chat_message_sender"},function(e){var t,r=x.find((function(t){return t.userId==e}));if(r){var n=r.name;return(t=n).length&&t.length>13?"".concat(t.slice(0,5),"...").concat(t.slice(t.length-5)):t}return""}(e.sender)),y.a.createElement("div",{className:"chat_message"},o,y.a.createElement("div",{className:"chat_message_ts"},J(e.origin_server_ts))))}return i},ee=function(){var e=Object(ce.a)(Ut().mark((function e(t){var n;return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!=t.key||!M.trim()){e.next=12;break}return e.prev=2,n={body:M,msgtype:"m.text"},e.next=6,he.a._client.sendEvent(r,"m.room.message",n,"");case 6:P(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0,"sendMessage");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=V.current;if(e){var r=V.current.scrollHeight-e;t.scrollTo(0,r)}else t.scrollTo(0,t.scrollHeight)},re=function(){var e=Object(ce.a)(Ut().mark((function e(){var t;return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.current.scrollHeight,e.next=3,X("start");case 3:setTimeout((function(){return te(t)}),100);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(ce.a)(Ut().mark((function e(t){var n,i;return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.prev=1,e.next=4,he.a._client.uploadContent(n);case 4:return i=e.sent,e.next=7,he.a._client.sendEvent(r,"m.room.message",{body:n.name,msgtype:"m.image",url:i},"");case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:H.current.value="";case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),ie=function e(t,r){console.log(t,"newState"),t!==r&&D(t);var n=document.querySelector(".chat_video1"),i=document.querySelector(".chat_video2");if("invite_sent"===t){var o=L.getLocalFeeds(),a=Object(p.a)(o,1)[0];n.srcObject=a.stream,n.play()}if("connected"===t){var s=L.getFeeds();if(s.length>1){var u=Object(p.a)(s,2),c=u[0],l=u[1];c.isLocal()?(n.srcObject=c.stream,i.srcObject=l.stream):(n.srcObject=l.stream,i.srcObject=c.stream),n.play(),i.play()}}"ended"===t&&(L.removeListener("state",e),C(null))},ae=function(){var e=Object(ce.a)(Ut().mark((function e(t,i){return Ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n("".concat(i,"?st=sdn&roomId=").concat(r,"&time=").concat((new Date).getTime())),k(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return y.a.createElement(oe,{styles:Ee.a},y.a.createElement("div",{className:"roomView",id:"scrollableDiv",ref:V},y.a.createElement(ke,{dataLength:d.length,hasMore:!0,refreshFunction:re,pullDownToRefresh:!0,pullDownToRefreshThreshold:10,pullDownToRefreshContent:y.a.createElement("h3",{style:{textAlign:"center",color:"#fff"}},"Pull down to refresh"),releaseToRefreshContent:y.a.createElement("h3",{style:{textAlign:"center",color:"#fff"}},"loading..."),scrollableTarget:"scrollableDiv"},d.map((function(e,t){return $(e)}))),y.a.createElement("div",{className:"input-box"},w&&y.a.createElement("div",{className:"dappList"},i.map((function(e){var t=e.name,r=e.dapp_url;return y.a.createElement("div",{key:r,className:"dappItem",onClick:function(){ae(t,r)}},t)}))),y.a.createElement("input",{value:M,onChange:function(e){P(e.target.value)},id:"sendMessage",type:"text",autoComplete:"off",onKeyDown:ee}),y.a.createElement("div",{className:"upload"},y.a.createElement(Ct,{onClick:function(){H.current.click()}})),y.a.createElement("input",{ref:H,type:"file",accept:"image/*",onChange:ne,style:{display:"none"}})),B&&y.a.createElement("div",{className:"previewImg",onClick:function(e){return console.log(e),G(""),F(!1),!1}},y.a.createElement("img",{src:z,onClick:function(e){e.stopPropagation()}}))))},Ft=r(204),qt=r.n(Ft),Kt="data:image/png;base64,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",zt=r(205),Gt=r.n(zt),Ht=r(206),Vt="application/x-postmate-v1+json",Wt=0,Xt={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},Yt=function(e,t){return("string"!==typeof t||e.origin===t)&&(!!e.data&&(("object"!==typeof e.data||"postmate"in e.data)&&(e.data.type===Vt&&!!Xt[e.data.postmate])))},Zt=function(){function e(e){var t=this;this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.events={},this.listener=function(e){if(!Yt(e,t.childOrigin))return!1;var r=((e||{}).data||{}).value||{},n=r.data,i=r.name;"emit"===e.data.postmate&&i in t.events&&t.events[i].call(t,n)},this.parent.addEventListener("message",this.listener,!1)}var t=e.prototype;return t.get=function(e){var t=this;return new Qt.Promise((function(r){var n=++Wt;t.parent.addEventListener("message",(function e(i){i.data.uid===n&&"reply"===i.data.postmate&&(t.parent.removeEventListener("message",e,!1),r(i.data.value))}),!1),t.child.postMessage({postmate:"request",type:Vt,property:e,uid:n},t.childOrigin)}))},t.call=function(e,t){this.child.postMessage({postmate:"call",type:Vt,property:e,data:t},this.childOrigin)},t.on=function(e,t){this.events[e]=t},t.destroy=function(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)},e}(),Jt=function(){function e(e){var t=this;this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",(function(e){if(Yt(e,t.parentOrigin)){0;var r=e.data,n=r.property,i=r.uid,o=r.data;"call"!==e.data.postmate?function(e,t){var r="function"===typeof e[t]?e[t]():e[t];return Qt.Promise.resolve(r)}(t.model,n).then((function(t){return e.source.postMessage({property:n,postmate:"reply",type:Vt,uid:i,value:t},e.origin)})):n in t.model&&"function"===typeof t.model[n]&&t.model[n](o)}}))}return e.prototype.emit=function(e,t){this.parent.postMessage({postmate:"emit",type:Vt,value:{name:e,data:t}},this.parentOrigin)},e}(),Qt=function(){function e(e){var t=e.container,r=void 0===t?"undefined"!==typeof r?r:document.body:t,n=e.model,i=e.url,o=e.name,a=e.classListArray,s=void 0===a?[]:a;return this.parent=window,this.frame=document.createElement("iframe"),this.frame.name=o||"",this.frame.classList.add.apply(this.frame.classList,s),r.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=n||{},this.sendHandshake(i)}return e.prototype.sendHandshake=function(t){var r,n=this,i=function(e){var t=document.createElement("a");t.href=e;var r=t.protocol.length>4?t.protocol:window.location.protocol,n=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||r+"//"+n}(t),o=0;return new e.Promise((function(e,a){n.parent.addEventListener("message",(function t(o){return!!Yt(o,i)&&("handshake-reply"===o.data.postmate?(clearInterval(r),n.parent.removeEventListener("message",t,!1),n.childOrigin=o.origin,e(new Zt(n))):a("Failed handshake"))}),!1);var s=function(){o++,n.child.postMessage({postmate:"handshake",type:Vt,model:n.model},i),5===o&&clearInterval(r)},u=function(){s(),r=setInterval(s,500)};n.frame.attachEvent?n.frame.attachEvent("onload",u):n.frame.onload=u,n.frame.src=t}))},e}();Qt.debug=!1,Qt.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),Qt.Model=function(){function e(e){return this.child=window,this.model=e,this.parent=this.child.parent,this.sendHandshakeReply()}return e.prototype.sendHandshakeReply=function(){var e=this;return new Qt.Promise((function(t,r){e.child.addEventListener("message",(function n(i){if(i.data.postmate){if("handshake"===i.data.postmate){0,e.child.removeEventListener("message",n,!1),i.source.postMessage({postmate:"handshake-reply",type:Vt},i.origin),e.parentOrigin=i.origin;var o=i.data.model;return o&&Object.keys(o).forEach((function(t){e.model[t]=o[t]})),t(new Jt(e))}return r("Handshake Reply Failed")}}),!1)}))},e}();var $t=Qt;function er(){er=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var tr=null,rr=function(e){var t=e.closeUrlPreviewWidget,r=e.url,n=Object(v.useRef)(null);Object(v.useEffect)((function(){return o(),function(){a()}}),[]);var i=function(){tr.then((function(e){e.on("message.sending.me",(function(t){var r=t.payload;(null===r||void 0===r?void 0:r.id)&&(r.callback=function(t){console.log(t),e.call("message.sending.me",t)}),function(e){if("getMyProfile"===e.action){var t=he.a._client.getUser(he.a._client.getUserId()),r=t.displayName,n=t.userId,i=t.walletAddress;e.callback({id:e.id,data:{name:r,userId:n,walletAddress:i}})}if("getRoomInfo"===e.action){var o=e.data.roomId,a=he.a._client.getRoom(o);if(a){var s=a.getJoinedMembers().map((function(e){return{nickName:e.nickName,user:{name:e.user.displayName,userId:e.user.userId,walletAddress:e.user.walletAddress}}}));console.log(s,"membersmembersmembers"),e.callback({id:e.id,data:{name:a.name,members:s,roomId:o}})}else e.callback({id:e.id,error:{code:4e4,message:"room ".concat(o," dose not exist")}})}if("sendMessage"===e.action){var u=e.data,c=u.roomId,l=u.content;he.a._client.getRoom(c)?Object(Ht.isEmpty)(l)?e.callback({id:e.id,error:{code:40001,message:"message dose not empty"}}):(he.a._client.sendMessage(c,l),e.callback({id:e.id,data:{code:200,message:"message send success"}})):e.callback({id:e.id,error:{code:4e4,message:"room ".concat(c," dose not exist")}})}if("getUserProfile"===e.action){var f=he.a._client.getUser(e.data.userId);if(f){var h=f.name,d=f.userId,p=f.walletAddress;e.callback({id:e.id,data:{user:{name:h,userId:d,walletAddress:p}}})}else e.callback({id:e.id,error:{code:4e4,message:"user ".concat(e.data.userId," dose not exist")}})}}(r)}))}))},o=function(){tr=new $t({url:r,container:n.current,classListArray:["iframe"]}),i()},a=function(){var e=Object(ce.a)(er().mark((function e(){return er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr.then((function(e){console.log(e),e.destroy()}));case 2:tr=null;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y.a.createElement(oe,{styles:Gt.a},y.a.createElement("div",{className:"UrlPreviewWidget"},y.a.createElement("div",{className:"handleFun"},y.a.createElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTdweCIgaGVpZ2h0PSIxN3B4IiB2aWV3Qm94PSIwIDAgMTcgMTciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+Y2xvc2UtY2lyY2xlLWZpbGw8L3RpdGxlPgogICAgPGcgaWQ9Imxpc3QiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSIzLXVzZXJwb3B1cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExNjUuMDAwMDAwLCAtMTcyLjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSLnvJbnu4QtOOWkh+S7vSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc0LjAwMDAwMCwgMTQwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9ImNsb3NlLWNpcmNsZS1maWxsIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTEuMDAwMDAwLCAzMi4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOC44MzEyNSwwLjk1NjI1IEM0LjQ4MjQyMTg4LDAuOTU2MjUgMC45NTYyNSw0LjQ4MjQyMTg4IDAuOTU2MjUsOC44MzEyNSBDMC45NTYyNSwxMy4xODAwNzgxIDQuNDgyNDIxODgsMTYuNzA2MjUgOC44MzEyNSwxNi43MDYyNSBDMTMuMTgwMDc4MSwxNi43MDYyNSAxNi43MDYyNSwxMy4xODAwNzgxIDE2LjcwNjI1LDguODMxMjUgQzE2LjcwNjI1LDQuNDgyNDIxODggMTMuMTgwMDc4MSwwLjk1NjI1IDguODMxMjUsMC45NTYyNSBaIE0xMS43Mzg2NzE5LDExLjgyMzA0NjkgTDEwLjU3ODUxNTYsMTEuODE3NzczNCBMOC44MzEyNSw5LjczNDc2NTYyIEw3LjA4NTc0MjE5LDExLjgxNjAxNTYgTDUuOTIzODI4MTIsMTEuODIxMjg5MSBDNS44NDY0ODQzNywxMS44MjEyODkxIDUuNzgzMjAzMTIsMTEuNzU5NzY1NiA1Ljc4MzIwMzEyLDExLjY4MDY2NDEgQzUuNzgzMjAzMTIsMTEuNjQ3MjY1NiA1Ljc5NTUwNzgxLDExLjYxNTYyNSA1LjgxNjYwMTU2LDExLjU4OTI1NzggTDguMTAzNTE1NjIsOC44NjQ2NDg0NCBMNS44MTY2MDE1Niw2LjE0MTc5Njg3IEM1Ljc5NTUwNzgxLDYuMTE1NDI5NjkgNS43ODMyMDMxMiw2LjA4Mzc4OTA2IDUuNzgzMjAzMTIsNi4wNTAzOTA2MiBDNS43ODMyMDMxMiw1Ljk3MzA0Njg3IDUuODQ2NDg0MzcsNS45MDk3NjU2MiA1LjkyMzgyODEyLDUuOTA5NzY1NjIgTDcuMDg1NzQyMTksNS45MTUwMzkwNiBMOC44MzEyNSw3Ljk5ODA0Njg3IEwxMC41NzY3NTc4LDUuOTE2Nzk2ODcgTDExLjczNjkxNDEsNS45MTE1MjM0NCBDMTEuODE0MjU3OCw1LjkxMTUyMzQ0IDExLjg3NzUzOTEsNS45NzMwNDY4NyAxMS44Nzc1MzkxLDYuMDUyMTQ4NDQgQzExLjg3NzUzOTEsNi4wODU1NDY4NyAxMS44NjUyMzQ0LDYuMTE3MTg3NSAxMS44NDQxNDA2LDYuMTQzNTU0NjkgTDkuNTYwNzQyMTksOC44NjY0MDYyNSBMMTEuODQ1ODk4NCwxMS41OTEwMTU2IEMxMS44NjY5OTIyLDExLjYxNzM4MjggMTEuODc5Mjk2OSwxMS42NDkwMjM0IDExLjg3OTI5NjksMTEuNjgyNDIxOSBDMTEuODc5Mjk2OSwxMS43NTk3NjU2IDExLjgxNjAxNTYsMTEuODIzMDQ2OSAxMS43Mzg2NzE5LDExLjgyMzA0NjkgWiIgaWQ9IuW9oueKtiIgZmlsbD0iIzk5OTk5OSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",onClick:t})),y.a.createElement("div",{className:"iframeContainer",ref:n})))},nr=r(207),ir=r.n(nr);function or(){or=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var ar=function(){var e=Object(v.useState)(""),t=Object(p.a)(e,2),r=t[0],n=t[1],i=Object(v.useState)(""),o=Object(p.a)(i,2),a=o[0],s=o[1],u=Object(v.useState)(""),c=Object(p.a)(u,2),l=c[0],f=c[1],h=Object(v.useState)(""),d=Object(p.a)(h,2),g=d[0],m=d[1];Object(v.useEffect)((function(){w()}),[]);var b=Object(v.useMemo)((function(){return a===r}),[a,r]),w=function(){var e=Object(ce.a)(or().mark((function e(){var t,r,i,o;return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=he.a._client.getUserId(),e.next=3,he.a._client.getProfileInfo(t);case 3:r=e.sent,r.avatar_url,i=r.displayname,r.signature,o=r.wallet_address,m(t),n(i),s(i),f(o);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(ce.a)(or().mark((function e(){return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.a._client.setDisplayName(a);case 2:w();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y.a.createElement(oe,{styles:ir.a},y.a.createElement("div",{className:"profile"},y.a.createElement("div",{className:"profile_item"},y.a.createElement("div",null,"userId:"),y.a.createElement("div",null,g)),y.a.createElement("div",{className:"profile_item"},y.a.createElement("div",null,"displayname:"),y.a.createElement("input",{value:a,onChange:function(e){s(e.target.value)}}),y.a.createElement("div",{className:"displayname_btns"},y.a.createElement("button",{disabled:b,onClick:k,className:"save"},"save"),y.a.createElement("button",{disabled:b,onClick:function(){s(r)}},"cancel"))),y.a.createElement("div",{className:"profile_item"},y.a.createElement("div",null,"walletAddress:"),y.a.createElement("div",null,l))))};function sr(){sr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new _(i||[]);return n(a,"_invoke",{value:k(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function k(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var ur=function(){var e=Object(v.useState)([]),t=Object(p.a)(e,2),r=t[0],n=t[1],i=Object(v.useState)(""),o=Object(p.a)(i,2),a=o[0],s=o[1],u=Object(v.useState)(""),c=Object(p.a)(u,2),l=c[0],f=c[1],h=Object(v.useState)(!1),d=Object(p.a)(h,2),g=d[0],m=d[1],b=Object(v.useState)(""),w=Object(p.a)(b,2),k=w[0],S=w[1],E=Object(v.useState)("0"),x=Object(p.a)(E,2),_=x[0],T=x[1],O=Object(v.useState)([]),M=Object(p.a)(O,2),P=M[0];M[1];Object(v.useEffect)((function(){return R(),I}),[]);var R=function(){var e=Object(ce.a)(sr().mark((function e(){return sr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.a._client.startClient();case 2:he.a._client.getUser(localStorage.getItem("user_id")).setWalletAddress(localStorage.getItem("user_address")),he.a._client.on("Room",L),he.a._client.on("Room.myMembership",L),he.a._client.on("RoomState.events",L),he.a._client.on("Room.timeline",L);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){he.a._client.removeListener("Room",L),he.a._client.removeListener("RoomState.events",L),he.a._client.removeListener("Room.myMembership",L),he.a._client.removeListener("Room.timeline",L),he.a._client.stopClient()},L=function(){var e=he.a._client.getRooms();n((function(){return ue(e)}))},C=function(e){var t=he.a._client.getRoom(e);if(t){var n=t.getLiveTimeline().getEvents();n.length&&he.a._client.sendReadReceipt(n[n.length-1])}var i=r.find((function(t){return e===t.roomId}));i&&(T("1"),f(i.name),s(e))},A=function(){var e=he.a._client.getRoom(a);if(e){var t=e.getLiveTimeline().getEvents();t.length&&he.a._client.sendReadReceipt(t[t.length-1])}T("0"),f(""),s("")},j=function(e){m(!0),S(e)},D=function(e){m(!1),S("")};return y.a.createElement(oe,{styles:qt.a},y.a.createElement("div",{className:"chat_widget_content"},function(){var e=null;switch(_){case"0":e=y.a.createElement("div",{className:"chat_widget_content_title componentType_0"},y.a.createElement("span",{onClick:function(){T("2")},style:{cursor:"pointer"}},"Sending.Network"),y.a.createElement("img",{className:"chat_widget_content_title_bg",src:Kt}));break;case"1":e=y.a.createElement("div",{className:"chat_widget_content_title"},y.a.createElement("svg",{onClick:A,style:{cursor:"pointer"},viewBox:"64 64 896 896",focusable:"false","data-icon":"left",width:"17px",height:"17px",fill:"currentColor","aria-hidden":"true"},y.a.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"})),y.a.createElement("span",null,function(e){if(e)return e.length>13?"".concat(e.slice(0,5),"...").concat(e.slice(e.length-5)):e}(l)),y.a.createElement("span",{style:{paddingRight:17}}),y.a.createElement("img",{className:"chat_widget_content_title_bg",src:Kt}));break;case"2":e=y.a.createElement("div",{className:"chat_widget_content_title componentType_0"},y.a.createElement("span",{onClick:function(){T("0")},style:{cursor:"pointer"}},"Sending.Network"),y.a.createElement("img",{className:"chat_widget_content_title_bg",src:Kt}))}return e}(),function(){var e=null;switch(_){case"0":e=y.a.createElement(de,{rooms:r,enterRoom:C});break;case"1":e=y.a.createElement(Bt,{roomId:a,openUrlPreviewWidget:j,dapps:P});break;case"2":e=y.a.createElement(ar,null)}return e}(),g?y.a.createElement(rr,{url:k,closeUrlPreviewWidget:D}):null))},cr=r(208),lr=r.n(cr),fr=function(e){var t=e.loginSuccess;return y.a.createElement(oe,{styles:lr.a},y.a.createElement("div",{className:"chat_widget_login"},y.a.createElement("button",{onClick:function(){he.a.DIDLogin((function(e){e&&t()}))}},"Login")))},hr=r(209),dr=r.n(hr),pr=function(e){var t=Object(v.useState)(!1),r=Object(p.a)(t,2),n=(r[0],r[1]),i=Object(v.useState)(!1),o=Object(p.a)(i,2),a=o[0],s=o[1];Object(v.useEffect)((function(){he.a.init(e.baseUrl);var t=localStorage.getItem("access_token"),r=localStorage.getItem("user_id");t&&r&&(n(!0),s(!0))}),[]);return y.a.createElement(oe,{styles:dr.a},y.a.createElement("div",{style:{"--bg-color":e.bgColor,"--contacts-title-color":e.contactsTitleColor,"--contacts-list-color":e.contactsListColor,"--contact-hover-bg-color":e.contactHoverBgColor,"--contact-hover-color":e.contactHoverColor,"--contacts-room-color":e.contactsRoomColor,"--left-message-color":e.leftMessageColor,"--left-message-bg-color":e.leftMessageBgColor,"--left-message-ts-color":e.leftMessageTsColor,"--right-message-color":e.rightMessageColor,"--right-message-bg-color":e.rightMessageBgColor,"--right-message-ts-color":e.rightMessageTsColor,"--sendMessage-bg-color":e.sendMessageBgColor,"--sendMessage-border-color":e.sendMessageBorderColor,"--message-sender-color":e.messageSenderColor,"--room-hover-bg-color":e.roomHoverBgColor,"--room-hover-color":e.roomHoverColor}},y.a.createElement("div",{className:"chat_widget"},y.a.createElement("div",{className:"chat_widget_title"},y.a.createElement("img",{className:"chat_widget_title_logo",src:"data:image/png;base64,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"})),a&&y.a.createElement(ur,null),!a&&y.a.createElement(fr,{loginSuccess:function(){s(!0)}}))))};pr.defaultProps={baseUrl:"http://localhost",bgColor:"#161b24",contactsTitleColor:"#ececec",contactsListColor:"rgba(255, 255, 255, 0.8)",contactHoverBgColor:"rgba(255, 255, 255, 0.1)",contactHoverColor:"rgba(255, 255, 255, 1)",contactsRoomColor:"#ececec",leftMessageColor:"rgba(255, 255, 255, 0.8)",leftMessageBgColor:"rgba(255, 255, 255, 0.1)",leftMessageTsColor:"rgba(255, 255, 255, 0.3)",rightMessageColor:"#ffffff",rightMessageBgColor:"#1aa87f",rightMessageTsColor:"rgba(255, 255, 255, 0.3)",sendMessageBgColor:"#2c3038",sendMessageBorderColor:"#2c3038",messageSenderColor:"#999",roomHoverBgColor:"rgba(255, 255, 255, 0.1)",roomHoverColor:"rgba(255, 255, 255, 1)"};var vr=pr;t.default=te.create({component:vr,configuration:{tagname:"chat-component"},plugins:[{name:"font-loader",options:{google:{families:["Advent Pro","Noto Sans JP"]}}}]})},function(e,t,r){"use strict";(function(e){var n=r(3);Object.defineProperty(t,"__esModule",{value:!0});var i={};t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(72));Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a,s=n(r(285)),u=n(r(286));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}o.request((function(e,t){return e.qs=u.default.stringify(e.qs||{},e.qsStringifyOptions),(0,s.default)(e,t)}));try{a=e.indexedDB}catch(f){}a&&o.setCryptoStoreFactory((function(){return new o.IndexedDBCryptoStore(a,"sendingnetwork-js-sdk:crypto")}));var l=o;t.default=l,e.sendingNetworkcs=o}).call(this,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return new Promise((function(r,n){var i=document.createElement("script");i.async=!0,i.src=e,window[t]||(window[t]=[]);var o=window[t].find((function(e){return e.script.isEqualNode(i)}));if(o)return o.hasLoaded&&r(),void o.script.addEventListener("load",(function(){return r()}));var a={script:i,hasLoaded:!1};window[t].push(a),i.addEventListener("load",(function(){a.hasLoaded=!0,r()})),i.addEventListener("error",(function(){return n(new Error("Polyfill failed to load"))})),document.head.appendChild(i)}))}},function(e,t,r){"use strict";r.r(t),r(112).default.then((function(e){console.log("chat-component is mounted on the DOM",e)}))},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var r,s,u=a(e),c=1;c<arguments.length;c++){for(var l in r=Object(arguments[c]))i.call(r,l)&&(u[l]=r[l]);if(n){s=n(r);for(var f=0;f<s.length;f++)o.call(r,s[f])&&(u[s[f]]=r[s[f]])}}return u}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){var n=r(75),i=r(120);function o(t,r,a){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(9),i=r(228),o=r(2),a=r(1),s=r(14),u=r(15),c=r(37);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(232),h=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],d=function(e){s(r,e);var t=u(r);function r(e){var n;(a(this,r),n=t.call(this),e instanceof Error)?(n.originalError=e,e=e.message):(n.originalError=new Error(e),n.originalError.stack=n.stack);return n.name="AbortError",n.message=e,n}return o(r)}(c(Error)),p=function(e,t,r){var n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n,e},v=function(e,t){return new Promise((function(r,o){t=i({onFailedAttempt:function(){},retries:10},t);var a=f.operation(t);a.attempt(function(){var i=n(l().mark((function n(i){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=r,n.next=4,e(i);case 4:n.t1=n.sent,(0,n.t0)(n.t1),n.next=34;break;case 8:if(n.prev=8,n.t2=n.catch(0),n.t2 instanceof Error){n.next=13;break}return o(new TypeError('Non-error was thrown: "'.concat(n.t2,'". You should only throw errors.'))),n.abrupt("return");case 13:if(!(n.t2 instanceof d)){n.next=18;break}a.stop(),o(n.t2.originalError),n.next=34;break;case 18:if(!(n.t2 instanceof TypeError)||(s=n.t2.message,h.includes(s))){n.next=23;break}a.stop(),o(n.t2),n.next=34;break;case 23:return p(n.t2,i,t),n.prev=24,n.next=27,t.onFailedAttempt(n.t2);case 27:n.next=33;break;case 29:return n.prev=29,n.t3=n.catch(24),o(n.t3),n.abrupt("return");case 33:a.retry(n.t2)||o(a.mainError());case 34:case"end":return n.stop()}var s}),n,null,[[0,8],[24,29]])})));return function(e){return i.apply(this,arguments)}}())}))};e.exports=v,e.exports.default=v,e.exports.AbortError=d},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStore=void 0;var a=o(r(4)),s=r(49);function u(e){return"string"===typeof e&&!!e&&"undefined"!==e&&"null"!==e||"number"===typeof e}var c=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),(0,a.default)(this,"rooms",{}),(0,a.default)(this,"groups",{}),(0,a.default)(this,"users",{}),(0,a.default)(this,"syncToken",null),(0,a.default)(this,"filters",{}),(0,a.default)(this,"accountData",{}),(0,a.default)(this,"localStorage",void 0),(0,a.default)(this,"oobMembers",{}),(0,a.default)(this,"clientOptions",{}),(0,a.default)(this,"assets",void 0),(0,a.default)(this,"onRoomMember",(function(e,r,n){if("invite"!==n.membership){var i=t.users[n.userId]||new s.User(n.userId);n.name&&(i.setDisplayName(n.name),n.events.member&&i.setRawDisplayName(n.events.member.getDirectionalContent().displayname)),n.events.member&&n.events.member.getContent().avatar_url&&i.setAvatarUrl(n.events.member.getContent().avatar_url),t.users[i.userId]=i}})),this.localStorage=r.localStorage}return i(e,[{key:"getSyncToken",value:function(){return this.syncToken}},{key:"isNewlyCreated",value:function(){return Promise.resolve(!0)}},{key:"setSyncToken",value:function(e){this.syncToken=e}},{key:"storeGroup",value:function(e){this.groups[e.groupId]=e}},{key:"getGroup",value:function(e){return this.groups[e]||null}},{key:"getGroups",value:function(){return Object.values(this.groups)}},{key:"storeRoom",value:function(e){var t=this;this.rooms[e.roomId]=e,e.currentState.on("RoomState.members",this.onRoomMember),e.currentState.getMembers().forEach((function(r){t.onRoomMember(null,e.currentState,r)}))}},{key:"getRoom",value:function(e){return this.rooms[e]||null}},{key:"getRooms",value:function(){return Object.values(this.rooms)}},{key:"removeRoom",value:function(e){this.rooms[e]&&this.rooms[e].removeListener("RoomState.members",this.onRoomMember),delete this.rooms[e]}},{key:"getRoomSummaries",value:function(){return Object.values(this.rooms).map((function(e){return e.summary}))}},{key:"storeUser",value:function(e){this.users[e.userId]=e}},{key:"getUser",value:function(e){return this.users[e]||null}},{key:"getUsers",value:function(){return Object.values(this.users)}},{key:"scrollback",value:function(e,t){return[]}},{key:"storeEvents",value:function(e,t,r,n){}},{key:"storeFilter",value:function(e){e&&(this.filters[e.userId]||(this.filters[e.userId]={}),this.filters[e.userId][e.filterId]=e)}},{key:"getFilter",value:function(e,t){return this.filters[e]&&this.filters[e][t]?this.filters[e][t]:null}},{key:"getFilterIdByName",value:function(e){if(!this.localStorage)return null;var t="mxjssdk_memory_filter_"+e;try{var r=this.localStorage.getItem(t);if(u(r))return r}catch(n){}return null}},{key:"setFilterIdByName",value:function(e,t){if(this.localStorage){var r="mxjssdk_memory_filter_"+e;try{u(t)?this.localStorage.setItem(r,t):this.localStorage.removeItem(r)}catch(n){}}}},{key:"storeAccountDataEvents",value:function(e){var t=this;e.forEach((function(e){t.accountData[e.getType()]=e}))}},{key:"getAccountData",value:function(e){return this.accountData[e]}},{key:"setSyncData",value:function(e){return Promise.resolve()}},{key:"wantsSave",value:function(){return!1}},{key:"save",value:function(e){}},{key:"startup",value:function(){return Promise.resolve()}},{key:"getSavedSync",value:function(){return Promise.resolve(null)}},{key:"getSavedSyncToken",value:function(){return Promise.resolve(null)}},{key:"deleteAllData",value:function(){return this.rooms={},this.users={},this.syncToken=null,this.filters={},this.accountData={},Promise.resolve()}},{key:"getOutOfBandMembers",value:function(e){return Promise.resolve(this.oobMembers[e]||null)}},{key:"setOutOfBandMembers",value:function(e,t){return this.oobMembers[e]=t,Promise.resolve()}},{key:"clearOutOfBandMembers",value:function(e){return this.oobMembers={},Promise.resolve()}},{key:"getClientOptions",value:function(){return Promise.resolve(this.clientOptions)}},{key:"storeClientOptions",value:function(e){return this.clientOptions=Object.assign({},e),Promise.resolve()}},{key:"getAssets",value:function(){return Promise.resolve(this.assets)}},{key:"storeAssets",value:function(e){return this.assets=e,Promise.resolve()}}]),e}();t.MemoryStore=c},function(e,t,r){"use strict";var n=r(14),i=r(15),o=r(1),a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableValue=t.NamespacedValue=void 0;var s=function(){function e(t,r){if(o(this,e),this.stable=t,this.unstable=r,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}return a(e,[{key:"name",get:function(){return this.stable?this.stable:this.unstable}},{key:"altName",get:function(){return this.stable?this.unstable:null}},{key:"matches",value:function(e){return this.name===e||this.altName===e}},{key:"findIn",value:function(e){var t;return this.name&&(t=null===e||void 0===e?void 0:e[this.name]),!t&&this.altName&&(t=null===e||void 0===e?void 0:e[this.altName]),t}},{key:"includedIn",value:function(e){var t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}]),e}();t.NamespacedValue=s;var u=function(e){n(r,e);var t=i(r);function r(e,n){var i;if(o(this,r),!(i=t.call(this,e,n)).unstable)throw new Error("Unstable value must be supplied");return i}return a(r,[{key:"name",get:function(){return this.unstable}},{key:"altName",get:function(){return this.stable}}]),r}(s);t.UnstableValue=u},function(e,t,r){"use strict";var n=r(20),i=r(12),o=r(9),a=r(1),s=r(2),u=r(16),c=r(14),l=r(15);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Room=t.NotificationCountType=void 0;var d=h(r(4)),p=r(17),v=r(76),y=r(35),g=r(60),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),b=r(25),w=r(77),k=r(241),S=r(8),E=r(61),x=r(24),_=r(59),T=r(78),O=r(126);function M(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I,L=["1","2","3","4","5","6"];function C(e,t,r){var n={content:{},type:"m.receipt",room_id:t.getRoomId()};return n.content[t.getId()]={},n.content[t.getId()][r]={},n.content[t.getId()][r][e]={ts:t.getTs()},new b.SendingNetworkEvent(n)}t.NotificationCountType=I,function(e){e.Highlight="highlight",e.Total="total"}(I||(t.NotificationCountType=I={}));var A=function(e){c(r,e);var t=l(r);function r(e,n,i){var s,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(a(this,r),(s=t.call(this)).roomId=e,s.client=n,s.myUserId=i,s.opts=c,(0,d.default)(u(s),"reEmitter",void 0),(0,d.default)(u(s),"txnToEvent",{}),(0,d.default)(u(s),"receipts",{}),(0,d.default)(u(s),"receiptCacheByEventId",{}),(0,d.default)(u(s),"realReceipts",{}),(0,d.default)(u(s),"notificationCounts",{}),(0,d.default)(u(s),"timelineSets",void 0),(0,d.default)(u(s),"filteredTimelineSets",{}),(0,d.default)(u(s),"pendingEventList",void 0),(0,d.default)(u(s),"blacklistUnverifiedDevices",null),(0,d.default)(u(s),"selfMembership",null),(0,d.default)(u(s),"summaryHeroes",null),(0,d.default)(u(s),"getTypeWarning",!1),(0,d.default)(u(s),"getVersionWarning",!1),(0,d.default)(u(s),"membersPromise",void 0),(0,d.default)(u(s),"name",void 0),(0,d.default)(u(s),"normalizedName",void 0),(0,d.default)(u(s),"tags",{}),(0,d.default)(u(s),"accountData",{}),(0,d.default)(u(s),"summary",null),(0,d.default)(u(s),"storageToken",void 0),(0,d.default)(u(s),"timeline",void 0),(0,d.default)(u(s),"oldState",void 0),(0,d.default)(u(s),"currentState",void 0),(0,d.default)(u(s),"privacyEnhanced",!1),(0,d.default)(u(s),"threads",new Map),s.setMaxListeners(100),s.reEmitter=new E.ReEmitter(u(s)),c.pendingEventOrdering=c.pendingEventOrdering||_.PendingEventOrdering.Chronological,-1===["chronological","detached"].indexOf(c.pendingEventOrdering))throw new Error("opts.pendingEventOrdering MUST be either 'chronological' or 'detached'. Got: '"+c.pendingEventOrdering+"'");if(s.name=e,s.timelineSets=[new v.EventTimelineSet(u(s),c)],s.reEmitter.reEmit(s.getUnfilteredTimelineSet(),["Room.timeline","Room.timelineReset"]),s.fixUpLegacyTimelineFields(),"detached"==s.opts.pendingEventOrdering){s.pendingEventList=[];var l=n.sessionStore.store.getItem(j(s.roomId));l&&JSON.parse(l).forEach(function(){var e=o(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new b.SendingNetworkEvent(t)).getType()!==x.EventType.RoomMessageEncrypted){e.next=4;break}return e.next=4,r.attemptDecryption(s.client.crypto);case 4:r.setStatus(b.EventStatus.NOT_SENT),s.addPendingEvent(r,r.getTxnId());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return s.opts.lazyLoadMembers?s.membersPromise=null:s.membersPromise=Promise.resolve(!1),s}return s(r,[{key:"decryptCriticalEvents",value:function(){var e=this,t=this.getEventReadUpTo(this.client.getUserId(),!0),r=this.getLiveTimeline().getEvents(),n=r.findIndex((function(e){return e.event.event_id===t})),i=r.slice(n).filter((function(e){return e.shouldAttemptDecryption()})).reverse().map((function(t){return t.attemptDecryption(e.client.crypto,{isRetry:!0})}));return Promise.allSettled(i)}},{key:"decryptAllEvents",value:function(){var e=this,t=this.getUnfilteredTimelineSet().getLiveTimeline().getEvents().filter((function(e){return e.shouldAttemptDecryption()})).reverse().map((function(t){return t.attemptDecryption(e.client.crypto,{isRetry:!0})}));return Promise.allSettled(t)}},{key:"getVersion",value:function(){var e=this.currentState.getStateEvents(x.EventType.RoomCreate,"");if(!e)return this.getVersionWarning||(S.logger.warn("[getVersion] Room "+this.roomId+" does not have an m.room.create event"),this.getVersionWarning=!0),"1";var t=e.getContent().room_version;return void 0===t?"1":t}},{key:"shouldUpgradeToVersion",value:function(){return L.includes(this.getVersion())?null:"6"}},{key:"getRecommendedVersion",value:function(){var e=o(f().mark((function e(){var t,r,n,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getCapabilities();case 2:if(t=e.sent,!(r=t["m.room_versions"])){r={default:"6",available:{}},n=i(L);try{for(n.s();!(o=n.n()).done;)a=o.value,r.available[a]=_.RoomVersionStability.Stable}catch(c){n.e(c)}finally{n.f()}}if(!(s=this.checkVersionAgainstCapability(r)).urgent||!s.needsUpgrade){e.next=18;break}return S.logger.warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about."),e.next=10,this.client.getCapabilities(!0);case 10:if(u=e.sent,r=u["m.room_versions"]){e.next=17;break}return S.logger.warn("No room version capability - assuming upgrade required."),e.abrupt("return",s);case 17:s=this.checkVersionAgainstCapability(r);case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkVersionAgainstCapability",value:function(e){var t=this.getVersion();S.logger.log("[".concat(this.roomId,"] Current version: ").concat(t)),S.logger.log("[".concat(this.roomId,"] Version capability: "),e);var r={version:t,needsUpgrade:!1,urgent:!1};return t===e.default||Object.keys(e.available).filter((function(t){return"stable"===e.available[t]})).includes(t)||(r.version=e.default,r.needsUpgrade=!0,r.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),r.urgent?S.logger.warn("URGENT upgrade required on ".concat(this.roomId)):S.logger.warn("Non-urgent upgrade required on ".concat(this.roomId))),r}},{key:"userMayUpgradeRoom",value:function(e){return this.currentState.maySendStateEvent(x.EventType.RoomTombstone,e)}},{key:"getPendingEvents",value:function(){if("detached"!==this.opts.pendingEventOrdering)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this.opts.pendingEventOrdering);return this.pendingEventList}},{key:"removePendingEvent",value:function(e){if("detached"!==this.opts.pendingEventOrdering)throw new Error("Cannot call removePendingEvent with pendingEventOrdering == "+this.opts.pendingEventOrdering);var t=m.removeElement(this.pendingEventList,(function(t){return t.getId()==e}),!1);return this.savePendingEvents(),t}},{key:"hasPendingEvent",value:function(e){return"detached"===this.opts.pendingEventOrdering&&this.pendingEventList.some((function(t){return t.getId()===e}))}},{key:"getPendingEvent",value:function(e){return"detached"!==this.opts.pendingEventOrdering?null:this.pendingEventList.find((function(t){return t.getId()===e}))}},{key:"getLiveTimeline",value:function(){return this.getUnfilteredTimelineSet().getLiveTimeline()}},{key:"getLastActiveTimestamp",value:function(){var e=this.getLiveTimeline().getEvents();return e.length?e[e.length-1].getTs():Number.MIN_SAFE_INTEGER}},{key:"getMyMembership",value:function(){return this.selfMembership}},{key:"getDMInviter",value:function(){if(this.myUserId){var e=this.getMember(this.myUserId);if(e)return e.getDMInviter()}if("invite"===this.selfMembership&&(2==this.getInvitedAndJoinedMemberCount()&&this.summaryHeroes.length))return this.summaryHeroes[0]}},{key:"getDMAnotherMember",value:function(){var e=this,t=this.currentState.getMembers().find((function(t){return t.userId!==e.myUserId}));return null===t||void 0===t?void 0:t.userId}},{key:"guessDMUserId",value:function(){var e=this,t=this.getMember(this.myUserId);if(t){var r=t.getDMInviter();if(r)return r}if(Array.isArray(this.summaryHeroes)&&this.summaryHeroes.length)return this.summaryHeroes[0];var n=this.currentState.getMembers().find((function(t){return t.userId!==e.myUserId}));return n?n.userId:this.myUserId}},{key:"getAvatarFallbackMember",value:function(){var e=this;if(!(this.getInvitedAndJoinedMemberCount()>2)){var t=Array.isArray(this.summaryHeroes)&&this.summaryHeroes.length;if(t){var r=this.summaryHeroes.map((function(t){return e.getMember(t)})).find((function(e){return!!e}));if(r)return r}var n=this.currentState.getMembers();if(n.length<=2){var i=n.find((function(t){return t.userId!==e.myUserId}));if(i)return i}if(t){var o=this.summaryHeroes.map((function(t){return e.client.getUser(t)})).find((function(e){return!!e}));if(o){var a=new w.RoomMember(this.roomId,o.userId);return a.user=o,a}}}}},{key:"updateMyMembership",value:function(e){var t=this.selfMembership;this.selfMembership=e,t!==e&&("leave"===e&&this.cleanupAfterLeaving(),this.emit("Room.myMembership",this,e,t))}},{key:"loadMembersFromServer",value:function(){var e=o(f().mark((function e(){var t,r,n,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.client.store.getSyncToken(),r=m.encodeParams({not_membership:"leave",at:t}),n=m.encodeUri("/rooms/$roomId/members?"+r,{$roomId:this.roomId}),i=this.client.http,e.next=6,i.authedRequest(void 0,"GET",n);case 6:return o=e.sent,e.abrupt("return",o.chunk);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMembers",value:function(){var e=o(f().mark((function e(){var t,r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,this.client.store.getOutOfBandMembers(this.roomId);case 3:if(null!==(r=e.sent)){e.next=10;break}return t=!0,e.next=8,this.loadMembersFromServer();case 8:r=e.sent,S.logger.log("LL: got ".concat(r.length," ")+"members from server for room ".concat(this.roomId));case 10:return n=r.map(this.client.getEventMapper()),e.abrupt("return",{memberEvents:n,fromServer:t});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMembersIfNeeded",value:function(){var e=this;if(this.membersPromise)return this.membersPromise;this.currentState.markOutOfBandMembersStarted();var t=this.loadMembers().then((function(t){return e.currentState.setOutOfBandMembers(t.memberEvents),e.client.isCryptoEnabled()&&e.client.isRoomEncrypted(e.roomId)&&e.client.crypto.trackRoomDevices(e.roomId),t.fromServer})).catch((function(t){throw e.membersPromise=null,e.currentState.markOutOfBandMembersFailed(),t}));return t.then((function(t){if(t){var r=e.currentState.getMembers().filter((function(e){return e.isOutOfBand()})).map((function(e){return e.events.member.event}));return S.logger.log("LL: telling store to write ".concat(r.length)+" members for room ".concat(e.roomId)),e.client.store.setOutOfBandMembers(e.roomId,r).catch((function(e){S.logger.log("LL: storing OOB room members failed, oh well",e)}))}})).catch((function(e){S.logger.error(e)})),this.membersPromise=t,this.membersPromise}},{key:"clearLoadedMembersIfNeeded",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.opts.lazyLoadMembers||!this.membersPromise){e.next=7;break}return e.next=3,this.loadMembersIfNeeded();case 3:return e.next=5,this.client.store.clearOutOfBandMembers(this.roomId);case 5:this.currentState.clearOutOfBandMembers(),this.membersPromise=null;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanupAfterLeaving",value:function(){var e=this;this.clearLoadedMembersIfNeeded().catch((function(t){S.logger.error("error after clearing loaded members from "+"room ".concat(e.roomId," after leaving")),S.logger.log(t)}))}},{key:"resetLiveTimeline",value:function(e,t){for(var r=0;r<this.timelineSets.length;r++)this.timelineSets[r].resetLiveTimeline(e,t);this.fixUpLegacyTimelineFields()}},{key:"fixUpLegacyTimelineFields",value:function(){this.timeline=this.getLiveTimeline().getEvents(),this.oldState=this.getLiveTimeline().getState(y.EventTimeline.BACKWARDS),this.currentState=this.getLiveTimeline().getState(y.EventTimeline.FORWARDS)}},{key:"hasUnverifiedDevices",value:function(){var e=o(f().mark((function e(){var t,r,n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client.isRoomEncrypted(this.roomId)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.getEncryptionTargetMembers();case 4:t=e.sent,r=i(t),e.prev=6,r.s();case 8:if((n=r.n()).done){e.next=15;break}if(o=n.value,!this.client.getStoredDevicesForUser(o.userId).some((function(e){return e.isUnverified()}))){e.next=13;break}return e.abrupt("return",!0);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this,[[6,17,20,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTimelineSets",value:function(){return this.timelineSets}},{key:"getUnfilteredTimelineSet",value:function(){return this.timelineSets[0]}},{key:"getTimelineForEvent",value:function(e){return this.getUnfilteredTimelineSet().getTimelineForEvent(e)}},{key:"addTimeline",value:function(){return this.getUnfilteredTimelineSet().addTimeline()}},{key:"findEventById",value:function(e){var t=this.getUnfilteredTimelineSet().findEventById(e);if(t)return t;for(var r=this.getThreads(),n=0;n<r.length;n++){if(t=r[n].findEventById(e))return t}}},{key:"getUnreadNotificationCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.Total;return this.notificationCounts[e]}},{key:"setUnreadNotificationCount",value:function(e,t){this.notificationCounts[e]=t}},{key:"setSummary",value:function(e){var t=this,r=e["m.heroes"],n=e["m.joined_member_count"],i=e["m.invited_member_count"];Number.isInteger(n)&&this.currentState.setJoinedMemberCount(n),Number.isInteger(i)&&this.currentState.setInvitedMemberCount(i),Array.isArray(r)&&(this.summaryHeroes=r.filter((function(e){return e!==t.myUserId})))}},{key:"setBlacklistUnverifiedDevices",value:function(e){this.blacklistUnverifiedDevices=e}},{key:"getBlacklistUnverifiedDevices",value:function(){return this.blacklistUnverifiedDevices}},{key:"getAvatarUrl",value:function(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.currentState.getStateEvents(x.EventType.RoomAvatar,"");if(!o&&!i)return null;var a=o?o.getContent().url:null;return a?(0,g.getHttpUriForMxc)(e,a,t,r,n):null}},{key:"getMxcAvatarUrl",value:function(){var e,t;return(null===(e=this.currentState.getStateEvents(x.EventType.RoomAvatar,""))||void 0===e||null===(t=e.getContent())||void 0===t?void 0:t.url)||null}},{key:"getAliases",value:function(){var e=[],t=this.currentState.getStateEvents(x.EventType.RoomAliases);if(t)for(var r=function(r){var n=t[r];if(Array.isArray(n.getContent().aliases)){var i=n.getContent().aliases.filter((function(e){return"string"===typeof e&&("#"===e[0]&&!!e.endsWith(":".concat(n.getStateKey())))}));Array.prototype.push.apply(e,i)}},n=0;n<t.length;++n)r(n);return e}},{key:"getCanonicalAlias",value:function(){var e=this.currentState.getStateEvents(x.EventType.RoomCanonicalAlias,"");return e&&e.getContent().alias||null}},{key:"getAltAliases",value:function(){var e=this.currentState.getStateEvents(x.EventType.RoomCanonicalAlias,"");return e&&e.getContent().alt_aliases||[]}},{key:"addEventsToTimeline",value:function(e,t,r,n){r.getTimelineSet().addEventsToTimeline(e,t,r,n)}},{key:"getThread",value:function(e){return this.getThreads().find((function(t){return t.id===e}))}},{key:"getThreads",value:function(){return Array.from(this.threads.values())}},{key:"getMember",value:function(e){return this.currentState.getMember(e)}},{key:"getMembers",value:function(){return this.currentState.getMembers()}},{key:"getJoinedMembers",value:function(){return this.getMembersWithMembership("join")}},{key:"getJoinedMemberCount",value:function(){return this.currentState.getJoinedMemberCount()}},{key:"getInvitedMemberCount",value:function(){return this.currentState.getInvitedMemberCount()}},{key:"getInvitedAndJoinedMemberCount",value:function(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()}},{key:"getMembersWithMembership",value:function(e){return this.currentState.getMembers().filter((function(t){return t.membership===e}))}},{key:"getEncryptionTargetMembers",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMembersIfNeeded();case 2:return t=this.getMembersWithMembership("join"),this.shouldEncryptForInvitedMembers()&&(t=t.concat(this.getMembersWithMembership("invite"))),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldEncryptForInvitedMembers",value:function(){var e,t=this.currentState.getStateEvents(x.EventType.RoomHistoryVisibility,"");return"joined"!==(null===t||void 0===t||null===(e=t.getContent())||void 0===e?void 0:e.history_visibility)}},{key:"getDefaultRoomName",value:function(e){return this.calculateRoomName(e,!0)}},{key:"hasMembershipState",value:function(e,t){var r=this.getMember(e);return!!r&&r.membership===t}},{key:"getOrCreateFilteredTimelineSet",value:function(e){if(this.filteredTimelineSets[e.filterId])return this.filteredTimelineSets[e.filterId];var t=Object.assign({filter:e},this.opts),r=new v.EventTimelineSet(this,t);this.reEmitter.reEmit(r,["Room.timeline","Room.timelineReset"]),this.filteredTimelineSets[e.filterId]=r,this.timelineSets.push(r);var n=this.getLiveTimeline();n.getEvents().forEach((function(e){r.addLiveEvent(e)}));for(var i=n;i.getNeighbouringTimeline(y.EventTimeline.BACKWARDS);)i=i.getNeighbouringTimeline(y.EventTimeline.BACKWARDS);return r.getLiveTimeline().setPaginationToken(i.getPaginationToken(y.EventTimeline.BACKWARDS),y.EventTimeline.BACKWARDS),r}},{key:"removeFilteredTimelineSet",value:function(e){var t=this.filteredTimelineSets[e.filterId];delete this.filteredTimelineSets[e.filterId];var r=this.timelineSets.indexOf(t);r>-1&&this.timelineSets.splice(r,1)}},{key:"findThreadForEvent",value:function(e){if(!e)return null;if(e.isThreadRelation)return this.threads.get(e.threadRootId);var t=this.findEventById(e.parentEventId);return this.findThreadForEvent(t)}},{key:"addThreadedEvent",value:function(e){var t=this.findThreadForEvent(e);if(t)t.addEvent(e);else{var r=[e],n=this.findEventById(e.threadRootId);n&&r.unshift(n),t=new O.Thread(r,this,this.client),this.reEmitter.reEmit(t,[O.ThreadEvent.Update,O.ThreadEvent.Ready]),this.threads.set(t.id,t),this.emit(O.ThreadEvent.New,t)}this.emit(O.ThreadEvent.Update,t)}},{key:"addLiveEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.isRedaction()){var n=e.event.redacts,i=this.findEventById(n);if(i){if(i.makeRedacted(e),i.getStateKey()){var o=this.currentState.getStateEvents(i.getType(),i.getStateKey());o.getId()===i.getId()&&this.currentState.setStateEvents([i])}this.emit("Room.redaction",e,this)}}if(e.getUnsigned().transaction_id){var a=this.txnToEvent[e.getUnsigned().transaction_id];if(a)return void this.handleRemoteEcho(e,a)}for(var s=0;s<this.timelineSets.length;s++)this.timelineSets[s].addLiveEvent(e,t,r);e.sender&&e.getType()!==x.EventType.RoomRedaction&&this.addReceipt(C(e.sender.userId,e,"m.read"),!0)}},{key:"addPendingEvent",value:function(e,t){var r;if(null===(r=this.client)||void 0===r||!r.supportsExperimentalThreads()||!e.threadRootId){if(e.status!==b.EventStatus.SENDING&&e.status!==b.EventStatus.NOT_SENT)throw new Error("addPendingEvent called on an event with status "+e.status);if(this.txnToEvent[t])throw new Error("addPendingEvent called on an event with known txnId "+t);if(y.EventTimeline.setEventMetadata(e,this.getLiveTimeline().getState(y.EventTimeline.FORWARDS),!1),this.txnToEvent[t]=e,"detached"==this.opts.pendingEventOrdering){if(this.pendingEventList.some((function(e){return e.status===b.EventStatus.NOT_SENT}))&&(S.logger.warn("Setting event as NOT_SENT due to messages in the same state"),e.setStatus(b.EventStatus.NOT_SENT)),this.pendingEventList.push(e),this.savePendingEvents(),e.isRelation()&&this.aggregateNonLiveRelation(e),e.isRedaction()){var n=e.event.redacts,i=this.pendingEventList&&this.pendingEventList.find((function(e){return e.getId()===n}));i||(i=this.getUnfilteredTimelineSet().findEventById(n)),i&&(i.markLocallyRedacted(e),this.emit("Room.redaction",e,this))}}else for(var o=0;o<this.timelineSets.length;o++){var a=this.timelineSets[o];a.getFilter()?a.getFilter().filterRoomTimeline([e]).length&&a.addEventToTimeline(e,a.getLiveTimeline(),!1):a.addEventToTimeline(e,a.getLiveTimeline(),!1)}this.emit("Room.localEchoUpdated",e,this,null,null)}}},{key:"savePendingEvents",value:function(){var e=this;if(this.pendingEventList){var t=this.pendingEventList.map((function(e){return R(R({},e.event),{},{txn_id:e.getTxnId()})})).filter((function(t){var r=t.type===x.EventType.RoomMessageEncrypted,n=e.client.isRoomEncrypted(e.roomId);return r||!n})),r=this.client.sessionStore.store;this.pendingEventList.length>0?r.setItem(j(this.roomId),JSON.stringify(t)):r.removeItem(j(this.roomId))}}},{key:"aggregateNonLiveRelation",value:function(e){for(var t=0;t<this.timelineSets.length;t++){var r=this.timelineSets[t];r.getFilter()?r.getFilter().filterRoomTimeline([e]).length&&r.aggregateRelations(e):r.aggregateRelations(e)}}},{key:"handleRemoteEcho",value:function(e,t){var r=t.getId(),n=e.getId(),i=t.status;S.logger.debug("Got remote echo for event ".concat(r," -> ").concat(n," ")+"old status ".concat(i)),delete this.txnToEvent[e.getUnsigned().transaction_id],this.pendingEventList&&this.removePendingEvent(r),t.handleRemoteEcho(e.event);for(var o=0;o<this.timelineSets.length;o++){this.timelineSets[o].handleRemoteEcho(t,r,n)}this.emit("Room.localEchoUpdated",t,this,r,i)}},{key:"updatePendingEvent",value:function(e,t,r){if(S.logger.log("setting pendingEvent status to ".concat(t," in ").concat(e.getRoomId()," ")+"event ID ".concat(e.getId()," -> ").concat(r)),t==b.EventStatus.SENT&&!r)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(t==b.EventStatus.SENT&&this.getUnfilteredTimelineSet().eventIdToTimeline(r))return;var i=e.status,o=e.getId();if(!i)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");var a=D[i];if(!a||a.indexOf(t)<0)throw new Error("Invalid EventStatus transition "+i+"->"+t);if(e.setStatus(t),t==b.EventStatus.SENT){e.replaceLocalEventId(r);for(var s=0;s<this.timelineSets.length;s++)this.timelineSets[s].replaceEventId(o,r)}else if(t==b.EventStatus.CANCELLED){if(this.pendingEventList){var u=this.pendingEventList.findIndex((function(e){return e.getId()===o}));if(-1!==u){var c=this.pendingEventList.splice(u,1),l=n(c,1)[0];l.isRedaction()&&this.revertRedactionLocalEcho(l)}}this.removeEvent(o)}this.savePendingEvents(),this.emit("Room.localEchoUpdated",e,this,o,i)}},{key:"revertRedactionLocalEcho",value:function(e){var t=e.event.redacts;if(t){var r=this.getUnfilteredTimelineSet().findEventById(t);r&&(r.unmarkLocallyRedacted(),this.emit("Room.redactionCancelled",e,this),r.isRelation()&&this.aggregateNonLiveRelation(r))}}},{key:"addLiveEvents",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&-1===["replace","ignore"].indexOf(t))throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");for(r=0;r<this.timelineSets.length;r++){var i=this.timelineSets[r].getLiveTimeline();if(i.getPaginationToken(y.EventTimeline.FORWARDS))throw new Error("live timeline "+r+" is no longer live - it has a pagination token ("+i.getPaginationToken(y.EventTimeline.FORWARDS)+")");if(i.getNeighbouringTimeline(y.EventTimeline.FORWARDS))throw new Error("live timeline "+r+" is no longer live - it has a neighbouring timeline")}for(r=0;r<e.length;r++){this.addLiveEvent(e[r],t,n);var o=this.threads.get(e[r].getId());o&&!o.ready&&o.addEvent(e[r],!0)}}},{key:"addEphemeralEvents",value:function(e){var t,r=i(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;"m.typing"===n.getType()?this.currentState.setTypingEvent(n):"m.receipt"===n.getType()&&this.addReceipt(n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"removeEvents",value:function(e){for(var t=0;t<e.length;++t)this.removeEvent(e[t])}},{key:"removeEvent",value:function(e){for(var t=!1,r=0;r<this.timelineSets.length;r++){var n=this.timelineSets[r].removeEvent(e);n&&(n.isRedaction()&&this.revertRedactionLocalEcho(n),t=!0)}return t}},{key:"recalculate",value:function(){var e=this,t=this.currentState.getStateEvents(x.EventType.RoomMember,this.myUserId);t&&"invite"===t.getContent().membership&&(t.getUnsigned().invite_room_state||[]).forEach((function(t){e.currentState.getStateEvents(t.type,t.state_key)||e.currentState.setStateEvents([new b.SendingNetworkEvent({type:t.type,state_key:t.state_key,content:t.content,event_id:"$fake"+Date.now(),room_id:e.roomId,user_id:e.myUserId})])}));var r=this.name;this.name=this.calculateRoomName(this.myUserId),this.normalizedName=(0,m.normalize)(this.name),this.summary=new k.RoomSummary(this.roomId,{title:this.name}),r!==this.name&&this.emit("Room.name",this)}},{key:"getUsersReadUpTo",value:function(e){return this.getReceiptsForEvent(e).filter((function(e){return"m.read"===e.type})).map((function(e){return e.userId}))}},{key:"getEventReadUpTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.receipts;return t&&(r=this.realReceipts),void 0===r["m.read"]||void 0===r["m.read"][e]?null:r["m.read"][e].eventId}},{key:"hasUserReadEvent",value:function(e,t){var r=this.getEventReadUpTo(e,!1);if(r===t)return!0;if(this.timeline.length&&this.timeline[this.timeline.length-1].getSender()&&this.timeline[this.timeline.length-1].getSender()===e)return!0;for(var n=this.timeline.length-1;n>=0;--n){var i=this.timeline[n];if(i.getId()===t)return!1;if(i.getId()===r)return!0}return!1}},{key:"getReceiptsForEvent",value:function(e){return this.receiptCacheByEventId[e.getId()]||[]}},{key:"addReceipt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||this.addReceiptsToStructure(e,this.realReceipts),this.addReceiptsToStructure(e,this.receipts),this.receiptCacheByEventId=this.buildReceiptCache(this.receipts),this.emit("Room.receipt",e,this)}},{key:"addReceiptsToStructure",value:function(e,t){var r=this,n=e.getContent();Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(i){Object.keys(n[e][i]).forEach((function(o){var a=n[e][i][o];t[i]||(t[i]={});var s=t[i][o];if(s){var u=r.getUnfilteredTimelineSet().compareEventOrdering(s.eventId,e);if(null!==u&&u>=0)return}else t[i][o]={};t[i][o]={eventId:e,data:a}}))}))}))}},{key:"buildReceiptCache",value:function(e){var t={};return Object.keys(e).forEach((function(r){Object.keys(e[r]).forEach((function(n){var i=e[r][n];t[i.eventId]||(t[i.eventId]=[]),t[i.eventId].push({userId:n,type:r,data:i.data})}))})),t}},{key:"addLocalEchoReceipt",value:function(e,t,r){this.addReceipt(C(e,t,r),!0)}},{key:"addTags",value:function(e){this.tags=e.getContent().tags||{},this.emit("Room.tags",e,this)}},{key:"addAccountData",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];"m.tag"===r.getType()&&this.addTags(r);var n=this.accountData[r.getType()];this.accountData[r.getType()]=r,this.emit("Room.accountData",r,this,n)}}},{key:"getAccountData",value:function(e){return this.accountData[e]}},{key:"maySendMessage",value:function(){return"join"===this.getMyMembership()&&this.currentState.maySendEvent(x.EventType.RoomMessage,this.myUserId)}},{key:"isDmRoom",value:function(){try{var e,t=(null===(e=this.currentState.getStateEvents(x.EventType.RoomCreate,""))||void 0===e?void 0:e.getContent()).preset;return t&&t===T.Preset.TrustedPrivateChat}catch(r){return!1}}},{key:"canInvite",value:function(e){var t="join"===this.getMyMembership(),r=this.currentState.getStateEvents(x.EventType.RoomPowerLevels,""),n=this.currentState.getStateEvents(x.EventType.RoomCreate,""),i=r&&r.getContent(),o=this.getMember(e);i&&o&&i.invite>o.powerLevel&&(t=!1);var a=(n&&n.getContent()||{}).preset;return a&&a===T.Preset.TrustedPrivateChat&&(t=!1),t}},{key:"getJoinRule",value:function(){return this.currentState.getJoinRule()}},{key:"getHistoryVisibility",value:function(){return this.currentState.getHistoryVisibility()}},{key:"getGuestAccess",value:function(){return this.currentState.getGuestAccess()}},{key:"getType",value:function(){var e=this.currentState.getStateEvents(x.EventType.RoomCreate,"");if(e)return e.getContent()[x.RoomCreateTypeField];this.getTypeWarning||(S.logger.warn("[getType] Room "+this.roomId+" does not have an m.room.create event"),this.getTypeWarning=!0)}},{key:"isSpaceRoom",value:function(){return this.getType()===x.RoomType.Space}},{key:"hasSpaceParent",value:function(){var e,t=this.currentState.getStateEvents(x.EventType.SpaceParent)||[],r=n(t,1)[0];return r&&(e=r.getContent()),!!e}},{key:"calculateRoomName",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!r){var n=this.currentState.getStateEvents(x.EventType.RoomName,"");if(n&&n.getContent()&&n.getContent().name)return n.getContent().name}var i=this.getCanonicalAlias();if(!i){var o=this.getAltAliases();o.length&&(i=o[0])}if(i)return i;var a=this.currentState.getJoinedMemberCount(),s=this.currentState.getInvitedMemberCount(),u=a+s-1,c=[],l=this.currentState.getStateEvents(x.UNSTABLE_ELEMENT_FUNCTIONAL_USERS.name,"");Array.isArray(null===l||void 0===l?void 0:l.getContent().service_members)&&(c=l.getContent().service_members);var f=null;if(this.summaryHeroes)f=[],this.summaryHeroes.forEach((function(e){if(c.includes(e))u--;else{var r=t.getMember(e);f.push(r?r.name:e)}}));else{var h=this.currentState.getMembers().filter((function(t){return t.userId!==e&&("invite"===t.membership||"join"===t.membership)}));(h=h.filter((function(e){var t=e.userId;return!c.includes(t)||(u--,!1)}))).sort((function(e,t){return m.compare(e.userId,t.userId)})),h=h.slice(0,5),f=h.map((function(e){return e.name}))}if(u)return N(f,u);var d=this.getMyMembership();if("join"==d){var p=this.currentState.getStateEvents(x.EventType.RoomThirdPartyInvite);if(p&&p.length){var v=p.map((function(e){return e.getContent().display_name}));return"Inviting ".concat(N(v))}}var y=f;return y.length||(y=this.currentState.getMembers().filter((function(t){return t.userId!==e&&"invite"!==t.membership&&"join"!==t.membership})).map((function(e){return e.name}))),y.length?"Empty room (was ".concat(N(y),")"):"Empty room"}}]),r}(p.EventEmitter);function j(e){return"mx_pending_events_".concat(e)}t.Room=A;var D={};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length+1,r=t-1;if(e.length){if(1===e.length&&r<=1)return e[0];if(2===e.length&&r<=2)return"".concat(e[0]," and ").concat(e[1]);var n=r>1;return n?"".concat(e[0]," and ").concat(r," others"):"".concat(e[0]," and 1 other")}return"Empty room"}D[b.EventStatus.ENCRYPTING]=[b.EventStatus.SENDING,b.EventStatus.NOT_SENT],D[b.EventStatus.SENDING]=[b.EventStatus.ENCRYPTING,b.EventStatus.QUEUED,b.EventStatus.NOT_SENT,b.EventStatus.SENT],D[b.EventStatus.QUEUED]=[b.EventStatus.SENDING,b.EventStatus.CANCELLED],D[b.EventStatus.SENT]=[],D[b.EventStatus.NOT_SENT]=[b.EventStatus.SENDING,b.EventStatus.QUEUED,b.EventStatus.CANCELLED],D[b.EventStatus.CANCELLED]=[]},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(16),a=r(14),s=r(15),u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomState=void 0;var c,l=u(r(4)),f=r(17),h=r(77),d=r(8),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),v=r(24),y=r(78);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}!function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Finished=2]="Finished"}(c||(c={}));var m=function(e){a(r,e);var t=s(r);function r(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:c.NotStarted};return n(this,r),(i=t.call(this)).roomId=e,i.oobMemberFlags=a,(0,l.default)(o(i),"sentinels",{}),(0,l.default)(o(i),"displayNameToUserIds",{}),(0,l.default)(o(i),"userIdsToDisplayNames",{}),(0,l.default)(o(i),"tokenToInvite",{}),(0,l.default)(o(i),"joinedMemberCount",null),(0,l.default)(o(i),"summaryJoinedMemberCount",null),(0,l.default)(o(i),"invitedMemberCount",null),(0,l.default)(o(i),"summaryInvitedMemberCount",null),(0,l.default)(o(i),"modified",void 0),(0,l.default)(o(i),"members",{}),(0,l.default)(o(i),"events",new Map),(0,l.default)(o(i),"paginationToken",null),i.updateModifiedTime(),i}return i(r,[{key:"getJoinedMemberCount",value:function(){return null!==this.summaryJoinedMemberCount?this.summaryJoinedMemberCount:(null===this.joinedMemberCount&&(this.joinedMemberCount=this.getMembers().reduce((function(e,t){return"join"===t.membership?e+1:e}),0)),this.joinedMemberCount)}},{key:"setJoinedMemberCount",value:function(e){this.summaryJoinedMemberCount=e}},{key:"getInvitedMemberCount",value:function(){return null!==this.summaryInvitedMemberCount?this.summaryInvitedMemberCount:(null===this.invitedMemberCount&&(this.invitedMemberCount=this.getMembers().reduce((function(e,t){return"invite"===t.membership?e+1:e}),0)),this.invitedMemberCount)}},{key:"setInvitedMemberCount",value:function(e){this.summaryInvitedMemberCount=e}},{key:"getMembers",value:function(){return Object.values(this.members)}},{key:"getMembersExcept",value:function(e){return this.getMembers().filter((function(t){return!e.includes(t.userId)}))}},{key:"getMember",value:function(e){return this.members[e]||null}},{key:"getSentinelMember",value:function(e){if(!e)return null;var t=this.sentinels[e];if(void 0===t){t=new h.RoomMember(this.roomId,e);var r=this.members[e];r&&t.setMembershipEvent(r.events.member,this),this.sentinels[e]=t}return t}},{key:"getStateEvents",value:function(e,t){if(!this.events.has(e))return void 0===t?[]:null;if(void 0===t)return Array.from(this.events.get(e).values());var r=this.events.get(e).get(t);return r||null}},{key:"clone",value:function(){var e=new r(this.roomId,this.oobMemberFlags),t=this.oobMemberFlags.status;return this.oobMemberFlags.status=c.NotStarted,Array.from(this.events.values()).forEach((function(t){e.setStateEvents(Array.from(t.values()))})),this.oobMemberFlags.status=t,null!==this.summaryInvitedMemberCount&&e.setInvitedMemberCount(this.getInvitedMemberCount()),null!==this.summaryJoinedMemberCount&&e.setJoinedMemberCount(this.getJoinedMemberCount()),this.oobMemberFlags.status==c.Finished&&this.getMembers().forEach((function(t){t.isOutOfBand()&&e.getMember(t.userId).markOutOfBand()})),e}},{key:"setUnknownStateEvents",value:function(e){var t=this,r=e.filter((function(e){return!t.events.has(e.getType())||!t.events.get(e.getType()).has(e.getStateKey())}));this.setStateEvents(r)}},{key:"setStateEvents",value:function(e){var t=this;this.updateModifiedTime(),e.forEach((function(e){if(e.getRoomId()===t.roomId&&e.isState()){var r=t.getStateEventMatching(e);t.setStateEvent(e),e.getType()===v.EventType.RoomMember&&(t.updateDisplayNameCache(e.getStateKey(),e.getContent().displayname),t.updateThirdPartyTokenCache(e)),t.emit("RoomState.events",e,t,r)}})),e.forEach((function(e){if(e.getRoomId()===t.roomId&&e.isState())if(e.getType()===v.EventType.RoomMember){var r=e.getStateKey();"leave"!==e.getContent().membership&&"ban"!==e.getContent().membership||(e.getContent().avatar_url=e.getContent().avatar_url||e.getPrevContent().avatar_url,e.getContent().displayname=e.getContent().displayname||e.getPrevContent().displayname);var n=t.getOrCreateMember(r,e);n.setMembershipEvent(e,t),t.updateMember(n),t.emit("RoomState.members",e,t,n)}else if(e.getType()===v.EventType.RoomPowerLevels){if(""!==e.getStateKey())return;Object.values(t.members).forEach((function(r){var n=r.getLastModifiedTime();r.setPowerLevelEvent(e),n!==r.getLastModifiedTime()&&t.emit("RoomState.members",e,t,r)})),t.sentinels={}}}))}},{key:"getOrCreateMember",value:function(e,t){var r=this.members[e];return r||(r=new h.RoomMember(this.roomId,e),this.members[e]=r,this.emit("RoomState.newMember",t,this,r)),r}},{key:"setStateEvent",value:function(e){this.events.has(e.getType())||this.events.set(e.getType(),new Map),this.events.get(e.getType()).set(e.getStateKey(),e)}},{key:"getStateEventMatching",value:function(e){return this.events.has(e.getType())?this.events.get(e.getType()).get(e.getStateKey()):null}},{key:"updateMember",value:function(e){var t=this.getStateEvents(v.EventType.RoomPowerLevels,"");t&&e.setPowerLevelEvent(t),delete this.sentinels[e.userId],this.members[e.userId]=e,this.joinedMemberCount=null,this.invitedMemberCount=null}},{key:"needsOutOfBandMembers",value:function(){return this.oobMemberFlags.status===c.NotStarted}},{key:"markOutOfBandMembersStarted",value:function(){this.oobMemberFlags.status===c.NotStarted&&(this.oobMemberFlags.status=c.InProgress)}},{key:"markOutOfBandMembersFailed",value:function(){this.oobMemberFlags.status===c.InProgress&&(this.oobMemberFlags.status=c.NotStarted)}},{key:"clearOutOfBandMembers",value:function(){var e=this,t=0;Object.keys(this.members).forEach((function(r){e.members[r].isOutOfBand()&&(++t,delete e.members[r])})),d.logger.log("LL: RoomState removed ".concat(t," members...")),this.oobMemberFlags.status=c.NotStarted}},{key:"setOutOfBandMembers",value:function(e){var t=this;d.logger.log("LL: RoomState about to set ".concat(e.length," OOB members ...")),this.oobMemberFlags.status===c.InProgress&&(d.logger.log("LL: RoomState put in finished state ..."),this.oobMemberFlags.status=c.Finished,e.forEach((function(e){return t.setOutOfBandMember(e)})))}},{key:"setOutOfBandMember",value:function(e){if(e.getType()===v.EventType.RoomMember){var t=e.getStateKey(),r=this.getMember(t);if(!r||r.isOutOfBand()){var n=this.getOrCreateMember(t,e);n.setMembershipEvent(e,this),n.markOutOfBand(),this.updateDisplayNameCache(n.userId,n.name),this.setStateEvent(e),this.updateMember(n),this.emit("RoomState.members",e,this,n)}}}},{key:"setTypingEvent",value:function(e){Object.values(this.members).forEach((function(t){t.setTypingEvent(e)}))}},{key:"getInviteForThreePidToken",value:function(e){return this.tokenToInvite[e]||null}},{key:"updateModifiedTime",value:function(){this.modified=Date.now()}},{key:"getLastModifiedTime",value:function(){return this.modified}},{key:"getUserIdsWithDisplayName",value:function(e){return this.displayNameToUserIds[p.removeHiddenChars(e)]||[]}},{key:"maySendRedactionForEvent",value:function(e,t){var r=this.getMember(t);if(!r||"leave"===r.membership)return!1;if(e.status||e.isRedacted())return!1;var n=this.maySendEvent(v.EventType.RoomRedaction,t);return e.getSender()===t?n:this.hasSufficientPowerLevelFor("redact",r.powerLevel)}},{key:"hasSufficientPowerLevelFor",value:function(e,t){var r=this.getStateEvents(v.EventType.RoomPowerLevels,""),n={};r&&(n=r.getContent());var i=50;return p.isNumber(n[e])&&(i=n[e]),t>=i}},{key:"maySendMessage",value:function(e){return this.maySendEventOfType(v.EventType.RoomMessage,e,!1)}},{key:"maySendEvent",value:function(e,t){return this.maySendEventOfType(e,t,!1)}},{key:"mayClientSendStateEvent",value:function(e,t){return!t.isGuest()&&this.maySendStateEvent(e,t.credentials.userId)}},{key:"maySendStateEvent",value:function(e,t){return this.maySendEventOfType(e,t,!0)}},{key:"maySendEventOfType",value:function(e,t,r){var n,i=this.getStateEvents(v.EventType.RoomPowerLevels,""),o={},a=0,s=0,u=0;if(i){o=(n=i.getContent()).events||{},a=Number.isSafeInteger(n.state_default)?n.state_default:50;var c=n.users&&n.users[t];Number.isSafeInteger(c)?u=c:Number.isSafeInteger(n.users_default)&&(u=n.users_default),Number.isSafeInteger(n.events_default)&&(s=n.events_default)}var l=r?a:s;return Number.isSafeInteger(o[e])&&(l=o[e]),u>=l}},{key:"mayTriggerNotifOfType",value:function(e,t){var r=this.getMember(t);if(!r)return!1;var n=this.getStateEvents(v.EventType.RoomPowerLevels,""),i=50;return n&&n.getContent()&&n.getContent().notifications&&p.isNumber(n.getContent().notifications[e])&&(i=n.getContent().notifications[e]),r.powerLevel>=i}},{key:"getJoinRule",value:function(){var e,t=this.getStateEvents(v.EventType.RoomJoinRules,"");return(null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{}).join_rule||y.JoinRule.Invite}},{key:"getHistoryVisibility",value:function(){var e,t=this.getStateEvents(v.EventType.RoomHistoryVisibility,"");return(null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{}).history_visibility||y.HistoryVisibility.Shared}},{key:"getGuestAccess",value:function(){var e,t=this.getStateEvents(v.EventType.RoomGuestAccess,"");return(null!==(e=null===t||void 0===t?void 0:t.getContent())&&void 0!==e?e:{}).guest_access||y.GuestAccess.Forbidden}},{key:"updateThirdPartyTokenCache",value:function(e){if(e.getContent().third_party_invite){var t=(e.getContent().third_party_invite.signed||{}).token;if(t)this.getStateEvents(v.EventType.RoomThirdPartyInvite,t)&&(this.tokenToInvite[t]=e)}}},{key:"updateDisplayNameCache",value:function(e,t){var r=this.userIdsToDisplayNames[e];if(delete this.userIdsToDisplayNames[e],r){var n=p.removeHiddenChars(r),i=this.displayNameToUserIds[n];if(i){var o=i.filter((function(t){return t!==e}));this.displayNameToUserIds[n]=o}}this.userIdsToDisplayNames[e]=t;var a=t&&p.removeHiddenChars(t);a&&(this.displayNameToUserIds[a]||(this.displayNameToUserIds[a]=[]),this.displayNameToUserIds[a].push(e))}}]),r}(f.EventEmitter);t.RoomState=m},function(e,t,r){"use strict";var n=r(9),i=r(1),o=r(2),a=r(16),s=r(127),u=r(48),c=r(14),l=r(15);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ThreadEvent=t.Thread=void 0;var d,p=h(r(4)),v=r(17),y=r(25),g=r(35),m=r(76);t.ThreadEvent=d,function(e){e.New="Thread.new",e.Ready="Thread.ready",e.Update="Thread.update"}(d||(t.ThreadEvent=d={}));var b=function(e){c(r,e);var t=l(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return i(this,r),(e=t.call(this)).room=o,e.client=s,(0,p.default)(a(e),"root",void 0),(0,p.default)(a(e),"timelineSet",void 0),e.timelineSet=new m.EventTimelineSet(null,{unstableClientRelationAggregation:!0,timelineSupport:!0}),n.forEach((function(t){return e.addEvent(t)})),e}return o(r,[{key:"addEvent",value:function(){var e=n(f().mark((function e(t){var r,n,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1],!this.timelineSet.findEventById(t.getId())&&null===t.status){e.next=3;break}return e.abrupt("return");case 3:this.root||(t.isThreadRelation?this.root=t.threadRootId:this.root=t.getId()),n=this.room.getLiveTimeline().getState(g.EventTimeline.FORWARDS),t.setThread(this),this.timelineSet.addEventToTimeline(t,this.timelineSet.getLiveTimeline(),r,!1,n),this.ready&&this.client.decryptEventIfNeeded(t,{}),this.emit(d.Update,this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptEvents",value:function(){var e=n(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(Array.from(this.timelineSet.getLiveTimeline().getEvents()).map((function(e){return t.client.decryptEventIfNeeded(e,{})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findEventById",value:function(e){return this.timelineSet.findEventById(e)}},{key:"ready",get:function(){return void 0!==this.rootEvent}},{key:"id",get:function(){return this.root}},{key:"rootEvent",get:function(){return this.findEventById(this.root)}},{key:"roomId",get:function(){return this.rootEvent.getRoomId()}},{key:"length",get:function(){return this.events.filter((function(e){return e.isThreadRelation})).length}},{key:"participants",get:function(){var e=new Set;return this.events.forEach((function(t){e.add(t.getSender())})),e}},{key:"replyToEvent",get:function(){var e=this.events;return e[e.length-1]}},{key:"events",get:function(){return this.timelineSet.getLiveTimeline().getEvents()}},{key:"merge",value:function(e){var t=this;e.events.forEach((function(e){t.addEvent(e)})),this.events.forEach((function(e){return e.setThread(t)}))}},{key:"has",value:function(e){return this.timelineSet.findEventById(e)instanceof y.SendingNetworkEvent}},{key:"on",value:function(e,t){return s(u(r.prototype),"on",this).call(this,e,t),this}},{key:"once",value:function(e,t){return s(u(r.prototype),"once",this).call(this,e,t),this}},{key:"off",value:function(e,t){return s(u(r.prototype),"off",this).call(this,e,t),this}},{key:"addListener",value:function(e,t){return s(u(r.prototype),"addListener",this).call(this,e,t),this}},{key:"removeListener",value:function(e,t){return s(u(r.prototype),"removeListener",this).call(this,e,t),this}}]),r}(v.EventEmitter);t.Thread=b},function(e,t,r){var n=r(239);function i(t,r,o){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,r){var i=n(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(r):o.value}},i(t,r,o||t)}e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Group=a;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(19)),i=r(17);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e){this.groupId=e,this.name=null,this.avatarUrl=null,this.myMembership=null,this.inviter=null}n.inherits(a,i.EventEmitter),a.prototype.setProfile=function(e,t){this.name===e&&this.avatarUrl===t||(this.name=e||this.groupId,this.avatarUrl=t,this.emit("Group.profile",this))},a.prototype.setMyMembership=function(e){this.myMembership!==e&&(this.myMembership=e,this.emit("Group.myMembership",this))},a.prototype.setInviter=function(e){this.inviter=e}},function(e,t,r){"use strict";var n=r(12),i=r(1),o=r(2),a=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.PushProcessor=void 0;var s=a(r(4)),u=r(19),c=r(8),l=r(130);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=[l.PushRuleKind.Override,l.PushRuleKind.ContentSpecific,l.PushRuleKind.RoomSpecific,l.PushRuleKind.SenderSpecific,l.PushRuleKind.Underride],p=[{rule_id:".m.rule.tombstone",default:!0,enabled:!0,conditions:[{kind:l.ConditionKind.EventMatch,key:"type",pattern:"m.room.tombstone"},{kind:l.ConditionKind.EventMatch,key:"state_key",pattern:""}],actions:[l.PushRuleActionName.Notify,{set_tweak:l.TweakName.Highlight,value:!0}]},{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:l.ConditionKind.EventMatch,key:"type",pattern:"m.reaction"}],actions:[l.PushRuleActionName.DontNotify]}],v=function(){function e(t){i(this,e),this.client=t}return o(e,[{key:"matchingRuleFromKindSet",value:function(e,t){for(var r=0;r<d.length;++r){var n=d[r],i=t[n];if(i)for(var o=0;o<i.length;++o){var a=i[o];if(a.enabled){var s=this.templateRuleToRaw(n,a);if(s&&this.ruleMatchesEvent(s,e))return h(h({},a),{},{kind:n})}}}return null}},{key:"templateRuleToRaw",value:function(e,t){var r={rule_id:t.rule_id,actions:t.actions,conditions:[]};switch(e){case l.PushRuleKind.Underride:case l.PushRuleKind.Override:r.conditions=t.conditions;break;case l.PushRuleKind.RoomSpecific:if(!t.rule_id)return null;r.conditions.push({kind:l.ConditionKind.EventMatch,key:"room_id",value:t.rule_id});break;case l.PushRuleKind.SenderSpecific:if(!t.rule_id)return null;r.conditions.push({kind:l.ConditionKind.EventMatch,key:"user_id",value:t.rule_id});break;case l.PushRuleKind.ContentSpecific:if(!t.pattern)return null;r.conditions.push({kind:l.ConditionKind.EventMatch,key:"content.body",pattern:t.pattern})}return r}},{key:"eventFulfillsCondition",value:function(e,t){switch(e.kind){case l.ConditionKind.EventMatch:return this.eventFulfillsEventMatchCondition(e,t);case l.ConditionKind.ContainsDisplayName:return this.eventFulfillsDisplayNameCondition(e,t);case l.ConditionKind.RoomMemberCount:return this.eventFulfillsRoomMemberCountCondition(e,t);case l.ConditionKind.SenderNotificationPermission:return this.eventFulfillsSenderNotifPermCondition(e,t)}return!1}},{key:"eventFulfillsSenderNotifPermCondition",value:function(e,t){var r=e.key;if(!r)return!1;var n=this.client.getRoom(t.getRoomId());return!(null===n||void 0===n||!n.currentState)&&n.currentState.mayTriggerNotifOfType(r,t.getSender())}},{key:"eventFulfillsRoomMemberCountCondition",value:function(e,t){if(!e.is)return!1;var r=this.client.getRoom(t.getRoomId());if(!r||!r.currentState||!r.currentState.members)return!1;var n=r.currentState.getJoinedMemberCount(),i=e.is.match(/^([=<>]*)([0-9]*)$/);if(!i)return!1;var o=i[1],a=parseInt(i[2]);if(isNaN(a))return!1;switch(o){case"":case"==":return n==a;case"<":return n<a;case">":return n>a;case"<=":return n<=a;case">=":return n>=a;default:return!1}}},{key:"eventFulfillsDisplayNameCondition",value:function(e,t){var r=t.getContent();if(t.isEncrypted()&&t.getClearContent()&&(r=t.getClearContent()),!r||!r.body||"string"!=typeof r.body)return!1;var n=this.client.getRoom(t.getRoomId());if(!n||!n.currentState||!n.currentState.members||!n.currentState.getMember(this.client.credentials.userId))return!1;var i=n.currentState.getMember(this.client.credentials.userId).name,o=new RegExp("(^|\\W)"+(0,u.escapeRegExp)(i)+"(\\W|$)","i");return r.body.search(o)>-1}},{key:"eventFulfillsEventMatchCondition",value:function(e,t){if(!e.key)return!1;var r,n=this.valueForDottedKey(e.key,t);return"string"===typeof n&&(e.value?e.value===n:"string"===typeof e.pattern&&(r="content.body"==e.key?this.createCachedRegex("(^|\\W)",e.pattern,"(\\W|$)"):this.createCachedRegex("^",e.pattern,"$"),!!n.match(r)))}},{key:"createCachedRegex",value:function(t,r,n){return e.cachedGlobToRegex[r]||(e.cachedGlobToRegex[r]=new RegExp(t+(0,u.globToRegexp)(r)+n,"i")),e.cachedGlobToRegex[r]}},{key:"valueForDottedKey",value:function(e,t){var r,n=e.split("."),i=n[0];for("content"===i?(r=t.getContent(),n.shift()):"type"===i?(r=t.getType(),n.shift()):r=t.event;n.length>0;){var o=n.shift();if((0,u.isNullOrUndefined)(r[o]))return null;r=r[o]}return r}},{key:"matchingRuleForEventWithRulesets",value:function(e,t){return t?e.getSender()===this.client.credentials.userId?null:this.matchingRuleFromKindSet(e,t.global):null}},{key:"pushActionsForEventAndRulesets",value:function(t,r){var n=this.matchingRuleForEventWithRulesets(t,r);if(!n)return{};var i=e.actionListToActionsObject(n.actions);return void 0===i.tweaks.highlight&&(i.tweaks.highlight=n.kind==l.PushRuleKind.ContentSpecific),i}},{key:"ruleMatchesEvent",value:function(e,t){for(var r=!0,n=0;n<e.conditions.length;++n){var i=e.conditions[n];r&=this.eventFulfillsCondition(i,t)}return r}},{key:"actionsForEvent",value:function(e){return this.pushActionsForEventAndRulesets(e,this.client.pushRules)}},{key:"getPushRuleById",value:function(e){for(var t=0,r=["global"];t<r.length;t++){var i=r[t];if(void 0!==this.client.pushRules[i]){var o,a=n(d);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(void 0!==this.client.pushRules[i][s]){var u,c=n(this.client.pushRules[i][s]);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(l.rule_id===e)return l}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){a.e(f)}finally{a.f()}}}return null}}],[{key:"actionListToActionsObject",value:function(e){for(var t={notify:!1,tweaks:{}},r=0;r<e.length;++r){var n=e[r];n===l.PushRuleActionName.Notify?t.notify=!0:"object"===typeof n&&(void 0===n.value&&(n.value=!0),t.tweaks[n.set_tweak]=n.value)}return t}},{key:"rewriteDefaultRules",value:function(e){var t=JSON.parse(JSON.stringify(e));t||(t={}),t.global||(t.global={}),t.global.override||(t.global.override=[]);var r,i=t.global.override,o=n(p);try{var a=function(){var e=r.value,t=i.find((function(t){return t.rule_id===e.rule_id}));if(t)t.default=e.default,t.conditions=e.conditions,t.actions=e.actions;else{var n=e.rule_id;c.logger.warn("Adding default global override for ".concat(n)),i.push(e)}};for(o.s();!(r=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}return t}}]),e}();t.PushProcessor=v,(0,s.default)(v,"cachedGlobToRegex",{})},function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.TweakName=t.RuleId=t.PushRuleKind=t.PushRuleActionName=t.DMMemberCountCondition=t.ConditionOperator=t.ConditionKind=void 0,t.isDmMemberCountCondition=function(e){return"==2"===e||"2"===e},t.PushRuleActionName=n,function(e){e.DontNotify="dont_notify",e.Notify="notify",e.Coalesce="coalesce"}(n||(t.PushRuleActionName=n={})),t.TweakName=i,function(e){e.Highlight="highlight",e.Sound="sound"}(i||(t.TweakName=i={})),t.ConditionOperator=o,function(e){e.ExactEquals="==",e.LessThan="<",e.GreaterThan=">",e.GreaterThanOrEqual=">=",e.LessThanOrEqual="<="}(o||(t.ConditionOperator=o={}));var a,s,u;t.DMMemberCountCondition="2",t.ConditionKind=a,function(e){e.EventMatch="event_match",e.ContainsDisplayName="contains_display_name",e.RoomMemberCount="room_member_count",e.SenderNotificationPermission="sender_notification_permission"}(a||(t.ConditionKind=a={})),t.PushRuleKind=s,function(e){e.Override="override",e.ContentSpecific="content",e.RoomSpecific="room",e.SenderSpecific="sender",e.Underride="underride"}(s||(t.PushRuleKind=s={})),t.RuleId=u,function(e){e.Master=".m.rule.master",e.ContainsDisplayName=".m.rule.contains_display_name",e.ContainsUserName=".m.rule.contains_user_name",e.AtRoomNotification=".m.rule.roomnotif",e.DM=".m.rule.room_one_to_one",e.EncryptedDM=".m.rule.encrypted_room_one_to_one",e.Message=".m.rule.message",e.EncryptedMessage=".m.rule.encrypted",e.InviteToSelf=".m.rule.invite_for_me",e.MemberEvent=".m.rule.member_event",e.IncomingCall=".m.rule.call",e.SuppressNotices=".m.rule.suppress_notices",e.Tombstone=".m.rule.tombstone"}(u||(t.RuleId=u={}))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SyncState=void 0,t.SyncState=n,function(e){e.Error="ERROR",e.Prepared="PREPARED",e.Stopped="STOPPED",e.Syncing="SYNCING",e.Catchup="CATCHUP",e.Reconnecting="RECONNECTING"}(n||(t.SyncState=n={}))},function(e,t,r){"use strict";var n=r(9),i=r(1),o=r(2);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var s=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDiscoveryAction=t.AutoDiscovery=void 0;var u,c=s(r(4)),l=r(8),f=r(247);t.AutoDiscoveryAction=u,function(e){e.SUCCESS="SUCCESS",e.IGNORE="IGNORE",e.PROMPT="PROMPT",e.FAIL_PROMPT="FAIL_PROMPT",e.FAIL_ERROR="FAIL_ERROR"}(u||(t.AutoDiscoveryAction=u={}));var h=function(){function e(){i(this,e)}return o(e,null,[{key:"fromDiscoveryConfig",value:function(){var t=n(a().mark((function t(r){var n,i,o,s,c,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={"m.node":{state:e.FAIL_ERROR,error:e.ERROR_INVALID,base_url:null},"m.identity_server":{state:e.PROMPT,error:null,base_url:null}},r&&r["m.node"]){t.next=6;break}return l.logger.error("No m.node key in config"),n["m.node"].state=e.FAIL_PROMPT,n["m.node"].error=e.ERROR_INVALID,t.abrupt("return",Promise.resolve(n));case 6:if(r["m.node"].base_url){t.next=11;break}return l.logger.error("No m.node base_url in config"),n["m.node"].state=e.FAIL_PROMPT,n["m.node"].error=e.ERROR_INVALID_HS_BASE_URL,t.abrupt("return",Promise.resolve(n));case 11:if(i=this.sanitizeWellKnownUrl(r["m.node"].base_url)){t.next=16;break}return l.logger.error("Invalid base_url for m.node"),n["m.node"].error=e.ERROR_INVALID_HS_BASE_URL,t.abrupt("return",Promise.resolve(n));case 16:return t.next=18,this.fetchWellKnownObject("".concat(i,"/_api/client/versions"));case 18:if((o=t.sent)&&o.raw.versions){t.next=24;break}return l.logger.error("Invalid /versions response"),n["m.node"].error=e.ERROR_INVALID_NODE,n["m.node"].base_url=i,t.abrupt("return",Promise.resolve(n));case 24:if(n["m.node"]={state:e.SUCCESS,error:null,base_url:i},s="",!r["m.identity_server"]){t.next=41;break}if(c={"m.node":n["m.node"],"m.identity_server":{state:e.FAIL_PROMPT,error:e.ERROR_INVALID_IS,base_url:null}},s=this.sanitizeWellKnownUrl(r["m.identity_server"].base_url)){t.next=33;break}return l.logger.error("Invalid base_url for m.identity_server"),c["m.identity_server"].error=e.ERROR_INVALID_IS_BASE_URL,t.abrupt("return",Promise.resolve(c));case 33:return t.next=35,this.fetchWellKnownObject("".concat(s,"/_api/identity/api/v1"));case 35:if((f=t.sent)&&f.raw&&f.action===u.SUCCESS){t.next=41;break}return l.logger.error("Invalid /api/v1 response"),c["m.identity_server"].error=e.ERROR_INVALID_IDENTITY_SERVER,c["m.identity_server"].base_url=s,t.abrupt("return",Promise.resolve(c));case 41:return s&&s.toString().length>0&&(n["m.identity_server"]={state:e.SUCCESS,error:null,base_url:s}),Object.keys(r).map((function(e){if("m.node"===e||"m.identity_server"===e)for(var t=["error","state","base_url"],i=0,o=Object.keys(r[e]);i<o.length;i++){var a=o[i];t.includes(a)||(n[e][a]=r[e][a])}else n[e]=r[e]})),t.abrupt("return",Promise.resolve(n));case 44:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findClientConfig",value:function(){var t=n(a().mark((function t(r){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&"string"===typeof r&&0!==r.length){t.next=2;break}throw new Error("'domain' must be a string of non-zero length");case 2:return n={"m.node":{state:e.FAIL_ERROR,error:e.ERROR_INVALID,base_url:null},"m.identity_server":{state:e.PROMPT,error:null,base_url:null}},t.next=5,this.fetchWellKnownObject("https://".concat(r,"/.well-known/api/client"));case 5:if((i=t.sent)&&i.action===u.SUCCESS){t.next=11;break}return l.logger.error("No response or error when parsing .well-known"),i.reason&&l.logger.error(i.reason),i.action===u.IGNORE?n["m.node"]={state:e.PROMPT,error:null,base_url:null}:(n["m.node"].state=e.FAIL_PROMPT,n["m.node"].error=e.ERROR_INVALID),t.abrupt("return",Promise.resolve(n));case 11:return t.abrupt("return",e.fromDiscoveryConfig(i.raw));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRawClientConfig",value:function(){var e=n(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"string"===typeof t&&0!==t.length){e.next=2;break}throw new Error("'domain' must be a string of non-zero length");case 2:return e.next=4,this.fetchWellKnownObject("https://".concat(t,"/.well-known/api/client"));case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",{});case 7:return e.abrupt("return",r.raw||{});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sanitizeWellKnownUrl",value:function(e){if(!e)return!1;try{var t=null;try{t=f.URL?new f.URL(e):new URL(e)}catch(o){t=new URL(e)}if(!t||!t.hostname)return!1;if("http:"!==t.protocol&&"https:"!==t.protocol)return!1;var r=t.port?":".concat(t.port):"",n=t.pathname?t.pathname:"",i="".concat(t.protocol,"//").concat(t.hostname).concat(r).concat(n);return i.endsWith("/")&&(i=i.substring(0,i.length-1)),i}catch(o){return l.logger.error(o),!1}}},{key:"fetchWellKnownObject",value:function(){var t=n(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var o=r(72).getRequest();if(!o)throw new Error("No request library available");o({method:"GET",uri:n,timeout:5e3},(function(r,n,i){if(r||n&&(n.statusCode<200||n.statusCode>=300)){var o=u.FAIL_PROMPT,a=(r?r.message:null)||"General failure";return n&&404===n.statusCode&&(o=u.IGNORE,a=e.ERROR_MISSING_WELLKNOWN),void t({raw:{},action:o,reason:a,error:r})}try{t({raw:JSON.parse(i),action:u.SUCCESS})}catch(c){var s=e.ERROR_INVALID;"SyntaxError"===c.name&&(s=e.ERROR_INVALID_JSON),t({raw:{},action:u.FAIL_PROMPT,reason:s,error:c})}}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();t.AutoDiscovery=h,(0,c.default)(h,"ERROR_INVALID","Invalid node discovery response"),(0,c.default)(h,"ERROR_GENERIC_FAILURE","Failed to get autodiscovery configuration from server"),(0,c.default)(h,"ERROR_INVALID_HS_BASE_URL","Invalid base_url for m.node"),(0,c.default)(h,"ERROR_INVALID_NODE","Node URL does not appear to be a valid Sendingnetwork node"),(0,c.default)(h,"ERROR_INVALID_IS_BASE_URL","Invalid base_url for m.identity_server"),(0,c.default)(h,"ERROR_INVALID_IDENTITY_SERVER","Identity server URL does not appear to be a valid identity server"),(0,c.default)(h,"ERROR_INVALID_IS","Invalid identity server discovery response"),(0,c.default)(h,"ERROR_MISSING_WELLKNOWN","No .well-known JSON file found"),(0,c.default)(h,"ERROR_INVALID_JSON","Invalid JSON"),(0,c.default)(h,"ALL_ERRORS",[h.ERROR_INVALID,h.ERROR_GENERIC_FAILURE,h.ERROR_INVALID_HS_BASE_URL,h.ERROR_INVALID_NODE,h.ERROR_INVALID_IS_BASE_URL,h.ERROR_INVALID_IDENTITY_SERVER,h.ERROR_INVALID_IS,h.ERROR_MISSING_WELLKNOWN,h.ERROR_INVALID_JSON]),(0,c.default)(h,"FAIL_ERROR",u.FAIL_ERROR),(0,c.default)(h,"FAIL_PROMPT",u.FAIL_PROMPT),(0,c.default)(h,"PROMPT",u.PROMPT),(0,c.default)(h,"SUCCESS",u.SUCCESS)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=function(e,t){return new Promise((function(r,n){var i=!0,o=e.open(t);o.onupgradeneeded=function(){i=!1},o.onblocked=function(){return n(o.error)},o.onsuccess=function(){o.result.close(),i||e.deleteDatabase(t),r(i)},o.onerror=function(e){return n(o.error)}}))}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SERVICE_TYPES=void 0,t.SERVICE_TYPES=n,function(e){e.IS="SERVICE_TYPE_IS",e.IM="SERVICE_TYPE_IM"}(n||(t.SERVICE_TYPES=n={}))},function(e,t,r){"use strict";(function(e){var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.WITHHELD_MESSAGES=t.OlmDevice=void 0;var c=u(r(4)),l=r(8),f=r(33),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(136));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e){if(void 0===e)throw new Error("payloadString undefined");if(e.length>49152){var t=new Error("Message too long ("+e.length+" bytes). The maximum for an encrypted message is 49152 bytes.");throw t.data={errcode:"M_TOO_LARGE",error:"Payload too large for encrypted message"},t}}var v=function(){function t(e){o(this,t),this.cryptoStore=e,(0,c.default)(this,"pickleKey","DEFAULT_KEY"),(0,c.default)(this,"deviceCurve25519Key",null),(0,c.default)(this,"deviceEd25519Key",null),(0,c.default)(this,"maxOneTimeKeys",null),(0,c.default)(this,"outboundGroupSessionStore",{}),(0,c.default)(this,"inboundGroupSessionMessageIndexes",{}),(0,c.default)(this,"sessionsInProgress",{}),(0,c.default)(this,"olmPrekeyPromise",Promise.resolve())}return a(t,[{key:"init",value:function(){var t=i(s().mark((function t(){var r,n,i,o,a,u=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.length>0&&void 0!==u[0]?u[0]:{},n=r.pickleKey,i=r.fromExportedDevice,a=new e.Olm.Account,t.prev=2,!i){t.next=10;break}return n&&l.logger.warn("ignoring opts.pickleKey because opts.fromExportedDevice is present."),this.pickleKey=i.pickleKey,t.next=8,this.initialiseFromExportedDevice(i,a);case 8:t.next=13;break;case 10:return n&&(this.pickleKey=n),t.next=13,this.initialiseAccount(a);case 13:o=JSON.parse(a.identity_keys()),this.maxOneTimeKeys=a.max_number_of_one_time_keys();case 15:return t.prev=15,a.free(),t.finish(15);case 18:this.deviceCurve25519Key=o.curve25519,this.deviceEd25519Key=o.ed25519;case 20:case"end":return t.stop()}}),t,this,[[2,,15,18]])})));return function(){return t.apply(this,arguments)}}()},{key:"initialiseFromExportedDevice",value:function(){var e=i(s().mark((function e(t,r){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT,f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){n.cryptoStore.storeAccount(e,t.pickledAccount),t.sessions.forEach((function(t){var r=t.deviceKey,i=t.sessionId,o={session:t.session,lastReceivedMessageTs:t.lastReceivedMessageTs};n.cryptoStore.storeEndToEndSession(r,i,o,e)}))}));case 2:r.unpickle(this.pickleKey,t.pickledAccount);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"initialiseAccount",value:function(){var e=i(s().mark((function e(t){var r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){r.cryptoStore.getAccount(e,(function(n){null!==n?t.unpickle(r.pickleKey,n):(t.create(),n=t.pickle(r.pickleKey),r.cryptoStore.storeAccount(e,n))}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(t,r){var n=this;this.cryptoStore.getAccount(t,(function(t){var i=new e.Olm.Account;try{i.unpickle(n.pickleKey,t),r(i)}finally{i.free()}}))}},{key:"storeAccount",value:function(e,t){this.cryptoStore.storeAccount(e,t.pickle(this.pickleKey))}},{key:"export",value:function(){var e=i(s().mark((function e(){var t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pickleKey:this.pickleKey},e.next=3,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_ACCOUNT,f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){r.cryptoStore.getAccount(e,(function(e){t.pickledAccount=e})),t.sessions=[],r.cryptoStore.getAllEndToEndSessions(e,(function(e){t.sessions.push(e)}))}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSession",value:function(e,t,r,n){var i=this;this.cryptoStore.getEndToEndSession(e,t,r,(function(e){i.unpickleSession(e,n)}))}},{key:"unpickleSession",value:function(t,r){var n=new e.Olm.Session;try{n.unpickle(this.pickleKey,t.session),r(Object.assign({},t,{session:n}))}finally{n.free()}}},{key:"saveSession",value:function(e,t,r){var n=t.session.session_id(),i=Object.assign(t,{session:t.session.pickle(this.pickleKey)});this.cryptoStore.storeEndToEndSession(e,n,i,r)}},{key:"getUtility",value:function(t){var r=new e.Olm.Utility;try{return t(r)}finally{r.free()}}},{key:"sign",value:function(){var e=i(s().mark((function e(t){var r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){n.getAccount(e,(function(e){r=e.sign(t)}))}));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOneTimeKeys",value:function(){var e=i(s().mark((function e(){var t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){r.getAccount(e,(function(e){t=JSON.parse(e.one_time_keys())}))}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maxNumberOfOneTimeKeys",value:function(){return this.maxOneTimeKeys}},{key:"markKeysAsPublished",value:function(){var e=i(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){t.getAccount(e,(function(r){r.mark_keys_as_published(),t.storeAccount(e,r)}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateOneTimeKeys",value:function(e){var t=this;return this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(r){t.getAccount(r,(function(n){n.generate_one_time_keys(e),t.storeAccount(r,n)}))}))}},{key:"generateFallbackKey",value:function(){var e=i(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){t.getAccount(e,(function(r){r.generate_fallback_key(),t.storeAccount(e,r)}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFallbackKey",value:function(){var e=i(s().mark((function e(){var t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){r.getAccount(e,(function(e){t=JSON.parse(e.fallback_key())}))}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOutboundSession",value:function(){var t=i(s().mark((function t(r,n){var i,o=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT,f.IndexedDBCryptoStore.STORE_SESSIONS],(function(t){o.getAccount(t,(function(a){var s=new e.Olm.Session;try{s.create_outbound(a,r,n),i=s.session_id(),o.storeAccount(t,a);var u={session:s,lastReceivedMessageTs:Date.now()};o.saveSession(r,u,t)}finally{s.free()}}))}),l.logger.withPrefix("[createOutboundSession]"));case 2:return t.abrupt("return",i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"createInboundSession",value:function(){var t=i(s().mark((function t(r,n,i){var o,a=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===n){t.next=2;break}throw new Error("Need messageType == 0 to create inbound session");case 2:return t.next=4,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_ACCOUNT,f.IndexedDBCryptoStore.STORE_SESSIONS],(function(t){a.getAccount(t,(function(s){var u=new e.Olm.Session;try{u.create_inbound_from(s,r,i),s.remove_one_time_keys(u),a.storeAccount(t,s);var c=u.decrypt(n,i),l={session:u,lastReceivedMessageTs:Date.now()};a.saveSession(r,l,t),o={payload:c,session_id:u.session_id()}}finally{u.free()}}))}),l.logger.withPrefix("[createInboundSession]"));case 4:return t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"getSessionIdsForDevice",value:function(){var e=i(s().mark((function e(t){var r,n,i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.logger.withPrefix("[getSessionIdsForDevice]"),!this.sessionsInProgress[t]){e.next=10;break}return r.debug("Waiting for Olm session for ".concat(t," to be created")),e.prev=3,e.next=6,this.sessionsInProgress[t];case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:return e.next=12,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){i.cryptoStore.getEndToEndSessions(t,e,(function(e){n=Object.keys(e)}))}),r);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSessionIdForDevice",value:function(){var e=i(s().mark((function e(t){var r,n,i,o,a,u,c,l,f,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]&&h[1],n=h.length>2?h[2]:void 0,e.next=4,this.getSessionInfoForDevice(t,r,n);case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",null);case 7:for(o=0,a=1;a<i.length;a++)u=i[a],c=void 0===u.lastReceivedMessageTs?0:u.lastReceivedMessageTs,l=i[o],f=void 0===l.lastReceivedMessageTs?0:l.lastReceivedMessageTs,(c>f||c===f&&u.sessionId<l.sessionId)&&(o=a);return e.abrupt("return",i[o].sessionId);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSessionInfoForDevice",value:function(){var e=i(s().mark((function e(t){var r,i,o,a=this,u=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]&&u[1],i=(i=u.length>2&&void 0!==u[2]?u[2]:l.logger).withPrefix("[getSessionInfoForDevice]"),!this.sessionsInProgress[t]||r){e.next=12;break}return i.debug("Waiting for Olm session for ".concat(t," to be created")),e.prev=5,e.next=8,this.sessionsInProgress[t];case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:return o=[],e.next=15,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){a.cryptoStore.getEndToEndSessions(t,e,(function(e){var t,r=Object.keys(e).sort(),i=n(r);try{var s=function(){var r=t.value;a.unpickleSession(e[r],(function(e){o.push({lastReceivedMessageTs:e.lastReceivedMessageTs,hasReceivedMessage:e.session.has_received_message(),sessionId:r})}))};for(i.s();!(t=i.n()).done;)s()}catch(u){i.e(u)}finally{i.f()}}))}),i);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"encryptMessage",value:function(){var e=i(s().mark((function e(t,r,n){var i,o=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(n),e.next=3,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){o.getSession(t,r,e,(function(a){var s=a.session.describe();l.logger.log("encryptMessage: Olm Session ID "+r+" to "+t+": "+s),i=a.session.encrypt(n),o.saveSession(t,a,e)}))}),l.logger.withPrefix("[encryptMessage]"));case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"decryptMessage",value:function(){var e=i(s().mark((function e(t,r,n,i){var o,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){a.getSession(t,r,e,(function(s){var u=s.session.describe();l.logger.log("decryptMessage: Olm Session ID "+r+" from "+t+": "+u),o=s.session.decrypt(n,i),s.lastReceivedMessageTs=Date.now(),a.saveSession(t,s,e)}))}),l.logger.withPrefix("[decryptMessage]"));case 2:return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"matchesSession",value:function(){var e=i(s().mark((function e(t,r,n,i){var o,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_SESSIONS],(function(e){a.getSession(t,r,e,(function(e){o=e.session.matches_inbound(i)}))}),l.logger.withPrefix("[matchesSession]"));case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"recordSessionProblem",value:function(){var e=i(s().mark((function e(t,r,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.storeEndToEndSessionProblem(t,r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sessionMayHaveProblems",value:function(){var e=i(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.getEndToEndSessionProblem(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"filterOutNotifiedErrorDevices",value:function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.filterOutNotifiedErrorDevices(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveOutboundGroupSession",value:function(e){this.outboundGroupSessionStore[e.session_id()]=e.pickle(this.pickleKey)}},{key:"getOutboundGroupSession",value:function(t,r){var n=this.outboundGroupSessionStore[t];if(void 0===n)throw new Error("Unknown outbound group session "+t);var i=new e.Olm.OutboundGroupSession;try{return i.unpickle(this.pickleKey,n),r(i)}finally{i.free()}}},{key:"createOutboundGroupSession",value:function(){var t=new e.Olm.OutboundGroupSession;try{return t.create(),this.saveOutboundGroupSession(t),t.session_id()}finally{t.free()}}},{key:"encryptGroupMessage",value:function(e,t){var r=this;return l.logger.log("encrypting msg with megolm session ".concat(e)),p(t),this.getOutboundGroupSession(e,(function(e){var n=e.encrypt(t);return r.saveOutboundGroupSession(e),n}))}},{key:"getOutboundGroupSessionKey",value:function(e){return this.getOutboundGroupSession(e,(function(e){return{chain_index:e.message_index(),key:e.session_key()}}))}},{key:"unpickleInboundGroupSession",value:function(t,r){var n=new e.Olm.InboundGroupSession;try{return n.unpickle(this.pickleKey,t.session),r(n)}finally{n.free()}}},{key:"getInboundGroupSession",value:function(e,t,r,n,i){var o=this;this.cryptoStore.getEndToEndInboundGroupSession(t,r,n,(function(t,r){if(null!==t){if(null!==e&&e!==t.room_id)throw new Error("Mismatched room_id for inbound group session (expected "+t.room_id+", was "+e+")");o.unpickleInboundGroupSession(t,(function(e){i(e,t,r)}))}else i(null,null,r)}))}},{key:"addInboundGroupSession",value:function(){var t=i(s().mark((function t(r,n,i,o,a,u,c){var h,d=this,p=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=p.length>7&&void 0!==p[7]?p[7]:{},t.next=3,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD,f.IndexedDBCryptoStore.STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],(function(t){d.getInboundGroupSession(r,n,o,t,(function(s,f){var p=new e.Olm.InboundGroupSession;try{if(c?p.import_session(a):p.create(a),o!=p.session_id())throw new Error("Mismatched group session ID from senderKey: "+n);if(s&&(l.logger.log("Update for megolm session "+n+"/"+o),s.first_known_index()<=p.first_known_index()&&(s.first_known_index()!=p.first_known_index()||h.untrusted||!f.untrusted)))return void l.logger.log("Keeping existing megolm session ".concat(o));l.logger.info("Storing megolm session "+n+"/"+o+" with first index "+p.first_known_index());var v=Object.assign({},h,{room_id:r,session:p.pickle(d.pickleKey),keysClaimed:u,forwardingCurve25519KeyChain:i});d.cryptoStore.storeEndToEndInboundGroupSession(n,o,v,t),!s&&h.sharedHistory&&d.cryptoStore.addSharedHistoryInboundGroupSession(r,n,o,t)}finally{p.free()}}))}),l.logger.withPrefix("[addInboundGroupSession]"));case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i,o,a,s){return t.apply(this,arguments)}}()},{key:"addInboundGroupSessionWithheld",value:function(){var e=i(s().mark((function e(t,r,n,i,o){var a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(function(e){a.cryptoStore.storeEndToEndInboundGroupSessionWithheld(r,n,{room_id:t,code:i,reason:o},e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"decryptGroupMessage",value:function(){var e=i(s().mark((function e(t,r,n,i,o,a){var u,c,d=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(function(e){d.getInboundGroupSession(t,r,n,e,(function(t,s,l){if(null===t)return l&&(c=new h.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",g(l),{session:r+"|"+n})),void(u=null);var f;try{f=t.decrypt(i)}catch(m){return void(c=m&&"OLM.UNKNOWN_MESSAGE_INDEX"===m.message&&l?new h.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",g(l),{session:r+"|"+n}):m)}var p=f.plaintext;if(void 0===p)p=f;else{var v=r+"|"+n+"|"+f.message_index;if(v in d.inboundGroupSessionMessageIndexes){var y=d.inboundGroupSessionMessageIndexes[v];if(y.id!==o||y.timestamp!==a)return void(c=new Error("Duplicate message index, possible replay attack: "+v))}d.inboundGroupSessionMessageIndexes[v]={id:o,timestamp:a}}s.session=t.pickle(d.pickleKey),d.cryptoStore.storeEndToEndInboundGroupSession(r,n,s,e),u={result:p,keysClaimed:s.keysClaimed||{},senderKey:r,forwardingCurve25519KeyChain:s.forwardingCurve25519KeyChain||[],untrusted:s.untrusted}}))}),l.logger.withPrefix("[decryptGroupMessage]"));case 2:if(!c){e.next=4;break}throw c;case 4:return e.abrupt("return",u);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}()},{key:"hasInboundSessionKeys",value:function(){var e=i(s().mark((function e(t,r,n){var i,o=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(function(e){o.cryptoStore.getEndToEndInboundGroupSession(r,n,e,(function(e){null!==e?t!==e.room_id?(l.logger.warn("requested keys for inbound group session ".concat(r,"|")+"".concat(n,", with incorrect room_id ")+"(expected ".concat(e.room_id,", ")+"was ".concat(t,")")),i=!1):i=!0:i=!1}))}),l.logger.withPrefix("[hasInboundSessionKeys]"));case 2:return e.abrupt("return",i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getInboundGroupSessionKey",value:function(){var e=i(s().mark((function e(t,r,n,i){var o,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,f.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(function(e){a.getInboundGroupSession(t,r,n,e,(function(e,t){if(null!==e){void 0===i&&(i=e.first_known_index());var r=e.export_session(i),n=(t.keysClaimed||{}).ed25519||null;o={chain_index:i,key:r,forwarding_curve25519_key_chain:t.forwardingCurve25519KeyChain||[],sender_claimed_ed25519_key:n,shared_history:t.sharedHistory||!1}}else o=null}))}),l.logger.withPrefix("[getInboundGroupSessionKey]"));case 2:return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"exportInboundGroupSession",value:function(e,t,r){return this.unpickleInboundGroupSession(r,(function(n){var i=n.first_known_index();return{sender_key:e,sender_claimed_keys:r.keysClaimed,room_id:r.room_id,session_id:t,session_key:n.export_session(i),forwarding_curve25519_key_chain:r.forwardingCurve25519KeyChain||[],first_known_index:n.first_known_index(),"org.sendingnetwork.msc3061.shared_history":r.sharedHistory||!1}}))}},{key:"getSharedHistoryInboundGroupSessions",value:function(){var e=i(s().mark((function e(t){var r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[f.IndexedDBCryptoStore.STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],(function(e){r=n.cryptoStore.getSharedHistoryInboundGroupSessions(t,e)}),l.logger.withPrefix("[getSharedHistoryInboundGroupSessionsForRoom]"));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifySignature",value:function(e,t,r){this.getUtility((function(n){n.ed25519_verify(e,t,r)}))}}],[{key:"getOlmVersion",value:function(){return e.Olm.get_library_version()}}]),t}();t.OlmDevice=v;var y={"m.unverified":"The sender has disabled encrypting to unverified devices.","m.blacklisted":"The sender has blocked you.","m.unauthorised":"You are not authorised to read the message.","m.no_olm":"Unable to establish a secure channel."};function g(e){return e.code&&e.code in y?y[e.code]:e.reason?e.reason:"decryption key withheld"}t.WITHHELD_MESSAGES=y}).call(this,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(259),r(137);var n=r(83);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},function(e,t,r){"use strict";var n=r(31),i=r(23),o=r(12),a=r(20),s=r(9),u=r(16),c=r(14),l=r(15),f=r(1),h=r(2);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var p=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.isRoomSharedHistory=k;var v=p(r(4)),y=r(8),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28)),m=r(83),b=r(135);function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function k(e){var t,r,n=null===e||void 0===e||null===(t=e.currentState)||void 0===t?void 0:t.getStateEvents("m.room.history_visibility",""),i=null===n||void 0===n||null===(r=n.getContent())||void 0===r?void 0:r.history_visibility;return["world_readable","shared"].includes(i)}var S=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(this,e),this.sessionId=t,this.sharedHistory=r,(0,v.default)(this,"useCount",0),(0,v.default)(this,"creationTime",void 0),(0,v.default)(this,"sharedWithDevices",{}),(0,v.default)(this,"blockedDevicesNotified",{}),this.creationTime=(new Date).getTime()}return h(e,[{key:"needsRotation",value:function(e,t){var r=(new Date).getTime()-this.creationTime;return(this.useCount>=e||r>=t)&&(y.logger.log("Rotating megolm session after "+this.useCount+" messages, "+r+"ms"),!0)}},{key:"markSharedWithDevice",value:function(e,t,r,n){this.sharedWithDevices[e]||(this.sharedWithDevices[e]={}),this.sharedWithDevices[e][t]={deviceKey:r,messageIndex:n}}},{key:"markNotifiedBlockedDevice",value:function(e,t){this.blockedDevicesNotified[e]||(this.blockedDevicesNotified[e]={}),this.blockedDevicesNotified[e][t]=!0}},{key:"sharedWithTooManyDevices",value:function(e){for(var t in this.sharedWithDevices)if(this.sharedWithDevices.hasOwnProperty(t)){if(!e.hasOwnProperty(t))return y.logger.log("Starting new megolm session because we shared with "+t),!0;for(var r in this.sharedWithDevices[t])if(this.sharedWithDevices[t].hasOwnProperty(r)&&!e[t].hasOwnProperty(r))return y.logger.log("Starting new megolm session because we shared with "+t+":"+r),!0}}}]),e}(),E=function(e){c(r,e);var t=l(r);function r(e){var n,i,o,a,s;return f(this,r),n=t.call(this,e),(0,v.default)(u(n),"setupPromise",Promise.resolve(void 0)),(0,v.default)(u(n),"outboundSessions",{}),(0,v.default)(u(n),"sessionRotationPeriodMsgs",void 0),(0,v.default)(u(n),"sessionRotationPeriodMs",void 0),(0,v.default)(u(n),"encryptionPreparation",void 0),(0,v.default)(u(n),"encryptionPreparationMetadata",void 0),n.sessionRotationPeriodMsgs=null!==(i=null===(o=e.config)||void 0===o?void 0:o.rotation_period_msgs)&&void 0!==i?i:100,n.sessionRotationPeriodMs=null!==(a=null===(s=e.config)||void 0===s?void 0:s.rotation_period_ms)&&void 0!==a?a:6048e5,n}return h(r,[{key:"ensureOutboundSession",value:function(){var e=s(d().mark((function e(t,r,n){var i,u,c,l,f,h=this,p=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){return u},i=p.length>3&&void 0!==p[3]&&p[3],c=function(){var e=s(d().mark((function e(c){var l,f,p,v,m,b,w,S,E,x,_,T,O,M,P,R,I,L;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=c,l=k(t),u&&l!==u.sharedHistory&&(u=null),u&&u.needsRotation(h.sessionRotationPeriodMsgs,h.sessionRotationPeriodMs)&&(y.logger.log("Starting new megolm session because we need to rotate."),u=null),u&&u.sharedWithTooManyDevices(r)&&(u=null),u){e.next=12;break}return y.logger.log("Starting new megolm session for room ".concat(h.roomId)),e.next=9,h.prepareNewSession(l);case 9:u=e.sent,y.logger.log("Started new megolm session ".concat(u.sessionId," ")+"for room ".concat(h.roomId)),h.outboundSessions[u.sessionId]=u;case 12:f={},p=0,v=Object.entries(r);case 14:if(!(p<v.length)){e.next=29;break}m=a(v[p],2),b=m[0],w=m[1],S=0,E=Object.entries(w);case 17:if(!(S<E.length)){e.next=26;break}if(x=a(E[S],2),_=x[0],T=x[1],T.getIdentityKey()!=h.olmDevice.deviceCurve25519Key){e.next=22;break}return e.abrupt("continue",23);case 22:u.sharedWithDevices[b]&&void 0!==u.sharedWithDevices[b][_]||(f[b]=f[b]||[],f[b].push(T));case 23:S++,e.next=17;break;case 26:p++,e.next=14;break;case 29:return O=h.olmDevice.getOutboundGroupSessionKey(u.sessionId),M={type:"m.room_key",content:{algorithm:g.MEGOLM_ALGORITHM,room_id:h.roomId,session_id:u.sessionId,session_key:O.key,chain_index:O.chain_index,"org.sendingnetwork.msc3061.shared_history":l}},e.next=33,g.getExistingOlmSessions(h.olmDevice,h.baseApis,f);case 33:return P=e.sent,R=a(P,2),I=R[0],L=R[1],e.next=39,Promise.all([s(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logger.debug("Sharing keys with existing Olm sessions in ".concat(h.roomId),L),e.next=3,h.shareKeyWithOlmSessions(u,O,M,L);case 3:y.logger.debug("Shared keys with existing Olm sessions in ".concat(h.roomId));case 4:case"end":return e.stop()}}),e)})))(),s(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logger.debug("Sharing keys (start phase 1) with new Olm sessions in ".concat(h.roomId),I),t=[],r=Date.now(),n=[],e.next=6,h.shareKeyWithDevices(u,O,M,I,t,i?1e4:2e3,n);case 6:if(y.logger.debug("Shared keys (end phase 1) with new Olm sessions in ".concat(h.roomId)),i||!(Date.now()-r<1e4)){e.next=11;break}s(d().mark((function e(){var r,i,a,s,c,l,f,p,v,g,m,b;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},i=new Set,a=o(n);try{for(a.s();!(s=a.n()).done;)c=s.value,i.add(c)}catch(d){a.e(d)}finally{a.f()}l=[],f=o(t);try{for(f.s();!(p=f.n()).done;)v=p.value,g=v.userId,m=v.deviceInfo,b=g.slice(g.indexOf(":")+1),i.has(b)?(r[g]=r[g]||[],r[g].push(m)):l.push({userId:g,deviceInfo:m})}catch(d){f.e(d)}finally{f.f()}return y.logger.debug("Sharing keys (start phase 2) with new Olm sessions in ".concat(h.roomId)),e.next=10,h.shareKeyWithDevices(u,O,M,r,l,3e4);case 10:return y.logger.debug("Shared keys (end phase 2) with new Olm sessions in ".concat(h.roomId)),e.next=13,h.notifyFailedOlmDevices(u,O,l);case 13:case"end":return e.stop()}}),e)})))(),e.next=13;break;case 11:return e.next=13,h.notifyFailedOlmDevices(u,O,t);case 13:y.logger.debug("Shared keys (all phases done) with new Olm sessions in ".concat(h.roomId));case 14:case"end":return e.stop()}}),e)})))(),s(d().mark((function e(){var t,r,i,o,s,c,l,f,p,v,g,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(y.logger.debug("There are ".concat(Object.entries(n).length," blocked devices in ").concat(h.roomId),Object.entries(n)),y.logger.debug("Notifying newly blocked devices in ".concat(h.roomId)),t={},r=0,i=0,o=Object.entries(n);i<o.length;i++)for(s=a(o[i],2),c=s[0],l=s[1],f=0,p=Object.entries(l);f<p.length;f++)v=a(p[f],2),g=v[0],m=v[1],u.blockedDevicesNotified[c]&&void 0!==u.blockedDevicesNotified[c][g]||(t[c]=t[c]||{},t[c][g]={device:m},r++);return e.next=7,h.notifyBlockedDevices(u,t);case 7:y.logger.debug("Notified ".concat(r," newly blocked devices in ").concat(h.roomId),t);case 8:case"end":return e.stop()}}),e)})))()]);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(f=this.setupPromise.then(c)).catch((function(e){y.logger.error("Failed to ensure outbound session in ".concat(h.roomId),e)})),this.setupPromise=f.then(l,l),e.abrupt("return",f.then(l));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"prepareNewSession",value:function(){var e=s(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.olmDevice.createOutboundGroupSession(),n=this.olmDevice.getOutboundGroupSessionKey(r),e.next=4,this.olmDevice.addInboundGroupSession(this.roomId,this.olmDevice.deviceCurve25519Key,[],r,n.key,{ed25519:this.olmDevice.deviceEd25519Key},!1,{sharedHistory:t});case 4:return this.crypto.backupManager.backupGroupSession(this.olmDevice.deviceCurve25519Key,r),e.abrupt("return",new S(r,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDevicesWithoutSessions",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=0,i=Object.entries(t);n<i.length;n++){var s,u=a(i[n],2),c=u[0],l=u[1],f=e[c],h=o(l);try{for(h.s();!(s=h.n()).done;){var d=s.value,p=d.deviceId,v=f[p];v.sessionId||(r.push({userId:c,deviceInfo:d}),delete f[p])}}catch(y){h.e(y)}finally{h.f()}}return r}},{key:"splitDevices",value:function(e){for(var t=[],r=[t],n=0,i=Object.entries(e);n<i.length;n++){for(var o=a(i[n],2),s=o[0],u=o[1],c=0,l=Object.values(u);c<l.length;c++){var f=l[c];t.push({userId:s,deviceInfo:f.device})}t.length>20&&(t=[],r.push(t))}return 0===t.length&&r.pop(),r}},{key:"encryptAndSendKeysToDevices",value:function(e,t,r,n){for(var i=this,o={},a=new Map,s=[],u=0;u<r.length;u++){var c={algorithm:g.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},l=r[u],f=l.userId,h=l.deviceInfo,d=h.deviceId;a.set(d,h),o[f]||(o[f]={}),o[f][d]=c,s.push(g.encryptMessageForDevice(c.ciphertext,this.userId,this.deviceId,this.olmDevice,f,h,n))}return Promise.all(s).then((function(){for(var r=0,n=Object.keys(o);r<n.length;r++){for(var s=n[r],u=0,c=Object.keys(o[s]);u<c.length;u++){var l=c[u];0===Object.keys(o[s][l].ciphertext).length&&(y.logger.log("No ciphertext for device "+s+":"+l+": pruning"),delete o[s][l])}0===Object.keys(o[s]).length&&(y.logger.log("Pruned all devices for user "+s),delete o[s])}if(0!==Object.keys(o).length)return i.baseApis.sendToDevice("m.room.encrypted",o).then((function(){for(var r=0,n=Object.keys(o);r<n.length;r++)for(var i=n[r],s=0,u=Object.keys(o[i]);s<u.length;s++){var c=u[s];e.markSharedWithDevice(i,c,a.get(c).getIdentityKey(),t)}}));y.logger.log("No users left to send to: aborting")}))}},{key:"sendBlockedNotificationsToDevices",value:function(){var e=s(d().mark((function e(t,r,n){var i,a,s,u,c,l,f,h,p,v,y,g,m,b,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={},a=o(r);try{for(a.s();!(s=a.n()).done;)u=s.value,c=u.userId,l=u.deviceInfo,f=l.deviceInfo,h=f.deviceId,(p=Object.assign({},n)).code=l.code,p.reason=l.reason,"m.no_olm"===p.code&&(delete p.room_id,delete p.session_id),i[c]||(i[c]={}),i[c][h]=p}catch(d){a.e(d)}finally{a.f()}return e.next=5,this.baseApis.sendToDevice("org.sendingnetwork.room_key.withheld",i);case 5:for(v=0,y=Object.keys(i);v<y.length;v++)for(g=y[v],m=0,b=Object.keys(i[g]);m<b.length;m++)w=b[m],t.markNotifiedBlockedDevice(g,w);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"reshareKeyWithDevice",value:function(){var e=s(d().mark((function e(t,r,n,o){var a,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.outboundSessions[r]){e.next=4;break}return y.logger.debug("megolm session ".concat(r," not found: not re-sharing keys")),e.abrupt("return");case 4:if(void 0!==a.sharedWithDevices[n]){e.next=7;break}return y.logger.debug("megolm session ".concat(r," never shared with user ").concat(n)),e.abrupt("return");case 7:if(void 0!==(s=a.sharedWithDevices[n][o.deviceId])){e.next=11;break}return y.logger.debug("megolm session ID "+r+" never shared with device "+n+":"+o.deviceId),e.abrupt("return");case 11:if(s.deviceKey===o.getIdentityKey()){e.next=14;break}return y.logger.warn("Session has been shared with device ".concat(o.deviceId," but with identity ")+"key ".concat(s.deviceKey,". Key is now ").concat(o.getIdentityKey(),"!")),e.abrupt("return");case 14:return e.next=16,this.olmDevice.getInboundGroupSessionKey(this.roomId,t,r,s.messageIndex);case 16:if(u=e.sent){e.next=20;break}return y.logger.warn("No inbound session key found for megolm ".concat(r,": not re-sharing keys")),e.abrupt("return");case 20:return e.next=22,g.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,i({},n,[o]));case 22:return c={type:"m.forwarded_room_key",content:{algorithm:g.MEGOLM_ALGORITHM,room_id:this.roomId,session_id:r,session_key:u.key,chain_index:u.chain_index,sender_key:t,sender_claimed_ed25519_key:u.sender_claimed_ed25519_key,forwarding_curve25519_key_chain:u.forwarding_curve25519_key_chain,"org.sendingnetwork.msc3061.shared_history":u.shared_history||!1}},l={algorithm:g.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=26,g.encryptMessageForDevice(l.ciphertext,this.userId,this.deviceId,this.olmDevice,n,o,c);case 26:return e.next=28,this.baseApis.sendToDevice("m.room.encrypted",i({},n,i({},o.deviceId,l)));case 28:y.logger.debug("Re-shared key for megolm session ".concat(r," with ").concat(n,":").concat(o.deviceId));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"shareKeyWithDevices",value:function(){var e=s(d().mark((function e(t,r,n,i,o,a,s){var u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logger.debug("Ensuring Olm sessions for devices in ".concat(this.roomId)),e.next=3,g.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,i,!1,a,s,y.logger.withPrefix("[".concat(this.roomId,"]")));case 3:return u=e.sent,y.logger.debug("Ensured Olm sessions for devices in ".concat(this.roomId)),this.getDevicesWithoutSessions(u,i,o),y.logger.debug("Sharing keys with newly created Olm sessions in ".concat(this.roomId)),e.next=9,this.shareKeyWithOlmSessions(t,r,n,u);case 9:y.logger.debug("Shared keys with newly created Olm sessions in ".concat(this.roomId));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o,a,s){return e.apply(this,arguments)}}()},{key:"shareKeyWithOlmSessions",value:function(){var e=s(d().mark((function e(t,r,n,i){var o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=this.splitDevices(i),a=0;case 2:if(!(a<o.length)){e.next=18;break}return s="megolm keys for ".concat(t.sessionId," ")+"in ".concat(this.roomId," (slice ").concat(a+1,"/").concat(o.length,")"),e.prev=4,y.logger.debug("Sharing ".concat(s),o[a].map((function(e){return"".concat(e.userId,"/").concat(e.deviceInfo.deviceId)}))),e.next=8,this.encryptAndSendKeysToDevices(t,r.chain_index,o[a],n);case 8:y.logger.debug("Shared ".concat(s)),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(4),y.logger.error("Failed to share ".concat(s)),e.t0;case 15:a++,e.next=2;break;case 18:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"notifyFailedOlmDevices",value:function(){var e=s(d().mark((function e(t,r,n){var i,a,s,u,c,l,f,h,p,v,g,m,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.logger.debug("Notifying ".concat(n.length," devices we failed to ")+"create Olm sessions in ".concat(this.roomId)),i=o(n);try{for(i.s();!(a=i.n()).done;)s=a.value,u=s.userId,c=s.deviceInfo,l=c.deviceId,t.markSharedWithDevice(u,l,c.getIdentityKey(),r.chain_index)}catch(d){i.e(d)}finally{i.f()}return e.next=5,this.olmDevice.filterOutNotifiedErrorDevices(n);case 5:f=e.sent,y.logger.debug("Need to notify ".concat(f.length," failed devices ")+"which haven't been notified before in ".concat(this.roomId)),h={},p=o(f);try{for(p.s();!(v=p.n()).done;)g=v.value,m=g.userId,w=g.deviceInfo,h[m]=h[m]||{},h[m][w.deviceId]={device:{code:"m.no_olm",reason:b.WITHHELD_MESSAGES["m.no_olm"],deviceInfo:w}}}catch(d){p.e(d)}finally{p.f()}return e.next=12,this.notifyBlockedDevices(t,h);case 12:y.logger.debug("Notified ".concat(f.length," devices we failed to ")+"create Olm sessions in ".concat(this.roomId));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"notifyBlockedDevices",value:function(){var e=s(d().mark((function e(t,r){var n,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={room_id:this.roomId,session_id:t.sessionId,algorithm:g.MEGOLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key},i=this.splitDevices(r),o=0;case 3:if(!(o<i.length)){e.next=17;break}return e.prev=4,e.next=7,this.sendBlockedNotificationsToDevices(t,i[o],n);case 7:y.logger.log("Completed blacklist notification for ".concat(t.sessionId," ")+"in ".concat(this.roomId," (slice ").concat(o+1,"/").concat(i.length,")")),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),y.logger.log("blacklist notification for ".concat(t.sessionId," in ")+"".concat(this.roomId," (slice ").concat(o+1,"/").concat(i.length,") failed")),e.t0;case 14:o++,e.next=3;break;case 17:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"prepareToEncrypt",value:function(e){var t=this;if(this.encryptionPreparation){var r=Date.now()-this.encryptionPreparationMetadata.startTime;y.logger.debug("Already started preparing to encrypt for ".concat(this.roomId," ")+"".concat(r," ms ago, skipping"))}else y.logger.debug("Preparing to encrypt events for ".concat(this.roomId)),this.encryptionPreparationMetadata={startTime:Date.now()},this.encryptionPreparation=s(d().mark((function r(){var n,i,o,s;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,y.logger.debug("Getting devices in ".concat(t.roomId)),r.next=4,t.getDevicesInRoom(e);case 4:return n=r.sent,i=a(n,2),o=i[0],s=i[1],t.crypto.getGlobalErrorOnUnknownDevices()&&t.removeUnknownDevices(o),y.logger.debug("Ensuring outbound session in ".concat(t.roomId)),r.next=12,t.ensureOutboundSession(e,o,s,!0);case 12:y.logger.debug("Ready to encrypt events for ".concat(t.roomId)),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),y.logger.error("Failed to prepare to encrypt events for ".concat(t.roomId),r.t0);case 18:return r.prev=18,delete t.encryptionPreparationMetadata,delete t.encryptionPreparation,r.finish(18);case 22:case"end":return r.stop()}}),r,null,[[0,15,18,22]])})))()}},{key:"encryptMessage",value:function(){var e=s(d().mark((function e(t,r,n){var i,o,s,u,c,l,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.logger.log("Starting to encrypt event for ".concat(this.roomId)),!this.encryptionPreparation){e.next=9;break}return e.prev=2,e.next=5,this.encryptionPreparation;case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return e.next=11,this.getDevicesInRoom(t);case 11:return i=e.sent,o=a(i,2),s=o[0],u=o[1],this.crypto.getGlobalErrorOnUnknownDevices()&&this.checkForUnknownDevices(s),e.next=18,this.ensureOutboundSession(t,s,u);case 18:return c=e.sent,l={room_id:this.roomId,type:r,content:n},f=this.olmDevice.encryptGroupMessage(c.sessionId,JSON.stringify(l)),h={algorithm:g.MEGOLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:f,session_id:c.sessionId,device_id:this.deviceId},c.useCount++,e.abrupt("return",h);case 24:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"forceDiscardSession",value:function(){this.setupPromise=this.setupPromise.then((function(){return null}))}},{key:"checkForUnknownDevices",value:function(e){var t={};if(Object.keys(e).forEach((function(r){Object.keys(e[r]).forEach((function(n){var i=e[r][n];i.isUnverified()&&!i.isKnown()&&(t[r]||(t[r]={}),t[r][n]=i)}))})),Object.keys(t).length)throw new m.UnknownDeviceError("This room contains unknown devices which have not been verified. We strongly recommend you verify them before continuing.",t)}},{key:"removeUnknownDevices",value:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){for(var n=a(r[t],2),i=n[0],o=n[1],s=0,u=Object.entries(o);s<u.length;s++){var c=a(u[s],2),l=c[0],f=c[1];f.isUnverified()&&!f.isKnown()&&delete o[l]}0===Object.keys(o).length&&delete e[i]}}},{key:"getDevicesInRoom",value:function(){var e=s(d().mark((function e(t){var r,n,i,o,a,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEncryptionTargetMembers();case 2:return r=e.sent,n=r.map((function(e){return e.userId})),i=this.crypto.getGlobalBlacklistUnverifiedDevices(),"boolean"===typeof t.getBlacklistUnverifiedDevices()&&(i=t.getBlacklistUnverifiedDevices()),e.next=8,this.crypto.downloadKeys(n,!1);case 8:o=e.sent,a={},e.t0=d().keys(o);case 11:if((e.t1=e.t0()).done){e.next=27;break}if(s=e.t1.value,o.hasOwnProperty(s)){e.next=15;break}return e.abrupt("continue",11);case 15:u=o[s],e.t2=d().keys(u);case 17:if((e.t3=e.t2()).done){e.next=25;break}if(c=e.t3.value,u.hasOwnProperty(c)){e.next=21;break}return e.abrupt("continue",17);case 21:l=this.crypto.checkDeviceTrust(s,c),(u[c].isBlocked()||!l.isVerified()&&i)&&(a[s]||(a[s]={}),f=u[c].isBlocked(),a[s][c]={code:f?"m.blacklisted":"m.unverified",reason:b.WITHHELD_MESSAGES[f?"m.blacklisted":"m.unverified"],deviceInfo:u[c]},delete u[c]),e.next=17;break;case 25:e.next=11;break;case 27:return e.abrupt("return",[o,a]);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(m.EncryptionAlgorithm),x=function(e){c(r,e);var t=l(r);function r(){var e;f(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,v.default)(u(e),"pendingEvents",{}),(0,v.default)(u(e),"olmlib",g),e}return h(r,[{key:"decryptEvent",value:function(){var e=s(d().mark((function e(t){var r,n,i,o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.getWireContent()).sender_key&&r.session_id&&r.ciphertext){e.next=3;break}throw new m.DecryptionError("MEGOLM_MISSING_FIELDS","Missing fields in input");case 3:return this.addEventToPendingList(t),e.prev=4,e.next=7,this.olmDevice.decryptGroupMessage(t.getRoomId(),r.sender_key,r.session_id,r.ciphertext,t.getId(),t.getTs());case 7:n=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(4),"DecryptionError"!==e.t0.name){e.next=14;break}throw e.t0;case 14:throw i="OLM_DECRYPT_GROUP_MESSAGE_ERROR",e.t0&&"OLM.UNKNOWN_MESSAGE_INDEX"===e.t0.message&&(this.requestKeysForEvent(t),i="OLM_UNKNOWN_MESSAGE_INDEX"),new m.DecryptionError(i,e.t0?e.t0.toString():"Unknown Error: Error is undefined",{session:r.sender_key+"|"+r.session_id});case 17:if(null!==n){e.next=27;break}return this.requestKeysForEvent(t),e.next=21,this.olmDevice.sessionMayHaveProblems(r.sender_key,t.getTs()-12e4);case 21:if(!(o=e.sent)){e.next=26;break}throw a=_[o.type]||_.unknown,o.fixed&&(a+=" Trying to create a new secure channel and re-requesting the keys."),new m.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",a,{session:r.sender_key+"|"+r.session_id});case 26:throw new m.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID","The sender's device has not sent us the keys for this message.",{session:r.sender_key+"|"+r.session_id});case 27:if(this.removeEventFromPendingList(t),(s=JSON.parse(n.result)).room_id===t.getRoomId()){e.next=31;break}throw new m.DecryptionError("MEGOLM_BAD_ROOM","Message intended for room "+s.room_id);case 31:return e.abrupt("return",{clearEvent:s,senderCurve25519Key:n.senderKey,claimedEd25519Key:n.keysClaimed.ed25519,forwardingCurve25519KeyChain:n.forwardingCurve25519KeyChain,untrusted:n.untrusted});case 32:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"requestKeysForEvent",value:function(e){var t=e.getWireContent(),r=e.getKeyRequestRecipients(this.userId);this.crypto.requestRoomKey({room_id:e.getRoomId(),algorithm:t.algorithm,sender_key:t.sender_key,session_id:t.session_id},r)}},{key:"addEventToPendingList",value:function(e){var t=e.getWireContent(),r=t.sender_key,n=t.session_id;this.pendingEvents[r]||(this.pendingEvents[r]=new Map);var i=this.pendingEvents[r];i.has(n)||i.set(n,new Set),i.get(n).add(e)}},{key:"removeEventFromPendingList",value:function(e){var t=e.getWireContent(),r=t.sender_key,n=t.session_id,i=this.pendingEvents[r],o=i&&i.get(n);o&&(o.delete(e),0===o.size&&i.delete(r),0===i.size&&delete this.pendingEvents[r])}},{key:"onRoomKeyEvent",value:function(e){var t,r=this,n=e.getContent(),i=n.session_id,o=e.getSenderKey(),a=[],s=!1;if(n.room_id&&i&&n.session_key){if(o){if("m.forwarded_room_key"==e.getType()){if(s=!0,a=n.forwarding_curve25519_key_chain,Array.isArray(a)||(a=[]),(a=a.slice()).push(o),!(o=n.sender_key))return void y.logger.error("forwarded_room_key event is missing sender_key field");var u=n.sender_claimed_ed25519_key;if(!u)return void y.logger.error("forwarded_room_key_event is missing sender_claimed_ed25519_key field");t={ed25519:u}}else t=e.getKeysClaimed();var c={};return n["org.sendingnetwork.msc3061.shared_history"]&&(c.sharedHistory=!0),this.olmDevice.addInboundGroupSession(n.room_id,o,a,i,n.session_key,t,s,c).then((function(){r.retryDecryption(o,i).then((function(e){e&&r.crypto.cancelRoomKeyRequest({algorithm:n.algorithm,room_id:n.room_id,session_id:n.session_id,sender_key:o})}))})).then((function(){r.crypto.backupManager.backupGroupSession(o,n.session_id)})).catch((function(e){y.logger.error("Error handling m.room_key_event: ".concat(e))}))}y.logger.error("key event has no sender key (not encrypted?)")}else y.logger.error("key event is missing fields")}},{key:"onRoomKeyWithheldEvent",value:function(){var e=s(d().mark((function e(t){var r,n,o,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getContent(),n=r.sender_key,"m.no_olm"!==r.code){e.next=36;break}return o=t.getSender(),y.logger.warn("".concat(o,":").concat(n," was unable to establish an olm session with us")),e.next=7,this.olmDevice.getSessionIdForDevice(n);case 7:if(!e.sent){e.next=13;break}return y.logger.debug("New session already created.  Not creating a new one."),e.next=11,this.olmDevice.recordSessionProblem(n,"no_olm",!0);case 11:return this.retryDecryptionFromSender(n),e.abrupt("return");case 13:if(a=this.crypto.deviceList.getDeviceByIdentityKey(r.algorithm,n)){e.next=24;break}return e.next=17,this.crypto.downloadKeys([o],!1);case 17:if(a=this.crypto.deviceList.getDeviceByIdentityKey(r.algorithm,n)){e.next=24;break}return y.logger.info("Couldn't find device for identity key "+n+": not establishing session"),e.next=22,this.olmDevice.recordSessionProblem(n,"no_olm",!1);case 22:return this.retryDecryptionFromSender(n),e.abrupt("return");case 24:return e.next=26,g.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,i({},o,[a]),!1);case 26:return s={algorithm:g.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=29,g.encryptMessageForDevice(s.ciphertext,this.userId,void 0,this.olmDevice,o,a,{type:"m.dummy"});case 29:return e.next=31,this.olmDevice.recordSessionProblem(n,"no_olm",!0);case 31:return this.retryDecryptionFromSender(n),e.next=34,this.baseApis.sendToDevice("m.room.encrypted",i({},o,i({},a.deviceId,s)));case 34:e.next=38;break;case 36:return e.next=38,this.olmDevice.addInboundGroupSessionWithheld(r.room_id,n,r.session_id,r.code,r.reason);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasKeysForKeyRequest",value:function(e){var t=e.requestBody;return this.olmDevice.hasInboundSessionKeys(t.room_id,t.sender_key,t.session_id)}},{key:"shareKeysWithDevice",value:function(e){var t=this,r=e.userId,n=e.deviceId,o=this.crypto.getStoredDevice(r,n),a=e.requestBody;this.olmlib.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,i({},r,[o])).then((function(e){return e[r][n].sessionId?(y.logger.log("sharing keys for session "+a.sender_key+"|"+a.session_id+" with device "+r+":"+n),t.buildKeyForwardingMessage(a.room_id,a.sender_key,a.session_id)):null})).then((function(e){var a={algorithm:g.OLM_ALGORITHM,sender_key:t.olmDevice.deviceCurve25519Key,ciphertext:{}};return t.olmlib.encryptMessageForDevice(a.ciphertext,t.userId,void 0,t.olmDevice,r,o,e).then((function(){var e=i({},r,i({},n,a));return t.baseApis.sendToDevice("m.room.encrypted",e)}))}))}},{key:"buildKeyForwardingMessage",value:function(){var e=s(d().mark((function e(t,r,n){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.olmDevice.getInboundGroupSessionKey(t,r,n);case 2:return i=e.sent,e.abrupt("return",{type:"m.forwarded_room_key",content:{algorithm:g.MEGOLM_ALGORITHM,room_id:t,sender_key:r,sender_claimed_ed25519_key:i.sender_claimed_ed25519_key,session_id:n,session_key:i.key,chain_index:i.chain_index,forwarding_curve25519_key_chain:i.forwarding_curve25519_key_chain,"org.sendingnetwork.msc3061.shared_history":i.shared_history||!1}});case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"importRoomKey",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return(r.untrusted||e.untrusted)&&(n.untrusted=!0),e["org.sendingnetwork.msc3061.shared_history"]&&(n.sharedHistory=!0),this.olmDevice.addInboundGroupSession(e.room_id,e.sender_key,e.forwarding_curve25519_key_chain,e.session_id,e.session_key,e.sender_claimed_keys,!0,n).then((function(){"backup"!==r.source&&t.crypto.backupManager.backupGroupSession(e.sender_key,e.session_id).catch((function(e){y.logger.log("Failed to back up megolm session",e)})),t.retryDecryption(e.sender_key,e.session_id)}))}},{key:"retryDecryption",value:function(){var e=s(d().mark((function e(t,r){var i,o,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.pendingEvents[t]){e.next=3;break}return e.abrupt("return",!0);case 3:if(o=i.get(r)){e.next=6;break}return e.abrupt("return",!0);case 6:return y.logger.debug("Retrying decryption on events",n(o)),e.next=9,Promise.all(n(o).map(function(){var e=s(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.attemptDecryption(a.crypto,{isRetry:!0});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 9:return e.abrupt("return",!(this.pendingEvents[t]||{})[r]);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"retryDecryptionFromSender",value:function(){var e=s(d().mark((function e(t){var r,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.pendingEvents[t]){e.next=3;break}return e.abrupt("return",!0);case 3:return delete this.pendingEvents[t],e.next=6,Promise.all(n(r).map(function(){var e=s(d().mark((function e(t){var r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a(t,2),r[0],o=r[1],e.next=3,Promise.all(n(o).map(function(){var e=s(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.attemptDecryption(i.crypto);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",!this.pendingEvents[t]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendSharedHistoryInboundSessions",value:function(){var e=s(d().mark((function e(t){var r,n,i,s,u,c,l,f,h,p,v,m,b,w,k,S,E,x,_,T,O,M,P,R;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,t);case 2:return y.logger.log("sendSharedHistoryInboundSessions to users",Object.keys(t)),e.next=5,this.olmDevice.getSharedHistoryInboundGroupSessions(this.roomId);case 5:r=e.sent,y.logger.log("shared-history sessions",r),n=o(r),e.prev=8,n.s();case 10:if((i=n.n()).done){e.next=28;break}return s=a(i.value,2),u=s[0],c=s[1],e.next=14,this.buildKeyForwardingMessage(this.roomId,u,c);case 14:for(l=e.sent,f=[],h={},p=0,v=Object.entries(t);p<v.length;p++){m=a(v[p],2),b=m[0],w=m[1],h[b]={},k=o(w);try{for(k.s();!(S=k.n()).done;)E=S.value,x={algorithm:g.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},h[b][E.deviceId]=x,f.push(g.encryptMessageForDevice(x.ciphertext,this.userId,void 0,this.olmDevice,b,E,l))}catch(d){k.e(d)}finally{k.f()}}return e.next=20,Promise.all(f);case 20:for(_=0,T=Object.keys(h);_<T.length;_++){for(O=T[_],M=0,P=Object.keys(h[O]);M<P.length;M++)R=P[M],0===Object.keys(h[O][R].ciphertext).length&&(y.logger.log("No ciphertext for device "+O+":"+R+": pruning"),delete h[O][R]);0===Object.keys(h[O]).length&&(y.logger.log("Pruned all devices for user "+O),delete h[O])}if(0!==Object.keys(h).length){e.next=24;break}return y.logger.log("No users left to send to: aborting"),e.abrupt("return");case 24:return e.next=26,this.baseApis.sendToDevice("m.room.encrypted",h);case 26:e.next=10;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(8),n.e(e.t0);case 33:return e.prev=33,n.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[8,30,33,36]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(m.DecryptionAlgorithm),_={no_olm:"The sender was unable to establish a secure channel.",unknown:"The secure channel with the sender was corrupted."};(0,m.registerAlgorithm)(g.MEGOLM_ALGORITHM,E,x)},function(e,t,r){"use strict";(function(e,n){var i=r(9),o=r(1),a=r(2),s=r(16),u=r(14),c=r(15);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_QR_CODE_METHOD=t.SCAN_QR_CODE_METHOD=t.ReciprocateQRCode=t.QRCodeData=void 0;var h=f(r(4)),d=r(84),p=r(52),v=r(28),y=r(8);t.SHOW_QR_CODE_METHOD="m.qr_code.show.v1";t.SCAN_QR_CODE_METHOD="m.qr_code.scan.v1";var g=function(e){u(r,e);var t=c(r);function r(){var e;o(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),(0,h.default)(s(e),"reciprocateQREvent",void 0),(0,h.default)(s(e),"doVerification",i(l().mark((function t(){var r,n,i,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.startEvent){t.next=2;break}throw new Error("It is not currently possible to start verificationwith this method yet.");case 2:if(r=e.request.qrCodeData,e.startEvent.getContent().secret===r.encodedSharedSecret){t.next=5;break}throw(0,p.newKeyMismatchError)();case 5:return t.next=7,new Promise((function(t,r){e.reciprocateQREvent={confirm:t,cancel:function(){return r((0,p.newUserCancelledError)())}},e.emit("show_reciprocate_qr",e.reciprocateQREvent)}));case 7:n={},t.t0=r.mode,t.next=t.t0===m.VerifyOtherUser?11:t.t0===m.VerifySelfTrusted?14:t.t0===m.VerifySelfUntrusted?17:20;break;case 11:return i=r.otherUserMasterKey,n["ed25519:".concat(i)]=i,t.abrupt("break",20);case 14:return o=e.request.targetDevice.deviceId,n["ed25519:".concat(o)]=r.otherDeviceKey,t.abrupt("break",20);case 17:return a=r.myMasterKey,n["ed25519:".concat(a)]=a,t.abrupt("break",20);case 20:return t.next=22,e.verifyKeys(e.userId,n,(function(e,t,r){var i=n[e];if(!i)throw(0,p.newKeyMismatchError)();if(r!==i)throw y.logger.error("key ID from key info does not match"),(0,p.newKeyMismatchError)();for(var o in t.keys)if(o.startsWith("ed25519")){var a=n[o];if(!a)throw(0,p.newKeyMismatchError)();if(t.keys[o]!==a)throw y.logger.error("master key does not match"),(0,p.newKeyMismatchError)()}}));case 22:case"end":return t.stop()}}),t)})))),e}return a(r,null,[{key:"factory",value:function(e,t,n,i,o,a){return new r(e,t,n,i,o,a)}},{key:"NAME",get:function(){return"m.reciprocate.v1"}}]),r}(d.VerificationBase);t.ReciprocateQRCode=g;var m;!function(e){e[e.VerifyOtherUser=0]="VerifyOtherUser",e[e.VerifySelfTrusted=1]="VerifySelfTrusted",e[e.VerifySelfUntrusted=2]="VerifySelfUntrusted"}(m||(m={}));var b=function(){function t(e,r,n,i,a,s){o(this,t),this.mode=e,this.sharedSecret=r,this.otherUserMasterKey=n,this.otherDeviceKey=i,this.myMasterKey=a,this.buffer=s}return a(t,[{key:"encodedSharedSecret",get:function(){return this.sharedSecret}},{key:"getBuffer",value:function(){return this.buffer}}],[{key:"create",value:function(){var e=i(l().mark((function e(r,n){var i,o,a,s,u,c,f,h,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.generateSharedSecret(),o=t.determineMode(r,n),a=null,s=null,u=null,o!==m.VerifyOtherUser){e.next=10;break}c=n.getStoredCrossSigningForUser(r.otherUserId),a=c.getId("master"),e.next=17;break;case 10:if(o!==m.VerifySelfTrusted){e.next=16;break}return e.next=13,t.getOtherDeviceKey(r,n);case 13:s=e.sent,e.next=17;break;case 16:o===m.VerifySelfUntrusted&&(f=n.getUserId(),h=n.getStoredCrossSigningForUser(f),u=h.getId("master"));case 17:return d=t.generateQrData(r,n,o,i,a,s,u),p=t.generateBuffer(d),e.abrupt("return",new t(o,i,a,s,u,p));case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"generateSharedSecret",value:function(){var t=new Uint8Array(11);return e.crypto.getRandomValues(t),(0,v.encodeUnpaddedBase64)(t)}},{key:"getOtherDeviceKey",value:function(){var e=i(l().mark((function e(t,r){var n,i,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getUserId(),i=t.targetDevice,o=i?i.deviceId:null,a=r.getStoredDevice(n,o)){e.next=6;break}throw new Error("could not find device "+o);case 6:return e.abrupt("return",a.getFingerprint());case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"determineMode",value:function(e,t){var r=t.getUserId(),n=e.otherUserId,i=m.VerifyOtherUser;r===n&&(i=t.checkUserTrust(r).isCrossSigningVerified()?m.VerifySelfTrusted:m.VerifySelfUntrusted);return i}},{key:"generateQrData",value:function(e,t,r,n,i,o,a){var s=t.getUserId(),u={prefix:"SENDINGNETWORK",version:2,mode:r,transactionId:e.channel.transactionId,firstKeyB64:"",secondKeyB64:"",secretB64:n},c=t.getStoredCrossSigningForUser(s);return r===m.VerifyOtherUser?(u.firstKeyB64=c.getId("master"),u.secondKeyB64=i):r===m.VerifySelfTrusted?(u.firstKeyB64=c.getId("master"),u.secondKeyB64=o):r===m.VerifySelfUntrusted&&(u.firstKeyB64=t.getDeviceEd25519Key(),u.secondKeyB64=a),u}},{key:"generateBuffer",value:function(e){var t=n.alloc(0),r=function(e){var r=n.from([e]);t=n.concat([t,r])},i=function(e){var r=n.alloc(2);r.writeInt16BE(e,0),t=n.concat([t,r])},o=function(e,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n.from(e,r);o&&i(a.byteLength),t=n.concat([t,a])},a=function(e){var r=(0,v.decodeBase64)(e),i=n.from(r);t=n.concat([t,i])};return o(e.prefix,"ascii",!1),r(e.version),r(e.mode),o(e.transactionId,"utf-8"),a(e.firstKeyB64),a(e.secondKeyB64),a(e.secretB64),t}}]),t}();t.QRCodeData=b}).call(this,r(11),r(18).Buffer)},function(e,t,r){"use strict";(function(e,n){var i=r(20),o=r(23),a=r(9),s=r(1),u=r(2);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.DehydrationManager=t.DEHYDRATION_ALGORITHM=void 0;var f=l(r(4)),h=r(28),d=r(33),p=r(51),v=l(r(63)),y=r(8),g="org.sendingnetwork.msc2697.v1.olm.libolm_pickle";t.DEHYDRATION_ALGORITHM=g;var m=function(){function t(e){s(this,t),this.crypto=e,(0,f.default)(this,"inProgress",!1),(0,f.default)(this,"timeoutId",void 0),(0,f.default)(this,"key",void 0),(0,f.default)(this,"keyInfo",void 0),(0,f.default)(this,"deviceDisplayName",void 0),this.getDehydrationKeyFromCache()}return u(t,[{key:"getDehydrationKeyFromCache",value:function(){var t=a(c().mark((function t(){var r=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.crypto.cryptoStore.doTxn("readonly",[d.IndexedDBCryptoStore.STORE_ACCOUNT],(function(t){r.crypto.cryptoStore.getSecretStorePrivateKey(t,function(){var t=a(c().mark((function t(i){var o,a,s,u,l,f,d,v;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=12;break}return o=i.key,a=i.keyInfo,s=i.deviceDisplayName,u=i.time,l=e.from(r.crypto.olmDevice.pickleKey),t.next=5,(0,p.decryptAES)(o,l,g);case 5:f=t.sent,r.key=(0,h.decodeBase64)(f),r.keyInfo=a,r.deviceDisplayName=s,d=Date.now(),v=Math.max(1,u+6048e5-d),r.timeoutId=n.setTimeout(r.dehydrateDevice.bind(r),v);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"dehydration")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setKeyAndQueueDehydration",value:function(){var e=a(c().mark((function e(t){var r,n,i=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2&&void 0!==i[2]?i[2]:void 0,e.next=4,this.setKey(t,r,n);case 4:e.sent||this.dehydrateDevice();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setKey",value:function(){var e=a(c().mark((function e(t){var r,i,o,a,s=this,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},i=u.length>2&&void 0!==u[2]?u[2]:void 0,t){e.next=9;break}return this.timeoutId&&(n.clearTimeout(this.timeoutId),this.timeoutId=void 0),e.next=6,this.crypto.cryptoStore.doTxn("readwrite",[d.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){s.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",null)}));case 6:return this.key=void 0,this.keyInfo=void 0,e.abrupt("return");case 9:for(o=this.key&&t.length==this.key.length,a=0;o&&a<t.length;a++)t[a]!=this.key[a]&&(o=!1);return o||(this.key=t,this.keyInfo=r,this.deviceDisplayName=i),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dehydrateDevice",value:function(){var t=a(c().mark((function t(){var r,a,s,u,l,f,m,b,w,k,S,E,x,_,T,O,M,P,R,I,L,C,A,j,D,N,U,B,F,q,K=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inProgress){t.next=3;break}return y.logger.log("Dehydration already in progress -- not starting new dehydration"),t.abrupt("return");case 3:return this.inProgress=!0,this.timeoutId&&(n.clearTimeout(this.timeoutId),this.timeoutId=void 0),t.prev=5,a=e.from(this.crypto.olmDevice.pickleKey),t.next=9,(0,p.encryptAES)((0,h.encodeBase64)(this.key),a,g);case 9:return s=t.sent,t.next=12,this.crypto.cryptoStore.doTxn("readwrite",[d.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){K.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",{keyInfo:K.keyInfo,key:s,deviceDisplayName:K.deviceDisplayName,time:Date.now()})}));case 12:return y.logger.log("Attempting to dehydrate device"),y.logger.log("Creating account"),(u=new n.Olm.Account).create(),l=JSON.parse(u.identity_keys()),f=u.max_number_of_one_time_keys(),u.generate_one_time_keys(f/2),u.generate_fallback_key(),m=JSON.parse(u.one_time_keys()),b=JSON.parse(u.fallback_key()),u.mark_keys_as_published(),w=u.pickle(new Uint8Array(this.key)),k={algorithm:g,account:w},this.keyInfo.passphrase&&(k.passphrase=this.keyInfo.passphrase),y.logger.log("Uploading account to server"),t.next=29,this.crypto.baseApis.http.authedRequest(void 0,"PUT","/dehydrated_device",void 0,{device_data:k,initial_device_display_name:this.deviceDisplayName},{prefix:"/_api/client/unstable/org.sendingnetwork.msc2697.v2"});case 29:if(S=t.sent,E=S.device_id,y.logger.log("Preparing device keys",E),x={algorithms:this.crypto.supportedAlgorithms,device_id:E,user_id:this.crypto.userId,keys:(r={},o(r,"ed25519:".concat(E),l.ed25519),o(r,"curve25519:".concat(E),l.curve25519),r)},_=u.sign(v.default.stringify(x)),x.signatures=o({},this.crypto.userId,o({},"ed25519:".concat(E),_)),!this.crypto.crossSigningInfo.getId("self_signing")){t.next=38;break}return t.next=38,this.crypto.crossSigningInfo.signObject(x,"self_signing");case 38:for(y.logger.log("Preparing one-time keys"),T={},O=0,M=Object.entries(m.curve25519);O<M.length;O++)P=i(M[O],2),R=P[0],I=P[1],L={key:I},C=u.sign(v.default.stringify(L)),L.signatures=o({},this.crypto.userId,o({},"ed25519:".concat(E),C)),T["signed_curve25519:".concat(R)]=L;for(y.logger.log("Preparing fallback keys"),A={},j=0,D=Object.entries(b.curve25519);j<D.length;j++)N=i(D[j],2),U=N[0],B=N[1],F={key:B,fallback:!0},q=u.sign(v.default.stringify(F)),F.signatures=o({},this.crypto.userId,o({},"ed25519:".concat(E),q)),A["signed_curve25519:".concat(U)]=F;return y.logger.log("Uploading keys to server"),t.next=47,this.crypto.baseApis.http.authedRequest(void 0,"POST","/keys/upload/"+encodeURI(E),void 0,{device_keys:x,one_time_keys:T,"org.sendingnetwork.msc2732.fallback_keys":A});case 47:return y.logger.log("Done dehydrating"),this.timeoutId=n.setTimeout(this.dehydrateDevice.bind(this),6048e5),t.abrupt("return",E);case 50:return t.prev=50,this.inProgress=!1,t.finish(50);case 53:case"end":return t.stop()}}),t,this,[[5,,50,53]])})));return function(){return t.apply(this,arguments)}}()},{key:"stop",value:function(){this.timeoutId&&(n.clearTimeout(this.timeoutId),this.timeoutId=void 0)}}]),t}();t.DehydrationManager=m}).call(this,r(18).Buffer,r(11))},function(e,t,r){"use strict";(function(e){var n,i=r(23),o=r(12),a=r(20),s=r(9),u=r(1),c=r(2);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmsByName=t.DefaultAlgorithm=t.Curve25519=t.BackupManager=t.Aes256=void 0;var h=f(r(4)),d=r(59),p=r(8),v=r(28),y=r(85),g=r(19),m=r(33),b=r(86),w=r(51),k=r(123),S=function(){function e(t,r){u(this,e),this.baseApis=t,this.getKey=r,(0,h.default)(this,"algorithm",void 0),(0,h.default)(this,"backupInfo",void 0),(0,h.default)(this,"checkedForBackup",void 0),(0,h.default)(this,"sendingBackups",void 0),this.checkedForBackup=!1,this.sendingBackups=!1}return c(e,[{key:"version",get:function(){return this.backupInfo&&this.backupInfo.version}},{key:"enableKeyBackup",value:function(){var t=s(l().mark((function t(r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backupInfo=r,this.algorithm&&this.algorithm.free(),t.next=4,e.makeAlgorithm(r,this.getKey);case 4:this.algorithm=t.sent,this.baseApis.emit("crypto.keyBackupStatus",!0),this.scheduleKeyBackupSend();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disableKeyBackup",value:function(){this.algorithm&&this.algorithm.free(),this.algorithm=void 0,this.backupInfo=void 0,this.baseApis.emit("crypto.keyBackupStatus",!1)}},{key:"getKeyBackupEnabled",value:function(){return this.checkedForBackup?Boolean(this.algorithm):null}},{key:"prepareKeyBackupVersion",value:function(){var e=s(l().mark((function e(t,r){var n,i,o,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r?O[r]:M){e.next=3;break}throw new Error("Unknown backup algorithm");case 3:return e.next=5,n.prepare(t);case 5:return i=e.sent,o=a(i,2),s=o[0],u=o[1],c=(0,b.encodeRecoveryKey)(s),e.abrupt("return",{algorithm:n.algorithmName,auth_data:u,recovery_key:c,privateKey:s});case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createKeyBackupVersion",value:function(){var t=s(l().mark((function t(r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.makeAlgorithm(r,this.getKey);case 2:this.algorithm=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"checkAndStart",value:function(){var e=s(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.logger.log("Checking key backup status..."),!this.baseApis.isGuest()){e.next=5;break}return p.logger.log("Skipping key backup check since user is guest"),this.checkedForBackup=!0,e.abrupt("return",null);case 5:return e.prev=5,e.next=8,this.baseApis.getKeyBackupVersion();case 8:t=e.sent,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(5),p.logger.log("Error checking for active key backup",e.t0),404===e.t0.httpStatus&&(this.checkedForBackup=!0),e.abrupt("return",null);case 16:return this.checkedForBackup=!0,e.next=19,this.isKeyBackupTrusted(t);case 19:if(!(r=e.sent).usable||this.backupInfo){e.next=26;break}return p.logger.log("Found usable key backup v"+t.version+": enabling key backups"),e.next=24,this.enableKeyBackup(t);case 24:e.next=46;break;case 26:if(r.usable||!this.backupInfo){e.next=31;break}p.logger.log("No usable key backup: disabling key backup"),this.disableKeyBackup(),e.next=46;break;case 31:if(r.usable||this.backupInfo){e.next=35;break}p.logger.log("No usable key backup: not enabling key backup"),e.next=46;break;case 35:if(!r.usable||!this.backupInfo){e.next=46;break}if(t.version===this.backupInfo.version){e.next=45;break}return p.logger.log("On backup version "+this.backupInfo.version+" but found version "+t.version+": switching."),this.disableKeyBackup(),e.next=41,this.enableKeyBackup(t);case 41:return e.next=43,this.scheduleAllGroupSessionsForBackup();case 43:e.next=46;break;case 45:p.logger.log("Backup version "+t.version+" still current");case 46:return e.abrupt("return",{backupInfo:t,trustInfo:r});case 47:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkKeyBackup",value:function(){var e=s(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkedForBackup=!1,e.abrupt("return",this.checkAndStart());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isKeyBackupTrusted",value:function(){var e=s(l().mark((function e(t){var r,n,i,o,a,s,u,c,f,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={usable:!1,trusted_locally:!1,sigs:[]},t&&t.algorithm&&t.auth_data&&t.auth_data.signatures){e.next=4;break}return p.logger.info("Key backup is absent or missing required data"),e.abrupt("return",r);case 4:n=this.baseApis.crypto.sessionStore.getLocalTrustedBackupPubKey(),"public_key"in t.auth_data&&t.auth_data.public_key===n&&(p.logger.info("Backup public key "+n+" is trusted locally"),r.trusted_locally=!0),i=t.auth_data.signatures[this.baseApis.getUserId()]||[],o=0,a=Object.keys(i);case 8:if(!(o<a.length)){e.next=54;break}if(s=a[o],"ed25519"===(u=s.split(":"))[0]){e.next=14;break}return p.logger.log("Ignoring unknown signature type: "+u[0]),e.abrupt("continue",51);case 14:if(c={deviceId:u[1]},(f=this.baseApis.crypto.crossSigningInfo.getId())!==c.deviceId){e.next=30;break}return c.crossSigningId=!0,e.prev=18,e.next=21,(0,v.verifySignature)(this.baseApis.crypto.olmDevice,t.auth_data,this.baseApis.getUserId(),c.deviceId,f);case 21:c.valid=!0,e.next=28;break;case 24:e.prev=24,e.t0=e.catch(18),p.logger.warn("Bad signature from cross signing key "+f,e.t0),c.valid=!1;case 28:return r.sigs.push(c),e.abrupt("continue",51);case 30:if(!(h=this.baseApis.crypto.deviceList.getStoredDevice(this.baseApis.getUserId(),c.deviceId))){e.next=48;break}return c.device=h,e.next=35,this.baseApis.checkDeviceTrust(this.baseApis.getUserId(),c.deviceId);case 35:return c.deviceTrust=e.sent,e.prev=36,e.next=39,(0,v.verifySignature)(this.baseApis.crypto.olmDevice,t.auth_data,this.baseApis.getUserId(),h.deviceId,h.getFingerprint());case 39:c.valid=!0,e.next=46;break;case 42:e.prev=42,e.t1=e.catch(36),p.logger.info("Bad signature from key ID "+s+" userID "+this.baseApis.getUserId()+" device ID "+h.deviceId+" fingerprint: "+h.getFingerprint(),t.auth_data,e.t1),c.valid=!1;case 46:e.next=50;break;case 48:c.valid=null,p.logger.info("Ignoring signature from unknown key "+s);case 50:r.sigs.push(c);case 51:o++,e.next=8;break;case 54:return r.usable=r.sigs.some((function(e){return e.valid&&(e.device&&e.deviceTrust.isVerified()||e.crossSigningId)})),r.usable=r.usable||r.trusted_locally,e.abrupt("return",r);case 57:case"end":return e.stop()}}),e,this,[[18,24],[36,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"scheduleKeyBackupSend",value:function(){var e=s(l().mark((function e(){var t,r,n,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1e4,!this.sendingBackups){e.next=3;break}return e.abrupt("return");case 3:return this.sendingBackups=!0,e.prev=4,r=Math.random()*t,e.next=8,(0,g.sleep)(r,void 0);case 8:n=0;case 9:if(this.algorithm){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,e.next=14,this.backupPendingKeys(200);case 14:if(0!==e.sent){e.next=17;break}return e.abrupt("return");case 17:n=0,e.next=30;break;case 20:if(e.prev=20,e.t0=e.catch(11),n++,p.logger.log("Key backup request failed",e.t0),!e.t0.data){e.next=30;break}if("M_NOT_FOUND"!=e.t0.data.errcode&&"M_WRONG_ROOM_KEYS_VERSION"!=e.t0.data.errcode){e.next=30;break}return e.next=28,this.checkKeyBackup();case 28:throw this.baseApis.crypto.emit("crypto.keyBackupFailed",e.t0.data.errcode),e.t0;case 30:if(!n){e.next=33;break}return e.next=33,(0,g.sleep)(1e3*Math.pow(2,Math.min(n-1,4)),void 0);case 33:e.next=9;break;case 35:return e.prev=35,this.sendingBackups=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[4,,35,38],[11,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"backupPendingKeys",value:function(){var e=s(l().mark((function e(t){var r,n,i,a,s,u,c,f,h,d,p,y;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseApis.crypto.cryptoStore.getSessionsNeedingBackup(t);case 2:if((r=e.sent).length){e.next=5;break}return e.abrupt("return",0);case 5:return e.next=7,this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();case 7:n=e.sent,this.baseApis.crypto.emit("crypto.keyBackupSessionsRemaining",n),i={},a=o(r),e.prev=11,a.s();case 13:if((s=a.n()).done){e.next=34;break}return u=s.value,c=u.sessionData.room_id,void 0===i[c]&&(i[c]={sessions:{}}),e.next=19,this.baseApis.crypto.olmDevice.exportInboundGroupSession(u.senderKey,u.sessionId,u.sessionData);case 19:return(f=e.sent).algorithm=v.MEGOLM_ALGORITHM,h=(f.forwarding_curve25519_key_chain||[]).length,d=this.baseApis.crypto.deviceList.getUserByIdentityKey(v.MEGOLM_ALGORITHM,u.senderKey),p=this.baseApis.crypto.deviceList.getDeviceByIdentityKey(v.MEGOLM_ALGORITHM,u.senderKey),y=this.baseApis.crypto.checkDeviceInfoTrust(d,p).isVerified(),e.t0=f.first_known_index,e.t1=h,e.t2=y,e.next=30,this.algorithm.encryptSession(f);case 30:e.t3=e.sent,i[c].sessions[u.sessionId]={first_message_index:e.t0,forwarded_count:e.t1,is_verified:e.t2,session_data:e.t3};case 32:e.next=13;break;case 34:e.next=39;break;case 36:e.prev=36,e.t4=e.catch(11),a.e(e.t4);case 39:return e.prev=39,a.f(),e.finish(39);case 42:return e.next=44,this.baseApis.sendKeyBackup(void 0,void 0,this.backupInfo.version,{rooms:i});case 44:return e.next=46,this.baseApis.crypto.cryptoStore.unmarkSessionsNeedingBackup(r);case 46:return e.next=48,this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();case 48:return n=e.sent,this.baseApis.crypto.emit("crypto.keyBackupSessionsRemaining",n),e.abrupt("return",r.length);case 51:case"end":return e.stop()}}),e,this,[[11,36,39,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"backupGroupSession",value:function(){var e=s(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([{senderKey:t,sessionId:r}]);case 2:this.backupInfo&&this.scheduleKeyBackupSend();case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"scheduleAllGroupSessionsForBackup",value:function(){var e=s(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.flagAllGroupSessionsForBackup();case 2:this.scheduleKeyBackupSend(0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"flagAllGroupSessionsForBackup",value:function(){var e=s(l().mark((function e(){var t,r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseApis.crypto.cryptoStore.doTxn("readwrite",[m.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,m.IndexedDBCryptoStore.STORE_BACKUP],(function(e){r.baseApis.crypto.cryptoStore.getAllEndToEndInboundGroupSessions(e,(function(t){null!==t&&r.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([t],e)}))}));case 2:return e.next=4,this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();case 4:return t=e.sent,this.baseApis.emit("crypto.keyBackupSessionsRemaining",t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"countSessionsNeedingBackup",value:function(){return this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup()}}],[{key:"checkBackupVersion",value:function(e){var t=O[e.algorithm];if(!t)throw new Error("Unknown backup algorithm: "+e.algorithm);if("object"!==typeof e.auth_data)throw new Error("Invalid backup data returned");return t.checkBackupVersion(e)}},{key:"makeAlgorithm",value:function(){var e=s(l().mark((function e(t,r){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O[t.algorithm]){e.next=3;break}throw new Error("Unknown backup algorithm");case 3:return e.next=5,n.init(t.auth_data,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();t.BackupManager=S;var E=function(){function t(e,r,n){u(this,t),this.authData=e,this.publicKey=r,this.getKey=n}return c(t,[{key:"untrusted",get:function(){return!0}},{key:"encryptSession",value:function(){var e=s(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=Object.assign({},t)).session_id,delete r.room_id,delete r.first_known_index,e.abrupt("return",this.publicKey.encrypt(JSON.stringify(r)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptSessions",value:function(){var t=s(l().mark((function t(r){var n,i,o,s,u,c,f,h,v;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getKey();case 2:if(n=t.sent,i=new e.Olm.PkDecryption,t.prev=4,i.init_with_private_key(n)===this.authData.public_key){t.next=8;break}throw{errcode:d.SendingNetworkClient.RESTORE_BACKUP_ERROR_BAD_KEY};case 8:for(o=[],s=0,u=Object.entries(r);s<u.length;s++){c=a(u[s],2),f=c[0],h=c[1];try{(v=JSON.parse(i.decrypt(h.session_data.ephemeral,h.session_data.mac,h.session_data.ciphertext))).session_id=f,o.push(v)}catch(l){p.logger.log("Failed to decrypt megolm session from backup",l,h)}}return t.abrupt("return",o);case 11:return t.prev=11,i.free(),t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[4,,11,14]])})));return function(e){return t.apply(this,arguments)}}()},{key:"keyMatches",value:function(){var t=s(l().mark((function t(r){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new e.Olm.PkDecryption;try{i=n.init_with_private_key(r)}finally{n.free()}return t.abrupt("return",i===this.authData.public_key);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"free",value:function(){this.publicKey.free()}}],[{key:"init",value:function(){var r=s(l().mark((function r(n,i){var o;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n&&"public_key"in n){r.next=2;break}throw new Error("auth_data missing required information");case 2:return(o=new e.Olm.PkEncryption).set_recipient_key(n.public_key),r.abrupt("return",new t(n,o,i));case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"prepare",value:function(){var t=s(l().mark((function t(r){var n,i,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new e.Olm.PkDecryption,t.prev=1,i={},r){t.next=7;break}i.public_key=n.generate_key(),t.next=17;break;case 7:if(!(r instanceof Uint8Array)){t.next=11;break}i.public_key=n.init_with_private_key(r),t.next=17;break;case 11:return t.next=13,(0,y.keyFromPassphrase)(r);case 13:o=t.sent,i.private_key_salt=o.salt,i.private_key_iterations=o.iterations,i.public_key=n.init_with_private_key(o.key);case 17:return(new e.Olm.PkEncryption).set_recipient_key(i.public_key),t.abrupt("return",[n.get_private_key(),i]);case 20:return t.prev=20,n.free(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[1,,20,23]])})));return function(e){return t.apply(this,arguments)}}()},{key:"checkBackupVersion",value:function(e){if(!("public_key"in e.auth_data))throw new Error("Invalid backup data returned")}}]),t}();function x(e){var t,r=(0,g.getCrypto)();if(r)return r.randomBytes(e);if(null!==(t=window)&&void 0!==t&&t.crypto){var n=new Uint8Array(e);return window.crypto.getRandomValues(n),n}throw new Error("No usable crypto implementation")}t.Curve25519=E,(0,h.default)(E,"algorithmName","m.megolm_backup.v1.curve25519-aes-sha2");var _=new k.UnstableValue(null,"org.sendingnetwork.msc3270.v1.aes-hmac-sha2"),T=function(){function e(t,r){u(this,e),this.authData=t,this.key=r}return c(e,[{key:"untrusted",get:function(){return!1}},{key:"encryptSession",value:function(){var e=s(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=Object.assign({},t)).session_id,delete r.room_id,delete r.first_known_index,e.next=6,(0,w.encryptAES)(JSON.stringify(r),this.key,t.session_id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptSessions",value:function(){var e=s(l().mark((function e(t){var r,n,i,o,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=0,i=Object.entries(t);case 2:if(!(n<i.length)){e.next=20;break}return o=a(i[n],2),s=o[0],u=o[1],e.prev=4,e.t0=JSON,e.next=8,(0,w.decryptAES)(u.session_data,this.key,s);case 8:e.t1=e.sent,(c=e.t0.parse.call(e.t0,e.t1)).session_id=s,r.push(c),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(4),p.logger.log("Failed to decrypt megolm session from backup",e.t2,u);case 17:n++,e.next=2;break;case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"keyMatches",value:function(){var e=s(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.authData.mac){e.next=8;break}return e.next=3,(0,w.calculateKeyCheck)(t,this.authData.iv);case 3:return r=e.sent,n=r.mac,e.abrupt("return",this.authData.mac.replace(/=+$/g,"")===n.replace(/=+/g,""));case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"free",value:function(){this.key.fill(0)}}],[{key:"init",value:function(){var t=s(l().mark((function t(r,n){var i,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("auth_data missing");case 2:return t.next=4,n();case 4:if(i=t.sent,!r.mac){t.next=12;break}return t.next=8,(0,w.calculateKeyCheck)(i,r.iv);case 8:if(o=t.sent,a=o.mac,r.mac.replace(/=+$/g,"")===a.replace(/=+/g,"")){t.next=12;break}throw new Error("Key does not match");case 12:return t.abrupt("return",new e(r,i));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"prepare",value:function(){var e=s(l().mark((function e(t){var r,n,i,o,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},t){e.next=5;break}r=x(32),e.next=15;break;case 5:if(!(t instanceof Uint8Array)){e.next=9;break}r=new Uint8Array(t),e.next=15;break;case 9:return e.next=11,(0,y.keyFromPassphrase)(t);case 11:i=e.sent,n.private_key_salt=i.salt,n.private_key_iterations=i.iterations,r=i.key;case 15:return e.next=17,(0,w.calculateKeyCheck)(r);case 17:return o=e.sent,a=o.iv,s=o.mac,n.iv=a,n.mac=s,e.abrupt("return",[r,n]);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkBackupVersion",value:function(e){if(!("iv"in e.auth_data)||!("mac"in e.auth_data))throw new Error("Invalid backup data returned")}}]),e}();t.Aes256=T,(0,h.default)(T,"algorithmName",_.name);var O=(i(n={},E.algorithmName,E),i(n,T.algorithmName,T),n);t.algorithmsByName=O;var M=E;t.DefaultAlgorithm=M}).call(this,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmoteMessage=function(e){return{msgtype:n.MsgType.Emote,body:e}},t.makeHtmlEmote=function(e,t){return{msgtype:n.MsgType.Emote,format:"org.sendingnetwork.custom.html",body:e,formatted_body:t}},t.makeHtmlMessage=function(e,t){return{msgtype:n.MsgType.Text,format:"org.sendingnetwork.custom.html",body:e,formatted_body:t}},t.makeHtmlNotice=function(e,t){return{msgtype:n.MsgType.Notice,format:"org.sendingnetwork.custom.html",body:e,formatted_body:t}},t.makeNotice=function(e){return{msgtype:n.MsgType.Notice,body:e}},t.makeTextMessage=function(e){return{msgtype:n.MsgType.Text,body:e}};var n=r(24)},function(e,t,r){"use strict";var n=r(90),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"===typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:a,prop:c}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)"undefined"!==typeof r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},encode:function(e,t,r,i,o){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",c=0;c<s.length;++c){var l=s.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===n.RFC1738&&(40===l||41===l)?u+=s.charAt(c):l<128?u+=a[l]:l<2048?u+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?u+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(c+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(c)),u+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return u},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!==typeof r){if(o(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=s(t,n)),o(t)&&o(r)?(r.forEach((function(r,o){if(i.call(t,o)){var a=t[o];a&&"object"===typeof a&&r&&"object"===typeof r?t[o]=e(a,r,n):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var a=r[o];return i.call(t,o)?t[o]=e(t[o],a,n):t[o]=a,t}),a)}}},function(e,t,r){"use strict";var n=r(10).Buffer,i=r(298).Transform;function o(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(7)(o,i),o.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)},o.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!==typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=o},function(e,t,r){"use strict";(function(t,n){var i;e.exports=_,_.ReadableState=x;r(17).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=r(145),s=r(18).Buffer,u=t.Uint8Array||function(){};var c,l=r(299);c=l&&l.debuglog?l.debuglog("stream"):function(){};var f,h,d,p=r(300),v=r(146),y=r(147).getHighWaterMark,g=r(42).codes,m=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,k=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(7)(_,a);var S=v.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,t,n){i=i||r(43),e=e||{},"boolean"!==typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(38).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function _(e){if(i=i||r(43),!(this instanceof _))return new _(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,r,n,i){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,a);else if(i||(o=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof u||"string"===typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(a,t)),o)S(e,o);else if(a.objectMode||t&&t.length>0)if("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)a.endEmitted?S(e,new k):O(e,a,t,!0);else if(a.ended)S(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?O(e,a,t,!1):I(e,a)):O(e,a,t,!1)}else n||(a.reading=!1,I(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function O(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),I(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},_.prototype.unshift=function(e){return T(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){f||(f=r(38).StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function I(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function C(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){c("readable nexttick read 0"),e.read(0)}function j(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):P(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){S(this,new w("_read()"))},_.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:y;function s(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",l);var f=!1;function h(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!f&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(t){c("onerror",t),y(),e.removeListener("error",d),0===o(e,"error")&&S(e,t)}function p(){e.removeListener("finish",v),y()}function v(){c("onfinish"),e.removeListener("close",p),y()}function y(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",v),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?P(this):i.reading||n.nextTick(A,this))),r},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(C,this),r},_.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(C,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(302)),h(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=N,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(_.from=function(e,t){return void 0===d&&(d=r(303)),d(_,e,t)})}).call(this,r(11),r(21))},function(e,t,r){e.exports=r(17).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(n,a):(a._writableState.errorEmitted=!0,t.nextTick(r,a,e)):t.nextTick(r,a,e):o?(t.nextTick(n,a),o(e)):t.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(21))},function(e,t,r){"use strict";var n=r(42).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=_,_.WritableState=x;var a={deprecate:r(92)},s=r(145),u=r(18).Buffer,c=t.Uint8Array||function(){};var l,f=r(146),h=r(147).getHighWaterMark,d=r(42).codes,p=d.ERR_INVALID_ARG_TYPE,v=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,k=d.ERR_UNKNOWN_ENCODING,S=f.errorOrDestroy;function E(){}function x(e,t,a){o=o||r(43),e=e||{},"boolean"!==typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(I,e,t),e._writableState.errorEmitted=!0,S(e,i)):(o(i),e._writableState.errorEmitted=!0,S(e,i),I(e,t))}(e,r,i,t,o);else{var a=P(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),i?n.nextTick(O,e,r,a,o):O(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function _(e){var t=this instanceof(o=o||r(43));if(!t&&!l.call(_,this))return new _(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function T(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function M(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=P(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}r(7)(_,s),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===_&&(e&&e._writableState instanceof x)}})):l=function(e){return e instanceof this},_.prototype.pipe=function(){S(this,new g)},_.prototype.write=function(e,t,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof r&&(r=E),o.ending?function(e,t){var r=new w;S(e,r),n.nextTick(t,r)}(this,r):(s||function(e,t,r,i){var o;return null===r?o=new b:"string"===typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,s,n,i,o);return c}(this,o,s,e,t,r)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new v("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var i=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=f.destroy,_.prototype._undestroy=f.undestroy,_.prototype._destroy=function(e,t){t(e)}}).call(this,r(11),r(21))},function(e,t,r){"use strict";e.exports=l;var n=r(42).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(43);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){var n=r(7),i=r(44),o=r(10).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function f(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function d(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,p=0|this._f,v=0|this._g,y=0|this._h,g=0;g<16;++g)r[g]=e.readInt32BE(4*g);for(;g<64;++g)r[g]=0|(((t=r[g-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[g-7]+d(r[g-15])+r[g-16];for(var m=0;m<64;++m){var b=y+h(u)+c(u,p,v)+a[m]+r[m]|0,w=f(n)+l(n,i,o)|0;y=v,v=p,p=u,u=s+b|0,s=o,o=i,i=n,n=b+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=v+this._g|0,this._h=y+this._h|0},u.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u},function(e,t,r){var n=r(7),i=r(44),o=r(10).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function c(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function f(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function v(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function y(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function g(e,t){return e>>>0<t>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,m=0|this._gh,b=0|this._hh,w=0|this._al,k=0|this._bl,S=0|this._cl,E=0|this._dl,x=0|this._el,_=0|this._fl,T=0|this._gl,O=0|this._hl,M=0;M<32;M+=2)t[M]=e.readInt32BE(4*M),t[M+1]=e.readInt32BE(4*M+4);for(;M<160;M+=2){var P=t[M-30],R=t[M-30+1],I=d(P,R),L=p(R,P),C=v(P=t[M-4],R=t[M-4+1]),A=y(R,P),j=t[M-14],D=t[M-14+1],N=t[M-32],U=t[M-32+1],B=L+D|0,F=I+j+g(B,L)|0;F=(F=F+C+g(B=B+A|0,A)|0)+N+g(B=B+U|0,U)|0,t[M]=F,t[M+1]=B}for(var q=0;q<160;q+=2){F=t[q],B=t[q+1];var K=l(r,n,i),z=l(w,k,S),G=f(r,w),H=f(w,r),V=h(s,x),W=h(x,s),X=a[q],Y=a[q+1],Z=c(s,u,m),J=c(x,_,T),Q=O+W|0,$=b+V+g(Q,O)|0;$=($=($=$+Z+g(Q=Q+J|0,J)|0)+X+g(Q=Q+Y|0,Y)|0)+F+g(Q=Q+B|0,B)|0;var ee=H+z|0,te=G+K+g(ee,H)|0;b=m,O=T,m=u,T=_,u=s,_=x,s=o+$+g(x=E+Q|0,E)|0,o=i,E=S,i=n,S=k,n=r,k=w,r=$+te+g(w=Q+ee|0,Q)|0}this._al=this._al+w|0,this._bl=this._bl+k|0,this._cl=this._cl+S|0,this._dl=this._dl+E|0,this._el=this._el+x|0,this._fl=this._fl+_|0,this._gl=this._gl+T|0,this._hl=this._hl+O|0,this._ah=this._ah+r+g(this._al,w)|0,this._bh=this._bh+n+g(this._bl,k)|0,this._ch=this._ch+i+g(this._cl,S)|0,this._dh=this._dh+o+g(this._dl,E)|0,this._eh=this._eh+s+g(this._el,x)|0,this._fh=this._fh+u+g(this._fl,_)|0,this._gh=this._gh+m+g(this._gl,T)|0,this._hh=this._hh+b+g(this._hl,O)|0},u.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u},function(e,t,r){"use strict";(function(t,n){var i=r(66);e.exports=b;var o,a=r(117);b.ReadableState=m;r(17).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=r(153),c=r(97).Buffer,l=t.Uint8Array||function(){};var f=Object.create(r(54));f.inherits=r(7);var h=r(311),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,v=r(312),y=r(154);f.inherits(b,u);var g=["error","close","destroy","pause","resume"];function m(e,t){e=e||{};var n=t instanceof(o=o||r(39));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(38).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||r(39),!(this instanceof b))return new b(e);this._readableState=new m(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function w(e,t,r,n,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}(e,a)):(i||(o=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof l||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?k(e,a,t,!1):_(e,a)):k(e,a,t,!1))):n||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e)),_(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=y.destroy,b.prototype._undestroy=y.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(38).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(x,e):x(e))}function x(e){d("emit readable"),e.emit("readable"),P(e)}function _(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(T,e,t))}function T(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function O(e){d("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):E(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(r,t))),null===(n=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:b;function c(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",f),e.removeListener("error",y),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",b),r.removeListener("data",v),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function l(){d("onend"),e.end()}o.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,P(e))}}(r);e.on("drain",f);var h=!1;var p=!1;function v(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==C(o.pipes,e))&&!h&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function y(t){d("onerror",t),b(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",m),b()}function m(){d("onfinish"),e.removeListener("close",g),b()}function b(){d("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",g),e.once("finish",m),e.emit("pipe",r),o.flowing||(d("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=C(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&E(this):i.nextTick(O,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(M,e,t))}(this,e)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=R}).call(this,r(11),r(21))},function(e,t,r){e.exports=r(17).EventEmitter},function(e,t,r){"use strict";var n=r(66);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";e.exports=a;var n=r(39),i=Object.create(r(54));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(7),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){"use strict";var n=r(7),i=r(321),o=r(36),a=r(10).Buffer,s=r(157),u=r(94),c=r(95),l=a.alloc(128);function f(e,t){o.call(this,"digest"),"string"===typeof t&&(t=a.from(t));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>r)?t=("rmd160"===e?new u:c(e)).update(t).digest():t.length<r&&(t=a.concat([t,l],r));for(var n=this._ipad=a.allocUnsafe(r),i=this._opad=a.allocUnsafe(r),s=0;s<r;s++)n[s]=54^t[s],i[s]=92^t[s];this._hash="rmd160"===e?new u:c(e),this._hash.update(n)}n(f,o),f.prototype._update=function(e){this._hash.update(e)},f.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new u:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new f("rmd160",t):"md5"===e?new i(s,t):new f(e,t)}},function(e,t,r){var n=r(91);e.exports=function(e){return(new n).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,r){t.pbkdf2=r(323),t.pbkdf2Sync=r(162)},function(e,t){var r=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!==typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!==typeof t)throw new TypeError("Key length not a number");if(t<0||t>r||t!==t)throw new TypeError("Bad key length")}},function(e,t,r){(function(t,r){var n;if(t.process&&t.process.browser)n="utf-8";else if(t.process&&t.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";e.exports=n}).call(this,r(11),r(21))},function(e,t,r){var n=r(157),i=r(94),o=r(95),a=r(10).Buffer,s=r(160),u=r(161),c=r(163),l=a.alloc(128),f={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,r){var s=function(e){function t(t){return o(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new i).update(e).digest()}:"md5"===e?n:t}(e),u="sha512"===e||"sha384"===e?128:64;t.length>u?t=s(t):t.length<u&&(t=a.concat([t,l],u));for(var c=a.allocUnsafe(u+f[e]),h=a.allocUnsafe(u+f[e]),d=0;d<u;d++)c[d]=54^t[d],h[d]=92^t[d];var p=a.allocUnsafe(u+r+4);c.copy(p,0,0,u),this.ipad1=p,this.ipad2=c,this.opad=h,this.alg=e,this.blocksize=u,this.hash=s,this.size=f[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,r,n,i){s(r,n);var o=new h(i=i||"sha1",e=c(e,u,"Password"),(t=c(t,u,"Salt")).length),l=a.allocUnsafe(n),d=a.allocUnsafe(t.length+4);t.copy(d,0,0,t.length);for(var p=0,v=f[i],y=Math.ceil(n/v),g=1;g<=y;g++){d.writeUInt32BE(g,t.length);for(var m=o.run(d,o.ipad1),b=m,w=1;w<r;w++){b=o.run(b,o.ipad2);for(var k=0;k<v;k++)m[k]^=b[k]}m.copy(l,p),p+=v}return l}},function(e,t,r){var n=r(10).Buffer;e.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"===typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(e,t,r){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},t.ip=function(e,t,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},t.rip=function(e,t,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+a&1,i<<=1,i|=e>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},t.pc1=function(e,t,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,r,i){for(var o=0,a=0,s=n.length>>>1,u=0;u<s;u++)o<<=1,o|=e>>>n[u]&1;for(u=s;u<n.length;u++)a<<=1,a|=t>>>n[u]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},t.expand=function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=e>>>o&63;for(o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(t>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,r=0;r<o.length;r++)t<<=1,t|=e>>>o[r]&1;return t>>>0},t.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],o=0;o<t;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(e,t,r){"use strict";var n=r(26),i=r(7),o=r(164),a=r(99);function s(){this.tmp=new Array(2),this.keys=null}function u(e){a.call(this,e);var t=new s;this._desState=t,this.deriveKeys(t,e.key)}i(u,a),e.exports=u,u.create=function(e){return new u(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(t,0),i=o.readUInt32BE(t,4);o.pc1(r,i,e.tmp,0),r=e.tmp[0],i=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var s=c[a>>>1];r=o.r28shl(r,s),i=o.r28shl(i,s),o.pc2(r,i,e.keys,a)}},u.prototype._update=function(e,t,r,n){var i=this._desState,a=o.readUInt32BE(e,t),s=o.readUInt32BE(e,t+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],o.writeUInt32BE(r,a,n),o.writeUInt32BE(r,s,n+4)},u.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},u.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},u.prototype._encrypt=function(e,t,r,n,i){for(var a=t,s=r,u=0;u<e.keys.length;u+=2){var c=e.keys[u],l=e.keys[u+1];o.expand(s,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var f=o.substitute(c,l),h=s;s=(a^o.permute(f))>>>0,a=h}o.rip(s,a,n,i)},u.prototype._decrypt=function(e,t,r,n,i){for(var a=r,s=t,u=e.keys.length-2;u>=0;u-=2){var c=e.keys[u],l=e.keys[u+1];o.expand(a,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var f=o.substitute(c,l),h=a;a=(s^o.permute(f))>>>0,s=h}o.rip(a,s,n,i)}},function(e,t,r){var n=r(55),i=r(10).Buffer,o=r(167);function a(e){var t=e._cipher.encryptBlockRaw(e._prev);return o(e._prev),t}t.encrypt=function(e,t){var r=Math.ceil(t.length/16),o=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var u=a(e),c=o+16*s;e._cache.writeUInt32BE(u[0],c+0),e._cache.writeUInt32BE(u[1],c+4),e._cache.writeUInt32BE(u[2],c+8),e._cache.writeUInt32BE(u[3],c+12)}var l=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,l)}},function(e,t){e.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,r){var n=r(67),i=r(10).Buffer,o=r(36),a=r(7),s=r(336),u=r(55),c=r(167);function l(e,t,r,a){o.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(t);var l=this._cipher.encryptBlock(u);this._ghash=new s(l),r=function(e,t,r){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var n=new s(r),o=t.length,a=o%16;n.update(t),a&&(a=16-a,n.update(i.alloc(a,0))),n.update(i.alloc(8,0));var u=8*o,l=i.alloc(8);l.writeUIntBE(u,0,8),n.update(l),e._finID=n.state;var f=i.from(e._finID);return c(f),f}(this,r,l),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}a(l,o),l.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},l.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=l},function(e,t,r){var n=r(67),i=r(10).Buffer,o=r(36);function a(e,t,r,a){o.call(this),this._cipher=new n.AES(t),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=e}r(7)(a,o),a.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},e.exports=a},function(e,t,r){var n=r(41);e.exports=m,m.simpleSieve=y,m.fermatTest=g;var i=r(22),o=new i(24),a=new(r(172)),s=new i(1),u=new i(2),c=new i(5),l=(new i(16),new i(8),new i(10)),f=new i(3),h=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function v(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<t&&e[i]<=n&&r%e[i]!==0;i++);t!==i&&e[i]<=n||(e[t++]=r)}return p=e,e}function y(e){for(var t=v(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function g(e){var t=i.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function m(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var r,p;for(t=new i(t);;){for(r=new i(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(u),t.cmp(u)){if(!t.cmp(c))for(;r.mod(l).cmp(f);)r.iadd(d)}else for(;r.mod(o).cmp(h);)r.iadd(d);if(y(p=r.shrn(1))&&y(r)&&g(p)&&g(r)&&a.test(p)&&a.test(r))return r}}},function(e,t,r){var n=r(22),i=r(102);function o(e){this.rand=e||new i.Rand}e.exports=o,o.create=function(e){return new o(e)},o.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(e)>=0);return i},o.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},o.prototype.test=function(e,t,r){var i=e.bitLength(),o=n.mont(e),a=new n(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),u=0;!s.testn(u);u++);for(var c=e.shrn(u),l=s.toRed(o);t>0;t--){var f=this._randrange(new n(2),s);r&&r(f);var h=f.toRed(o).redPow(c);if(0!==h.cmp(a)&&0!==h.cmp(l)){for(var d=1;d<u;d++){if(0===(h=h.redSqr()).cmp(a))return!1;if(0===h.cmp(l))break}if(d===u)return!1}}return!0},o.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),o=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var u=e.shrn(s),c=a.toRed(i);t>0;t--){var l=this._randrange(new n(2),a),f=e.gcd(l);if(0!==f.cmpn(1))return f;var h=l.toRed(i).redPow(u);if(0!==h.cmp(o)&&0!==h.cmp(c)){for(var d=1;d<s;d++){if(0===(h=h.redSqr()).cmp(o))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(c))break}if(d===s)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,r){"use strict";(function(t,n){var i;e.exports=_,_.ReadableState=x;r(17).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=r(174),s=r(18).Buffer,u=t.Uint8Array||function(){};var c,l=r(346);c=l&&l.debuglog?l.debuglog("stream"):function(){};var f,h,d,p=r(347),v=r(175),y=r(176).getHighWaterMark,g=r(45).codes,m=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,k=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(7)(_,a);var S=v.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,t,n){i=i||r(46),e=e||{},"boolean"!==typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(38).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function _(e){if(i=i||r(46),!(this instanceof _))return new _(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,r,n,i){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,a);else if(i||(o=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof u||"string"===typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(a,t)),o)S(e,o);else if(a.objectMode||t&&t.length>0)if("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)a.endEmitted?S(e,new k):O(e,a,t,!0);else if(a.ended)S(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?O(e,a,t,!1):I(e,a)):O(e,a,t,!1)}else n||(a.reading=!1,I(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function O(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),I(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},_.prototype.unshift=function(e){return T(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){f||(f=r(38).StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function I(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function C(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){c("readable nexttick read 0"),e.read(0)}function j(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):P(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){S(this,new w("_read()"))},_.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:y;function s(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",l);var f=!1;function h(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!f&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(t){c("onerror",t),y(),e.removeListener("error",d),0===o(e,"error")&&S(e,t)}function p(){e.removeListener("finish",v),y()}function v(){c("onfinish"),e.removeListener("close",p),y()}function y(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",v),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?P(this):i.reading||n.nextTick(A,this))),r},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(C,this),r},_.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(C,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(349)),h(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=N,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(_.from=function(e,t){return void 0===d&&(d=r(350)),d(_,e,t)})}).call(this,r(11),r(21))},function(e,t,r){e.exports=r(17).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(n,a):(a._writableState.errorEmitted=!0,t.nextTick(r,a,e)):t.nextTick(r,a,e):o?(t.nextTick(n,a),o(e)):t.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(21))},function(e,t,r){"use strict";var n=r(45).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=_,_.WritableState=x;var a={deprecate:r(92)},s=r(174),u=r(18).Buffer,c=t.Uint8Array||function(){};var l,f=r(175),h=r(176).getHighWaterMark,d=r(45).codes,p=d.ERR_INVALID_ARG_TYPE,v=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,k=d.ERR_UNKNOWN_ENCODING,S=f.errorOrDestroy;function E(){}function x(e,t,a){o=o||r(46),e=e||{},"boolean"!==typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(I,e,t),e._writableState.errorEmitted=!0,S(e,i)):(o(i),e._writableState.errorEmitted=!0,S(e,i),I(e,t))}(e,r,i,t,o);else{var a=P(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),i?n.nextTick(O,e,r,a,o):O(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function _(e){var t=this instanceof(o=o||r(46));if(!t&&!l.call(_,this))return new _(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function T(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function M(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=P(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}r(7)(_,s),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===_&&(e&&e._writableState instanceof x)}})):l=function(e){return e instanceof this},_.prototype.pipe=function(){S(this,new g)},_.prototype.write=function(e,t,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof r&&(r=E),o.ending?function(e,t){var r=new w;S(e,r),n.nextTick(t,r)}(this,r):(s||function(e,t,r,i){var o;return null===r?o=new b:"string"===typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(e,o),n.nextTick(i,o),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,s,n,i,o);return c}(this,o,s,e,t,r)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new v("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var i=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=f.destroy,_.prototype._undestroy=f.undestroy,_.prototype._destroy=function(e,t){t(e)}}).call(this,r(11),r(21))},function(e,t,r){"use strict";e.exports=l;var n=r(45).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(46);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){"use strict";var n=t;function i(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},n.zero2=i,n.toHex=o,n.encode=function(e,t){return"hex"===t?o(e):e}},function(e,t,r){"use strict";var n=t;n.base=r(69),n.short=r(357),n.mont=r(358),n.edwards=r(359)},function(e,t,r){"use strict";var n=r(32).rotr32;function i(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function a(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?a(t,r,n):2===e?o(t,r,n):void 0},t.ch32=i,t.maj32=o,t.p32=a,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},function(e,t,r){"use strict";var n=r(32),i=r(56),o=r(181),a=r(26),s=n.sum32,u=n.sum32_4,c=n.sum32_5,l=o.ch32,f=o.maj32,h=o.s0_256,d=o.s1_256,p=o.g0_256,v=o.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(m,y),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=u(v(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],y=this.h[2],g=this.h[3],m=this.h[4],b=this.h[5],w=this.h[6],k=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var S=c(k,d(m),l(m,b,w),this.k[n],r[n]),E=s(h(i),f(i,o,y));k=w,w=b,b=m,m=s(g,S),g=y,y=o,o=i,i=s(S,E)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],y),this.h[3]=s(this.h[3],g),this.h[4]=s(this.h[4],m),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],w),this.h[7]=s(this.h[7],k)},m.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){"use strict";var n=r(32),i=r(56),o=r(26),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,f=n.sum64_hi,h=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,v=n.sum64_5_hi,y=n.sum64_5_lo,g=i.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function w(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function k(e,t,r,n,i,o){var a=t&n^~t&o;return a<0&&(a+=4294967296),a}function S(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function E(e,t,r,n,i,o){var a=t&n^t&o^n&o;return a<0&&(a+=4294967296),a}function x(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function _(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function O(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r}function M(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function P(e,t){var r=s(e,t,1)^s(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function R(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}function I(e,t){var r=s(e,t,19)^s(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(b,g),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=R(r[n-4],r[n-3]),o=I(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],u=M(r[n-30],r[n-29]),c=P(r[n-30],r[n-29]),l=r[n-32],f=r[n-31];r[n]=d(i,o,a,s,u,c,l,f),r[n+1]=p(i,o,a,s,u,c,l,f)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],g=this.h[8],m=this.h[9],b=this.h[10],M=this.h[11],P=this.h[12],R=this.h[13],I=this.h[14],L=this.h[15];o(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var A=I,j=L,D=T(g,m),N=O(g,m),U=w(g,m,b,M,P),B=k(g,m,b,M,P,R),F=this.k[C],q=this.k[C+1],K=r[C],z=r[C+1],G=v(A,j,D,N,U,B,F,q,K,z),H=y(A,j,D,N,U,B,F,q,K,z);A=x(n,i),j=_(n,i),D=S(n,i,a,s,u),N=E(n,i,a,s,u,c);var V=f(A,j,D,N),W=h(A,j,D,N);I=P,L=R,P=b,R=M,b=g,M=m,g=f(d,p,G,H),m=h(p,p,G,H),d=u,p=c,u=a,c=s,a=n,s=i,n=f(G,H,V,W),i=h(G,H,V,W)}l(this.h,0,n,i),l(this.h,2,a,s),l(this.h,4,u,c),l(this.h,6,d,p),l(this.h,8,g,m),l(this.h,10,b,M),l(this.h,12,P,R),l(this.h,14,I,L)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(374).Buffer}catch(M){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(M){o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?h[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var v=f.modrn(l).toString(e);r=(f=f.idivn(l)).isZero()?v+r:h[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function v(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)o=(t=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,y=0|a[2],g=8191&y,m=y>>>13,b=0|a[3],w=8191&b,k=b>>>13,S=0|a[4],E=8191&S,x=S>>>13,_=0|a[5],T=8191&_,O=_>>>13,M=0|a[6],P=8191&M,R=M>>>13,I=0|a[7],L=8191&I,C=I>>>13,A=0|a[8],j=8191&A,D=A>>>13,N=0|a[9],U=8191&N,B=N>>>13,F=0|s[0],q=8191&F,K=F>>>13,z=0|s[1],G=8191&z,H=z>>>13,V=0|s[2],W=8191&V,X=V>>>13,Y=0|s[3],Z=8191&Y,J=Y>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ve=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,q))|0)+((8191&(i=(i=Math.imul(f,K))+Math.imul(h,q)|0))<<13)|0;c=((o=Math.imul(h,K))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,K))+Math.imul(v,q)|0,o=Math.imul(v,K);var ge=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,H)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,q),i=(i=Math.imul(g,K))+Math.imul(m,q)|0,o=Math.imul(m,K),n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0;var me=(c+(n=n+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,X)|0)+Math.imul(h,W)|0))<<13)|0;c=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,K))+Math.imul(k,q)|0,o=Math.imul(k,K),n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,X)|0;var be=(c+(n=n+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,Z)|0))<<13)|0;c=((o=o+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,q),i=(i=Math.imul(E,K))+Math.imul(x,q)|0,o=Math.imul(x,K),n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,J)|0;var we=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,q),i=(i=Math.imul(T,K))+Math.imul(O,q)|0,o=Math.imul(O,K),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0;var ke=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,K))+Math.imul(R,q)|0,o=Math.imul(R,K),n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0;var Se=(c+(n=n+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,q),i=(i=Math.imul(L,K))+Math.imul(C,q)|0,o=Math.imul(C,K),n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0;var Ee=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,q),i=(i=Math.imul(j,K))+Math.imul(D,q)|0,o=Math.imul(D,K),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0;var xe=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,K))+Math.imul(B,q)|0,o=Math.imul(B,K),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(v,fe)|0,o=o+Math.imul(v,he)|0;var _e=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ve)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,ve)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,H))+Math.imul(B,G)|0,o=Math.imul(B,H),n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,X)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(k,ue)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,he)|0;var Te=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ve)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,X))+Math.imul(B,W)|0,o=Math.imul(B,X),n=n+Math.imul(j,Z)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,J)|0,n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var Oe=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ve)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,ve)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,J))+Math.imul(B,Z)|0,o=Math.imul(B,J),n=n+Math.imul(j,$)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(x,fe)|0,o=o+Math.imul(x,he)|0;var Me=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ve)|0)+Math.imul(k,pe)|0))<<13)|0;c=((o=o+Math.imul(k,ve)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(B,$)|0,o=Math.imul(B,ee),n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,he)|0;var Pe=(c+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,ve)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,ve)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(j,oe)|0,i=(i=i+Math.imul(j,ae)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,ae)|0,n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,n=n+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,fe)|0,o=o+Math.imul(R,he)|0;var Re=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ve)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ve)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(B,oe)|0,o=Math.imul(B,ae),n=n+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,he)|0;var Ie=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ve)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,ve)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(j,fe)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(D,fe)|0,o=o+Math.imul(D,he)|0;var Le=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ve)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,ve)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(U,fe),i=(i=Math.imul(U,he))+Math.imul(B,fe)|0,o=Math.imul(B,he);var Ce=(c+(n=n+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,ve)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,ve)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Ae=(c+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ve))+Math.imul(B,pe)|0))<<13)|0;return c=((o=Math.imul(B,ve))+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u[0]=ye,u[1]=ge,u[2]=me,u[3]=be,u[4]=we,u[5]=ke,u[6]=Se,u[7]=Ee,u[8]=xe,u[9]=_e,u[10]=Te,u[11]=Oe,u[12]=Me,u[13]=Pe,u[14]=Re,u[15]=Ie,u[16]=Le,u[17]=Ce,u[18]=Ae,0!==c&&(u[19]=c,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function m(e,t,r){return g(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(y=v),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):r<63?v(this,e,t):r<1024?g(this,e,t):m(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},b.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=r[l+d],v=n[l+d],y=r[l+d+a],g=n[l+d+a],m=f*y-h*g;g=f*g+h*y,y=m,r[l+d]=p+y,n[l+d]=v+g,r[l+d+a]=p-y,n[l+d+a]=v-g,d!==s&&(m=u*f-c*h,h=u*h+c*f,f=m)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0===(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),a.isub(u)):(r.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0===(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new T(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function k(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},k.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},k.prototype.split=function(e,t){e.iushrn(this.n,0,t)},k.prototype.imulK=function(e){return e.imul(this.k)},i(S,k),S.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},S.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,k),i(x,k),i(_,k),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new S;else if("p224"===e)t=new E;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return w[e]=t,t},T.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var v=d,y=0;0!==v.cmp(s);y++)v=v.redSqr();n(y<p);var g=this.pow(f,new o(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===n&&0===l)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new O(e)},i(O,T),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(40)(e))},function(e,t,r){"use strict";var n=t;n.bignum=r(22),n.define=r(376).define,n.base=r(379),n.constants=r(380),n.decoders=r(188),n.encoders=r(186)},function(e,t,r){"use strict";var n=t;n.der=r(187),n.pem=r(377)},function(e,t,r){"use strict";var n=r(7),i=r(108).Buffer,o=r(109),a=r(111);function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){o.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=s,s.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(u,o),u.prototype._encodeComposite=function(e,t,r,n){var o=function(e,t,r,n){var i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(a.tagByName.hasOwnProperty(e))i=a.tagByName[e];else{if("number"!==typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=a.tagClassByName[r||"universal"]<<6}(e,t,r,this.reporter);if(n.length<128){var s=i.alloc(2);return s[0]=o,s[1]=n.length,this._createEncoderBuffer([s,n])}for(var u=1,c=n.length;c>=256;c>>=8)u++;var l=i.alloc(2+u);l[0]=o,l[1]=128|u;for(var f=1+u,h=n.length;h>0;f--,h>>=8)l[f]=255&h;return this._createEncoderBuffer([l,n])},u.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=i.alloc(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},u.prototype._encodeObjid=function(e,t,r){if("string"===typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(var o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var a=0,s=0;s<e.length;s++){var u=e[s];for(a++;u>=128;u>>=7)a++}for(var c=i.alloc(a),l=c.length-1,f=e.length-1;f>=0;f--){var h=e[f];for(c[l--]=127&h;(h>>=7)>0;)c[l--]=128|127&h}return this._createEncoderBuffer(c)},u.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[c(n.getUTCFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[c(n.getUTCFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(e,t){if("string"===typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!==typeof e&&!i.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=i.from(r)}if(i.isBuffer(e)){var n=e.length;0===e.length&&n++;var o=i.alloc(n);return e.copy(o),0===e.length&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var a=1,s=e;s>=256;s>>=8)a++;for(var u=new Array(a),c=u.length-1;c>=0;c--)u[c]=255&e,e>>=8;return 128&u[0]&&u.unshift(0),this._createEncoderBuffer(i.from(u))},u.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},u.prototype._use=function(e,t){return"function"===typeof e&&(e=e(t)),e._getEncoder("der").tree},u.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},function(e,t,r){"use strict";var n=t;n.der=r(189),n.pem=r(378)},function(e,t,r){"use strict";var n=r(7),i=r(22),o=r(57).DecoderBuffer,a=r(109),s=r(111);function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.call(this,"der",e)}function l(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=s.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){var o=r;for(r=0;128===(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;r<<=7,r|=127&o}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:s.tag[r]}}function f(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0===(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var o=0;o<i;o++){n<<=8;var a=e.readUInt8(r);if(e.isError(a))return a;n|=a}return n}e.exports=u,u.prototype.decode=function(e,t){return o.isDecoderBuffer(e)||(e=new o(e,t)),this.tree._decode(e,t)},n(c,a),c.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=l(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},c.prototype._decodeTag=function(e,t,r){var n=l(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=f(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var o=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){var r=l(e,t);if(e.isError(r))return r;var n=f(e,r.primitive,t);if(e.isError(n))return n;var i=void 0;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},c.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var a=r.decode(e,"der",n);if(e.isError(a)&&o)break;i.push(a)}return i},c.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(2*o));return i}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,r){for(var n,i=[],o=0,a=0;!e.isEmpty();)o<<=7,o|=127&(a=e.readUInt8()),0===(128&a)&&(i.push(o),o=0);128&a&&i.push(o);var s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),t){var c=t[n.join(" ")];void 0===c&&(c=t[n.join(".")]),void 0!==c&&(n=c)}return n},c.prototype._decodeTime=function(e,t){var r,n,i,o,a,s,u=e.raw().toString();if("gentime"===t)r=0|u.slice(0,4),n=0|u.slice(4,6),i=0|u.slice(6,8),o=0|u.slice(8,10),a=0|u.slice(10,12),s=0|u.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|u.slice(0,2),n=0|u.slice(2,4),i=0|u.slice(4,6),o=0|u.slice(6,8),a=0|u.slice(8,10),s=0|u.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,i,o,a,s,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){var r=e.raw(),n=new i(r);return t&&(n=t[n.toString(10)]||n),n},c.prototype._use=function(e,t){return"function"===typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,r){var n=r(53),i=r(10).Buffer;function o(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var r,a=i.alloc(0),s=0;a.length<t;)r=o(s++),a=i.concat([a,n("sha1").update(e).update(r).digest()]);return a.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},function(e,t,r){var n=r(22),i=r(10).Buffer;e.exports=function(e,t){return i.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},function(e,t,r){(function(e,r){var n="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Map]",s="[object Set]",u=/\w*$/,c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[n]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[a]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[s]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[i]=f["[object WeakMap]"]=!1;var h="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),v=t&&!t.nodeType&&t,y=v&&"object"==typeof r&&r&&!r.nodeType&&r,g=y&&y.exports===v;function m(e,t){return e.set(t[0],t[1]),e}function b(e,t){return e.add(t),e}function w(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function k(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}function S(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function E(e,t){return function(r){return e(t(r))}}function x(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var _=Array.prototype,T=Function.prototype,O=Object.prototype,M=p["__core-js_shared__"],P=function(){var e=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),R=T.toString,I=O.hasOwnProperty,L=O.toString,C=RegExp("^"+R.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=g?p.Buffer:void 0,j=p.Symbol,D=p.Uint8Array,N=E(Object.getPrototypeOf,Object),U=Object.create,B=O.propertyIsEnumerable,F=_.splice,q=Object.getOwnPropertySymbols,K=A?A.isBuffer:void 0,z=E(Object.keys,Object),G=ve(p,"DataView"),H=ve(p,"Map"),V=ve(p,"Promise"),W=ve(p,"Set"),X=ve(p,"WeakMap"),Y=ve(Object,"create"),Z=we(G),J=we(H),Q=we(V),$=we(W),ee=we(X),te=j?j.prototype:void 0,re=te?te.valueOf:void 0;function ne(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){this.__data__=new ie(e)}function se(e,t){var r=Se(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ee(e)}(e)&&I.call(e,"callee")&&(!B.call(e,"callee")||L.call(e)==n)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=r.length,o=!!i;for(var a in e)!t&&!I.call(e,a)||o&&("length"==a||me(a,i))||r.push(a);return r}function ue(e,t,r){var n=e[t];I.call(e,t)&&ke(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function ce(e,t){for(var r=e.length;r--;)if(ke(e[r][0],t))return r;return-1}function le(e,t,r,c,l,h,d){var p;if(c&&(p=h?c(e,l,h,d):c(e)),void 0!==p)return p;if(!Te(e))return e;var v=Se(e);if(v){if(p=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&I.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,p)}else{var y=ge(e),g=y==i||y==o;if(xe(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if("[object Object]"==y||y==n||g&&!h){if(k(e))return h?e:{};if(p=function(e){return"function"!=typeof e.constructor||be(e)?{}:(t=N(e),Te(t)?U(t):{});var t}(g?{}:e),!t)return function(e,t){return de(e,ye(e),t)}(e,function(e,t){return e&&de(t,Oe(t),e)}(p,e))}else{if(!f[y])return h?e:{};p=function(e,t,r,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return he(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?he(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?he(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case a:return function(e,t,r){return w(t?r(S(e),!0):S(e),m,new e.constructor)}(e,n,r);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,u.exec(e));return t.lastIndex=e.lastIndex,t}(e);case s:return function(e,t,r){return w(t?r(x(e),!0):x(e),b,new e.constructor)}(e,n,r);case"[object Symbol]":return o=e,re?Object(re.call(o)):{}}var o}(e,y,le,t)}}d||(d=new ae);var E=d.get(e);if(E)return E;if(d.set(e,p),!v)var _=r?function(e){return function(e,t,r){var n=t(e);return Se(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Oe,ye)}(e):Oe(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(_||e,(function(n,i){_&&(n=e[i=n]),ue(p,i,le(n,t,r,c,i,e,d))})),p}function fe(e){return!(!Te(e)||(t=e,P&&P in t))&&(_e(e)||k(e)?C:c).test(we(e));var t}function he(e){var t=new e.constructor(e.byteLength);return new D(t).set(new D(e)),t}function de(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=n?n(r[a],e[a],a,r,e):void 0;ue(r,a,void 0===s?e[a]:s)}return r}function pe(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ve(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(r)?r:void 0}ne.prototype.clear=function(){this.__data__=Y?Y(null):{}},ne.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ne.prototype.get=function(e){var t=this.__data__;if(Y){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return I.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:I.call(t,e)},ne.prototype.set=function(e,t){return this.__data__[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,r=ce(t,e);return!(r<0)&&(r==t.length-1?t.pop():F.call(t,r,1),!0)},ie.prototype.get=function(e){var t=this.__data__,r=ce(t,e);return r<0?void 0:t[r][1]},ie.prototype.has=function(e){return ce(this.__data__,e)>-1},ie.prototype.set=function(e,t){var r=this.__data__,n=ce(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},oe.prototype.clear=function(){this.__data__={hash:new ne,map:new(H||ie),string:new ne}},oe.prototype.delete=function(e){return pe(this,e).delete(e)},oe.prototype.get=function(e){return pe(this,e).get(e)},oe.prototype.has=function(e){return pe(this,e).has(e)},oe.prototype.set=function(e,t){return pe(this,e).set(e,t),this},ae.prototype.clear=function(){this.__data__=new ie},ae.prototype.delete=function(e){return this.__data__.delete(e)},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ie){var n=r.__data__;if(!H||n.length<199)return n.push([e,t]),this;r=this.__data__=new oe(n)}return r.set(e,t),this};var ye=q?E(q,Object):function(){return[]},ge=function(e){return L.call(e)};function me(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function we(e){if(null!=e){try{return R.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ke(e,t){return e===t||e!==e&&t!==t}(G&&"[object DataView]"!=ge(new G(new ArrayBuffer(1)))||H&&ge(new H)!=a||V&&"[object Promise]"!=ge(V.resolve())||W&&ge(new W)!=s||X&&"[object WeakMap]"!=ge(new X))&&(ge=function(e){var t=L.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?we(r):void 0;if(n)switch(n){case Z:return"[object DataView]";case J:return a;case Q:return"[object Promise]";case $:return s;case ee:return"[object WeakMap]"}return t});var Se=Array.isArray;function Ee(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!_e(e)}var xe=K||function(){return!1};function _e(e){var t=Te(e)?L.call(e):"";return t==i||t==o}function Te(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oe(e){return Ee(e)?se(e):function(e){if(!be(e))return z(e);var t=[];for(var r in Object(e))I.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}r.exports=function(e){return le(e,!0,!0)}}).call(this,r(11),r(40)(e))},function(e,t,r){var n;!function(){function i(e,t,r){return e.call.apply(e.bind,arguments)}function o(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function a(e,t,r){return(a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var s=Date.now||function(){return+new Date};function u(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var c=!!window.FontFace;function l(e,t,r,n){if(t=e.c.createElement(t),r)for(var i in r)r.hasOwnProperty(i)&&("style"==i?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n&&t.appendChild(e.c.createTextNode(n)),t}function f(e,t,r){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(r,e.lastChild)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t,r){t=t||[],r=r||[];for(var n=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[i]===n[a]){o=!0;break}o||n.push(t[i])}for(t=[],i=0;i<n.length;i+=1){for(o=!1,a=0;a<r.length;a+=1)if(n[i]===r[a]){o=!0;break}o||t.push(n[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function p(e,t){for(var r=e.className.split(/\s+/),n=0,i=r.length;n<i;n++)if(r[n]==t)return!0;return!1}function v(e,t,r){function n(){s&&i&&o&&(s(a),s=null)}t=l(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,o=!0,a=null,s=r||null;c?(t.onload=function(){i=!0,n()},t.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),n()}):setTimeout((function(){i=!0,n()}),0),f(e,"head",t)}function y(e,t,r,n){var i=e.c.getElementsByTagName("head")[0];if(i){var o=l(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout((function(){a||(a=!0,r&&r(Error("Script load timeout")))}),n||5e3),o}return null}function g(){this.a=0,this.c=null}function m(e){return e.a++,function(){e.a--,w(e)}}function b(e,t){e.c=t,w(e)}function w(e){0==e.a&&e.c&&(e.c(),e.c=null)}function k(e){this.a=e||"-"}function S(e,t){this.c=e,this.f=4,this.a="n";var r=(t||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function E(e){var t=[];e=e.split(/,\s*/);for(var r=0;r<e.length;r++){var n=e[r].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function x(e){return e.a+e.f}function _(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function T(e){var t=4,r="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(r=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),r+t}function O(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new k("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function M(e){if(e.g){var t=p(e.f,e.a.c("wf","active")),r=[],n=[e.a.c("wf","loading")];t||r.push(e.a.c("wf","inactive")),d(e.f,r,n)}P(e,"inactive")}function P(e,t,r){e.j&&e.h[t]&&(r?e.h[t](r.c,x(r)):e.h[t]())}function R(){this.c={}}function I(e,t){this.c=e,this.f=t,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function L(e){f(e.c,"body",e.a)}function C(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+E(e.c)+";font-style:"+_(e)+";font-weight:"+e.f+"00;"}function A(e,t,r,n,i,o){this.g=e,this.j=t,this.a=n,this.c=r,this.f=i||3e3,this.h=o||void 0}function j(e,t,r,n,i,o,a){this.v=e,this.B=t,this.c=r,this.a=n,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new I(this.c,this.s),this.h=new I(this.c,this.s),this.j=new I(this.c,this.s),this.m=new I(this.c,this.s),e=C(e=new S(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=e,e=C(e=new S(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=e,e=C(e=new S("serif",x(this.a))),this.j.a.style.cssText=e,e=C(e=new S("sans-serif",x(this.a))),this.m.a.style.cssText=e,L(this.g),L(this.h),L(this.j),L(this.m)}k.prototype.c=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},A.prototype.start=function(){var e=this.c.o.document,t=this,r=s(),n=new Promise((function(n,i){!function o(){s()-r>=t.f?i():e.fonts.load(function(e){return _(e)+" "+e.f+"00 300px "+E(e.c)}(t.a),t.h).then((function(e){1<=e.length?n():setTimeout(o,25)}),(function(){i()}))}()})),i=null,o=new Promise((function(e,r){i=setTimeout(r,t.f)}));Promise.race([o,n]).then((function(){i&&(clearTimeout(i),i=null),t.g(t.a)}),(function(){t.j(t.a)}))};var D={D:"serif",C:"sans-serif"},N=null;function U(){if(null===N){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return N}function B(e,t,r){for(var n in D)if(D.hasOwnProperty(n)&&t===e.f[D[n]]&&r===e.f[D[n]])return!0;return!1}function F(e){var t,r=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=r===e.f.serif&&n===e.f["sans-serif"])||(t=U()&&B(e,r,n)),t?s()-e.A>=e.w?U()&&B(e,r,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?q(e,e.v):q(e,e.B):function(e){setTimeout(a((function(){F(this)}),e),50)}(e):q(e,e.v)}function q(e,t){setTimeout(a((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),t(this.a)}),e),0)}function K(e,t,r){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=r}j.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),F(this)};var z=null;function G(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&d(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),P(e,"active")):M(e.a))}function H(e){this.j=e,this.a=new R,this.h=0,this.f=this.g=!0}function V(e,t,r,n,i){var o=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=i||null,s=n||{};if(0===r.length&&o)M(t.a);else{t.f+=r.length,o&&(t.j=o);var u,c=[];for(u=0;u<r.length;u++){var l=r[u],f=s[l.c],h=t.a,p=l;if(h.g&&d(h.f,[h.a.c("wf",p.c,x(p).toString(),"loading")]),P(h,"fontloading",p),h=null,null===z)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=p?42<parseInt(p[1],10):!v}else z=!1;h=z?new A(a(t.g,t),a(t.h,t),t.c,l,t.s,f):new j(a(t.g,t),a(t.h,t),t.c,l,t.s,e,f),c.push(h)}for(u=0;u<c.length;u++)c[u].start()}}),0)}function W(e,t){this.c=e,this.a=t}function X(e,t){this.c=e,this.a=t}function Y(e,t){this.c=e||Z,this.a=[],this.f=[],this.g=t||""}K.prototype.g=function(e){var t=this.a;t.g&&d(t.f,[t.a.c("wf",e.c,x(e).toString(),"active")],[t.a.c("wf",e.c,x(e).toString(),"loading"),t.a.c("wf",e.c,x(e).toString(),"inactive")]),P(t,"fontactive",e),this.m=!0,G(this)},K.prototype.h=function(e){var t=this.a;if(t.g){var r=p(t.f,t.a.c("wf",e.c,x(e).toString(),"active")),n=[],i=[t.a.c("wf",e.c,x(e).toString(),"loading")];r||n.push(t.a.c("wf",e.c,x(e).toString(),"inactive")),d(t.f,n,i)}P(t,"fontinactive",e),G(this)},H.prototype.load=function(e){this.c=new u(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,r){var n=[],i=r.timeout;!function(e){e.g&&d(e.f,[e.a.c("wf","loading")]),P(e,"loading")}(t);n=function(e,t,r){var n,i=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&i.push(o(t[n],r))}return i}(e.a,r,e.c);var o=new K(e.c,t,i);for(e.h=n.length,t=0,r=n.length;t<r;t++)n[t].load((function(t,r,n){V(e,o,t,r,n)}))}(this,new O(this.c,e),e)},W.prototype.load=function(e){var t=this,r=t.a.projectId,n=t.a.version;if(r){var i=t.c.o;y(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(n?"?v="+n:""),(function(n){n?e([]):(i["__MonotypeConfiguration__"+r]=function(){return t.a},function t(){if(i["__mti_fntLst"+r]){var n,o=i["__mti_fntLst"+r](),a=[];if(o)for(var s=0;s<o.length;s++){var u=o[s].fontfamily;void 0!=o[s].fontStyle&&void 0!=o[s].fontWeight?(n=o[s].fontStyle+o[s].fontWeight,a.push(new S(u,n))):a.push(new S(u))}e(a)}else setTimeout((function(){t()}),50)}())})).id="__MonotypeAPIScript__"+r}else e([])},X.prototype.load=function(e){var t,r,n=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new g;for(t=0,r=n.length;t<r;t++)v(this.c,n[t],m(a));var s=[];for(t=0,r=i.length;t<r;t++)if((n=i[t].split(":"))[1])for(var u=n[1].split(","),c=0;c<u.length;c+=1)s.push(new S(n[0],u[c]));else s.push(new S(n[0]));b(a,(function(){e(s,o)}))};var Z="https://fonts.googleapis.com/css";function J(e){this.f=e,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"\xe7\xf6\xfc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ee={i:"i",italic:"i",n:"n",normal:"n"},te=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function re(e,t){this.c=e,this.a=t}var ne={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function oe(e,t){this.c=e,this.f=t,this.a=[]}re.prototype.load=function(e){var t=new g,r=this.c,n=new Y(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n].split(":");3==i.length&&e.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),e.a.push(i.join(o))}}(n,i);var o=new J(i);!function(e){for(var t=e.f.length,r=0;r<t;r++){var n=e.f[r].split(":"),i=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,u=(s=s.split(",")).length,c=0;c<u;c++){var l;if((l=s[c]).match(/^[\w-]+$/))if(null==(h=te.exec(l.toLowerCase())))l="";else{if(l=null==(l=h[2])||""==l?"n":ee[l],null==(h=h[1])||""==h)h="4";else var f=$[h],h=f||(isNaN(h)?"4":h.substr(0,1));l=[l,h].join("")}else l="";l&&a.push(l)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=Q[n[0]])&&(e.c[i]=n))}for(e.c[i]||(n=Q[i])&&(e.c[i]=n),n=0;n<o.length;n+=1)e.a.push(new S(i,o[n]))}}(o),v(r,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,r=[],n=0;n<t;n++)r.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+r.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),m(t)),b(t,(function(){e(o.a,o.c,ne)}))},ie.prototype.load=function(e){var t=this.a.id,r=this.c.o;t?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var n=[],i=0;i<t.length;i+=2)for(var o=t[i],a=t[i+1],s=0;s<a.length;s++)n.push(new S(o,a[s]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(u){}e(n)}}),2e3):e([])},oe.prototype.load=function(e){var t=this.f.id,r=this.c.o,n=this;t?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[t]=function(t,r){for(var i=0,o=r.fonts.length;i<o;++i){var a=r.fonts[i];n.a.push(new S(a.name,T("font-weight:"+a.weight+";font-style:"+a.style)))}e(n.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var ae=new H(window);ae.a.c.custom=function(e,t){return new X(t,e)},ae.a.c.fontdeck=function(e,t){return new oe(t,e)},ae.a.c.monotype=function(e,t){return new W(t,e)},ae.a.c.typekit=function(e,t){return new ie(t,e)},ae.a.c.google=function(e,t){return new re(t,e)};var se={load:a(ae.load,ae)};void 0===(n=function(){return se}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t,n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")(),o=Object.prototype,a=0,s=o.toString,u=i.Symbol,c=u?u.prototype:void 0,l=c?c.toString:void 0;function f(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}e.exports=function(e){var t,r=++a;return(null==(t=e)?"":f(t))+r}}).call(this,r(11))},function(e,t,r){"use strict";e.exports=function(e){for(var t=1,r=0,n=0,i=e.length,o=-4&i;n<o;){for(var a=Math.min(n+4096,o);n<a;n+=4)r+=(t+=e.charCodeAt(n))+(t+=e.charCodeAt(n+1))+(t+=e.charCodeAt(n+2))+(t+=e.charCodeAt(n+3));t%=65521,r%=65521}for(;n<i;n++)r+=t+=e.charCodeAt(n);return(t%=65521)|(r%=65521)<<16}},function(e,t,r){var n=r(216);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=r(41),t.createHash=t.Hash=r(53),t.createHmac=t.Hmac=r(156);var n=r(322),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);t.getHashes=function(){return o};var a=r(159);t.pbkdf2=a.pbkdf2,t.pbkdf2Sync=a.pbkdf2Sync;var s=r(324);t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var u=r(339);t.DiffieHellmanGroup=u.DiffieHellmanGroup,t.createDiffieHellmanGroup=u.createDiffieHellmanGroup,t.getDiffieHellman=u.getDiffieHellman,t.createDiffieHellman=u.createDiffieHellman,t.DiffieHellman=u.DiffieHellman;var c=r(344);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=r(385);var l=r(386);t.publicEncrypt=l.publicEncrypt,t.privateEncrypt=l.privateEncrypt,t.publicDecrypt=l.publicDecrypt,t.privateDecrypt=l.privateDecrypt;var f=r(389);t.randomFill=f.randomFill,t.randomFillSync=f.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(13);function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,a)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var o={137:{chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com/"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com"]},80001:{chainName:"Mumbai",rpcUrls:["https://matic-mumbai.chainstacklabs.com/"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://mumbai.polygonscan.com"]}},a=function(){var e=Object(n.a)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});case 2:e.sent?r():setTimeout((function(){a(t,r)}),1e3);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),s=function(){var e=Object(n.a)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x".concat(Number(t).toString(16))}]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(n.a)(i().mark((function e(t){var r,n,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=o[t]).chainName,a=r.rpcUrls,u=r.nativeCurrency,c=r.blockExplorerUrls,e.next=3,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x".concat(Number(t).toString(16)),chainName:n,rpcUrls:a,nativeCurrency:u,blockExplorerUrls:c}]});case 3:return e.next=5,s(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(n.a)(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=22;break}if(window.ethereum.networkVersion===t){e.next=17;break}return e.prev=2,e.next=5,s(t);case 5:e.next=17;break;case 7:if(e.prev=7,e.t0=e.catch(2),4902!==e.t0.code){e.next=17;break}return e.prev=10,e.next=13,u(t);case 13:e.next=17;break;case 15:e.prev=15,e.t1=e.catch(10);case 17:return e.next=19,window.ethereum.request({method:"eth_sendTransaction",params:r});case 19:return o=e.sent,e.next=22,a(o,n);case 22:case"end":return e.stop()}}),e,null,[[2,7],[10,15]])})));return function(t,r,n){return e.apply(this,arguments)}}()},function(e,t,r){var n=r(390);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){var n=r(391);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},function(e,t,r){var n=r(392);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){var n=r(393);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){(function(e,n){var i;(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",v="[object Map]",y="[object Number]",g="[object Object]",m="[object RegExp]",b="[object Set]",w="[object String]",k="[object Symbol]",S="[object WeakMap]",E="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",O="[object Int8Array]",M="[object Int16Array]",P="[object Int32Array]",R="[object Uint8Array]",I="[object Uint16Array]",L="[object Uint32Array]",C=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,j=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,U=RegExp(D.source),B=RegExp(N.source),F=/<%-([\s\S]+?)%>/g,q=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,W=RegExp(V.source),X=/^\s+/,Y=/\s/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,$=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/[()=,{}\[\]\/\s]/,te=/\\(\\)?/g,re=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",ve="["+de+"]",ye="["+he+"]",ge="\\d+",me="[\\u2700-\\u27bf]",be="[a-z\\xdf-\\xf6\\xf8-\\xff]",we="[^\\ud800-\\udfff"+de+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ke="\\ud83c[\\udffb-\\udfff]",Se="[^\\ud800-\\udfff]",Ee="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",_e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Te="(?:"+be+"|"+we+")",Oe="(?:"+_e+"|"+we+")",Me="(?:"+ye+"|"+ke+")"+"?",Pe="[\\ufe0e\\ufe0f]?"+Me+("(?:\\u200d(?:"+[Se,Ee,xe].join("|")+")[\\ufe0e\\ufe0f]?"+Me+")*"),Re="(?:"+[me,Ee,xe].join("|")+")"+Pe,Ie="(?:"+[Se+ye+"?",ye,Ee,xe,pe].join("|")+")",Le=RegExp("['\u2019]","g"),Ce=RegExp(ye,"g"),Ae=RegExp(ke+"(?="+ke+")|"+Ie+Pe,"g"),je=RegExp([_e+"?"+be+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ve,_e,"$"].join("|")+")",Oe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ve,_e+Te,"$"].join("|")+")",_e+"?"+Te+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_e+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Re].join("|"),"g"),De=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ue=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Be=-1,Fe={};Fe[_]=Fe[T]=Fe[O]=Fe[M]=Fe[P]=Fe[R]=Fe["[object Uint8ClampedArray]"]=Fe[I]=Fe[L]=!0,Fe[u]=Fe[c]=Fe[E]=Fe[l]=Fe[x]=Fe[f]=Fe[h]=Fe[d]=Fe[v]=Fe[y]=Fe[g]=Fe[m]=Fe[b]=Fe[w]=Fe[S]=!1;var qe={};qe[u]=qe[c]=qe[E]=qe[x]=qe[l]=qe[f]=qe[_]=qe[T]=qe[O]=qe[M]=qe[P]=qe[v]=qe[y]=qe[g]=qe[m]=qe[b]=qe[w]=qe[k]=qe[R]=qe["[object Uint8ClampedArray]"]=qe[I]=qe[L]=!0,qe[h]=qe[d]=qe[S]=!1;var Ke={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,Ge=parseInt,He="object"==typeof e&&e&&e.Object===Object&&e,Ve="object"==typeof self&&self&&self.Object===Object&&self,We=He||Ve||Function("return this")(),Xe=t&&!t.nodeType&&t,Ye=Xe&&"object"==typeof n&&n&&!n.nodeType&&n,Ze=Ye&&Ye.exports===Xe,Je=Ze&&He.process,Qe=function(){try{var e=Ye&&Ye.require&&Ye.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(t){}}(),$e=Qe&&Qe.isArrayBuffer,et=Qe&&Qe.isDate,tt=Qe&&Qe.isMap,rt=Qe&&Qe.isRegExp,nt=Qe&&Qe.isSet,it=Qe&&Qe.isTypedArray;function ot(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function at(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function st(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function ut(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function lt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function ft(e,t){return!!(null==e?0:e.length)&&kt(e,t,0)>-1}function ht(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function dt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function pt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function vt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function yt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function gt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var mt=_t("length");function bt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function wt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function kt(e,t,r){return t===t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):wt(e,Et,r)}function St(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Et(e){return e!==e}function xt(e,t){var r=null==e?0:e.length;return r?Mt(e,t)/r:NaN}function _t(e){return function(t){return null==t?void 0:t[e]}}function Tt(e){return function(t){return null==e?void 0:e[t]}}function Ot(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function Mt(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}function Pt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Rt(e){return e?e.slice(0,Xt(e)+1).replace(X,""):e}function It(e){return function(t){return e(t)}}function Lt(e,t){return dt(t,(function(t){return e[t]}))}function Ct(e,t){return e.has(t)}function At(e,t){for(var r=-1,n=e.length;++r<n&&kt(t,e[r],0)>-1;);return r}function jt(e,t){for(var r=e.length;r--&&kt(t,e[r],0)>-1;);return r}function Dt(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var Nt=Tt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ut=Tt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bt(e){return"\\"+Ke[e]}function Ft(e){return De.test(e)}function qt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function Kt(e,t){return function(r){return e(t(r))}}function zt(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==a||(e[r]=a,o[i++]=r)}return o}function Gt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function Ht(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function Vt(e){return Ft(e)?function(e){var t=Ae.lastIndex=0;for(;Ae.test(e);)++t;return t}(e):mt(e)}function Wt(e){return Ft(e)?function(e){return e.match(Ae)||[]}(e):function(e){return e.split("")}(e)}function Xt(e){for(var t=e.length;t--&&Y.test(e.charAt(t)););return t}var Yt=Tt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Zt=function e(t){var r=(t=null==t?We:Zt.defaults(We.Object(),t,Zt.pick(We,Ue))).Array,n=t.Date,i=t.Error,Y=t.Function,he=t.Math,de=t.Object,pe=t.RegExp,ve=t.String,ye=t.TypeError,ge=r.prototype,me=Y.prototype,be=de.prototype,we=t["__core-js_shared__"],ke=me.toString,Se=be.hasOwnProperty,Ee=0,xe=function(){var e=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_e=be.toString,Te=ke.call(de),Oe=We._,Me=pe("^"+ke.call(Se).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ze?t.Buffer:void 0,Re=t.Symbol,Ie=t.Uint8Array,Ae=Pe?Pe.allocUnsafe:void 0,De=Kt(de.getPrototypeOf,de),Ke=de.create,He=be.propertyIsEnumerable,Ve=ge.splice,Xe=Re?Re.isConcatSpreadable:void 0,Ye=Re?Re.iterator:void 0,Je=Re?Re.toStringTag:void 0,Qe=function(){try{var e=$i(de,"defineProperty");return e({},"",{}),e}catch(t){}}(),mt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Tt=n&&n.now!==We.Date.now&&n.now,Jt=t.setTimeout!==We.setTimeout&&t.setTimeout,Qt=he.ceil,$t=he.floor,er=de.getOwnPropertySymbols,tr=Pe?Pe.isBuffer:void 0,rr=t.isFinite,nr=ge.join,ir=Kt(de.keys,de),or=he.max,ar=he.min,sr=n.now,ur=t.parseInt,cr=he.random,lr=ge.reverse,fr=$i(t,"DataView"),hr=$i(t,"Map"),dr=$i(t,"Promise"),pr=$i(t,"Set"),vr=$i(t,"WeakMap"),yr=$i(de,"create"),gr=vr&&new vr,mr={},br=Oo(fr),wr=Oo(hr),kr=Oo(dr),Sr=Oo(pr),Er=Oo(vr),xr=Re?Re.prototype:void 0,_r=xr?xr.valueOf:void 0,Tr=xr?xr.toString:void 0;function Or(e){if(Ga(e)&&!Ca(e)&&!(e instanceof Ir)){if(e instanceof Rr)return e;if(Se.call(e,"__wrapped__"))return Mo(e)}return new Rr(e)}var Mr=function(){function e(){}return function(t){if(!za(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Pr(){}function Rr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ir(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Lr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Cr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ar(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function jr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ar;++t<r;)this.add(e[t])}function Dr(e){var t=this.__data__=new Cr(e);this.size=t.size}function Nr(e,t){var r=Ca(e),n=!r&&La(e),i=!r&&!n&&Na(e),o=!r&&!n&&!i&&Qa(e),a=r||n||i||o,s=a?Pt(e.length,ve):[],u=s.length;for(var c in e)!t&&!Se.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ao(c,u))||s.push(c);return s}function Ur(e){var t=e.length;return t?e[Dn(0,t-1)]:void 0}function Br(e,t){return xo(gi(e),Xr(t,0,e.length))}function Fr(e){return xo(gi(e))}function qr(e,t,r){(void 0!==r&&!Pa(e[t],r)||void 0===r&&!(t in e))&&Vr(e,t,r)}function Kr(e,t,r){var n=e[t];Se.call(e,t)&&Pa(n,r)&&(void 0!==r||t in e)||Vr(e,t,r)}function zr(e,t){for(var r=e.length;r--;)if(Pa(e[r][0],t))return r;return-1}function Gr(e,t,r,n){return $r(e,(function(e,i,o){t(n,e,r(e),o)})),n}function Hr(e,t){return e&&mi(t,ws(t),e)}function Vr(e,t,r){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Wr(e,t){for(var n=-1,i=t.length,o=r(i),a=null==e;++n<i;)o[n]=a?void 0:vs(e,t[n]);return o}function Xr(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function Yr(e,t,r,n,i,o){var a,s=1&t,c=2&t,h=4&t;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!za(e))return e;var S=Ca(e);if(S){if(a=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Se.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!s)return gi(e,a)}else{var C=ro(e),A=C==d||C==p;if(Na(e))return fi(e,s);if(C==g||C==u||A&&!i){if(a=c||A?{}:io(e),!s)return c?function(e,t){return mi(e,to(e),t)}(e,function(e,t){return e&&mi(t,ks(t),e)}(a,e)):function(e,t){return mi(e,eo(e),t)}(e,Hr(a,e))}else{if(!qe[C])return i?e:{};a=function(e,t,r){var n=e.constructor;switch(t){case E:return hi(e);case l:case f:return new n(+e);case x:return function(e,t){var r=t?hi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case _:case T:case O:case M:case P:case R:case"[object Uint8ClampedArray]":case I:case L:return di(e,r);case v:return new n;case y:case w:return new n(e);case m:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b:return new n;case k:return i=e,_r?de(_r.call(i)):{}}var i}(e,C,s)}}o||(o=new Dr);var j=o.get(e);if(j)return j;o.set(e,a),Ya(e)?e.forEach((function(n){a.add(Yr(n,t,r,n,e,o))})):Ha(e)&&e.forEach((function(n,i){a.set(i,Yr(n,t,r,i,e,o))}));var D=S?void 0:(h?c?Vi:Hi:c?ks:ws)(e);return st(D||e,(function(n,i){D&&(n=e[i=n]),Kr(a,i,Yr(n,t,r,i,e,o))})),a}function Zr(e,t,r){var n=r.length;if(null==e)return!n;for(e=de(e);n--;){var i=r[n],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Jr(e,t,r){if("function"!=typeof e)throw new ye(o);return wo((function(){e.apply(void 0,r)}),t)}function Qr(e,t,r,n){var i=-1,o=ft,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=dt(t,It(r))),n?(o=ht,a=!1):t.length>=200&&(o=Ct,a=!1,t=new jr(t));e:for(;++i<s;){var l=e[i],f=null==r?l:r(l);if(l=n||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,n)||u.push(l)}return u}Or.templateSettings={escape:F,evaluate:q,interpolate:K,variable:"",imports:{_:Or}},Or.prototype=Pr.prototype,Or.prototype.constructor=Or,Rr.prototype=Mr(Pr.prototype),Rr.prototype.constructor=Rr,Ir.prototype=Mr(Pr.prototype),Ir.prototype.constructor=Ir,Lr.prototype.clear=function(){this.__data__=yr?yr(null):{},this.size=0},Lr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Lr.prototype.get=function(e){var t=this.__data__;if(yr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Se.call(t,e)?t[e]:void 0},Lr.prototype.has=function(e){var t=this.__data__;return yr?void 0!==t[e]:Se.call(t,e)},Lr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yr&&void 0===t?"__lodash_hash_undefined__":t,this},Cr.prototype.clear=function(){this.__data__=[],this.size=0},Cr.prototype.delete=function(e){var t=this.__data__,r=zr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ve.call(t,r,1),--this.size,!0)},Cr.prototype.get=function(e){var t=this.__data__,r=zr(t,e);return r<0?void 0:t[r][1]},Cr.prototype.has=function(e){return zr(this.__data__,e)>-1},Cr.prototype.set=function(e,t){var r=this.__data__,n=zr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ar.prototype.clear=function(){this.size=0,this.__data__={hash:new Lr,map:new(hr||Cr),string:new Lr}},Ar.prototype.delete=function(e){var t=Ji(this,e).delete(e);return this.size-=t?1:0,t},Ar.prototype.get=function(e){return Ji(this,e).get(e)},Ar.prototype.has=function(e){return Ji(this,e).has(e)},Ar.prototype.set=function(e,t){var r=Ji(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},jr.prototype.add=jr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},jr.prototype.has=function(e){return this.__data__.has(e)},Dr.prototype.clear=function(){this.__data__=new Cr,this.size=0},Dr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Dr.prototype.get=function(e){return this.__data__.get(e)},Dr.prototype.has=function(e){return this.__data__.has(e)},Dr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Cr){var n=r.__data__;if(!hr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ar(n)}return r.set(e,t),this.size=r.size,this};var $r=ki(un),en=ki(cn,!0);function tn(e,t){var r=!0;return $r(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function rn(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===s?a===a&&!Ja(a):r(a,s)))var s=a,u=o}return u}function nn(e,t){var r=[];return $r(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function on(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=oo),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?on(s,t-1,r,n,i):pt(i,s):n||(i[i.length]=s)}return i}var an=Si(),sn=Si(!0);function un(e,t){return e&&an(e,t,ws)}function cn(e,t){return e&&sn(e,t,ws)}function ln(e,t){return lt(t,(function(t){return Fa(e[t])}))}function fn(e,t){for(var r=0,n=(t=si(t,e)).length;null!=e&&r<n;)e=e[To(t[r++])];return r&&r==n?e:void 0}function hn(e,t,r){var n=t(e);return Ca(e)?n:pt(n,r(e))}function dn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Je&&Je in de(e)?function(e){var t=Se.call(e,Je),r=e[Je];try{e[Je]=void 0;var n=!0}catch(o){}var i=_e.call(e);n&&(t?e[Je]=r:delete e[Je]);return i}(e):function(e){return _e.call(e)}(e)}function pn(e,t){return e>t}function vn(e,t){return null!=e&&Se.call(e,t)}function yn(e,t){return null!=e&&t in de(e)}function gn(e,t,n){for(var i=n?ht:ft,o=e[0].length,a=e.length,s=a,u=r(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=dt(f,It(t))),c=ar(f.length,c),u[s]=!n&&(t||o>=120&&f.length>=120)?new jr(s&&f):void 0}f=e[0];var h=-1,d=u[0];e:for(;++h<o&&l.length<c;){var p=f[h],v=t?t(p):p;if(p=n||0!==p?p:0,!(d?Ct(d,v):i(l,v,n))){for(s=a;--s;){var y=u[s];if(!(y?Ct(y,v):i(e[s],v,n)))continue e}d&&d.push(v),l.push(p)}}return l}function mn(e,t,r){var n=null==(e=yo(e,t=si(t,e)))?e:e[To(Bo(t))];return null==n?void 0:ot(n,e,r)}function bn(e){return Ga(e)&&dn(e)==u}function wn(e,t,r,n,i){return e===t||(null==e||null==t||!Ga(e)&&!Ga(t)?e!==e&&t!==t:function(e,t,r,n,i,o){var a=Ca(e),s=Ca(t),d=a?c:ro(e),p=s?c:ro(t),S=(d=d==u?g:d)==g,_=(p=p==u?g:p)==g,T=d==p;if(T&&Na(e)){if(!Na(t))return!1;a=!0,S=!1}if(T&&!S)return o||(o=new Dr),a||Qa(e)?zi(e,t,r,n,i,o):function(e,t,r,n,i,o,a){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new Ie(e),new Ie(t)));case l:case f:case y:return Pa(+e,+t);case h:return e.name==t.name&&e.message==t.message;case m:case w:return e==t+"";case v:var s=qt;case b:var u=1&n;if(s||(s=Gt),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;n|=2,a.set(e,t);var d=zi(s(e),s(t),n,i,o,a);return a.delete(e),d;case k:if(_r)return _r.call(e)==_r.call(t)}return!1}(e,t,d,r,n,i,o);if(!(1&r)){var O=S&&Se.call(e,"__wrapped__"),M=_&&Se.call(t,"__wrapped__");if(O||M){var P=O?e.value():e,R=M?t.value():t;return o||(o=new Dr),i(P,R,r,n,o)}}if(!T)return!1;return o||(o=new Dr),function(e,t,r,n,i,o){var a=1&r,s=Hi(e),u=s.length,c=Hi(t).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in t:Se.call(t,f)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);var v=a;for(;++l<u;){f=s[l];var y=e[f],g=t[f];if(n)var m=a?n(g,y,f,t,e,o):n(y,g,f,e,t,o);if(!(void 0===m?y===g||i(y,g,r,n,o):m)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,n,i,o)}(e,t,r,n,wn,i))}function kn(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=de(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=r[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Dr;if(n)var h=n(c,l,u,e,t,f);if(!(void 0===h?wn(l,c,3,n,f):h))return!1}}return!0}function Sn(e){return!(!za(e)||(t=e,xe&&xe in t))&&(Fa(e)?Me:ae).test(Oo(e));var t}function En(e){return"function"==typeof e?e:null==e?Vs:"object"==typeof e?Ca(e)?Pn(e[0],e[1]):Mn(e):tu(e)}function xn(e){if(!fo(e))return ir(e);var t=[];for(var r in de(e))Se.call(e,r)&&"constructor"!=r&&t.push(r);return t}function _n(e){if(!za(e))return function(e){var t=[];if(null!=e)for(var r in de(e))t.push(r);return t}(e);var t=fo(e),r=[];for(var n in e)("constructor"!=n||!t&&Se.call(e,n))&&r.push(n);return r}function Tn(e,t){return e<t}function On(e,t){var n=-1,i=ja(e)?r(e.length):[];return $r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Mn(e){var t=Qi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(r){return r===e||kn(r,e,t)}}function Pn(e,t){return uo(e)&&ho(t)?po(To(e),t):function(r){var n=vs(r,e);return void 0===n&&n===t?ys(r,e):wn(t,n,3)}}function Rn(e,t,r,n,i){e!==t&&an(t,(function(o,a){if(i||(i=new Dr),za(o))!function(e,t,r,n,i,o,a){var s=mo(e,r),u=mo(t,r),c=a.get(u);if(c)return void qr(e,r,c);var l=o?o(s,u,r+"",e,t,a):void 0,f=void 0===l;if(f){var h=Ca(u),d=!h&&Na(u),p=!h&&!d&&Qa(u);l=u,h||d||p?Ca(s)?l=s:Da(s)?l=gi(s):d?(f=!1,l=fi(u,!0)):p?(f=!1,l=di(u,!0)):l=[]:Wa(u)||La(u)?(l=s,La(s)?l=as(s):za(s)&&!Fa(s)||(l=io(u))):f=!1}f&&(a.set(u,l),i(l,u,n,o,a),a.delete(u));qr(e,r,l)}(e,t,a,r,Rn,n,i);else{var s=n?n(mo(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),qr(e,a,s)}}),ks)}function In(e,t){var r=e.length;if(r)return ao(t+=t<0?r:0,r)?e[t]:void 0}function Ln(e,t,r){t=t.length?dt(t,(function(e){return Ca(e)?function(t){return fn(t,1===e.length?e[0]:e)}:e})):[Vs];var n=-1;return t=dt(t,It(Zi())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(On(e,(function(e,r,i){return{criteria:dt(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;for(;++n<a;){var u=pi(i[n],o[n]);if(u){if(n>=s)return u;var c=r[n];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,r)}))}function Cn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=fn(e,a);r(s,a)&&qn(o,si(a,e),s)}return o}function An(e,t,r,n){var i=n?St:kt,o=-1,a=t.length,s=e;for(e===t&&(t=gi(t)),r&&(s=dt(e,It(r)));++o<a;)for(var u=0,c=t[o],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==e&&Ve.call(s,u,1),Ve.call(e,u,1);return e}function jn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;ao(i)?Ve.call(e,i,1):$n(e,i)}}return e}function Dn(e,t){return e+$t(cr()*(t-e+1))}function Nn(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=$t(t/2))&&(e+=e)}while(t);return r}function Un(e,t){return ko(vo(e,t,Vs),e+"")}function Bn(e){return Ur(Ps(e))}function Fn(e,t){var r=Ps(e);return xo(r,Xr(t,0,r.length))}function qn(e,t,r,n){if(!za(e))return e;for(var i=-1,o=(t=si(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=To(t[i]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=za(l)?l:ao(t[i+1])?[]:{})}Kr(s,u,c),s=s[u]}return e}var Kn=gr?function(e,t){return gr.set(e,t),e}:Vs,zn=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:zs(t),writable:!0})}:Vs;function Gn(e){return xo(Ps(e))}function Hn(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Vn(e,t){var r;return $r(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function Wn(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!Ja(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return Xn(e,t,Vs,r)}function Xn(e,t,r,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!==t,s=null===t,u=Ja(t),c=void 0===t;i<o;){var l=$t((i+o)/2),f=r(e[l]),h=void 0!==f,d=null===f,p=f===f,v=Ja(f);if(a)var y=n||p;else y=c?p&&(n||h):s?p&&h&&(n||!d):u?p&&h&&!d&&(n||!v):!d&&!v&&(n?f<=t:f<t);y?i=l+1:o=l}return ar(o,4294967294)}function Yn(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!Pa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Zn(e){return"number"==typeof e?e:Ja(e)?NaN:+e}function Jn(e){if("string"==typeof e)return e;if(Ca(e))return dt(e,Jn)+"";if(Ja(e))return Tr?Tr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qn(e,t,r){var n=-1,i=ft,o=e.length,a=!0,s=[],u=s;if(r)a=!1,i=ht;else if(o>=200){var c=t?null:Ni(e);if(c)return Gt(c);a=!1,i=Ct,u=new jr}else u=t?[]:s;e:for(;++n<o;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s}function $n(e,t){return null==(e=yo(e,t=si(t,e)))||delete e[To(Bo(t))]}function ei(e,t,r,n){return qn(e,t,r(fn(e,t)),n)}function ti(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Hn(e,n?0:o,n?o+1:i):Hn(e,n?o+1:0,n?i:o)}function ri(e,t){var r=e;return r instanceof Ir&&(r=r.value()),vt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),r)}function ni(e,t,n){var i=e.length;if(i<2)return i?Qn(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Qr(a[o]||s,e[u],t,n));return Qn(on(a,1),t,n)}function ii(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}function oi(e){return Da(e)?e:[]}function ai(e){return"function"==typeof e?e:Vs}function si(e,t){return Ca(e)?e:uo(e,t)?[e]:_o(ss(e))}var ui=Un;function ci(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Hn(e,t,r)}var li=mt||function(e){return We.clearTimeout(e)};function fi(e,t){if(t)return e.slice();var r=e.length,n=Ae?Ae(r):new e.constructor(r);return e.copy(n),n}function hi(e){var t=new e.constructor(e.byteLength);return new Ie(t).set(new Ie(e)),t}function di(e,t){var r=t?hi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e===e,o=Ja(e),a=void 0!==t,s=null===t,u=t===t,c=Ja(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||n&&a&&u||!r&&u||!i)return 1;if(!n&&!o&&!c&&e<t||c&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!u)return-1}return 0}function vi(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,c=t.length,l=or(a-s,0),f=r(c+l),h=!i;++u<c;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[n[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function yi(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,c=-1,l=t.length,f=or(a-u,0),h=r(f+l),d=!i;++o<f;)h[o]=e[o];for(var p=o;++c<l;)h[p+c]=t[c];for(;++s<u;)(d||o<a)&&(h[p+n[s]]=e[o++]);return h}function gi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function mi(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),i?Vr(r,s,u):Kr(r,s,u)}return r}function bi(e,t){return function(r,n){var i=Ca(r)?at:Gr,o=t?t():{};return i(r,e,Zi(n,2),o)}}function wi(e){return Un((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&so(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=de(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}function ki(e,t){return function(r,n){if(null==r)return r;if(!ja(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=de(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function Si(e){return function(t,r,n){for(var i=-1,o=de(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===r(o[u],u,o))break}return t}}function Ei(e){return function(t){var r=Ft(t=ss(t))?Wt(t):void 0,n=r?r[0]:t.charAt(0),i=r?ci(r,1).join(""):t.slice(1);return n[e]()+i}}function xi(e){return function(t){return vt(Fs(Ls(t).replace(Le,"")),e,"")}}function _i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Mr(e.prototype),n=e.apply(r,t);return za(n)?n:r}}function Ti(e){return function(t,r,n){var i=de(t);if(!ja(t)){var o=Zi(r,3);t=ws(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}function Oi(e){return Gi((function(t){var r=t.length,n=r,i=Rr.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new ye(o);if(i&&!s&&"wrapper"==Xi(a))var s=new Rr([],!0)}for(n=s?n:r;++n<r;){var u=Xi(a=t[n]),c="wrapper"==u?Wi(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Xi(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[u]():s.thru(a)}return function(){var e=arguments,n=e[0];if(s&&1==e.length&&Ca(n))return s.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}function Mi(e,t,n,i,o,a,s,u,c,l){var f=128&t,h=1&t,d=2&t,p=24&t,v=512&t,y=d?void 0:_i(e);return function g(){for(var m=arguments.length,b=r(m),w=m;w--;)b[w]=arguments[w];if(p)var k=Yi(g),S=Dt(b,k);if(i&&(b=vi(b,i,o,p)),a&&(b=yi(b,a,s,p)),m-=S,p&&m<l){var E=zt(b,k);return ji(e,t,Mi,g.placeholder,n,b,E,u,c,l-m)}var x=h?n:this,_=d?x[e]:e;return m=b.length,u?b=go(b,u):v&&m>1&&b.reverse(),f&&c<m&&(b.length=c),this&&this!==We&&this instanceof g&&(_=y||_i(_)),_.apply(x,b)}}function Pi(e,t){return function(r,n){return function(e,t,r,n){return un(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Ri(e,t){return function(r,n){var i;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=Jn(r),n=Jn(n)):(r=Zn(r),n=Zn(n)),i=e(r,n)}return i}}function Ii(e){return Gi((function(t){return t=dt(t,It(Zi())),Un((function(r){var n=this;return e(t,(function(e){return ot(e,n,r)}))}))}))}function Li(e,t){var r=(t=void 0===t?" ":Jn(t)).length;if(r<2)return r?Nn(t,e):t;var n=Nn(t,Qt(e/Vt(t)));return Ft(t)?ci(Wt(n),0,e).join(""):n.slice(0,e)}function Ci(e){return function(t,n,i){return i&&"number"!=typeof i&&so(t,n,i)&&(n=i=void 0),t=rs(t),void 0===n?(n=t,t=0):n=rs(n),function(e,t,n,i){for(var o=-1,a=or(Qt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:rs(i),e)}}function Ai(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=os(t),r=os(r)),e(t,r)}}function ji(e,t,r,n,i,o,a,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],h=r.apply(void 0,f);return co(e)&&bo(h,f),h.placeholder=n,So(h,e,t)}function Di(e){var t=he[e];return function(e,r){if(e=os(e),(r=null==r?0:ar(ns(r),292))&&rr(e)){var n=(ss(e)+"e").split("e");return+((n=(ss(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ni=pr&&1/Gt(new pr([,-0]))[1]==1/0?function(e){return new pr(e)}:Js;function Ui(e){return function(t){var r=ro(t);return r==v?qt(t):r==b?Ht(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Bi(e,t,n,i,s,u,c,l){var f=2&t;if(!f&&"function"!=typeof e)throw new ye(o);var h=i?i.length:0;if(h||(t&=-97,i=s=void 0),c=void 0===c?c:or(ns(c),0),l=void 0===l?l:ns(l),h-=s?s.length:0,64&t){var d=i,p=s;i=s=void 0}var v=f?void 0:Wi(e),y=[e,t,n,i,s,d,p,u,c,l];if(v&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,s=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?vi(c,u,t[4]):u,e[4]=c?zt(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?yi(c,u,t[6]):u,e[6]=c?zt(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&n&&(e[8]=null==e[8]?t[8]:ar(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(y,v),e=y[0],t=y[1],n=y[2],i=y[3],s=y[4],!(l=y[9]=void 0===y[9]?f?0:e.length:or(y[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var i=_i(e);return function o(){for(var a=arguments.length,s=r(a),u=a,c=Yi(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:zt(s,c);if((a-=l.length)<n)return ji(e,t,Mi,o.placeholder,void 0,s,l,void 0,void 0,n-a);var f=this&&this!==We&&this instanceof o?i:e;return ot(f,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Mi.apply(void 0,y):function(e,t,n,i){var o=1&t,a=_i(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),h=this&&this!==We&&this instanceof t?a:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return ot(h,o?n:this,f)}}(e,t,n,i);else var g=function(e,t,r){var n=1&t,i=_i(e);return function t(){var o=this&&this!==We&&this instanceof t?i:e;return o.apply(n?r:this,arguments)}}(e,t,n);return So((v?Kn:bo)(g,y),e,t)}function Fi(e,t,r,n){return void 0===e||Pa(e,be[r])&&!Se.call(n,r)?t:e}function qi(e,t,r,n,i,o){return za(e)&&za(t)&&(o.set(t,e),Rn(e,t,void 0,qi,o),o.delete(t)),e}function Ki(e){return Wa(e)?void 0:e}function zi(e,t,r,n,i,o){var a=1&r,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=2&r?new jr:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],v=t[f];if(n)var y=a?n(v,p,f,t,e,o):n(p,v,f,e,t,o);if(void 0!==y){if(y)continue;h=!1;break}if(d){if(!gt(t,(function(e,t){if(!Ct(d,t)&&(p===e||i(p,e,r,n,o)))return d.push(t)}))){h=!1;break}}else if(p!==v&&!i(p,v,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Gi(e){return ko(vo(e,void 0,Ao),e+"")}function Hi(e){return hn(e,ws,eo)}function Vi(e){return hn(e,ks,to)}var Wi=gr?function(e){return gr.get(e)}:Js;function Xi(e){for(var t=e.name+"",r=mr[t],n=Se.call(mr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(Se.call(Or,"placeholder")?Or:e).placeholder}function Zi(){var e=Or.iteratee||Ws;return e=e===Ws?En:e,arguments.length?e(arguments[0],arguments[1]):e}function Ji(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Qi(e){for(var t=ws(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ho(i)]}return t}function $i(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Sn(r)?r:void 0}var eo=er?function(e){return null==e?[]:(e=de(e),lt(er(e),(function(t){return He.call(e,t)})))}:iu,to=er?function(e){for(var t=[];e;)pt(t,eo(e)),e=De(e);return t}:iu,ro=dn;function no(e,t,r){for(var n=-1,i=(t=si(t,e)).length,o=!1;++n<i;){var a=To(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Ka(i)&&ao(a,i)&&(Ca(e)||La(e))}function io(e){return"function"!=typeof e.constructor||fo(e)?{}:Mr(De(e))}function oo(e){return Ca(e)||La(e)||!!(Xe&&e&&e[Xe])}function ao(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ue.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,r){if(!za(r))return!1;var n=typeof t;return!!("number"==n?ja(r)&&ao(t,r.length):"string"==n&&t in r)&&Pa(r[t],e)}function uo(e,t){if(Ca(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ja(e))||(G.test(e)||!z.test(e)||null!=t&&e in de(t))}function co(e){var t=Xi(e),r=Or[t];if("function"!=typeof r||!(t in Ir.prototype))return!1;if(e===r)return!0;var n=Wi(r);return!!n&&e===n[0]}(fr&&ro(new fr(new ArrayBuffer(1)))!=x||hr&&ro(new hr)!=v||dr&&"[object Promise]"!=ro(dr.resolve())||pr&&ro(new pr)!=b||vr&&ro(new vr)!=S)&&(ro=function(e){var t=dn(e),r=t==g?e.constructor:void 0,n=r?Oo(r):"";if(n)switch(n){case br:return x;case wr:return v;case kr:return"[object Promise]";case Sr:return b;case Er:return S}return t});var lo=we?Fa:ou;function fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}function ho(e){return e===e&&!za(e)}function po(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in de(r)))}}function vo(e,t,n){return t=or(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=or(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),ot(e,this,u)}}function yo(e,t){return t.length<2?e:fn(e,Hn(t,0,-1))}function go(e,t){for(var r=e.length,n=ar(t.length,r),i=gi(e);n--;){var o=t[n];e[n]=ao(o,r)?i[o]:void 0}return e}function mo(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var bo=Eo(Kn),wo=Jt||function(e,t){return We.setTimeout(e,t)},ko=Eo(zn);function So(e,t,r){var n=t+"";return ko(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return st(s,(function(r){var n="_."+r[0];t&r[1]&&!ft(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(Q):[]}(n),r)))}function Eo(e){var t=0,r=0;return function(){var n=sr(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xo(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=Dn(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var _o=function(e){var t=Ea(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(H,(function(e,r,n,i){t.push(n?i.replace(te,"$1"):r||e)})),t}));function To(e){if("string"==typeof e||Ja(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Oo(e){if(null!=e){try{return ke.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Mo(e){if(e instanceof Ir)return e.clone();var t=new Rr(e.__wrapped__,e.__chain__);return t.__actions__=gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Po=Un((function(e,t){return Da(e)?Qr(e,on(t,1,Da,!0)):[]})),Ro=Un((function(e,t){var r=Bo(t);return Da(r)&&(r=void 0),Da(e)?Qr(e,on(t,1,Da,!0),Zi(r,2)):[]})),Io=Un((function(e,t){var r=Bo(t);return Da(r)&&(r=void 0),Da(e)?Qr(e,on(t,1,Da,!0),void 0,r):[]}));function Lo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=or(n+i,0)),wt(e,Zi(t,3),i)}function Co(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=ns(r),i=r<0?or(n+i,0):ar(i,n-1)),wt(e,Zi(t,3),i,!0)}function Ao(e){return(null==e?0:e.length)?on(e,1):[]}function jo(e){return e&&e.length?e[0]:void 0}var Do=Un((function(e){var t=dt(e,oi);return t.length&&t[0]===e[0]?gn(t):[]})),No=Un((function(e){var t=Bo(e),r=dt(e,oi);return t===Bo(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?gn(r,Zi(t,2)):[]})),Uo=Un((function(e){var t=Bo(e),r=dt(e,oi);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?gn(r,void 0,t):[]}));function Bo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Fo=Un(qo);function qo(e,t){return e&&e.length&&t&&t.length?An(e,t):e}var Ko=Gi((function(e,t){var r=null==e?0:e.length,n=Wr(e,t);return jn(e,dt(t,(function(e){return ao(e,r)?+e:e})).sort(pi)),n}));function zo(e){return null==e?e:lr.call(e)}var Go=Un((function(e){return Qn(on(e,1,Da,!0))})),Ho=Un((function(e){var t=Bo(e);return Da(t)&&(t=void 0),Qn(on(e,1,Da,!0),Zi(t,2))})),Vo=Un((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,Qn(on(e,1,Da,!0),void 0,t)}));function Wo(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Da(e))return t=or(e.length,t),!0})),Pt(t,(function(t){return dt(e,_t(t))}))}function Xo(e,t){if(!e||!e.length)return[];var r=Wo(e);return null==t?r:dt(r,(function(e){return ot(t,void 0,e)}))}var Yo=Un((function(e,t){return Da(e)?Qr(e,t):[]})),Zo=Un((function(e){return ni(lt(e,Da))})),Jo=Un((function(e){var t=Bo(e);return Da(t)&&(t=void 0),ni(lt(e,Da),Zi(t,2))})),Qo=Un((function(e){var t=Bo(e);return t="function"==typeof t?t:void 0,ni(lt(e,Da),void 0,t)})),$o=Un(Wo);var ea=Un((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Xo(e,r)}));function ta(e){var t=Or(e);return t.__chain__=!0,t}function ra(e,t){return t(e)}var na=Gi((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return Wr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Ir&&ao(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ra,args:[i],thisArg:void 0}),new Rr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ia=bi((function(e,t,r){Se.call(e,r)?++e[r]:Vr(e,r,1)}));var oa=Ti(Lo),aa=Ti(Co);function sa(e,t){return(Ca(e)?st:$r)(e,Zi(t,3))}function ua(e,t){return(Ca(e)?ut:en)(e,Zi(t,3))}var ca=bi((function(e,t,r){Se.call(e,r)?e[r].push(t):Vr(e,r,[t])}));var la=Un((function(e,t,n){var i=-1,o="function"==typeof t,a=ja(e)?r(e.length):[];return $r(e,(function(e){a[++i]=o?ot(t,e,n):mn(e,t,n)})),a})),fa=bi((function(e,t,r){Vr(e,r,t)}));function ha(e,t){return(Ca(e)?dt:On)(e,Zi(t,3))}var da=bi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var pa=Un((function(e,t){if(null==e)return[];var r=t.length;return r>1&&so(e,t[0],t[1])?t=[]:r>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Ln(e,on(t,1),[])})),va=Tt||function(){return We.Date.now()};function ya(e,t,r){return t=r?void 0:t,Bi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var r;if("function"!=typeof t)throw new ye(o);return e=ns(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var ma=Un((function(e,t,r){var n=1;if(r.length){var i=zt(r,Yi(ma));n|=32}return Bi(e,n,t,r,i)})),ba=Un((function(e,t,r){var n=3;if(r.length){var i=zt(r,Yi(ba));n|=32}return Bi(t,n,e,r,i)}));function wa(e,t,r){var n,i,a,s,u,c,l=0,f=!1,h=!1,d=!0;if("function"!=typeof e)throw new ye(o);function p(t){var r=n,o=i;return n=i=void 0,l=t,s=e.apply(o,r)}function v(e){return l=e,u=wo(g,t),f?p(e):s}function y(e){var r=e-c;return void 0===c||r>=t||r<0||h&&e-l>=a}function g(){var e=va();if(y(e))return m(e);u=wo(g,function(e){var r=t-(e-c);return h?ar(r,a-(e-l)):r}(e))}function m(e){return u=void 0,d&&n?p(e):(n=i=void 0,s)}function b(){var e=va(),r=y(e);if(n=arguments,i=this,c=e,r){if(void 0===u)return v(c);if(h)return li(u),u=wo(g,t),p(c)}return void 0===u&&(u=wo(g,t)),s}return t=os(t)||0,za(r)&&(f=!!r.leading,a=(h="maxWait"in r)?or(os(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==u&&li(u),l=0,n=c=i=u=void 0},b.flush=function(){return void 0===u?s:m(va())},b}var ka=Un((function(e,t){return Jr(e,1,t)})),Sa=Un((function(e,t,r){return Jr(e,os(t)||0,r)}));function Ea(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(o);var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Ea.Cache||Ar),r}function xa(e){if("function"!=typeof e)throw new ye(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ea.Cache=Ar;var _a=ui((function(e,t){var r=(t=1==t.length&&Ca(t[0])?dt(t[0],It(Zi())):dt(on(t,1),It(Zi()))).length;return Un((function(n){for(var i=-1,o=ar(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return ot(e,this,n)}))})),Ta=Un((function(e,t){return Bi(e,32,void 0,t,zt(t,Yi(Ta)))})),Oa=Un((function(e,t){return Bi(e,64,void 0,t,zt(t,Yi(Oa)))})),Ma=Gi((function(e,t){return Bi(e,256,void 0,void 0,void 0,t)}));function Pa(e,t){return e===t||e!==e&&t!==t}var Ra=Ai(pn),Ia=Ai((function(e,t){return e>=t})),La=bn(function(){return arguments}())?bn:function(e){return Ga(e)&&Se.call(e,"callee")&&!He.call(e,"callee")},Ca=r.isArray,Aa=$e?It($e):function(e){return Ga(e)&&dn(e)==E};function ja(e){return null!=e&&Ka(e.length)&&!Fa(e)}function Da(e){return Ga(e)&&ja(e)}var Na=tr||ou,Ua=et?It(et):function(e){return Ga(e)&&dn(e)==f};function Ba(e){if(!Ga(e))return!1;var t=dn(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Wa(e)}function Fa(e){if(!za(e))return!1;var t=dn(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function qa(e){return"number"==typeof e&&e==ns(e)}function Ka(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function za(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ga(e){return null!=e&&"object"==typeof e}var Ha=tt?It(tt):function(e){return Ga(e)&&ro(e)==v};function Va(e){return"number"==typeof e||Ga(e)&&dn(e)==y}function Wa(e){if(!Ga(e)||dn(e)!=g)return!1;var t=De(e);if(null===t)return!0;var r=Se.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ke.call(r)==Te}var Xa=rt?It(rt):function(e){return Ga(e)&&dn(e)==m};var Ya=nt?It(nt):function(e){return Ga(e)&&ro(e)==b};function Za(e){return"string"==typeof e||!Ca(e)&&Ga(e)&&dn(e)==w}function Ja(e){return"symbol"==typeof e||Ga(e)&&dn(e)==k}var Qa=it?It(it):function(e){return Ga(e)&&Ka(e.length)&&!!Fe[dn(e)]};var $a=Ai(Tn),es=Ai((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(ja(e))return Za(e)?Wt(e):gi(e);if(Ye&&e[Ye])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Ye]());var t=ro(e);return(t==v?qt:t==b?Gt:Ps)(e)}function rs(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ns(e){var t=rs(e),r=t%1;return t===t?r?t-r:t:0}function is(e){return e?Xr(ns(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Ja(e))return NaN;if(za(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=za(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Rt(e);var r=oe.test(e);return r||se.test(e)?Ge(e.slice(2),r?2:8):ie.test(e)?NaN:+e}function as(e){return mi(e,ks(e))}function ss(e){return null==e?"":Jn(e)}var us=wi((function(e,t){if(fo(t)||ja(t))mi(t,ws(t),e);else for(var r in t)Se.call(t,r)&&Kr(e,r,t[r])})),cs=wi((function(e,t){mi(t,ks(t),e)})),ls=wi((function(e,t,r,n){mi(t,ks(t),e,n)})),fs=wi((function(e,t,r,n){mi(t,ws(t),e,n)})),hs=Gi(Wr);var ds=Un((function(e,t){e=de(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&so(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=ks(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(void 0===l||Pa(l,be[c])&&!Se.call(e,c))&&(e[c]=o[c])}return e})),ps=Un((function(e){return e.push(void 0,qi),ot(Es,void 0,e)}));function vs(e,t,r){var n=null==e?void 0:fn(e,t);return void 0===n?r:n}function ys(e,t){return null!=e&&no(e,t,yn)}var gs=Pi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=_e.call(t)),e[t]=r}),zs(Vs)),ms=Pi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=_e.call(t)),Se.call(e,t)?e[t].push(r):e[t]=[r]}),Zi),bs=Un(mn);function ws(e){return ja(e)?Nr(e):xn(e)}function ks(e){return ja(e)?Nr(e,!0):_n(e)}var Ss=wi((function(e,t,r){Rn(e,t,r)})),Es=wi((function(e,t,r,n){Rn(e,t,r,n)})),xs=Gi((function(e,t){var r={};if(null==e)return r;var n=!1;t=dt(t,(function(t){return t=si(t,e),n||(n=t.length>1),t})),mi(e,Vi(e),r),n&&(r=Yr(r,7,Ki));for(var i=t.length;i--;)$n(r,t[i]);return r}));var _s=Gi((function(e,t){return null==e?{}:function(e,t){return Cn(e,t,(function(t,r){return ys(e,r)}))}(e,t)}));function Ts(e,t){if(null==e)return{};var r=dt(Vi(e),(function(e){return[e]}));return t=Zi(t),Cn(e,r,(function(e,r){return t(e,r[0])}))}var Os=Ui(ws),Ms=Ui(ks);function Ps(e){return null==e?[]:Lt(e,ws(e))}var Rs=xi((function(e,t,r){return t=t.toLowerCase(),e+(r?Is(t):t)}));function Is(e){return Bs(ss(e).toLowerCase())}function Ls(e){return(e=ss(e))&&e.replace(ce,Nt).replace(Ce,"")}var Cs=xi((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),As=xi((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),js=Ei("toLowerCase");var Ds=xi((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Ns=xi((function(e,t,r){return e+(r?" ":"")+Bs(t)}));var Us=xi((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Bs=Ei("toUpperCase");function Fs(e,t,r){return e=ss(e),void 0===(t=r?void 0:t)?function(e){return Ne.test(e)}(e)?function(e){return e.match(je)||[]}(e):function(e){return e.match($)||[]}(e):e.match(t)||[]}var qs=Un((function(e,t){try{return ot(e,void 0,t)}catch(r){return Ba(r)?r:new i(r)}})),Ks=Gi((function(e,t){return st(t,(function(t){t=To(t),Vr(e,t,ma(e[t],e))})),e}));function zs(e){return function(){return e}}var Gs=Oi(),Hs=Oi(!0);function Vs(e){return e}function Ws(e){return En("function"==typeof e?e:Yr(e,1))}var Xs=Un((function(e,t){return function(r){return mn(r,e,t)}})),Ys=Un((function(e,t){return function(r){return mn(e,r,t)}}));function Zs(e,t,r){var n=ws(t),i=ln(t,n);null!=r||za(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=ln(t,ws(t)));var o=!(za(r)&&"chain"in r)||!!r.chain,a=Fa(e);return st(i,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=gi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,pt([this.value()],arguments))})})),e}function Js(){}var Qs=Ii(dt),$s=Ii(ct),eu=Ii(gt);function tu(e){return uo(e)?_t(To(e)):function(e){return function(t){return fn(t,e)}}(e)}var ru=Ci(),nu=Ci(!0);function iu(){return[]}function ou(){return!1}var au=Ri((function(e,t){return e+t}),0),su=Di("ceil"),uu=Ri((function(e,t){return e/t}),1),cu=Di("floor");var lu=Ri((function(e,t){return e*t}),1),fu=Di("round"),hu=Ri((function(e,t){return e-t}),0);return Or.after=function(e,t){if("function"!=typeof t)throw new ye(o);return e=ns(e),function(){if(--e<1)return t.apply(this,arguments)}},Or.ary=ya,Or.assign=us,Or.assignIn=cs,Or.assignInWith=ls,Or.assignWith=fs,Or.at=hs,Or.before=ga,Or.bind=ma,Or.bindAll=Ks,Or.bindKey=ba,Or.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ca(e)?e:[e]},Or.chain=ta,Or.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:or(ns(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=r(Qt(i/t));o<i;)s[a++]=Hn(e,o,o+=t);return s},Or.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},Or.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(Ca(n)?gi(n):[n],on(t,1))},Or.cond=function(e){var t=null==e?0:e.length,r=Zi();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new ye(o);return[r(e[0]),e[1]]})):[],Un((function(r){for(var n=-1;++n<t;){var i=e[n];if(ot(i[0],this,r))return ot(i[1],this,r)}}))},Or.conforms=function(e){return function(e){var t=ws(e);return function(r){return Zr(r,e,t)}}(Yr(e,1))},Or.constant=zs,Or.countBy=ia,Or.create=function(e,t){var r=Mr(e);return null==t?r:Hr(r,t)},Or.curry=function e(t,r,n){var i=Bi(t,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=e.placeholder,i},Or.curryRight=function e(t,r,n){var i=Bi(t,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=e.placeholder,i},Or.debounce=wa,Or.defaults=ds,Or.defaultsDeep=ps,Or.defer=ka,Or.delay=Sa,Or.difference=Po,Or.differenceBy=Ro,Or.differenceWith=Io,Or.drop=function(e,t,r){var n=null==e?0:e.length;return n?Hn(e,(t=r||void 0===t?1:ns(t))<0?0:t,n):[]},Or.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?Hn(e,0,(t=n-(t=r||void 0===t?1:ns(t)))<0?0:t):[]},Or.dropRightWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!0,!0):[]},Or.dropWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!0):[]},Or.fill=function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&so(e,t,r)&&(r=0,n=i),function(e,t,r,n){var i=e.length;for((r=ns(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:ns(n))<0&&(n+=i),n=r>n?0:is(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Or.filter=function(e,t){return(Ca(e)?lt:nn)(e,Zi(t,3))},Or.flatMap=function(e,t){return on(ha(e,t),1)},Or.flatMapDeep=function(e,t){return on(ha(e,t),1/0)},Or.flatMapDepth=function(e,t,r){return r=void 0===r?1:ns(r),on(ha(e,t),r)},Or.flatten=Ao,Or.flattenDeep=function(e){return(null==e?0:e.length)?on(e,1/0):[]},Or.flattenDepth=function(e,t){return(null==e?0:e.length)?on(e,t=void 0===t?1:ns(t)):[]},Or.flip=function(e){return Bi(e,512)},Or.flow=Gs,Or.flowRight=Hs,Or.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Or.functions=function(e){return null==e?[]:ln(e,ws(e))},Or.functionsIn=function(e){return null==e?[]:ln(e,ks(e))},Or.groupBy=ca,Or.initial=function(e){return(null==e?0:e.length)?Hn(e,0,-1):[]},Or.intersection=Do,Or.intersectionBy=No,Or.intersectionWith=Uo,Or.invert=gs,Or.invertBy=ms,Or.invokeMap=la,Or.iteratee=Ws,Or.keyBy=fa,Or.keys=ws,Or.keysIn=ks,Or.map=ha,Or.mapKeys=function(e,t){var r={};return t=Zi(t,3),un(e,(function(e,n,i){Vr(r,t(e,n,i),e)})),r},Or.mapValues=function(e,t){var r={};return t=Zi(t,3),un(e,(function(e,n,i){Vr(r,n,t(e,n,i))})),r},Or.matches=function(e){return Mn(Yr(e,1))},Or.matchesProperty=function(e,t){return Pn(e,Yr(t,1))},Or.memoize=Ea,Or.merge=Ss,Or.mergeWith=Es,Or.method=Xs,Or.methodOf=Ys,Or.mixin=Zs,Or.negate=xa,Or.nthArg=function(e){return e=ns(e),Un((function(t){return In(t,e)}))},Or.omit=xs,Or.omitBy=function(e,t){return Ts(e,xa(Zi(t)))},Or.once=function(e){return ga(2,e)},Or.orderBy=function(e,t,r,n){return null==e?[]:(Ca(t)||(t=null==t?[]:[t]),Ca(r=n?void 0:r)||(r=null==r?[]:[r]),Ln(e,t,r))},Or.over=Qs,Or.overArgs=_a,Or.overEvery=$s,Or.overSome=eu,Or.partial=Ta,Or.partialRight=Oa,Or.partition=da,Or.pick=_s,Or.pickBy=Ts,Or.property=tu,Or.propertyOf=function(e){return function(t){return null==e?void 0:fn(e,t)}},Or.pull=Fo,Or.pullAll=qo,Or.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?An(e,t,Zi(r,2)):e},Or.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?An(e,t,void 0,r):e},Or.pullAt=Ko,Or.range=ru,Or.rangeRight=nu,Or.rearg=Ma,Or.reject=function(e,t){return(Ca(e)?lt:nn)(e,xa(Zi(t,3)))},Or.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Zi(t,3);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return jn(e,i),r},Or.rest=function(e,t){if("function"!=typeof e)throw new ye(o);return Un(e,t=void 0===t?t:ns(t))},Or.reverse=zo,Or.sampleSize=function(e,t,r){return t=(r?so(e,t,r):void 0===t)?1:ns(t),(Ca(e)?Br:Fn)(e,t)},Or.set=function(e,t,r){return null==e?e:qn(e,t,r)},Or.setWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:qn(e,t,r,n)},Or.shuffle=function(e){return(Ca(e)?Fr:Gn)(e)},Or.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&so(e,t,r)?(t=0,r=n):(t=null==t?0:ns(t),r=void 0===r?n:ns(r)),Hn(e,t,r)):[]},Or.sortBy=pa,Or.sortedUniq=function(e){return e&&e.length?Yn(e):[]},Or.sortedUniqBy=function(e,t){return e&&e.length?Yn(e,Zi(t,2)):[]},Or.split=function(e,t,r){return r&&"number"!=typeof r&&so(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=ss(e))&&("string"==typeof t||null!=t&&!Xa(t))&&!(t=Jn(t))&&Ft(e)?ci(Wt(e),0,r):e.split(t,r):[]},Or.spread=function(e,t){if("function"!=typeof e)throw new ye(o);return t=null==t?0:or(ns(t),0),Un((function(r){var n=r[t],i=ci(r,0,t);return n&&pt(i,n),ot(e,this,i)}))},Or.tail=function(e){var t=null==e?0:e.length;return t?Hn(e,1,t):[]},Or.take=function(e,t,r){return e&&e.length?Hn(e,0,(t=r||void 0===t?1:ns(t))<0?0:t):[]},Or.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?Hn(e,(t=n-(t=r||void 0===t?1:ns(t)))<0?0:t,n):[]},Or.takeRightWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3),!1,!0):[]},Or.takeWhile=function(e,t){return e&&e.length?ti(e,Zi(t,3)):[]},Or.tap=function(e,t){return t(e),e},Or.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new ye(o);return za(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),wa(e,t,{leading:n,maxWait:t,trailing:i})},Or.thru=ra,Or.toArray=ts,Or.toPairs=Os,Or.toPairsIn=Ms,Or.toPath=function(e){return Ca(e)?dt(e,To):Ja(e)?[e]:gi(_o(ss(e)))},Or.toPlainObject=as,Or.transform=function(e,t,r){var n=Ca(e),i=n||Na(e)||Qa(e);if(t=Zi(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:za(e)&&Fa(o)?Mr(De(e)):{}}return(i?st:un)(e,(function(e,n,i){return t(r,e,n,i)})),r},Or.unary=function(e){return ya(e,1)},Or.union=Go,Or.unionBy=Ho,Or.unionWith=Vo,Or.uniq=function(e){return e&&e.length?Qn(e):[]},Or.uniqBy=function(e,t){return e&&e.length?Qn(e,Zi(t,2)):[]},Or.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qn(e,void 0,t):[]},Or.unset=function(e,t){return null==e||$n(e,t)},Or.unzip=Wo,Or.unzipWith=Xo,Or.update=function(e,t,r){return null==e?e:ei(e,t,ai(r))},Or.updateWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:ei(e,t,ai(r),n)},Or.values=Ps,Or.valuesIn=function(e){return null==e?[]:Lt(e,ks(e))},Or.without=Yo,Or.words=Fs,Or.wrap=function(e,t){return Ta(ai(t),e)},Or.xor=Zo,Or.xorBy=Jo,Or.xorWith=Qo,Or.zip=$o,Or.zipObject=function(e,t){return ii(e||[],t||[],Kr)},Or.zipObjectDeep=function(e,t){return ii(e||[],t||[],qn)},Or.zipWith=ea,Or.entries=Os,Or.entriesIn=Ms,Or.extend=cs,Or.extendWith=ls,Zs(Or,Or),Or.add=au,Or.attempt=qs,Or.camelCase=Rs,Or.capitalize=Is,Or.ceil=su,Or.clamp=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=os(r))===r?r:0),void 0!==t&&(t=(t=os(t))===t?t:0),Xr(os(e),t,r)},Or.clone=function(e){return Yr(e,4)},Or.cloneDeep=function(e){return Yr(e,5)},Or.cloneDeepWith=function(e,t){return Yr(e,5,t="function"==typeof t?t:void 0)},Or.cloneWith=function(e,t){return Yr(e,4,t="function"==typeof t?t:void 0)},Or.conformsTo=function(e,t){return null==t||Zr(e,t,ws(t))},Or.deburr=Ls,Or.defaultTo=function(e,t){return null==e||e!==e?t:e},Or.divide=uu,Or.endsWith=function(e,t,r){e=ss(e),t=Jn(t);var n=e.length,i=r=void 0===r?n:Xr(ns(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t},Or.eq=Pa,Or.escape=function(e){return(e=ss(e))&&B.test(e)?e.replace(N,Ut):e},Or.escapeRegExp=function(e){return(e=ss(e))&&W.test(e)?e.replace(V,"\\$&"):e},Or.every=function(e,t,r){var n=Ca(e)?ct:tn;return r&&so(e,t,r)&&(t=void 0),n(e,Zi(t,3))},Or.find=oa,Or.findIndex=Lo,Or.findKey=function(e,t){return bt(e,Zi(t,3),un)},Or.findLast=aa,Or.findLastIndex=Co,Or.findLastKey=function(e,t){return bt(e,Zi(t,3),cn)},Or.floor=cu,Or.forEach=sa,Or.forEachRight=ua,Or.forIn=function(e,t){return null==e?e:an(e,Zi(t,3),ks)},Or.forInRight=function(e,t){return null==e?e:sn(e,Zi(t,3),ks)},Or.forOwn=function(e,t){return e&&un(e,Zi(t,3))},Or.forOwnRight=function(e,t){return e&&cn(e,Zi(t,3))},Or.get=vs,Or.gt=Ra,Or.gte=Ia,Or.has=function(e,t){return null!=e&&no(e,t,vn)},Or.hasIn=ys,Or.head=jo,Or.identity=Vs,Or.includes=function(e,t,r,n){e=ja(e)?e:Ps(e),r=r&&!n?ns(r):0;var i=e.length;return r<0&&(r=or(i+r,0)),Za(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&kt(e,t,r)>-1},Or.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=or(n+i,0)),kt(e,t,i)},Or.inRange=function(e,t,r){return t=rs(t),void 0===r?(r=t,t=0):r=rs(r),function(e,t,r){return e>=ar(t,r)&&e<or(t,r)}(e=os(e),t,r)},Or.invoke=bs,Or.isArguments=La,Or.isArray=Ca,Or.isArrayBuffer=Aa,Or.isArrayLike=ja,Or.isArrayLikeObject=Da,Or.isBoolean=function(e){return!0===e||!1===e||Ga(e)&&dn(e)==l},Or.isBuffer=Na,Or.isDate=Ua,Or.isElement=function(e){return Ga(e)&&1===e.nodeType&&!Wa(e)},Or.isEmpty=function(e){if(null==e)return!0;if(ja(e)&&(Ca(e)||"string"==typeof e||"function"==typeof e.splice||Na(e)||Qa(e)||La(e)))return!e.length;var t=ro(e);if(t==v||t==b)return!e.size;if(fo(e))return!xn(e).length;for(var r in e)if(Se.call(e,r))return!1;return!0},Or.isEqual=function(e,t){return wn(e,t)},Or.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?wn(e,t,void 0,r):!!n},Or.isError=Ba,Or.isFinite=function(e){return"number"==typeof e&&rr(e)},Or.isFunction=Fa,Or.isInteger=qa,Or.isLength=Ka,Or.isMap=Ha,Or.isMatch=function(e,t){return e===t||kn(e,t,Qi(t))},Or.isMatchWith=function(e,t,r){return r="function"==typeof r?r:void 0,kn(e,t,Qi(t),r)},Or.isNaN=function(e){return Va(e)&&e!=+e},Or.isNative=function(e){if(lo(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sn(e)},Or.isNil=function(e){return null==e},Or.isNull=function(e){return null===e},Or.isNumber=Va,Or.isObject=za,Or.isObjectLike=Ga,Or.isPlainObject=Wa,Or.isRegExp=Xa,Or.isSafeInteger=function(e){return qa(e)&&e>=-9007199254740991&&e<=9007199254740991},Or.isSet=Ya,Or.isString=Za,Or.isSymbol=Ja,Or.isTypedArray=Qa,Or.isUndefined=function(e){return void 0===e},Or.isWeakMap=function(e){return Ga(e)&&ro(e)==S},Or.isWeakSet=function(e){return Ga(e)&&"[object WeakSet]"==dn(e)},Or.join=function(e,t){return null==e?"":nr.call(e,t)},Or.kebabCase=Cs,Or.last=Bo,Or.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=ns(r))<0?or(n+i,0):ar(i,n-1)),t===t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):wt(e,Et,i,!0)},Or.lowerCase=As,Or.lowerFirst=js,Or.lt=$a,Or.lte=es,Or.max=function(e){return e&&e.length?rn(e,Vs,pn):void 0},Or.maxBy=function(e,t){return e&&e.length?rn(e,Zi(t,2),pn):void 0},Or.mean=function(e){return xt(e,Vs)},Or.meanBy=function(e,t){return xt(e,Zi(t,2))},Or.min=function(e){return e&&e.length?rn(e,Vs,Tn):void 0},Or.minBy=function(e,t){return e&&e.length?rn(e,Zi(t,2),Tn):void 0},Or.stubArray=iu,Or.stubFalse=ou,Or.stubObject=function(){return{}},Or.stubString=function(){return""},Or.stubTrue=function(){return!0},Or.multiply=lu,Or.nth=function(e,t){return e&&e.length?In(e,ns(t)):void 0},Or.noConflict=function(){return We._===this&&(We._=Oe),this},Or.noop=Js,Or.now=va,Or.pad=function(e,t,r){e=ss(e);var n=(t=ns(t))?Vt(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Li($t(i),r)+e+Li(Qt(i),r)},Or.padEnd=function(e,t,r){e=ss(e);var n=(t=ns(t))?Vt(e):0;return t&&n<t?e+Li(t-n,r):e},Or.padStart=function(e,t,r){e=ss(e);var n=(t=ns(t))?Vt(e):0;return t&&n<t?Li(t-n,r)+e:e},Or.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),ur(ss(e).replace(X,""),t||0)},Or.random=function(e,t,r){if(r&&"boolean"!=typeof r&&so(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=rs(e),void 0===t?(t=e,e=0):t=rs(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=cr();return ar(e+i*(t-e+ze("1e-"+((i+"").length-1))),t)}return Dn(e,t)},Or.reduce=function(e,t,r){var n=Ca(e)?vt:Ot,i=arguments.length<3;return n(e,Zi(t,4),r,i,$r)},Or.reduceRight=function(e,t,r){var n=Ca(e)?yt:Ot,i=arguments.length<3;return n(e,Zi(t,4),r,i,en)},Or.repeat=function(e,t,r){return t=(r?so(e,t,r):void 0===t)?1:ns(t),Nn(ss(e),t)},Or.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Or.result=function(e,t,r){var n=-1,i=(t=si(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[To(t[n])];void 0===o&&(n=i,o=r),e=Fa(o)?o.call(e):o}return e},Or.round=fu,Or.runInContext=e,Or.sample=function(e){return(Ca(e)?Ur:Bn)(e)},Or.size=function(e){if(null==e)return 0;if(ja(e))return Za(e)?Vt(e):e.length;var t=ro(e);return t==v||t==b?e.size:xn(e).length},Or.snakeCase=Ds,Or.some=function(e,t,r){var n=Ca(e)?gt:Vn;return r&&so(e,t,r)&&(t=void 0),n(e,Zi(t,3))},Or.sortedIndex=function(e,t){return Wn(e,t)},Or.sortedIndexBy=function(e,t,r){return Xn(e,t,Zi(r,2))},Or.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Wn(e,t);if(n<r&&Pa(e[n],t))return n}return-1},Or.sortedLastIndex=function(e,t){return Wn(e,t,!0)},Or.sortedLastIndexBy=function(e,t,r){return Xn(e,t,Zi(r,2),!0)},Or.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=Wn(e,t,!0)-1;if(Pa(e[r],t))return r}return-1},Or.startCase=Ns,Or.startsWith=function(e,t,r){return e=ss(e),r=null==r?0:Xr(ns(r),0,e.length),t=Jn(t),e.slice(r,r+t.length)==t},Or.subtract=hu,Or.sum=function(e){return e&&e.length?Mt(e,Vs):0},Or.sumBy=function(e,t){return e&&e.length?Mt(e,Zi(t,2)):0},Or.template=function(e,t,r){var n=Or.templateSettings;r&&so(e,t,r)&&(t=void 0),e=ss(e),t=ls({},t,n,Fi);var o,a,s=ls({},t.imports,n.imports,Fi),u=ws(s),c=Lt(s,u),l=0,f=t.interpolate||le,h="__p += '",d=pe((t.escape||le).source+"|"+f.source+"|"+(f===K?re:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Be+"]")+"\n";e.replace(d,(function(t,r,n,i,s,u){return n||(n=i),h+=e.slice(l,u).replace(fe,Bt),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var v=Se.call(t,"variable")&&t.variable;if(v){if(ee.test(v))throw new i("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(C,""):h).replace(A,"$1").replace(j,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=qs((function(){return Y(u,p+"return "+h).apply(void 0,c)}));if(y.source=h,Ba(y))throw y;return y},Or.times=function(e,t){if((e=ns(e))<1||e>9007199254740991)return[];var r=4294967295,n=ar(e,4294967295);e-=4294967295;for(var i=Pt(n,t=Zi(t));++r<e;)t(r);return i},Or.toFinite=rs,Or.toInteger=ns,Or.toLength=is,Or.toLower=function(e){return ss(e).toLowerCase()},Or.toNumber=os,Or.toSafeInteger=function(e){return e?Xr(ns(e),-9007199254740991,9007199254740991):0===e?e:0},Or.toString=ss,Or.toUpper=function(e){return ss(e).toUpperCase()},Or.trim=function(e,t,r){if((e=ss(e))&&(r||void 0===t))return Rt(e);if(!e||!(t=Jn(t)))return e;var n=Wt(e),i=Wt(t);return ci(n,At(n,i),jt(n,i)+1).join("")},Or.trimEnd=function(e,t,r){if((e=ss(e))&&(r||void 0===t))return e.slice(0,Xt(e)+1);if(!e||!(t=Jn(t)))return e;var n=Wt(e);return ci(n,0,jt(n,Wt(t))+1).join("")},Or.trimStart=function(e,t,r){if((e=ss(e))&&(r||void 0===t))return e.replace(X,"");if(!e||!(t=Jn(t)))return e;var n=Wt(e);return ci(n,At(n,Wt(t))).join("")},Or.truncate=function(e,t){var r=30,n="...";if(za(t)){var i="separator"in t?t.separator:i;r="length"in t?ns(t.length):r,n="omission"in t?Jn(t.omission):n}var o=(e=ss(e)).length;if(Ft(e)){var a=Wt(e);o=a.length}if(r>=o)return e;var s=r-Vt(n);if(s<1)return n;var u=a?ci(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+n;if(a&&(s+=u.length-s),Xa(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=pe(i.source,ss(ne.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(Jn(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+n},Or.unescape=function(e){return(e=ss(e))&&U.test(e)?e.replace(D,Yt):e},Or.uniqueId=function(e){var t=++Ee;return ss(e)+t},Or.upperCase=Us,Or.upperFirst=Bs,Or.each=sa,Or.eachRight=ua,Or.first=jo,Zs(Or,function(){var e={};return un(Or,(function(t,r){Se.call(Or.prototype,r)||(e[r]=t)})),e}(),{chain:!1}),Or.VERSION="4.17.21",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Or[e].placeholder=Or})),st(["drop","take"],(function(e,t){Ir.prototype[e]=function(r){r=void 0===r?1:or(ns(r),0);var n=this.__filtered__&&!t?new Ir(this):this.clone();return n.__filtered__?n.__takeCount__=ar(r,n.__takeCount__):n.__views__.push({size:ar(r,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Ir.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Ir.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Zi(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),st(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Ir.prototype[e]=function(){return this[r](1).value()[0]}})),st(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Ir.prototype[e]=function(){return this.__filtered__?new Ir(this):this[r](1)}})),Ir.prototype.compact=function(){return this.filter(Vs)},Ir.prototype.find=function(e){return this.filter(e).head()},Ir.prototype.findLast=function(e){return this.reverse().find(e)},Ir.prototype.invokeMap=Un((function(e,t){return"function"==typeof e?new Ir(this):this.map((function(r){return mn(r,e,t)}))})),Ir.prototype.reject=function(e){return this.filter(xa(Zi(e)))},Ir.prototype.slice=function(e,t){e=ns(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Ir(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=ns(t))<0?r.dropRight(-t):r.take(t-e)),r)},Ir.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ir.prototype.toArray=function(){return this.take(4294967295)},un(Ir.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Or[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Or.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof Ir,u=a[0],c=s||Ca(t),l=function(e){var t=i.apply(Or,pt([e],a));return n&&f?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=o&&!f,p=s&&!h;if(!o&&c){t=p?t:new Ir(this);var v=e.apply(t,a);return v.__actions__.push({func:ra,args:[l],thisArg:void 0}),new Rr(v,f)}return d&&p?e.apply(this,a):(v=this.thru(l),d?n?v.value()[0]:v.value():v)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ge[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Or.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Ca(i)?i:[],e)}return this[r]((function(r){return t.apply(Ca(r)?r:[],e)}))}})),un(Ir.prototype,(function(e,t){var r=Or[t];if(r){var n=r.name+"";Se.call(mr,n)||(mr[n]=[]),mr[n].push({name:t,func:r})}})),mr[Mi(void 0,2).name]=[{name:"wrapper",func:void 0}],Ir.prototype.clone=function(){var e=new Ir(this.__wrapped__);return e.__actions__=gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gi(this.__views__),e},Ir.prototype.reverse=function(){if(this.__filtered__){var e=new Ir(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ir.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ca(e),n=t<0,i=r?e.length:0,o=function(e,t,r){var n=-1,i=r.length;for(;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ar(t,e+a);break;case"takeRight":e=or(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=n?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=ar(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return ri(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,y=e[c+=t];++v<f;){var g=l[v],m=g.iteratee,b=g.type,w=m(y);if(2==b)y=w;else if(!w){if(1==b)continue e;break e}}p[h++]=y}return p},Or.prototype.at=na,Or.prototype.chain=function(){return ta(this)},Or.prototype.commit=function(){return new Rr(this.value(),this.__chain__)},Or.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Or.prototype.plant=function(e){for(var t,r=this;r instanceof Pr;){var n=Mo(r);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},Or.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ir){var t=e;return this.__actions__.length&&(t=new Ir(this)),(t=t.reverse()).__actions__.push({func:ra,args:[zo],thisArg:void 0}),new Rr(t,this.__chain__)}return this.thru(zo)},Or.prototype.toJSON=Or.prototype.valueOf=Or.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Or.prototype.first=Or.prototype.head,Ye&&(Or.prototype[Ye]=function(){return this}),Or}();We._=Zt,void 0===(i=function(){return Zt}.call(t,r,t,n))||(n.exports=i)}).call(this)}).call(this,r(11),r(40)(e))},function(e,t,r){var n=r(394);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){var n=r(395);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){var n=r(396);n&&n.__esModule&&(n=n.default),e.exports="string"===typeof n?n:n.toString()},function(e,t,r){r(211),r(115),e.exports=r(397)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=r(114).default,a="https://unpkg.com/react@16/umd/react.production.min.js",s="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js",u=function(){try{r(115)}catch(e){console.warn("File is not found: /Users/wangkai/Desktop/chat-component/src/index.js")}};setTimeout((function(){return n(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return window.React&&window.ReactDOM?(u(),[2]):[4,n(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),[4,o(a,"reactBundleLoaded")];case 1:t.sent(),t.label=2;case 2:return[4,o(s,"reactBundleLoaded")];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return e=t.sent(),console.error(e),[3,6];case 6:return[2]}}))}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,new Promise((function(e,t){var r=0,n=setInterval((function(){r>=2500&&t(new Error("Direflow Error: React & ReactDOM was unable to load")),window.React&&window.ReactDOM&&(clearInterval(n),e()),r+=1}))}))];case 3:return t.sent(),u(),[3,5];case 4:return e=t.sent(),console.error(e.message),[3,5];case 5:return[2]}}))}))}))},function(e,t,r){"use strict";var n=r(116),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||m}function k(){}function S(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||m}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=w.prototype;var E=S.prototype=new k;E.constructor=S,n(E,w.prototype),E.isPureReactComponent=!0;var x={current:null},_=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var n,i={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,n)&&!T.hasOwnProperty(n)&&(i[n]=t[n]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in u=e.defaultProps)void 0===i[n]&&(i[n]=u[n]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:x.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var P=/\/+/g,R=[];function I(e,t,r,n){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function C(e,t,r){return null==e?0:function e(t,r,n,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return n(i,t,""===r?"."+A(t,0):r),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+A(s=t[c],c);u+=e(s,l,n,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=r+A(s,c++),n,i);else if("object"===s)throw n=""+t,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return u}(e,"",t,r)}function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,n,r,(function(e){return e})):null!=e&&(M(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+r)),n.push(e))}function N(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(P,"$&/")+"/"),C(e,D,t=I(t,o,n,i)),L(t)}var U={current:null};function B(){var e=U.current;if(null===e)throw Error(g(321));return e}var F={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return N(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;C(e,j,t=I(null,null,t,r)),L(t)},count:function(e){return C(e,(function(){return null}),null)},toArray:function(e){var t=[];return N(e,t,null,(function(e){return e})),t},only:function(e){if(!M(e))throw Error(g(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=c,t.PureComponent=S,t.StrictMode=u,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(g(267,e));var i=n({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return B().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,r){return B().useReducer(e,t,r)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.1"},function(e,t,r){"use strict";var n=r(0),i=r(116),o=r(214);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(a(227));function s(e,t,r,n,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,f=null,h={onError:function(e){u=!0,c=e}};function d(e,t,r,n,i,o,a,l,f){u=!1,c=null,s.apply(h,arguments)}var p=null,v=null,y=null;function g(e,t,r){var n=e.type||"unknown-event";e.currentTarget=y(r),function(e,t,r,n,i,o,s,h,p){if(d.apply(this,arguments),u){if(!u)throw Error(a(198));var v=c;u=!1,c=null,l||(l=!0,f=v)}}(n,t,void 0,e),e.currentTarget=null}var m=null,b={};function w(){if(m)for(var e in b){var t=b[e],r=m.indexOf(e);if(!(-1<r))throw Error(a(96,e));if(!S[r]){if(!t.extractEvents)throw Error(a(97,e));for(var n in S[r]=t,r=t.eventTypes){var i=void 0,o=r[n],s=t,u=n;if(E.hasOwnProperty(u))throw Error(a(99,u));E[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&k(c[i],s,u);i=!0}else o.registrationName?(k(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,n,e))}}}}function k(e,t,r){if(x[e])throw Error(a(100,e));x[e]=t,_[e]=t.eventTypes[r].dependencies}var S=[],E={},x={},_={};function T(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!b.hasOwnProperty(t)||b[t]!==n){if(b[t])throw Error(a(102,t));b[t]=n,r=!0}}r&&w()}var O=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=null,P=null,R=null;function I(e){if(e=v(e)){if("function"!==typeof M)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),M(e.stateNode,e.type,t))}}function L(e){P?R?R.push(e):R=[e]:P=e}function C(){if(P){var e=P,t=R;if(R=P=null,I(e),t)for(e=0;e<t.length;e++)I(t[e])}}function A(e,t){return e(t)}function j(e,t,r,n,i){return e(t,r,n,i)}function D(){}var N=A,U=!1,B=!1;function F(){null===P&&null===R||(D(),C())}function q(e,t,r){if(B)return e(t,r);B=!0;try{return N(e,t,r)}finally{B=!1,F()}}var K=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,G={},H={};function V(e,t,r,n,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new V(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new V(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new V(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new V(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new V(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new V(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new V(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new V(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new V(e,5,!1,e.toLowerCase(),null,!1)}));var X=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(X,Y);W[t]=new V(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(X,Y);W[t]=new V(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(X,Y);W[t]=new V(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new V(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new V(e,1,!1,e.toLowerCase(),null,!0)}));var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,r,n){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!z.call(H,e)||!z.call(G,e)&&(K.test(e)?H[e]=!0:(G[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,$="function"===typeof Symbol&&Symbol.for,ee=$?Symbol.for("react.element"):60103,te=$?Symbol.for("react.portal"):60106,re=$?Symbol.for("react.fragment"):60107,ne=$?Symbol.for("react.strict_mode"):60108,ie=$?Symbol.for("react.profiler"):60114,oe=$?Symbol.for("react.provider"):60109,ae=$?Symbol.for("react.context"):60110,se=$?Symbol.for("react.concurrent_mode"):60111,ue=$?Symbol.for("react.forward_ref"):60112,ce=$?Symbol.for("react.suspense"):60113,le=$?Symbol.for("react.suspense_list"):60120,fe=$?Symbol.for("react.memo"):60115,he=$?Symbol.for("react.lazy"):60116,de=$?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case re:return"Fragment";case te:return"Portal";case ie:return"Profiler";case ne:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function ge(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,o=ye(e.type);r=null,n&&(r=ye(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(Q,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}t+=r,e=e.return}while(e);return t}function me(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=be(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Se(e,t){var r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=me(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xe(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function _e(e,t){xe(e,t);var r=me(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Oe(e,t.type,r):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,me(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Oe(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Me(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Pe(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+me(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:me(r)}}function Le(e,t){var r=me(t.value),n=me(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function Ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ae="http://www.w3.org/1999/xhtml",je="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,Be=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==je||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Fe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function qe(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ke={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},ze={},Ge={};function He(e){if(ze[e])return ze[e];if(!Ke[e])return e;var t,r=Ke[e];for(t in r)if(r.hasOwnProperty(t)&&t in Ge)return ze[e]=r[t];return e}O&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);var Ve=He("animationend"),We=He("animationiteration"),Xe=He("animationstart"),Ye=He("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Qe(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function $e(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if($e(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return tt(i),e;if(o===n)return tt(i),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,u=i.child;u;){if(u===r){s=!0,r=i,n=o;break}if(u===n){s=!0,n=i,r=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===r){s=!0,r=o,n=i;break}if(u===n){s=!0,n=o,r=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)g(e,t[n],r[n]);else t&&g(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=nt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(l)throw e=f,l=!1,f=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!O)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function ht(e,t,r,n){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=n,i.nativeEvent=t,i.targetInst=r,i}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:r,ancestors:[]}}function dt(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=r.tag)&&6!==t||e.ancestors.push(r),r=Tr(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=ut(e.nativeEvent);n=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===r&&(a|=64);for(var s=null,u=0;u<S.length;u++){var c=S[u];c&&(c=c.extractEvents(n,t,o,i,a))&&(s=nt(s,c))}st(s)}}function pt(e,t,r){if(!r.has(e)){switch(e){case"scroll":Xt(t,"scroll",!0);break;case"focus":case"blur":Xt(t,"focus",!0),Xt(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":ct(e)&&Xt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Wt(e,t)}r.set(e,null)}}var vt,yt,gt,mt=!1,bt=[],wt=null,kt=null,St=null,Et=new Map,xt=new Map,_t=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ot="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Mt(e,t,r,n,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|r,nativeEvent:i,container:n}}function Pt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Rt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e=Mt(t,r,n,i,o),null!==t&&(null!==(t=Or(t))&&yt(t)),e):(e.eventSystemFlags|=n,e)}function It(e){var t=Tr(e.target);if(null!==t){var r=$e(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=et(r)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){gt(r)}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var r=Or(t);return null!==r&&yt(r),e.blockedOn=t,!1}return!0}function Ct(e,t,r){Lt(e)&&r.delete(t)}function At(){for(mt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Or(e.blockedOn))&&vt(e);break}var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==wt&&Lt(wt)&&(wt=null),null!==kt&&Lt(kt)&&(kt=null),null!==St&&Lt(St)&&(St=null),Et.forEach(Ct),xt.forEach(Ct)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,mt||(mt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,At)))}function Dt(e){function t(t){return jt(t,e)}if(0<bt.length){jt(bt[0],e);for(var r=1;r<bt.length;r++){var n=bt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==wt&&jt(wt,e),null!==kt&&jt(kt,e),null!==St&&jt(St,e),Et.forEach(t),xt.forEach(t),r=0;r<_t.length;r++)(n=_t[r]).blockedOn===e&&(n.blockedOn=null);for(;0<_t.length&&null===(r=_t[0]).blockedOn;)It(r),null===r.blockedOn&&_t.shift()}var Nt={},Ut=new Map,Bt=new Map,Ft=["abort","abort",Ve,"animationEnd",We,"animationIteration",Xe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function qt(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[n],eventPriority:t},Bt.set(n,t),Ut.set(n,o),Nt[i]=o}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(Ft,2);for(var Kt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zt=0;zt<Kt.length;zt++)Bt.set(Kt[zt],0);var Gt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Vt=!0;function Wt(e,t){Xt(t,e,!1)}function Xt(e,t,r){var n=Bt.get(t);switch(void 0===n?2:n){case 0:n=Yt.bind(null,t,1,e);break;case 1:n=Zt.bind(null,t,1,e);break;default:n=Jt.bind(null,t,1,e)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Yt(e,t,r,n){U||D();var i=Jt,o=U;U=!0;try{j(i,e,t,r,n)}finally{(U=o)||F()}}function Zt(e,t,r,n){Ht(Gt,Jt.bind(null,e,t,r,n))}function Jt(e,t,r,n){if(Vt)if(0<bt.length&&-1<Tt.indexOf(e))e=Mt(null,e,t,r,n),bt.push(e);else{var i=Qt(e,t,r,n);if(null===i)Pt(e,n);else if(-1<Tt.indexOf(e))e=Mt(i,e,t,r,n),bt.push(e);else if(!function(e,t,r,n,i){switch(t){case"focus":return wt=Rt(wt,e,t,r,n,i),!0;case"dragenter":return kt=Rt(kt,e,t,r,n,i),!0;case"mouseover":return St=Rt(St,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Et.set(o,Rt(Et.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,xt.set(o,Rt(xt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n)){Pt(e,n),e=ht(e,n,null,t);try{q(dt,e)}finally{ft(e)}}}}function Qt(e,t,r,n){if(null!==(r=Tr(r=ut(n)))){var i=$e(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=et(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}e=ht(e,n,r,t);try{q(dt,e)}finally{ft(e)}return null}var $t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];function tr(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||$t.hasOwnProperty(e)&&$t[e]?(""+t).trim():t+"px"}function rr(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=tr(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys($t).forEach((function(e){er.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$t[t]=$t[e]}))}));var nr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(e,t){if(t){if(nr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function or(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=Ae;function sr(e,t){var r=Qe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=_[t];for(var n=0;n<t.length;n++)pt(t[n],e,r)}function ur(){}function cr(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var r,n=lr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lr(n)}}function hr(){for(var e=window,t=cr();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=cr((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=null,vr=null;function yr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var mr="function"===typeof setTimeout?setTimeout:void 0,br="function"===typeof clearTimeout?clearTimeout:void 0;function wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Sr=Math.random().toString(36).slice(2),Er="__reactInternalInstance$"+Sr,xr="__reactEventHandlers$"+Sr,_r="__reactContainere$"+Sr;function Tr(e){var t=e[Er];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_r]||r[Er]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=kr(e);null!==e;){if(r=e[Er])return r;e=kr(e)}return t}r=(e=r).parentNode}return null}function Or(e){return!(e=e[Er]||e[_r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Mr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Pr(e){return e[xr]||null}function Rr(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ir(e,t){var r=e.stateNode;if(!r)return null;var n=p(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}function Lr(e,t,r){(t=Ir(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function Cr(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Rr(t);for(t=r.length;0<t--;)Lr(r[t],"captured",e);for(t=0;t<r.length;t++)Lr(r[t],"bubbled",e)}}function Ar(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Ir(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function jr(e){e&&e.dispatchConfig.registrationName&&Ar(e._targetInst,null,e)}function Dr(e){it(e,Cr)}var Nr=null,Ur=null,Br=null;function Fr(){if(Br)return Br;var e,t,r=Ur,n=r.length,i="value"in Nr?Nr.value:Nr.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Br=i.slice(e,1<t?1-t:void 0)}function qr(){return!0}function Kr(){return!1}function zr(e,t,r,n){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?qr:Kr,this.isPropagationStopped=Kr,this}function Gr(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function Hr(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Vr(e){e.eventPool=[],e.getPooled=Gr,e.release=Hr}i(zr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){this.isPersistent=qr},isPersistent:Kr,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Kr,this._dispatchInstances=this._dispatchListeners=null}}),zr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},zr.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return i(o,r.prototype),r.prototype=o,r.prototype.constructor=r,r.Interface=i({},n.Interface,e),r.extend=n.extend,Vr(r),r},Vr(zr);var Wr=zr.extend({data:null}),Xr=zr.extend({data:null}),Yr=[9,13,27,32],Zr=O&&"CompositionEvent"in window,Jr=null;O&&"documentMode"in document&&(Jr=document.documentMode);var Qr=O&&"TextEvent"in window&&!Jr,$r=O&&(!Zr||Jr&&8<Jr&&11>=Jr),en=String.fromCharCode(32),tn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rn=!1;function nn(e,t){switch(e){case"keyup":return-1!==Yr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function on(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var an=!1;var sn={eventTypes:tn,extractEvents:function(e,t,r,n){var i;if(Zr)e:{switch(e){case"compositionstart":var o=tn.compositionStart;break e;case"compositionend":o=tn.compositionEnd;break e;case"compositionupdate":o=tn.compositionUpdate;break e}o=void 0}else an?nn(e,r)&&(o=tn.compositionEnd):"keydown"===e&&229===r.keyCode&&(o=tn.compositionStart);return o?($r&&"ko"!==r.locale&&(an||o!==tn.compositionStart?o===tn.compositionEnd&&an&&(i=Fr()):(Ur="value"in(Nr=n)?Nr.value:Nr.textContent,an=!0)),o=Wr.getPooled(o,t,r,n),i?o.data=i:null!==(i=on(r))&&(o.data=i),Dr(o),i=o):i=null,(e=Qr?function(e,t){switch(e){case"compositionend":return on(t);case"keypress":return 32!==t.which?null:(rn=!0,en);case"textInput":return(e=t.data)===en&&rn?null:e;default:return null}}(e,r):function(e,t){if(an)return"compositionend"===e||!Zr&&nn(e,t)?(e=Fr(),Br=Ur=Nr=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=Xr.getPooled(tn.beforeInput,t,r,n)).data=e,Dr(t)):t=null,null===i?t:null===t?i:[i,t]}},un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!un[e.type]:"textarea"===t}var ln={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fn(e,t,r){return(e=zr.getPooled(ln.change,e,t,r)).type="change",L(r),Dr(e),e}var hn=null,dn=null;function pn(e){st(e)}function vn(e){if(ke(Mr(e)))return e}function yn(e,t){if("change"===e)return t}var gn=!1;function mn(){hn&&(hn.detachEvent("onpropertychange",bn),dn=hn=null)}function bn(e){if("value"===e.propertyName&&vn(dn))if(e=fn(dn,e,ut(e)),U)st(e);else{U=!0;try{A(pn,e)}finally{U=!1,F()}}}function wn(e,t,r){"focus"===e?(mn(),dn=r,(hn=t).attachEvent("onpropertychange",bn)):"blur"===e&&mn()}function kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return vn(dn)}function Sn(e,t){if("click"===e)return vn(t)}function En(e,t){if("input"===e||"change"===e)return vn(t)}O&&(gn=ct("input")&&(!document.documentMode||9<document.documentMode));var xn={eventTypes:ln,_isInputEventSupported:gn,extractEvents:function(e,t,r,n){var i=t?Mr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=yn;else if(cn(i))if(gn)a=En;else{a=kn;var s=wn}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Sn);if(a&&(a=a(e,t)))return fn(a,r,n);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Oe(i,"number",i.value)}},_n=zr.extend({view:null,detail:null}),Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function On(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Mn(){return On}var Pn=0,Rn=0,In=!1,Ln=!1,Cn=_n.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mn,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Pn;return Pn=e.screenX,In?"mousemove"===e.type?e.screenX-t:0:(In=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rn;return Rn=e.screenY,Ln?"mousemove"===e.type?e.screenY-t:0:(Ln=!0,0)}}),An=Cn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),jn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Dn={eventTypes:jn,extractEvents:function(e,t,r,n,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(r.relatedTarget||r.fromElement)||!a&&!o)return null;(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=r.relatedTarget||r.toElement)?Tr(t):null)&&(t!==$e(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Cn,u=jn.mouseLeave,c=jn.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=An,u=jn.pointerLeave,c=jn.pointerEnter,l="pointer");if(e=null==a?o:Mr(a),o=null==t?o:Mr(t),(u=s.getPooled(u,a,r,n)).type=l+"leave",u.target=e,u.relatedTarget=o,(r=s.getPooled(c,t,r,n)).type=l+"enter",r.target=o,r.relatedTarget=e,l=t,(n=a)&&l)e:{for(c=l,a=0,e=s=n;e;e=Rr(e))a++;for(e=0,t=c;t;t=Rr(t))e++;for(;0<a-e;)s=Rr(s),a--;for(;0<e-a;)c=Rr(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Rr(s),c=Rr(c)}s=null}else s=null;for(c=s,s=[];n&&n!==c&&(null===(a=n.alternate)||a!==c);)s.push(n),n=Rr(n);for(n=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)n.push(l),l=Rr(l);for(l=0;l<s.length;l++)Ar(s[l],"bubbled",u);for(l=n.length;0<l--;)Ar(n[l],"captured",r);return 0===(64&i)?[u]:[u,r]}};var Nn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Un=Object.prototype.hasOwnProperty;function Bn(e,t){if(Nn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Un.call(t,r[n])||!Nn(e[r[n]],t[r[n]]))return!1;return!0}var Fn=O&&"documentMode"in document&&11>=document.documentMode,qn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Kn=null,zn=null,Gn=null,Hn=!1;function Vn(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hn||null==Kn||Kn!==cr(r)?null:("selectionStart"in(r=Kn)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Gn&&Bn(Gn,r)?null:(Gn=r,(e=zr.getPooled(qn.select,zn,e,t)).type="select",e.target=Kn,Dr(e),e))}var Wn={eventTypes:qn,extractEvents:function(e,t,r,n,i,o){if(!(o=!(i=o||(n.window===n?n.document:9===n.nodeType?n:n.ownerDocument)))){e:{i=Qe(i),o=_.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Mr(t):window,e){case"focus":(cn(i)||"true"===i.contentEditable)&&(Kn=i,zn=t,Gn=null);break;case"blur":Gn=zn=Kn=null;break;case"mousedown":Hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hn=!1,Vn(r,n);case"selectionchange":if(Fn)break;case"keydown":case"keyup":return Vn(r,n)}return null}},Xn=zr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yn=zr.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zn=_n.extend({relatedTarget:null});function Jn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Qn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=_n.extend({key:function(e){if(e.key){var t=Qn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?$n[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?Jn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Cn.extend({dataTransfer:null}),ri=_n.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mn}),ni=zr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Cn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Nt,extractEvents:function(e,t,r,n){var i=Ut.get(e);if(!i)return null;switch(e){case"keypress":if(0===Jn(r))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Zn;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ri;break;case Ve:case We:case Xe:e=Xn;break;case Ye:e=ni;break;case"scroll":e=_n;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=An;break;default:e=zr}return Dr(t=e.getPooled(i,t,r,n)),t}};if(m)throw Error(a(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=Pr,v=Or,y=Mr,T({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Dn,ChangeEventPlugin:xn,SelectEventPlugin:Wn,BeforeInputEventPlugin:sn});var ai=[],si=-1;function ui(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function ci(e,t){si++,ai[si]=e.current,e.current=t}var li={},fi={current:li},hi={current:!1},di=li;function pi(e,t){var r=e.type.contextTypes;if(!r)return li;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ui(hi),ui(fi)}function gi(e,t,r){if(fi.current!==li)throw Error(a(168));ci(fi,t),ci(hi,r)}function mi(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in e))throw Error(a(108,ye(t)||"Unknown",o));return i({},r,{},n)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,di=fi.current,ci(fi,e),ci(hi,hi.current),!0}function wi(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=mi(e,t,di),n.__reactInternalMemoizedMergedChildContext=e,ui(hi),ui(fi),ci(fi,e)):ui(hi),ci(hi,r)}var ki=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,xi=o.unstable_requestPaint,_i=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Pi=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Ii=o.unstable_IdlePriority,Li={},Ci=o.unstable_shouldYield,Ai=void 0!==xi?xi:function(){},ji=null,Di=null,Ni=!1,Ui=_i(),Bi=1e4>Ui?_i:function(){return _i()-Ui};function Fi(){switch(Ti()){case Oi:return 99;case Mi:return 98;case Pi:return 97;case Ri:return 96;case Ii:return 95;default:throw Error(a(332))}}function qi(e){switch(e){case 99:return Oi;case 98:return Mi;case 97:return Pi;case 96:return Ri;case 95:return Ii;default:throw Error(a(332))}}function Ki(e,t){return e=qi(e),ki(e,t)}function zi(e,t,r){return e=qi(e),Si(e,t,r)}function Gi(e){return null===ji?(ji=[e],Di=Si(Oi,Vi)):ji.push(e),Li}function Hi(){if(null!==Di){var e=Di;Di=null,Ei(e)}Vi()}function Vi(){if(!Ni&&null!==ji){Ni=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),ji=null}catch(r){throw null!==ji&&(ji=ji.slice(e+1)),Si(Oi,Hi),r}finally{Ni=!1}}}function Wi(e,t,r){return 1073741821-(1+((1073741821-e+t/10)/(r/=10)|0))*r}function Xi(e,t){if(e&&e.defaultProps)for(var r in t=i({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Yi={current:null},Zi=null,Ji=null,Qi=null;function $i(){Qi=Ji=Zi=null}function eo(e){var t=Yi.current;ui(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}e=e.return}}function ro(e,t){Zi=e,Qi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ra=!0),e.firstContext=null)}function no(e,t){if(Qi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Qi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Zi)throw Error(a(308));Ji=t,Zi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function co(e,t){var r=e.alternate;null!==r&&ao(r,e),null===(r=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function lo(e,t,r,n){var o=e.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,h=null,d=null;if(null!==u)for(var p=u;;){if((s=p.expirationTime)<n){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,s>l&&(l=s)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ou(s,p.suspenseConfig);e:{var y=e,g=p;switch(s=t,v=r,g.tag){case 1:if("function"===typeof(y=g.payload)){c=y.call(v,c,s);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(s="function"===typeof(y=g.payload)?y.call(v,c,s):y)||void 0===s)break e;c=i({},c,s);break e;case 2:io=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===u){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===d?f=c:d.next=h,o.baseState=f,o.baseQueue=d,au(l),e.expirationTime=l,e.memoizedState=c}}function fo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=i,i=r,"function"!==typeof n)throw Error(a(191,n));n.call(i)}}}var ho=Z.ReactCurrentBatchConfig,po=(new n.Component).refs;function vo(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:i({},t,r),e.memoizedState=r,0===e.expirationTime&&(e.updateQueue.baseState=r)}var yo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&$e(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Vs(),i=ho.suspense;(i=so(n=Ws(n,e,i),i)).payload=t,void 0!==r&&null!==r&&(i.callback=r),uo(e,i),Xs(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Vs(),i=ho.suspense;(i=so(n=Ws(n,e,i),i)).tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),uo(e,i),Xs(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Vs(),n=ho.suspense;(n=so(r=Ws(r,e,n),n)).tag=2,void 0!==t&&null!==t&&(n.callback=t),uo(e,n),Xs(e,r)}};function go(e,t,r,n,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Bn(r,n)||!Bn(i,o))}function mo(e,t,r){var n=!1,i=li,o=t.contextType;return"object"===typeof o&&null!==o?o=no(o):(i=vi(t)?di:fi.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?pi(e,i):li),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function bo(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function wo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=no(o):(o=vi(t)?di:fi.current,i.context=pi(e,o)),lo(e,r,i,n),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(vo(e,t,o,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),lo(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function So(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=n.refs;t===po&&(t=n.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function xo(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Tu(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=Pu(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=So(e,t,r),n.return=e,n):((n=Ou(r.type,r.key,r.props,null,e.mode,n)).ref=So(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ru(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function f(e,t,r,n,o){return null===t||7!==t.tag?((t=Mu(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t||"number"===typeof t)return(t=Pu(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(r=Ou(t.type,t.key,t.props,null,e.mode,r)).ref=So(e,null,t),r.return=e,r;case te:return(t=Ru(t,e.mode,r)).return=e,t}if(ko(t)||ve(t))return(t=Mu(t,e.mode,r,null)).return=e,t;Eo(e,t)}return null}function d(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==i?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return r.key===i?r.type===re?f(e,t,r.props.children,n,i):c(e,t,r,n):null;case te:return r.key===i?l(e,t,r,n):null}if(ko(r)||ve(r))return null!==i?null:f(e,t,r,n,null);Eo(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return e=e.get(null===n.key?r:n.key)||null,n.type===re?f(t,e,n.props.children,i,n.key):c(t,e,n,i);case te:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(ko(n)||ve(n))return f(t,e=e.get(r)||null,n,i,null);Eo(t,n)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=y}if(v===s.length)return r(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=n(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=ve(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,y=s=0,g=null,m=u.next();null!==v&&!m.done;y++,m=u.next()){v.index>y?(g=v,v=null):g=v.sibling;var b=d(i,v,m.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,y),null===f?l=b:f.sibling=b,f=b,v=g}if(m.done)return r(i,v),l;if(null===v){for(;!m.done;y++,m=u.next())null!==(m=h(i,m.value,c))&&(s=o(m,s,y),null===f?l=m:f.sibling=m,f=m);return l}for(v=n(i,v);!m.done;y++,m=u.next())null!==(m=p(v,i,y,m.value,c))&&(e&&null!==m.alternate&&v.delete(null===m.key?y:m.key),s=o(m,s,y),null===f?l=m:f.sibling=m,f=m);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,n,o,u){var c="object"===typeof o&&null!==o&&o.type===re&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case ee:e:{for(l=o.key,c=n;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===re){r(e,c.sibling),(n=i(c,o.props.children)).return=e,e=n;break e}break;default:if(c.elementType===o.type){r(e,c.sibling),(n=i(c,o.props)).ref=So(e,c,o),n.return=e,e=n;break e}}r(e,c);break}t(e,c),c=c.sibling}o.type===re?((n=Mu(o.props.children,e.mode,u,o.key)).return=e,e=n):((u=Ou(o.type,o.key,o.props,null,e.mode,u)).ref=So(e,n,o),u.return=e,e=u)}return s(e);case te:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(e,n.sibling),(n=i(n,o.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Ru(o,e.mode,u)).return=e,e=n}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,o)).return=e,e=n):(r(e,n),(n=Pu(o,e.mode,u)).return=e,e=n),s(e);if(ko(o))return v(e,n,o,u);if(ve(o))return y(e,n,o,u);if(l&&Eo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return r(e,n)}}var _o=xo(!0),To=xo(!1),Oo={},Mo={current:Oo},Po={current:Oo},Ro={current:Oo};function Io(e){if(e===Oo)throw Error(a(174));return e}function Lo(e,t){switch(ci(Ro,t),ci(Po,e),ci(Mo,Oo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ne(null,"");break;default:t=Ne(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Mo),ci(Mo,t)}function Co(){ui(Mo),ui(Po),ui(Ro)}function Ao(e){Io(Ro.current);var t=Io(Mo.current),r=Ne(t,e.type);t!==r&&(ci(Po,e),ci(Mo,r))}function jo(e){Po.current===e&&(ui(Mo),ui(Po))}var Do={current:0};function No(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uo(e,t){return{responder:e,props:t}}var Bo=Z.ReactCurrentDispatcher,Fo=Z.ReactCurrentBatchConfig,qo=0,Ko=null,zo=null,Go=null,Ho=!1;function Vo(){throw Error(a(321))}function Wo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Nn(e[r],t[r]))return!1;return!0}function Xo(e,t,r,n,i,o){if(qo=o,Ko=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Bo.current=null===e||null===e.memoizedState?ga:ma,e=r(n,i),t.expirationTime===qo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Go=zo=null,t.updateQueue=null,Bo.current=ba,e=r(n,i)}while(t.expirationTime===qo)}if(Bo.current=ya,t=null!==zo&&null!==zo.next,qo=0,Go=zo=Ko=null,Ho=!1,t)throw Error(a(300));return e}function Yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Go?Ko.memoizedState=Go=e:Go=Go.next=e,Go}function Zo(){if(null===zo){var e=Ko.alternate;e=null!==e?e.memoizedState:null}else e=zo.next;var t=null===Go?Ko.memoizedState:Go.next;if(null!==t)Go=t,zo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(zo=e).memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},null===Go?Ko.memoizedState=Go=e:Go=Go.next=e}return Go}function Jo(e,t){return"function"===typeof t?t(e):t}function Qo(e){var t=Zo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=zo,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=n):u=u.next=f,l>Ko.expirationTime&&(Ko.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),n=c.eagerReducer===e?c.eagerState:e(n,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=n:u.next=s,Nn(n,t.memoizedState)||(Ra=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function $o(e){var t=Zo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Nn(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function ea(e){var t=Yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e}).dispatch=va.bind(null,Ko,e),[t.memoizedState,e]}function ta(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Ko.updateQueue)?(t={lastEffect:null},Ko.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ra(){return Zo().memoizedState}function na(e,t,r,n){var i=Yo();Ko.effectTag|=e,i.memoizedState=ta(1|t,r,void 0,void 0===n?null:n)}function ia(e,t,r,n){var i=Zo();n=void 0===n?null:n;var o=void 0;if(null!==zo){var a=zo.memoizedState;if(o=a.destroy,null!==n&&Wo(n,a.deps))return void ta(t,r,o,n)}Ko.effectTag|=e,i.memoizedState=ta(1|t,r,o,n)}function oa(e,t){return na(516,4,e,t)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return ia(4,2,e,t)}function ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ca(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ia(4,2,ua.bind(null,t,e),r)}function la(){}function fa(e,t){return Yo().memoizedState=[e,void 0===t?null:t],e}function ha(e,t){var r=Zo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Wo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function da(e,t){var r=Zo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Wo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function pa(e,t,r){var n=Fi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Fo.suspense;Fo.suspense=void 0===t?null:t;try{e(!1),r()}finally{Fo.suspense=n}}))}function va(e,t,r){var n=Vs(),i=ho.suspense;i={expirationTime:n=Ws(n,e,i),suspenseConfig:i,action:r,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Ko||null!==o&&o===Ko)Ho=!0,i.expirationTime=qo,Ko.expirationTime=qo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.eagerReducer=o,i.eagerState=s,Nn(s,a))return}catch(u){}Xs(e,n)}}var ya={readContext:no,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useResponder:Vo,useDeferredValue:Vo,useTransition:Vo},ga={readContext:no,useCallback:fa,useContext:no,useEffect:oa,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,na(4,2,ua.bind(null,t,e),r)},useLayoutEffect:function(e,t){return na(4,2,e,t)},useMemo:function(e,t){var r=Yo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Yo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=va.bind(null,Ko,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Yo().memoizedState=e},useState:ea,useDebugValue:la,useResponder:Uo,useDeferredValue:function(e,t){var r=ea(e),n=r[0],i=r[1];return oa((function(){var r=Fo.suspense;Fo.suspense=void 0===t?null:t;try{i(e)}finally{Fo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=ea(!1),r=t[0];return t=t[1],[fa(pa.bind(null,t,e),[t,e]),r]}},ma={readContext:no,useCallback:ha,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Qo,useRef:ra,useState:function(){return Qo(Jo)},useDebugValue:la,useResponder:Uo,useDeferredValue:function(e,t){var r=Qo(Jo),n=r[0],i=r[1];return aa((function(){var r=Fo.suspense;Fo.suspense=void 0===t?null:t;try{i(e)}finally{Fo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=Qo(Jo),r=t[0];return t=t[1],[ha(pa.bind(null,t,e),[t,e]),r]}},ba={readContext:no,useCallback:ha,useContext:no,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:$o,useRef:ra,useState:function(){return $o(Jo)},useDebugValue:la,useResponder:Uo,useDeferredValue:function(e,t){var r=$o(Jo),n=r[0],i=r[1];return aa((function(){var r=Fo.suspense;Fo.suspense=void 0===t?null:t;try{i(e)}finally{Fo.suspense=r}}),[e,t]),n},useTransition:function(e){var t=$o(Jo),r=t[0];return t=t[1],[ha(pa.bind(null,t,e),[t,e]),r]}},wa=null,ka=null,Sa=!1;function Ea(e,t){var r=xu(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function xa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function _a(e){if(Sa){var t=ka;if(t){var r=t;if(!xa(e,t)){if(!(t=wr(r.nextSibling))||!xa(e,t))return e.effectTag=-1025&e.effectTag|2,Sa=!1,void(wa=e);Ea(wa,r)}wa=e,ka=wr(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Sa=!1,wa=e}}function Ta(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;wa=e}function Oa(e){if(e!==wa)return!1;if(!Sa)return Ta(e),Sa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=ka;t;)Ea(e,t),t=wr(t.nextSibling);if(Ta(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ka=wr(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ka=null}}else ka=wa?wr(e.stateNode.nextSibling):null;return!0}function Ma(){ka=wa=null,Sa=!1}var Pa=Z.ReactCurrentOwner,Ra=!1;function Ia(e,t,r,n){t.child=null===e?To(t,null,r,n):_o(t,e.child,r,n)}function La(e,t,r,n,i){r=r.render;var o=t.ref;return ro(t,i),n=Xo(e,t,r,n,o,i),null===e||Ra?(t.effectTag|=1,Ia(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xa(e,t,i))}function Ca(e,t,r,n,i,o){if(null===e){var a=r.type;return"function"!==typeof a||_u(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ou(r.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Aa(e,t,a,n,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(r=null!==(r=r.compare)?r:Bn)(i,n)&&e.ref===t.ref)?Xa(e,t,o):(t.effectTag|=1,(e=Tu(a,n)).ref=t.ref,e.return=t,t.child=e)}function Aa(e,t,r,n,i,o){return null!==e&&Bn(e.memoizedProps,n)&&e.ref===t.ref&&(Ra=!1,i<o)?(t.expirationTime=e.expirationTime,Xa(e,t,o)):Da(e,t,r,n,o)}function ja(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Da(e,t,r,n,i){var o=vi(r)?di:fi.current;return o=pi(t,o),ro(t,i),r=Xo(e,t,r,n,o,i),null===e||Ra?(t.effectTag|=1,Ia(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xa(e,t,i))}function Na(e,t,r,n,i){if(vi(r)){var o=!0;bi(t)}else o=!1;if(ro(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),mo(t,r,n),wo(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=no(c):c=pi(t,c=vi(r)?di:fi.current);var l=r.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||u!==c)&&bo(t,a,n,c),io=!1;var h=t.memoizedState;a.state=h,lo(t,n,a,i),u=t.memoizedState,s!==n||h!==u||hi.current||io?("function"===typeof l&&(vo(t,r,l,n),u=t.memoizedState),(s=io||go(t,r,s,n,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Xi(t.type,s),u=a.context,"object"===typeof(c=r.contextType)&&null!==c?c=no(c):c=pi(t,c=vi(r)?di:fi.current),(f="function"===typeof(l=r.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||u!==c)&&bo(t,a,n,c),io=!1,u=t.memoizedState,a.state=u,lo(t,n,a,i),h=t.memoizedState,s!==n||u!==h||hi.current||io?("function"===typeof l&&(vo(t,r,l,n),h=t.memoizedState),(l=io||go(t,r,s,n,u,h,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,h,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=c,n=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),n=!1);return Ua(e,t,r,n,o,i)}function Ua(e,t,r,n,i,o){ja(e,t);var a=0!==(64&t.effectTag);if(!n&&!a)return i&&wi(t,r,!1),Xa(e,t,o);n=t.stateNode,Pa.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,s,o)):Ia(e,t,s,o),t.memoizedState=n.state,i&&wi(t,r,!0),t.child}function Ba(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Lo(e,t.containerInfo)}var Fa,qa,Ka,za={dehydrated:null,retryTime:0};function Ga(e,t,r){var n,i=t.mode,o=t.pendingProps,a=Do.current,s=!1;if((n=0!==(64&t.effectTag))||(n=0!==(2&a)&&(null===e||null!==e.memoizedState)),n?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Do,1&a),null===e){if(void 0!==o.fallback&&_a(t),s){if(s=o.fallback,(o=Mu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=Mu(s,i,r,null)).return=t,o.sibling=r,t.memoizedState=za,t.child=o,r}return i=o.children,t.memoizedState=null,t.child=To(t,null,i,r)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(r=Tu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(r.child=s;null!==s;)s.return=r,s=s.sibling;return(i=Tu(i,o)).return=t,r.sibling=i,r.childExpirationTime=0,t.memoizedState=za,t.child=r,i}return r=_o(t,e.child,o.children,r),t.memoizedState=null,t.child=r}if(e=e.child,s){if(s=o.fallback,(o=Mu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=Mu(s,i,r,null)).return=t,o.sibling=r,r.effectTag|=2,o.childExpirationTime=0,t.memoizedState=za,t.child=o,r}return t.memoizedState=null,t.child=_o(t,e,o.children,r)}function Ha(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t),to(e.return,t)}function Va(e,t,r,n,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Wa(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ia(e,t,n.children,r),0!==(2&(n=Do.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,r);else if(19===e.tag)Ha(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ci(Do,n),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===No(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Va(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===No(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Va(t,!0,r,null,o,t.lastEffect);break;case"together":Va(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xa(e,t,r){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&au(n),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Tu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Tu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ya(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Za(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vi(t.type)&&yi(),null;case 3:return Co(),ui(hi),ui(fi),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||!Oa(t)||(t.effectTag|=4),null;case 5:jo(t),r=Io(Ro.current);var o=t.type;if(null!==e&&null!=t.stateNode)qa(e,t,o,n,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(a(166));return null}if(e=Io(Mo.current),Oa(t)){n=t.stateNode,o=t.type;var s=t.memoizedProps;switch(n[Er]=t,n[xr]=s,o){case"iframe":case"object":case"embed":Wt("load",n);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Wt(Ze[e],n);break;case"source":Wt("error",n);break;case"img":case"image":case"link":Wt("error",n),Wt("load",n);break;case"form":Wt("reset",n),Wt("submit",n);break;case"details":Wt("toggle",n);break;case"input":Ee(n,s),Wt("invalid",n),sr(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Wt("invalid",n),sr(r,"onChange");break;case"textarea":Ie(n,s),Wt("invalid",n),sr(r,"onChange")}for(var u in ir(o,s),e=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?n.textContent!==c&&(e=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(e=["children",""+c]):x.hasOwnProperty(u)&&null!=c&&sr(r,u)}switch(o){case"input":we(n),Te(n,s,!0);break;case"textarea":we(n),Ce(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=ur)}r=e,t.updateQueue=r,null!==r&&(t.effectTag|=4)}else{switch(u=9===r.nodeType?r:r.ownerDocument,e===ar&&(e=De(o)),e===ar?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(o,{is:n.is}):(e=u.createElement(o),"select"===o&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,o),e[Er]=t,e[xr]=n,Fa(e,t),t.stateNode=e,u=or(o,n),o){case"iframe":case"object":case"embed":Wt("load",e),c=n;break;case"video":case"audio":for(c=0;c<Ze.length;c++)Wt(Ze[c],e);c=n;break;case"source":Wt("error",e),c=n;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),c=n;break;case"form":Wt("reset",e),Wt("submit",e),c=n;break;case"details":Wt("toggle",e),c=n;break;case"input":Ee(e,n),c=Se(e,n),Wt("invalid",e),sr(r,"onChange");break;case"option":c=Me(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},c=i({},n,{value:void 0}),Wt("invalid",e),sr(r,"onChange");break;case"textarea":Ie(e,n),c=Re(e,n),Wt("invalid",e),sr(r,"onChange");break;default:c=n}ir(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?rr(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&Be(e,f):"children"===s?"string"===typeof f?("textarea"!==o||""!==f)&&Fe(e,f):"number"===typeof f&&Fe(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=f&&sr(r,s):null!=f&&J(e,s,f,u))}switch(o){case"input":we(e),Te(e,n,!1);break;case"textarea":we(e),Ce(e);break;case"option":null!=n.value&&e.setAttribute("value",""+me(n.value));break;case"select":e.multiple=!!n.multiple,null!=(r=n.value)?Pe(e,!!n.multiple,r,!1):null!=n.defaultValue&&Pe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ur)}yr(o,n)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ka(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));r=Io(Ro.current),Io(Mo.current),Oa(t)?(r=t.stateNode,n=t.memoizedProps,r[Er]=t,r.nodeValue!==n&&(t.effectTag|=4)):((r=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Er]=t,t.stateNode=r)}return null;case 13:return ui(Do),n=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=r,t):(r=null!==n,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Oa(t):(n=null!==(o=e.memoizedState),r||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?Os===ws&&(Os=ks):(Os!==ws&&Os!==ks||(Os=Ss),0!==Ls&&null!==xs&&(Cu(xs,Ts),Au(xs,Ls)))),(r||n)&&(t.effectTag|=4),null);case 4:return Co(),null;case 10:return eo(t),null;case 17:return vi(t.type)&&yi(),null;case 19:if(ui(Do),null===(n=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(s=n.rendering)){if(o)Ya(n,!1);else if(Os!==ws||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=No(s))){for(t.effectTag|=64,Ya(n,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;null!==n;)s=r,(o=n).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return ci(Do,1&Do.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=No(s))){if(t.effectTag|=64,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),Ya(n,!0),null===n.tail&&"hidden"===n.tailMode&&!s.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-n.renderingStartTime>n.tailExpiration&&1<r&&(t.effectTag|=64,o=!0,Ya(n,!1),t.expirationTime=t.childExpirationTime=r-1);n.isBackwards?(s.sibling=t.child,t.child=s):(null!==(r=n.last)?r.sibling=s:t.child=s,n.last=s)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=Bi()+500),r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Bi(),r.sibling=null,t=Do.current,ci(Do,o?1&t|2:1&t),r):null}throw Error(a(156,t.tag))}function Ja(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Co(),ui(hi),ui(fi),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return jo(e),null;case 13:return ui(Do),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ui(Do),null;case 4:return Co(),null;case 10:return eo(e),null;default:return null}}function Qa(e,t){return{value:e,source:t,stack:ge(t)}}Fa=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},qa=function(e,t,r,n,o){var a=e.memoizedProps;if(a!==n){var s,u,c=t.stateNode;switch(Io(Mo.current),e=null,r){case"input":a=Se(c,a),n=Se(c,n),e=[];break;case"option":a=Me(c,a),n=Me(c,n),e=[];break;case"select":a=i({},a,{value:void 0}),n=i({},n,{value:void 0}),e=[];break;case"textarea":a=Re(c,a),n=Re(c,n),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(c.onclick=ur)}for(s in ir(r,n),r=null,a)if(!n.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(r||(r={}),r[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in n){var l=n[s];if(c=null!=a?a[s]:void 0,n.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(r||(r={}),r[u]=l[u])}else r||(e||(e=[]),e.push(s,r)),r=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(x.hasOwnProperty(s)?(null!=l&&sr(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}r&&(e=e||[]).push("style",r),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ka=function(e,t,r,n){r!==n&&(t.effectTag|=4)};var $a="function"===typeof WeakSet?WeakSet:Set;function es(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=ge(r)),null!==r&&ye(r.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){mu(e,r)}else t.current=null}function rs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Xi(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ns(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,void 0!==n&&n()}r=r.next}while(r!==t)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function os(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:return void is(3,r);case 1:if(e=r.stateNode,4&r.effectTag)if(null===t)e.componentDidMount();else{var n=r.elementType===r.type?t.memoizedProps:Xi(r.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=r.updateQueue)&&fo(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}fo(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.effectTag&&yr(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Dt(r)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,r){switch("function"===typeof Su&&Su(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;Ki(97<r?97:r,(function(){var e=n;do{var r=e.destroy;if(void 0!==r){var i=t;try{r()}catch(o){mu(i,o)}}e=e.next}while(e!==n)}))}break;case 1:ts(t),"function"===typeof(r=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){mu(e,r)}}(t,r);break;case 5:ts(t);break;case 4:ls(e,t,r)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function cs(e){e:{for(var t=e.return;null!==t;){if(us(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(a(161))}16&r.effectTag&&(Fe(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||us(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}n?function e(t,r,n){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==r.onclick||(r.onclick=ur));else if(4!==i&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t):function e(t,r,n){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t)}function ls(e,t,r){for(var n,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(n=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=r,f=c;;)if(as(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=n,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,r),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function fs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ns(3,t);case 1:return;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps,i=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(r[xr]=n,"input"===e&&"radio"===n.type&&null!=n.name&&xe(r,n),or(e,i),t=or(e,n),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?rr(r,u):"dangerouslySetInnerHTML"===s?Be(r,u):"children"===s?Fe(r,u):J(r,s,u,t)}switch(e){case"input":_e(r,n);break;case"textarea":Le(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?Pe(r,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?Pe(r,!!n.multiple,n.defaultValue,!0):Pe(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(r=t,null===t.memoizedState?n=!1:(n=!0,r=t.child,As=Bi()),null!==r)e:for(e=r;;){if(5===e.tag)o=e.stateNode,n?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=tr("display",i));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void hs(t);case 19:return void hs(t);case 17:return}throw Error(a(163))}function hs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $a),t.forEach((function(t){var n=wu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,r){(r=so(r,null)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ds||(Ds=!0,Ns=n),es(e,t)},r}function vs(e,t,r){(r=so(r,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return es(e,t),n(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){"function"!==typeof n&&(null===Us?Us=new Set([this]):Us.add(this),es(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var ys,gs=Math.ceil,ms=Z.ReactCurrentDispatcher,bs=Z.ReactCurrentOwner,ws=0,ks=3,Ss=4,Es=0,xs=null,_s=null,Ts=0,Os=ws,Ms=null,Ps=1073741823,Rs=1073741823,Is=null,Ls=0,Cs=!1,As=0,js=null,Ds=!1,Ns=null,Us=null,Bs=!1,Fs=null,qs=90,Ks=null,zs=0,Gs=null,Hs=0;function Vs(){return 0!==(48&Es)?1073741821-(Bi()/10|0):0!==Hs?Hs:Hs=1073741821-(Bi()/10|0)}function Ws(e,t,r){if(0===(2&(t=t.mode)))return 1073741823;var n=Fi();if(0===(4&t))return 99===n?1073741823:1073741822;if(0!==(16&Es))return Ts;if(null!==r)e=Wi(e,0|r.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Wi(e,150,100);break;case 97:case 96:e=Wi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==xs&&e===Ts&&--e,e}function Xs(e,t){if(50<zs)throw zs=0,Gs=null,Error(a(185));if(null!==(e=Ys(e,t))){var r=Fi();1073741823===t?0!==(8&Es)&&0===(48&Es)?$s(e):(Js(e),0===Es&&Hi()):Js(e),0===(4&Es)||98!==r&&99!==r||(null===Ks?Ks=new Map([[e,t]]):(void 0===(r=Ks.get(e))||r>t)&&Ks.set(e,t))}}function Ys(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return null!==i&&(xs===i&&(au(t),Os===Ss&&Cu(i,Ts)),Au(i,t)),i}function Zs(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Lu(e,t=e.firstPendingTime))return t;var r=e.lastPingedTime;return 2>=(e=r>(e=e.nextKnownPendingLevel)?r:e)&&t!==e?0:e}function Js(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Gi($s.bind(null,e));else{var t=Zs(e),r=e.callbackNode;if(0===t)null!==r&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Vs();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==r){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=n)return;r!==Li&&Ei(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?Gi($s.bind(null,e)):zi(n,Qs.bind(null,e),{timeout:10*(1073741821-t)-Bi()}),e.callbackNode=t}}}function Qs(e,t){if(Hs=0,t)return ju(e,t=Vs()),Js(e),null;var r=Zs(e);if(0!==r){if(t=e.callbackNode,0!==(48&Es))throw Error(a(327));if(vu(),e===xs&&r===Ts||ru(e,r),null!==_s){var n=Es;Es|=16;for(var i=iu();;)try{uu();break}catch(u){nu(e,u)}if($i(),Es=n,ms.current=i,1===Os)throw t=Ms,ru(e,r),Cu(e,r),Js(e),t;if(null===_s)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=Os,xs=null,n){case ws:case 1:throw Error(a(345));case 2:ju(e,2<r?2:r);break;case ks:if(Cu(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fu(i)),1073741823===Ps&&10<(i=As+500-Bi())){if(Cs){var o=e.lastPingedTime;if(0===o||o>=r){e.lastPingedTime=r,ru(e,r);break}}if(0!==(o=Zs(e))&&o!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=mr(hu.bind(null,e),i);break}hu(e);break;case Ss:if(Cu(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fu(i)),Cs&&(0===(i=e.lastPingedTime)||i>=r)){e.lastPingedTime=r,ru(e,r);break}if(0!==(i=Zs(e))&&i!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}if(1073741823!==Rs?n=10*(1073741821-Rs)-Bi():1073741823===Ps?n=0:(n=10*(1073741821-Ps)-5e3,0>(n=(i=Bi())-n)&&(n=0),(r=10*(1073741821-r)-i)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gs(n/1960))-n)&&(n=r)),10<n){e.timeoutHandle=mr(hu.bind(null,e),n);break}hu(e);break;case 5:if(1073741823!==Ps&&null!==Is){o=Ps;var s=Is;if(0>=(n=0|s.busyMinDurationMs)?n=0:(i=0|s.busyDelayMs,n=(o=Bi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+n-o),10<n){Cu(e,r),e.timeoutHandle=mr(hu.bind(null,e),n);break}}hu(e);break;default:throw Error(a(329))}if(Js(e),e.callbackNode===t)return Qs.bind(null,e)}}return null}function $s(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Es))throw Error(a(327));if(vu(),e===xs&&t===Ts||ru(e,t),null!==_s){var r=Es;Es|=16;for(var n=iu();;)try{su();break}catch(i){nu(e,i)}if($i(),Es=r,ms.current=n,1===Os)throw r=Ms,ru(e,t),Cu(e,t),Js(e),r;if(null!==_s)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,xs=null,hu(e),Js(e)}return null}function eu(e,t){var r=Es;Es|=1;try{return e(t)}finally{0===(Es=r)&&Hi()}}function tu(e,t){var r=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=r)&&Hi()}}function ru(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,br(r)),null!==_s)for(r=_s.return;null!==r;){var n=r;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&yi();break;case 3:Co(),ui(hi),ui(fi);break;case 5:jo(n);break;case 4:Co();break;case 13:case 19:ui(Do);break;case 10:eo(n)}r=r.return}xs=e,_s=Tu(e.current,null),Ts=t,Os=ws,Ms=null,Rs=Ps=1073741823,Is=null,Ls=0,Cs=!1}function nu(e,t){for(;;){try{if($i(),Bo.current=ya,Ho)for(var r=Ko.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}if(qo=0,Go=zo=Ko=null,Ho=!1,null===_s||null===_s.return)return Os=1,Ms=t,_s=null;e:{var i=e,o=_s.return,a=_s,s=t;if(t=Ts,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&Do.current),f=o;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(u),f.updateQueue=y}else v.add(u);if(0===(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=so(1073741823,null);g.tag=2,uo(a,g)}a.expirationTime=1073741823;break e}s=void 0,a=t;var m=i.pingCache;if(null===m?(m=i.pingCache=new ds,s=new Set,m.set(u,s)):void 0===(s=m.get(u))&&(s=new Set,m.set(u,s)),!s.has(a)){s.add(a);var b=bu.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);s=Error((ye(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ge(a))}5!==Os&&(Os=2),s=Qa(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=t,co(f,ps(f,u,t));break e;case 1:u=s;var w=f.type,k=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Us||!Us.has(k)))){f.effectTag|=4096,f.expirationTime=t,co(f,vs(f,u,t));break e}}f=f.return}while(null!==f)}_s=lu(_s)}catch(S){t=S;continue}break}}function iu(){var e=ms.current;return ms.current=ya,null===e?ya:e}function ou(e,t){e<Ps&&2<e&&(Ps=e),null!==t&&e<Rs&&2<e&&(Rs=e,Is=t)}function au(e){e>Ls&&(Ls=e)}function su(){for(;null!==_s;)_s=cu(_s)}function uu(){for(;null!==_s&&!Ci();)_s=cu(_s)}function cu(e){var t=ys(e.alternate,e,Ts);return e.memoizedProps=e.pendingProps,null===t&&(t=lu(e)),bs.current=null,t}function lu(e){_s=e;do{var t=_s.alternate;if(e=_s.return,0===(2048&_s.effectTag)){if(t=Za(t,_s,Ts),1===Ts||1!==_s.childExpirationTime){for(var r=0,n=_s.child;null!==n;){var i=n.expirationTime,o=n.childExpirationTime;i>r&&(r=i),o>r&&(r=o),n=n.sibling}_s.childExpirationTime=r}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=_s.firstEffect),null!==_s.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=_s.firstEffect),e.lastEffect=_s.lastEffect),1<_s.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=_s:e.firstEffect=_s,e.lastEffect=_s))}else{if(null!==(t=Ja(_s)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=_s.sibling))return t;_s=e}while(null!==_s);return Os===ws&&(Os=5),null}function fu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function hu(e){var t=Fi();return Ki(99,du.bind(null,e,t)),null}function du(e,t){do{vu()}while(null!==Fs);if(0!==(48&Es))throw Error(a(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=fu(r);if(e.firstPendingTime=i,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===xs&&(_s=xs=null,Ts=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,null!==i){var o=Es;Es|=32,bs.current=null,pr=Vt;var s=hr();if(dr(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(T){u=null;break e}var h=0,d=-1,p=-1,v=0,y=0,g=s,m=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=h+l),g!==f||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(b=g.firstChild);)m=g,g=b;for(;;){if(g===s)break t;if(m===u&&++v===l&&(d=h),m===f&&++y===c&&(p=h),null!==(b=g.nextSibling))break;m=(g=m).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;vr={activeElementDetached:null,focusedElem:s,selectionRange:u},Vt=!1,js=i;do{try{pu()}catch(T){if(null===js)throw Error(a(330));mu(js,T),js=js.nextEffect}}while(null!==js);js=i;do{try{for(s=e,u=t;null!==js;){var w=js.effectTag;if(16&w&&Fe(js.stateNode,""),128&w){var k=js.alternate;if(null!==k){var S=k.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(1038&w){case 2:cs(js),js.effectTag&=-3;break;case 6:cs(js),js.effectTag&=-3,fs(js.alternate,js);break;case 1024:js.effectTag&=-1025;break;case 1028:js.effectTag&=-1025,fs(js.alternate,js);break;case 4:fs(js.alternate,js);break;case 8:ls(s,l=js,u),ss(l)}js=js.nextEffect}}catch(T){if(null===js)throw Error(a(330));mu(js,T),js=js.nextEffect}}while(null!==js);if(S=vr,k=hr(),w=S.focusedElem,u=S.selectionRange,k!==w&&w&&w.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(w.ownerDocument.documentElement,w)){null!==u&&dr(w)&&(k=u.start,void 0===(S=u.end)&&(S=k),"selectionStart"in w?(w.selectionStart=k,w.selectionEnd=Math.min(S,w.value.length)):(S=(k=w.ownerDocument||document)&&k.defaultView||window).getSelection&&(S=S.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!S.extend&&s>u&&(l=u,u=s,s=l),l=fr(w,s),f=fr(w,u),l&&f&&(1!==S.rangeCount||S.anchorNode!==l.node||S.anchorOffset!==l.offset||S.focusNode!==f.node||S.focusOffset!==f.offset)&&((k=k.createRange()).setStart(l.node,l.offset),S.removeAllRanges(),s>u?(S.addRange(k),S.extend(f.node,f.offset)):(k.setEnd(f.node,f.offset),S.addRange(k))))),k=[];for(S=w;S=S.parentNode;)1===S.nodeType&&k.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<k.length;w++)(S=k[w]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Vt=!!pr,vr=pr=null,e.current=r,js=i;do{try{for(w=e;null!==js;){var E=js.effectTag;if(36&E&&os(w,js.alternate,js),128&E){k=void 0;var x=js.ref;if(null!==x){var _=js.stateNode;switch(js.tag){case 5:k=_;break;default:k=_}"function"===typeof x?x(k):x.current=k}}js=js.nextEffect}}catch(T){if(null===js)throw Error(a(330));mu(js,T),js=js.nextEffect}}while(null!==js);js=null,Ai(),Es=o}else e.current=r;if(Bs)Bs=!1,Fs=e,qs=t;else for(js=i;null!==js;)t=js.nextEffect,js.nextEffect=null,js=t;if(0===(t=e.firstPendingTime)&&(Us=null),1073741823===t?e===Gs?zs++:(zs=0,Gs=e):zs=0,"function"===typeof ku&&ku(r.stateNode,n),Js(e),Ds)throw Ds=!1,e=Ns,Ns=null,e;return 0!==(8&Es)||Hi(),null}function pu(){for(;null!==js;){var e=js.effectTag;0!==(256&e)&&rs(js.alternate,js),0===(512&e)||Bs||(Bs=!0,zi(97,(function(){return vu(),null}))),js=js.nextEffect}}function vu(){if(90!==qs){var e=97<qs?97:qs;return qs=90,Ki(e,yu)}}function yu(){if(null===Fs)return!1;var e=Fs;if(Fs=null,0!==(48&Es))throw Error(a(331));var t=Es;for(Es|=32,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!==(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:case 22:ns(5,r),is(5,r)}}catch(n){if(null===e)throw Error(a(330));mu(e,n)}r=e.nextEffect,e.nextEffect=null,e=r}return Es=t,Hi(),!0}function gu(e,t,r){uo(e,t=ps(e,t=Qa(r,t),1073741823)),null!==(e=Ys(e,1073741823))&&Js(e)}function mu(e,t){if(3===e.tag)gu(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){gu(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Us||!Us.has(n))){uo(r,e=vs(r,e=Qa(t,e),1073741823)),null!==(r=Ys(r,1073741823))&&Js(r);break}}r=r.return}}function bu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),xs===e&&Ts===r?Os===Ss||Os===ks&&1073741823===Ps&&Bi()-As<500?ru(e,Ts):Cs=!0:Lu(e,r)&&(0!==(t=e.lastPingedTime)&&t<r||(e.lastPingedTime=r,Js(e)))}function wu(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(t=Ws(t=Vs(),e,null)),null!==(e=Ys(e,t))&&Js(e)}ys=function(e,t,r){var n=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||hi.current)Ra=!0;else{if(n<r){switch(Ra=!1,t.tag){case 3:Ba(t),Ma();break;case 5:if(Ao(t),4&t.mode&&1!==r&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vi(t.type)&&bi(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,i=t.type._context,ci(Yi,i._currentValue),i._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?Ga(e,t,r):(ci(Do,1&Do.current),null!==(t=Xa(e,t,r))?t.sibling:null);ci(Do,1&Do.current);break;case 19:if(n=t.childExpirationTime>=r,0!==(64&e.effectTag)){if(n)return Wa(e,t,r);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(Do,Do.current),!n)return null}return Xa(e,t,r)}Ra=!1}}else Ra=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=pi(t,fi.current),ro(t,r),i=Xo(null,t,n,e,i,r),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(n)){var o=!0;bi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=n.getDerivedStateFromProps;"function"===typeof s&&vo(t,n,s,e),i.updater=yo,t.stateNode=i,i._reactInternalFiber=t,wo(t,n,e,r),t=Ua(null,t,n,!0,o,r)}else t.tag=0,Ia(null,t,i,r),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return _u(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===fe)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Da(null,t,i,e,r);break e;case 1:t=Na(null,t,i,e,r);break e;case 11:t=La(null,t,i,e,r);break e;case 14:t=Ca(null,t,i,Xi(i.type,e),n,r);break e}throw Error(a(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,Da(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 1:return n=t.type,i=t.pendingProps,Na(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 3:if(Ba(t),n=t.updateQueue,null===e||null===n)throw Error(a(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),lo(t,n,null,r),(n=t.memoizedState.element)===i)Ma(),t=Xa(e,t,r);else{if((i=t.stateNode.hydrate)&&(ka=wr(t.stateNode.containerInfo.firstChild),wa=t,i=Sa=!0),i)for(r=To(t,null,n,r),t.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else Ia(e,t,n,r),Ma();t=t.child}return t;case 5:return Ao(t),null===e&&_a(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,gr(n,i)?s=null:null!==o&&gr(n,o)&&(t.effectTag|=16),ja(e,t),4&t.mode&&1!==r&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ia(e,t,s,r),t=t.child),t;case 6:return null===e&&_a(t),null;case 13:return Ga(e,t,r);case 4:return Lo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=_o(t,null,n,r):Ia(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,La(e,t,n,i=t.elementType===n?i:Xi(n,i),r);case 7:return Ia(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ia(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(ci(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Nn(u,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){t=Xa(e,t,r);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===n&&0!==(l.observedBits&o)){1===u.tag&&((l=so(r,null)).tag=2,uo(u,l)),u.expirationTime<r&&(u.expirationTime=r),null!==(l=u.alternate)&&l.expirationTime<r&&(l.expirationTime=r),to(u.return,r),c.expirationTime<r&&(c.expirationTime=r);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ia(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(o=t.pendingProps).children,ro(t,r),n=n(i=no(i,o.unstable_observedBits)),t.effectTag|=1,Ia(e,t,n,r),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),Ca(e,t,i,o=Xi(i.type,o),n,r);case 15:return Aa(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xi(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vi(n)?(e=!0,bi(t)):e=!1,ro(t,r),mo(t,n,i),wo(t,n,i,r),Ua(null,t,n,!0,e,r);case 19:return Wa(e,t,r)}throw Error(a(156,t.tag))};var ku=null,Su=null;function Eu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function xu(e,t,r,n){return new Eu(e,t,r,n)}function _u(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tu(e,t){var r=e.alternate;return null===r?((r=xu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ou(e,t,r,n,i,o){var s=2;if(n=e,"function"===typeof e)_u(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case re:return Mu(r.children,i,o,t);case se:s=8,i|=7;break;case ne:s=8,i|=1;break;case ie:return(e=xu(12,r,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=xu(13,r,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case le:return(e=xu(19,r,t,i)).elementType=le,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case ue:s=11;break e;case fe:s=14;break e;case he:s=16,n=null;break e;case de:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=xu(s,r,t,i)).elementType=e,t.type=n,t.expirationTime=o,t}function Mu(e,t,r,n){return(e=xu(7,e,n,t)).expirationTime=r,e}function Pu(e,t,r){return(e=xu(6,e,null,t)).expirationTime=r,e}function Ru(e,t,r){return(t=xu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Iu(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Lu(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==r&&r>=t&&e<=t}function Cu(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||0===r)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Au(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;0!==r&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ju(e,t){var r=e.lastExpiredTime;(0===r||r>t)&&(e.lastExpiredTime=t)}function Du(e,t,r,n){var i=t.current,o=Vs(),s=ho.suspense;o=Ws(o,i,s);e:if(r){t:{if($e(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(a(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(vi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===r.tag){var c=r.type;if(vi(c)){r=mi(r,c,u);break e}}r=u}else r=li;return null===t.context?t.context=r:t.pendingContext=r,(t=so(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),uo(i,t),Xs(i,o),o}function Nu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Uu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Bu(e,t){Uu(e,t),(e=e.alternate)&&Uu(e,t)}function Fu(e,t,r){var n=new Iu(e,t,r=null!=r&&!0===r.hydrate),i=xu(3,null,null,2===t?7:1===t?3:0);n.current=i,i.stateNode=n,oo(i),e[_r]=n.current,r&&0!==t&&function(e,t){var r=Qe(t);Tt.forEach((function(e){pt(e,t,r)})),Ot.forEach((function(e){pt(e,t,r)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Nu(a);s.call(e)}}Du(t,a,e,i)}else{if(o=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Fu(e,0,t?{hydrate:!0}:void 0)}(r,n),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Nu(a);u.call(e)}}tu((function(){Du(t,a,e,i)}))}return Nu(a)}function zu(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Gu(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(t))throw Error(a(200));return zu(e,t,null,r)}Fu.prototype.render=function(e){Du(e,this._internalRoot,null,null)},Fu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Du(null,e,null,(function(){t[_r]=null}))},vt=function(e){if(13===e.tag){var t=Wi(Vs(),150,100);Xs(e,t),Bu(e,t)}},yt=function(e){13===e.tag&&(Xs(e,3),Bu(e,3))},gt=function(e){if(13===e.tag){var t=Vs();Xs(e,t=Ws(t,e,null)),Bu(e,t)}},M=function(e,t,r){switch(t){case"input":if(_e(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Pr(n);if(!i)throw Error(a(90));ke(n),_e(n,i)}}}break;case"textarea":Le(e,r);break;case"select":null!=(t=r.value)&&Pe(e,!!r.multiple,t,!1)}},A=eu,j=function(e,t,r,n,i){var o=Es;Es|=4;try{return Ki(98,e.bind(null,t,r,n,i))}finally{0===(Es=o)&&Hi()}},D=function(){0===(49&Es)&&(function(){if(null!==Ks){var e=Ks;Ks=null,e.forEach((function(e,t){ju(t,e),Js(t)})),Hi()}}(),vu())},N=function(e,t){var r=Es;Es|=2;try{return e(t)}finally{0===(Es=r)&&Hi()}};var Hu={Events:[Or,Mr,Pr,T,E,Dr,function(e){it(e,jr)},L,C,Jt,st,vu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);ku=function(e){try{t.onCommitFiberRoot(r,e,void 0,64===(64&e.current.effectTag))}catch(n){}},Su=function(e){try{t.onCommitFiberUnmount(r,e)}catch(n){}}}catch(n){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Tr,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hu,t.createPortal=Gu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Es))throw Error(a(187));var r=Es;Es|=1;try{return Ki(99,e.bind(null,t))}finally{Es=r,Hi()}},t.hydrate=function(e,t,r){if(!qu(t))throw Error(a(200));return Ku(null,e,t,!0,r)},t.render=function(e,t,r){if(!qu(t))throw Error(a(200));return Ku(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!qu(e))throw Error(a(40));return!!e._reactRootContainer&&(tu((function(){Ku(null,null,e,!1,(function(){e._reactRootContainer=null,e[_r]=null}))})),!0)},t.unstable_batchedUpdates=eu,t.unstable_createPortal=function(e,t){return Gu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!qu(r))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Ku(e,t,r,!1,n)},t.version="16.13.1"},function(e,t,r){"use strict";e.exports=r(215)},function(e,t,r){"use strict";var n,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var r=t.unstable_now();u(!0,r),u=null}catch(n){throw setTimeout(e,0),n}},f=Date.now();t.unstable_now=function(){return Date.now()-f},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,p=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var m=!1,b=null,w=-1,k=5,S=0;a=function(){return t.unstable_now()>=S},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):k=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,x=E.port2;E.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();S=e+k;try{b(!0,e)?x.postMessage(null):(m=!1,b=null)}catch(r){throw x.postMessage(null),r}}else m=!1},n=function(e){b=e,m||(m=!0,x.postMessage(null))},i=function(e,r){w=p((function(){e(t.unstable_now())}),r)},o=function(){v(w),w=-1}}function _(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(!(void 0!==i&&0<M(i,t)))break e;e[n]=t,e[r]=i,r=n}}function T(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>M(a,r))void 0!==u&&0>M(u,a)?(e[n]=u,e[s]=r,n=s):(e[n]=a,e[o]=r,n=o);else{if(!(void 0!==u&&0>M(u,r)))break e;e[n]=u,e[s]=r,n=s}}}return t}return null}function M(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var P=[],R=[],I=1,L=null,C=3,A=!1,j=!1,D=!1;function N(e){for(var t=T(R);null!==t;){if(null===t.callback)O(R);else{if(!(t.startTime<=e))break;O(R),t.sortIndex=t.expirationTime,_(P,t)}t=T(R)}}function U(e){if(D=!1,N(e),!j)if(null!==T(P))j=!0,n(B);else{var t=T(R);null!==t&&i(U,t.startTime-e)}}function B(e,r){j=!1,D&&(D=!1,o()),A=!0;var n=C;try{for(N(r),L=T(P);null!==L&&(!(L.expirationTime>r)||e&&!a());){var s=L.callback;if(null!==s){L.callback=null,C=L.priorityLevel;var u=s(L.expirationTime<=r);r=t.unstable_now(),"function"===typeof u?L.callback=u:L===T(P)&&O(P),N(r)}else O(P);L=T(P)}if(null!==L)var c=!0;else{var l=T(R);null!==l&&i(U,l.startTime-r),c=!1}return c}finally{L=null,C=n,A=!1}}function F(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){j||A||(j=!0,n(B))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return T(P)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var r=C;C=t;try{return e()}finally{C=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=C;C=e;try{return t()}finally{C=r}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:F(e)}else a=F(e),u=s;return e={id:I++,callback:r,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,_(R,e),null===T(P)&&e===T(R)&&(D?o():D=!0,i(U,u-s))):(e.sortIndex=a,_(P,e),j||A||(j=!0,n(B))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();N(e);var r=T(P);return r!==L&&null!==L&&null!==r&&null!==r.callback&&r.startTime<=e&&r.expirationTime<L.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=C;return function(){var r=C;C=t;try{return e.apply(this,arguments)}finally{C=r}}}},function(e,t,r){(t=r(34)(!1)).push([e.i,".rooms {\n  background-color: var(--bg-color);\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.rooms-list {\n  flex: 1;\n  overflow-y: scroll;\n  position: relative;\n}\n\n.rooms .room-invite {\n  font-size: 14px;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n  color: #fff;\n  display: flex;\n}\n\n.rooms .room-invite .btns {\n  margin-left: auto;\n  display: flex;\n  align-items: center;\n}\n\n.rooms .room-invite .btns .reject,\n.rooms .room-invite .btns .accept {\n  background: #37ca9e;\n  height: 30px;\n  line-height: 30px;\n  padding: 0 20px;\n  border-radius: 5px;\n}\n\n.rooms .room-invite .btns .accept {\n  margin-right: 10px;\n}\n\n.rooms .room {\n  font-size: 14px;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n  user-select: none;\n  color: #fff;\n  position: relative;\n}\n\n.rooms .room .bage {\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  text-align: center;\n  position: absolute;\n  top: 50%;\n  right: 20px;\n  border-radius: 20px;\n  background-color: red;\n  transform: translateY(-10px);\n  font-size: 12px;\n}\n\n.rooms .room:hover {\n  background: var(--room-hover-bg-color);\n  color: var(--room-hover-color);\n}\n\n.filter-box {\n  margin: 10px;\n  width: calc(100% - 20px);\n  height: 40px;\n  padding-left: 10px;\n}\n",""]),e.exports=t},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),a=n[0],s=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),l=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*v}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){var n,i;!function(o,a){"use strict";void 0===(i="function"===typeof(n=function(){var e=function(){},t="undefined"!==typeof window&&"undefined"!==typeof window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(r){return"debug"===r&&(r="log"),"undefined"!==typeof console&&("trace"===r&&t?i:void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):e)}function a(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function s(e,t,r){return function(){"undefined"!==typeof console&&(a.call(this,t,r),this[e].apply(this,arguments))}}function u(e,t,r){return o(e)||s.apply(this,arguments)}function c(e,t,n){var i,o=this;t=null==t?"WARN":t;var s="loglevel";function c(){var e;if("undefined"!==typeof window&&s){try{e=window.localStorage[s]}catch(n){}if("undefined"===typeof e)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(s)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(n){}return void 0===o.levels[e]&&(e=void 0),e}}"string"===typeof e?s+=":"+e:"symbol"===typeof e&&(s=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=n||u,o.getLevel=function(){return i},o.setLevel=function(t,n){if("string"===typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"===typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==n&&function(e){var t=(r[e]||"silent").toUpperCase();if("undefined"!==typeof window&&s){try{return void(window.localStorage[s]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(s)+"="+t+";"}catch(n){}}}(t),a.call(o,t,e),"undefined"===typeof console&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){t=e,c()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(t,!1),function(){if("undefined"!==typeof window&&s){try{return void window.localStorage.removeItem(s)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var l=c();null==l&&(l=t),o.setLevel(l,!1)}var l=new c,f={};l.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new c(e,l.getLevel(),l.methodFactory)),t};var h="undefined"!==typeof window?window.log:void 0;return l.noConflict=function(){return"undefined"!==typeof window&&window.log===l&&(window.log=h),l},l.getLoggers=function(){return f},l.default=l,l})?n.call(t,r,t,e):n)||(e.exports=i)}()},function(e,t,r){var n=r(118);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";var n=r(227);var i=RegExp(Object.keys(n).map((function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")})).join("|"),"g");function o(e){return n[e]}e.exports=function(e){return e.replace(i,o)}},function(e){e.exports=JSON.parse('{"0":"O","1":"l","\u05ad":"\u0596","\u05ae":"\u0598","\u05a8":"\u0599","\u05a4":"\u059a","\u1ab4":"\u06db","\u20db":"\u06db","\u0619":"\u0313","\u08f3":"\u0313","\u0343":"\u0313","\u0315":"\u0313","\u064f":"\u0313","\u065d":"\u0314","\u059c":"\u0301","\u059d":"\u0301","\u0618":"\u0301","\u0747":"\u0301","\u0341":"\u0301","\u0954":"\u0301","\u064e":"\u0301","\u0340":"\u0300","\u0953":"\u0300","\u030c":"\u0306","\ua67c":"\u0306","\u0658":"\u0306","\u065a":"\u0306","\u036e":"\u0306","\u06e8":"\u0306\u0307","\u0310":"\u0306\u0307","\u0901":"\u0306\u0307","\u0981":"\u0306\u0307","\u0a81":"\u0306\u0307","\u0b01":"\u0306\u0307","\u0c00":"\u0306\u0307","\u0c81":"\u0306\u0307","\u0d01":"\u0306\u0307","\ud805\udcbf":"\u0306\u0307","\u1cd0":"\u0302","\u0311":"\u0302","\u065b":"\u0302","\u07ee":"\u0302","\ua6f0":"\u0302","\u05af":"\u030a","\u06df":"\u030a","\u17d3":"\u030a","\u309a":"\u030a","\u0652":"\u030a","\u0b82":"\u030a","\u1036":"\u030a","\u17c6":"\u030a","\ud804\udf00":"\u030a","\u0e4d":"\u030a","\u0ecd":"\u030a","\u0366":"\u030a","\u2dea":"\u030a","\u08eb":"\u0308","\u07f3":"\u0308","\u064b":"\u030b","\u08f0":"\u030b","\u0342":"\u0303","\u0653":"\u0303","\u05c4":"\u0307","\u06ec":"\u0307","\u0740":"\u0307","\u08ea":"\u0307","\u0741":"\u0307","\u0358":"\u0307","\u05b9":"\u0307","\u05ba":"\u0307","\u05c2":"\u0307","\u05c1":"\u0307","\u07ed":"\u0307","\u0902":"\u0307","\u0a02":"\u0307","\u0a82":"\u0307","\u0bcd":"\u0307","\u0337":"\u0338","\u1ab7":"\u0328","\u0322":"\u0328","\u0345":"\u0328","\u1cd2":"\u0304","\u0305":"\u0304","\u0659":"\u0304","\u07eb":"\u0304","\ua6f1":"\u0304","\u1cda":"\u030e","\u0657":"\u0312","\u0357":"\u0350","\u08ff":"\u0350","\u08f8":"\u0350","\u0900":"\u0352","\u1ced":"\u0316","\u1cdc":"\u0329","\u0656":"\u0329","\u1cd5":"\u032b","\u0347":"\u0333","\u08f9":"\u0354","\u08fa":"\u0355","\u309b":"\uff9e","\u309c":"\uff9f","\u0336":"\u0335","\u302c":"\u0309","\u05c5":"\u0323","\u08ed":"\u0323","\u1cdd":"\u0323","\u05b4":"\u0323","\u065c":"\u0323","\u093c":"\u0323","\u09bc":"\u0323","\u0a3c":"\u0323","\u0abc":"\u0323","\u0b3c":"\u0323","\ud804\uddca":"\u0323","\ud805\udcc3":"\u0323","\ud802\ude3a":"\u0323","\u08ee":"\u0324","\u1cde":"\u0324","\u0f37":"\u0325","\u302d":"\u0325","\u0327":"\u0326","\u0321":"\u0326","\u0339":"\u0326","\u1cd9":"\u032d","\u1cd8":"\u032e","\u0952":"\u0331","\u0320":"\u0331","\u08f1":"\u064c","\u08e8":"\u064c","\u08e5":"\u064c","\ufc5e":"\ufe72\u0651","\u08f2":"\u064d","\ufc5f":"\ufe74\u0651","\ufcf2":"\ufe77\u0651","\ufc60":"\ufe76\u0651","\ufcf3":"\ufe79\u0651","\ufc61":"\ufe78\u0651","\u061a":"\u0650","\u0317":"\u0650","\ufcf4":"\ufe7b\u0651","\ufc62":"\ufe7a\u0651","\ufc63":"\ufe7c\u0670","\u065f":"\u0655","\u030d":"\u0670","\u0742":"\u073c","\u0a03":"\u0983","\u0c03":"\u0983","\u0c83":"\u0983","\u0d03":"\u0983","\u0d83":"\u0983","\u1038":"\u0983","\ud805\udcc1":"\u0983","\u17cb":"\u0e48","\u0ec8":"\u0e48","\u0ec9":"\u0e49","\u0eca":"\u0e4a","\u0ecb":"\u0e4b","\ua66f":"\u20e9","\\u2028":" ","\\u2029":" ","\u1680":" ","\u2000":" ","\u2001":" ","\u2002":" ","\u2003":" ","\u2004":" ","\u2005":" ","\u2006":" ","\u2008":" ","\u2009":" ","\u200a":" ","\u205f":" ","\xa0":" ","\u2007":" ","\u202f":" ","\u07fa":"_","\ufe4d":"_","\ufe4e":"_","\ufe4f":"_","\u2010":"-","\u2011":"-","\u2012":"-","\u2013":"-","\ufe58":"-","\u06d4":"-","\u2043":"-","\u02d7":"-","\u2212":"-","\u2796":"-","\u2cba":"-","\u2a29":"-\u0313","\u2e1a":"-\u0308","\ufb29":"-\u0307","\u2238":"-\u0307","\u2a2a":"-\u0323","\ua4fe":"-.","\uff5e":"\u301c","\u060d":",","\u066b":",","\u201a":",","\xb8":",","\ua4f9":",","\u2e32":"\u060c","\u066c":"\u060c","\u037e":";","\u2e35":"\u061b","\u0903":":","\u0a83":":","\uff1a":":","\u0589":":","\u0703":":","\u0704":":","\u16ec":":","\ufe30":":","\u1803":":","\u1809":":","\u205a":":","\u05c3":":","\u02f8":":","\ua789":":","\u2236":":","\u02d0":":","\ua4fd":":","\u2a74":"::=","\u29f4":":\u2192","\uff01":"!","\u01c3":"!","\u2d51":"!","\u203c":"!!","\u2049":"!?","\u0294":"?","\u0241":"?","\u097d":"?","\u13ae":"?","\ua6eb":"?","\u2048":"?!","\u2047":"??","\u2e2e":"\u061f","\ud834\udd6d":".","\u2024":".","\u0701":".","\u0702":".","\ua60e":".","\ud802\ude50":".","\u0660":".","\u06f0":".","\ua4f8":".","\ua4fb":".,","\u2025":"..","\ua4fa":"..","\u2026":"...","\ua6f4":"\ua6f3\ua6f3","\u30fb":"\xb7","\uff65":"\xb7","\u16eb":"\xb7","\u0387":"\xb7","\u2e31":"\xb7","\ud800\udd01":"\xb7","\u2022":"\xb7","\u2027":"\xb7","\u2219":"\xb7","\u22c5":"\xb7","\ua78f":"\xb7","\u1427":"\xb7","\u22ef":"\xb7\xb7\xb7","\u2d48":"\xb7\xb7\xb7","\u1444":"\xb7<","\u22d7":"\xb7>","\u1437":"\xb7>","\u1440":"\xb7>","\u152f":"\xb74","\u147e":"\xb7b","\u1480":"\xb7b\u0307","\u147a":"\xb7d","\u1498":"\xb7J","\u14b6":"\xb7L","\u1476":"\xb7P","\u1457":"\xb7U","\u143a":"\xb7V","\u143c":"\xb7\u0245","\u14ae":"\xb7\u0393","\u140e":"\xb7\u0394","\u1459":"\xb7\u0548","\u140c":"\xb7\u1401","\u1410":"\xb7\u1404","\u1412":"\xb7\u1405","\u1414":"\xb7\u1406","\u1417":"\xb7\u140a","\u1419":"\xb7\u140b","\u143e":"\xb7\u1432","\u1442":"\xb7\u1434","\u1446":"\xb7\u1439","\u145b":"\xb7\u144f","\u1454":"\xb7\u1450","\u145d":"\xb7\u1450","\u145f":"\xb7\u1451","\u1461":"\xb7\u1455","\u1463":"\xb7\u1456","\u1474":"\xb7\u146b","\u1478":"\xb7\u146e","\u147c":"\xb7\u1470","\u1492":"\xb7\u1489","\u1494":"\xb7\u148b","\u1496":"\xb7\u148c","\u149a":"\xb7\u148e","\u149c":"\xb7\u1490","\u149e":"\xb7\u1491","\u14ac":"\xb7\u14a3","\u14b0":"\xb7\u14a6","\u14b2":"\xb7\u14a7","\u14b4":"\xb7\u14a8","\u14b8":"\xb7\u14ab","\u14c9":"\xb7\u14c0","\u18c6":"\xb7\u14c2","\u18c8":"\xb7\u14c3","\u18ca":"\xb7\u14c4","\u18cc":"\xb7\u14c5","\u14cb":"\xb7\u14c7","\u14cd":"\xb7\u14c8","\u14dc":"\xb7\u14d3","\u14de":"\xb7\u14d5","\u14e0":"\xb7\u14d6","\u14e2":"\xb7\u14d7","\u14e4":"\xb7\u14d8","\u14e6":"\xb7\u14da","\u14e8":"\xb7\u14db","\u14f6":"\xb7\u14ed","\u14f8":"\xb7\u14ef","\u14fa":"\xb7\u14f0","\u14fc":"\xb7\u14f1","\u14fe":"\xb7\u14f2","\u1500":"\xb7\u14f4","\u1502":"\xb7\u14f5","\u1517":"\xb7\u1510","\u1519":"\xb7\u1511","\u151b":"\xb7\u1512","\u151d":"\xb7\u1513","\u151f":"\xb7\u1514","\u1521":"\xb7\u1515","\u1523":"\xb7\u1516","\u1531":"\xb7\u1528","\u1533":"\xb7\u1529","\u1535":"\xb7\u152a","\u1537":"\xb7\u152b","\u1539":"\xb7\u152d","\u153b":"\xb7\u152e","\u18ce":"\xb7\u1543","\u18cf":"\xb7\u1546","\u18d0":"\xb7\u1547","\u18d1":"\xb7\u1548","\u18d2":"\xb7\u1549","\u18d3":"\xb7\u154b","\u154e":"\xb7\u154c","\u155b":"\xb7\u155a","\u1568":"\xb7\u1567","\u18b3":"\xb7\u18b1","\u18b6":"\xb7\u18b4","\u18b9":"\xb7\u18b8","\u18c2":"\xb7\u18c0","\ua830":"\u0964","\u0965":"\u0964\u0964","\u1c3c":"\u1c3b\u1c3b","\u104b":"\u104a\u104a","\u1aa9":"\u1aa8\u1aa8","\u1aab":"\u1aaa\u1aa8","\u1b5f":"\u1b5e\u1b5e","\ud802\ude57":"\ud802\ude56\ud802\ude56","\ud805\udc4c":"\ud805\udc4b\ud805\udc4b","\ud805\ude42":"\ud805\ude41\ud805\ude41","\ud807\udc42":"\ud807\udc41\ud807\udc41","\u1c7f":"\u1c7e\u1c7e","\u055d":"\'","\uff07":"\'","\u2018":"\'","\u2019":"\'","\u201b":"\'","\u2032":"\'","\u2035":"\'","\u055a":"\'","\u05f3":"\'","`":"\'","\u1fef":"\'","\uff40":"\'","\xb4":"\'","\u0384":"\'","\u1ffd":"\'","\u1fbd":"\'","\u1fbf":"\'","\u1ffe":"\'","\u02b9":"\'","\u0374":"\'","\u02c8":"\'","\u02ca":"\'","\u02cb":"\'","\u02f4":"\'","\u02bb":"\'","\u02bd":"\'","\u02bc":"\'","\u02be":"\'","\ua78c":"\'","\u05d9":"\'","\u07f4":"\'","\u07f5":"\'","\u144a":"\'","\u16cc":"\'","\ud81b\udf51":"\'","\ud81b\udf52":"\'","\u1cd3":"\'\'","\\"":"\'\'","\uff02":"\'\'","\u201c":"\'\'","\u201d":"\'\'","\u201f":"\'\'","\u2033":"\'\'","\u2036":"\'\'","\u3003":"\'\'","\u05f4":"\'\'","\u02dd":"\'\'","\u02ba":"\'\'","\u02f6":"\'\'","\u02ee":"\'\'","\u05f2":"\'\'","\u2034":"\'\'\'","\u2037":"\'\'\'","\u2057":"\'\'\'\'","\u0181":"\'B","\u018a":"\'D","\u0149":"\'n","\u01a4":"\'P","\u01ac":"\'T","\u01b3":"\'Y","\uff3b":"(","\u2768":"(","\u2772":"(","\u3014":"(","\ufd3e":"(","\u2e28":"((","\u3220":"(\u30fc)","\u2475":"(2)","\u2487":"(2O)","\u2476":"(3)","\u2477":"(4)","\u2478":"(5)","\u2479":"(6)","\u247a":"(7)","\u247b":"(8)","\u247c":"(9)","\u249c":"(a)","\ud83c\udd10":"(A)","\u249d":"(b)","\ud83c\udd11":"(B)","\u249e":"(c)","\ud83c\udd12":"(C)","\u249f":"(d)","\ud83c\udd13":"(D)","\u24a0":"(e)","\ud83c\udd14":"(E)","\u24a1":"(f)","\ud83c\udd15":"(F)","\u24a2":"(g)","\ud83c\udd16":"(G)","\u24a3":"(h)","\ud83c\udd17":"(H)","\u24a4":"(i)","\u24a5":"(j)","\ud83c\udd19":"(J)","\u24a6":"(k)","\ud83c\udd1a":"(K)","\u2474":"(l)","\ud83c\udd18":"(l)","\u24a7":"(l)","\ud83c\udd1b":"(L)","\u247f":"(l2)","\u2480":"(l3)","\u2481":"(l4)","\u2482":"(l5)","\u2483":"(l6)","\u2484":"(l7)","\u2485":"(l8)","\u2486":"(l9)","\u247e":"(ll)","\u247d":"(lO)","\ud83c\udd1c":"(M)","\u24a9":"(n)","\ud83c\udd1d":"(N)","\u24aa":"(o)","\ud83c\udd1e":"(O)","\u24ab":"(p)","\ud83c\udd1f":"(P)","\u24ac":"(q)","\ud83c\udd20":"(Q)","\u24ad":"(r)","\ud83c\udd21":"(R)","\u24a8":"(rn)","\u24ae":"(s)","\ud83c\udd22":"(S)","\ud83c\udd2a":"(S)","\u24af":"(t)","\ud83c\udd23":"(T)","\u24b0":"(u)","\ud83c\udd24":"(U)","\u24b1":"(v)","\ud83c\udd25":"(V)","\u24b2":"(w)","\ud83c\udd26":"(W)","\u24b3":"(x)","\ud83c\udd27":"(X)","\u24b4":"(y)","\ud83c\udd28":"(Y)","\u24b5":"(z)","\ud83c\udd29":"(Z)","\u3200":"(\u1100)","\u320e":"(\uac00)","\u3201":"(\u1102)","\u320f":"(\ub098)","\u3202":"(\u1103)","\u3210":"(\ub2e4)","\u3203":"(\u1105)","\u3211":"(\ub77c)","\u3204":"(\u1106)","\u3212":"(\ub9c8)","\u3205":"(\u1107)","\u3213":"(\ubc14)","\u3206":"(\u1109)","\u3214":"(\uc0ac)","\u3207":"(\u110b)","\u3215":"(\uc544)","\u321d":"(\uc624\uc804)","\u321e":"(\uc624\ud6c4)","\u3208":"(\u110c)","\u3216":"(\uc790)","\u321c":"(\uc8fc)","\u3209":"(\u110e)","\u3217":"(\ucc28)","\u320a":"(\u110f)","\u3218":"(\uce74)","\u320b":"(\u1110)","\u3219":"(\ud0c0)","\u320c":"(\u1111)","\u321a":"(\ud30c)","\u320d":"(\u1112)","\u321b":"(\ud558)","\u3226":"(\u4e03)","\u3222":"(\u4e09)","\ud83c\ude41":"(\u4e09)","\u3228":"(\u4e5d)","\u3221":"(\u4e8c)","\ud83c\ude42":"(\u4e8c)","\u3224":"(\u4e94)","\u3239":"(\u4ee3)","\u323d":"(\u4f01)","\u3241":"(\u4f11)","\u3227":"(\u516b)","\u3225":"(\u516d)","\u3238":"(\u52b4)","\ud83c\ude47":"(\u52dd)","\u3229":"(\u5341)","\u323f":"(\u5354)","\u3234":"(\u540d)","\u323a":"(\u547c)","\u3223":"(\u56db)","\u322f":"(\u571f)","\u323b":"(\u5b66)","\ud83c\ude43":"(\u5b89)","\ud83c\ude45":"(\u6253)","\ud83c\ude48":"(\u6557)","\u3230":"(\u65e5)","\u322a":"(\u6708)","\u3232":"(\u6709)","\u322d":"(\u6728)","\ud83c\ude40":"(\u672c)","\u3231":"(\u682a)","\u322c":"(\u6c34)","\u322b":"(\u706b)","\ud83c\ude44":"(\u70b9)","\u3235":"(\u7279)","\ud83c\ude46":"(\u76d7)","\u323c":"(\u76e3)","\u3233":"(\u793e)","\u3237":"(\u795d)","\u3240":"(\u796d)","\u3242":"(\u81ea)","\u3243":"(\u81f3)","\u3236":"(\u8ca1)","\u323e":"(\u8cc7)","\u322e":"(\u91d1)","\uff3d":")","\u2769":")","\u2773":")","\u3015":")","\ufd3f":")","\u2e29":"))","\u2774":"{","\ud834\udd14":"{","\u2775":"}","\u301a":"\u27e6","\u301b":"\u27e7","\u27e8":"\u276c","\u2329":"\u276c","\u3008":"\u276c","\u31db":"\u276c","\u304f":"\u276c","\ud847\udfe8":"\u276c","\u27e9":"\u276d","\u232a":"\u276d","\u3009":"\u276d","\uff3e":"\ufe3f","\u2e3f":"\xb6","\u204e":"*","\u066d":"*","\u2217":"*","\ud800\udf1f":"*","\u1735":"/","\u2041":"/","\u2215":"/","\u2044":"/","\u2571":"/","\u27cb":"/","\u29f8":"/","\ud834\ude3a":"/","\u31d3":"/","\u3033":"/","\u2cc6":"/","\u30ce":"/","\u4e3f":"/","\u2f03":"/","\u29f6":"/\u0304","\u2afd":"//","\u2afb":"///","\uff3c":"\\\\","\ufe68":"\\\\","\u2216":"\\\\","\u27cd":"\\\\","\u29f5":"\\\\","\u29f9":"\\\\","\ud834\ude0f":"\\\\","\ud834\ude3b":"\\\\","\u31d4":"\\\\","\u4e36":"\\\\","\u2f02":"\\\\","\u2cf9":"\\\\\\\\","\u244a":"\\\\\\\\","\u27c8":"\\\\\u1455","\ua778":"&","\u0af0":"\u0970","\ud804\udcbb":"\u0970","\ud804\uddc7":"\u0970","\u26ac":"\u0970","\ud804\udddb":"\ua8fc","\u17d9":"\u0e4f","\u17d5":"\u0e5a","\u17da":"\u0e5b","\u0f0c":"\u0f0b","\u0f0e":"\u0f0d\u0f0d","\u02c4":"^","\u02c6":"^","\ua67e":"\u02c7","\u02d8":"\u02c7","\u203e":"\u02c9","\ufe49":"\u02c9","\ufe4a":"\u02c9","\ufe4b":"\u02c9","\ufe4c":"\u02c9","\xaf":"\u02c9","\uffe3":"\u02c9","\u2594":"\u02c9","\u044a":"\u02c9b","\ua651":"\u02c9bi","\u0375":"\u02cf","\u02fb":"\u02ea","\ua716":"\u02ea","\ua714":"\u02eb","\u3002":"\u02f3","\u2e30":"\xb0","\u02da":"\xb0","\u2218":"\xb0","\u25cb":"\xb0","\u25e6":"\xb0","\u235c":"\xb0\u0332","\u2364":"\xb0\u0308","\u2103":"\xb0C","\u2109":"\xb0F","\u0bf5":"\u0bf3","\u0f1b":"\u0f1a\u0f1a","\u0f1f":"\u0f1a\u0f1d","\u0fce":"\u0f1d\u0f1a","\u0f1e":"\u0f1d\u0f1d","\u24b8":"\xa9","\u24c7":"\xae","\u24c5":"\u2117","\ud834\ude1b":"\u2144","\u2bec":"\u219e","\u2bed":"\u219f","\u2bee":"\u21a0","\u2bef":"\u21a1","\u21b5":"\u21b2","\u2965":"\u21c3\u21c2","\u296f":"\u21c3\u16da","\ud835\udedb":"\u2202","\ud835\udf15":"\u2202","\ud835\udf4f":"\u2202","\ud835\udf89":"\u2202","\ud835\udfc3":"\u2202","\ud83a\udccc":"\u2202","\ud83a\udccd":"\u2202\u0335","\xf0":"\u2202\u0335","\u2300":"\u2205","\ud835\udec1":"\u2207","\ud835\udefb":"\u2207","\ud835\udf35":"\u2207","\ud835\udf6f":"\u2207","\ud835\udfa9":"\u2207","\ud806\udca8":"\u2207","\u2362":"\u2207\u0308","\u236b":"\u2207\u0334","\u2588":"\u220e","\u25a0":"\u220e","\u2a3f":"\u2210","\u16ed":"+","\u2795":"+","\ud800\ude9b":"+","\u2a23":"+\u0302","\u2a22":"+\u030a","\u2a24":"+\u0303","\u2214":"+\u0307","\u2a25":"+\u0323","\u2a26":"+\u0330","\u2a27":"+\u2082","\u2797":"\xf7","\u2039":"<","\u276e":"<","\u02c2":"<","\ud834\ude36":"<","\u1438":"<","\u16b2":"<","\u22d6":"<\xb7","\u2cb4":"<\xb7","\u1445":"<\xb7","\u226a":"<<","\u22d8":"<<<","\u1400":"=","\u2e40":"=","\u30a0":"=","\ua4ff":"=","\u225a":"=\u0306","\u2259":"=\u0302","\u2257":"=\u030a","\u2250":"=\u0307","\u2251":"=\u0307\u0323","\u2a6e":"=\u20f0","\u2a75":"==","\u2a76":"===","\u225e":"=\u036b","\u203a":">","\u276f":">","\u02c3":">","\ud834\ude37":">","\u1433":">","\ud81b\udf3f":">","\u1441":">\xb7","\u2aa5":"><","\u226b":">>","\u2a20":">>","\u22d9":">>>","\u2053":"~","\u02dc":"~","\u1fc0":"~","\u223c":"~","\u2368":"~\u0308","\u2e1e":"~\u0307","\u2a6a":"~\u0307","\u2e1f":"~\u0323","\ud83a\udcc8":"\u2220","\u22c0":"\u2227","\u222f":"\u222e\u222e","\u2230":"\u222e\u222e\u222e","\u2e2b":"\u2234","\u2e2a":"\u2235","\u2e2c":"\u2237","\ud804\uddde":"\u2248","\u264e":"\u224f","\ud83d\udf5e":"\u224f","\u2263":"\u2261","\u2a03":"\u228d","\u2a04":"\u228e","\ud834\ude38":"\u228f","\ud834\ude39":"\u2290","\u2a05":"\u2293","\u2a06":"\u2294","\u2a02":"\u2297","\u235f":"\u229b","\ud83d\udf71":"\u22a0","\ud83d\udf55":"\u22a1","\u25c1":"\u22b2","\u25b7":"\u22b3","\u2363":"\u22c6\u0308","\ufe34":"\u2307","\u25e0":"\u2312","\u2a3d":"\u2319","\u2325":"\u2324","\u29c7":"\u233b","\u25ce":"\u233e","\u29be":"\u233e","\u29c5":"\u2342","\u29b0":"\u2349","\u23c3":"\u234b","\u23c2":"\u234e","\u23c1":"\u2355","\u23c6":"\u236d","\u2638":"\u2388","\ufe35":"\u23dc","\ufe36":"\u23dd","\ufe37":"\u23de","\ufe38":"\u23df","\ufe39":"\u23e0","\ufe3a":"\u23e1","\u25b1":"\u23e5","\u23fc":"\u23fb","\ufe31":"\u2502","\uff5c":"\u2502","\u2503":"\u2502","\u250f":"\u250c","\u2523":"\u251c","\u2590":"\u258c","\u2597":"\u2596","\u259d":"\u2598","\u2610":"\u25a1","\uffed":"\u25aa","\u25b8":"\u25b6","\u25ba":"\u25b6","\u2ce9":"\u2627","\ud83d\udf0a":"\u2629","\ud83c\udf12":"\u263d","\ud83c\udf19":"\u263d","\u23fe":"\u263e","\ud83c\udf18":"\u263e","\u29d9":"\u299a","\ud83d\udf3a":"\u29df","\u2a3e":"\u2a1f","\ud800\udda0":"\u2ce8","\u2669":"\ud834\udd58\ud834\udd65","\u266a":"\ud834\udd58\ud834\udd65\ud834\udd6e","\u24ea":"\ud83c\udd0d","\u21ba":"\ud83c\udd0e","\u02d9":"\u0971","\u0d4e":"\u0971","\uff0d":"\u30fc","\u2014":"\u30fc","\u2015":"\u30fc","\u2500":"\u30fc","\u2501":"\u30fc","\u31d0":"\u30fc","\ua7f7":"\u30fc","\u1173":"\u30fc","\u3161":"\u30fc","\u4e00":"\u30fc","\u2f00":"\u30fc","\u1196":"\u30fc\u30fc","\ud7b9":"\u30fc\u1161","\ud7ba":"\u30fc\u1165","\ud7bb":"\u30fc\u1165\u4e28","\ud7bc":"\u30fc\u1169","\u1195":"\u30fc\u116e","\u1174":"\u30fc\u4e28","\u3162":"\u30fc\u4e28","\u1197":"\u30fc\u4e28\u116e","\ud83c\udd0f":"$\u20e0","\u20a4":"\xa3","\u3012":"\u20b8","\u3036":"\u20b8","\u1b5c":"\u1b50","\ua9c6":"\ua9d0","\ud805\udcd1":"\u09e7","\u0ce7":"\u0c67","\u1065":"\u1041","\u2460":"\u2780","\u2469":"\u2789","\u23e8":"\u2081\u2080","\ud835\udfd0":"2","\ud835\udfda":"2","\ud835\udfe4":"2","\ud835\udfee":"2","\ud835\udff8":"2","\ud83e\udff2":"2","\ua75a":"2","\u01a7":"2","\u03e8":"2","\ua644":"2","\u14bf":"2","\ua6ef":"2","\ua9cf":"\u0662","\u06f2":"\u0662","\u0ae8":"\u0968","\ud805\udcd2":"\u09e8","\u0ce8":"\u0c68","\u2461":"\u2781","\u01bb":"2\u0335","\ud83c\udd03":"2,","\u2489":"2.","\u33f5":"22\u65e5","\u336e":"22\u70b9","\u33f6":"23\u65e5","\u336f":"23\u70b9","\u33f7":"24\u65e5","\u3370":"24\u70b9","\u33f8":"25\u65e5","\u33f9":"26\u65e5","\u33fa":"27\u65e5","\u33fb":"28\u65e5","\u33fc":"29\u65e5","\u33f4":"2l\u65e5","\u336d":"2l\u70b9","\u249b":"2O.","\u33f3":"2O\u65e5","\u336c":"2O\u70b9","\u0de9":"\u0de8\u0dcf","\u0def":"\u0de8\u0dd3","\u33e1":"2\u65e5","\u32c1":"2\u6708","\u335a":"2\u70b9","\ud834\ude06":"3","\ud835\udfd1":"3","\ud835\udfdb":"3","\ud835\udfe5":"3","\ud835\udfef":"3","\ud835\udff9":"3","\ud83e\udff3":"3","\ua7ab":"3","\u021c":"3","\u01b7":"3","\ua76a":"3","\u2ccc":"3","\u0417":"3","\u04e0":"3","\ud81b\udf3b":"3","\ud806\udcca":"3","\u06f3":"\u0663","\ud83a\udcc9":"\u0663","\u0ae9":"\u0969","\u2462":"\u2782","\u0498":"3\u0326","\ud83c\udd04":"3,","\u248a":"3.","\u33fe":"3l\u65e5","\u33fd":"3O\u65e5","\u33e2":"3\u65e5","\u32c2":"3\u6708","\u335b":"3\u70b9","\ud835\udfd2":"4","\ud835\udfdc":"4","\ud835\udfe6":"4","\ud835\udff0":"4","\ud835\udffa":"4","\ud83e\udff4":"4","\u13ce":"4","\ud806\udcaf":"4","\u06f4":"\u0664","\u0aea":"\u096a","\u2463":"\u2783","\ud83c\udd05":"4,","\u248b":"4.","\u1530":"4\xb7","\u33e3":"4\u65e5","\u32c3":"4\u6708","\u335c":"4\u70b9","\ud835\udfd3":"5","\ud835\udfdd":"5","\ud835\udfe7":"5","\ud835\udff1":"5","\ud835\udffb":"5","\ud83e\udff5":"5","\u01bc":"5","\ud806\udcbb":"5","\u2464":"\u2784","\ud83c\udd06":"5,","\u248c":"5.","\u33e4":"5\u65e5","\u32c4":"5\u6708","\u335d":"5\u70b9","\ud835\udfd4":"6","\ud835\udfde":"6","\ud835\udfe8":"6","\ud835\udff2":"6","\ud835\udffc":"6","\ud83e\udff6":"6","\u2cd2":"6","\u0431":"6","\u13ee":"6","\ud806\udcd5":"6","\u06f6":"\u0666","\ud805\udcd6":"\u09ec","\u2465":"\u2785","\ud83c\udd07":"6,","\u248d":"6.","\u33e5":"6\u65e5","\u32c5":"6\u6708","\u335e":"6\u70b9","\ud834\ude12":"7","\ud835\udfd5":"7","\ud835\udfdf":"7","\ud835\udfe9":"7","\ud835\udff3":"7","\ud835\udffd":"7","\ud83e\udff7":"7","\ud801\udcd2":"7","\ud806\udcc6":"7","\u2466":"\u2786","\ud83c\udd08":"7,","\u248e":"7.","\u33e6":"7\u65e5","\u32c6":"7\u6708","\u335f":"7\u70b9","\u0b03":"8","\u09ea":"8","\u0a6a":"8","\ud83a\udccb":"8","\ud835\udfd6":"8","\ud835\udfe0":"8","\ud835\udfea":"8","\ud835\udff4":"8","\ud835\udffe":"8","\ud83e\udff8":"8","\u0223":"8","\u0222":"8","\ud800\udf1a":"8","\u0aee":"\u096e","\u2467":"\u2787","\ud83c\udd09":"8,","\u248f":"8.","\u33e7":"8\u65e5","\u32c7":"8\u6708","\u3360":"8\u70b9","\u0a67":"9","\u0b68":"9","\u09ed":"9","\u0d6d":"9","\ud835\udfd7":"9","\ud835\udfe1":"9","\ud835\udfeb":"9","\ud835\udff5":"9","\ud835\udfff":"9","\ud83e\udff9":"9","\ua76e":"9","\u2cca":"9","\ud806\udccc":"9","\ud806\udcac":"9","\ud806\udcd6":"9","\u0967":"\u0669","\ud806\udce4":"\u0669","\u06f9":"\u0669","\u0cef":"\u0c6f","\u2468":"\u2788","\ud83c\udd0a":"9,","\u2490":"9.","\u33e8":"9\u65e5","\u32c8":"9\u6708","\u3361":"9\u70b9","\u237a":"a","\uff41":"a","\ud835\udc1a":"a","\ud835\udc4e":"a","\ud835\udc82":"a","\ud835\udcb6":"a","\ud835\udcea":"a","\ud835\udd1e":"a","\ud835\udd52":"a","\ud835\udd86":"a","\ud835\uddba":"a","\ud835\uddee":"a","\ud835\ude22":"a","\ud835\ude56":"a","\ud835\ude8a":"a","\u0251":"a","\u03b1":"a","\ud835\udec2":"a","\ud835\udefc":"a","\ud835\udf36":"a","\ud835\udf70":"a","\ud835\udfaa":"a","\u0430":"a","\u2df6":"\u0363","\uff21":"A","\ud835\udc00":"A","\ud835\udc34":"A","\ud835\udc68":"A","\ud835\udc9c":"A","\ud835\udcd0":"A","\ud835\udd04":"A","\ud835\udd38":"A","\ud835\udd6c":"A","\ud835\udda0":"A","\ud835\uddd4":"A","\ud835\ude08":"A","\ud835\ude3c":"A","\ud835\ude70":"A","\u0391":"A","\ud835\udea8":"A","\ud835\udee2":"A","\ud835\udf1c":"A","\ud835\udf56":"A","\ud835\udf90":"A","\u0410":"A","\u13aa":"A","\u15c5":"A","\ua4ee":"A","\ud81b\udf40":"A","\ud800\udea0":"A","\u2376":"a\u0332","\u01ce":"\u0103","\u01cd":"\u0102","\u0227":"\xe5","\u0226":"\xc5","\u1e9a":"\u1ea3","\u2100":"a/c","\u2101":"a/s","\ua733":"aa","\ua732":"AA","\xe6":"ae","\u04d5":"ae","\xc6":"AE","\u04d4":"AE","\ua735":"ao","\ua734":"AO","\ud83d\udf07":"AR","\ua737":"au","\ua736":"AU","\ua739":"av","\ua73b":"av","\ua738":"AV","\ua73a":"AV","\ua73d":"ay","\ua73c":"AY","\uab7a":"\u1d00","\u2200":"\u2c6f","\ud834\ude17":"\u2c6f","\u15c4":"\u2c6f","\ua4ef":"\u2c6f","\ud801\udc1f":"\u2c70","\ud835\udc1b":"b","\ud835\udc4f":"b","\ud835\udc83":"b","\ud835\udcb7":"b","\ud835\udceb":"b","\ud835\udd1f":"b","\ud835\udd53":"b","\ud835\udd87":"b","\ud835\uddbb":"b","\ud835\uddef":"b","\ud835\ude23":"b","\ud835\ude57":"b","\ud835\ude8b":"b","\u0184":"b","\u042c":"b","\u13cf":"b","\u1472":"b","\u15af":"b","\uff22":"B","\u212c":"B","\ud835\udc01":"B","\ud835\udc35":"B","\ud835\udc69":"B","\ud835\udcd1":"B","\ud835\udd05":"B","\ud835\udd39":"B","\ud835\udd6d":"B","\ud835\udda1":"B","\ud835\uddd5":"B","\ud835\ude09":"B","\ud835\ude3d":"B","\ud835\ude71":"B","\ua7b4":"B","\u0392":"B","\ud835\udea9":"B","\ud835\udee3":"B","\ud835\udf1d":"B","\ud835\udf57":"B","\ud835\udf91":"B","\u0412":"B","\u13f4":"B","\u15f7":"B","\ua4d0":"B","\ud800\ude82":"B","\ud800\udea1":"B","\ud800\udf01":"B","\u0253":"b\u0314","\u1473":"b\u0307","\u0183":"b\u0304","\u0182":"b\u0304","\u0411":"b\u0304","\u0180":"b\u0335","\u048d":"b\u0335","\u048c":"b\u0335","\u0463":"b\u0335","\u0462":"b\u0335","\u147f":"b\xb7","\u1481":"b\u0307\xb7","\u1488":"b\'","\u042b":"bl","\u0432":"\u0299","\u13fc":"\u0299","\uff43":"c","\u217d":"c","\ud835\udc1c":"c","\ud835\udc50":"c","\ud835\udc84":"c","\ud835\udcb8":"c","\ud835\udcec":"c","\ud835\udd20":"c","\ud835\udd54":"c","\ud835\udd88":"c","\ud835\uddbc":"c","\ud835\uddf0":"c","\ud835\ude24":"c","\ud835\ude58":"c","\ud835\ude8c":"c","\u1d04":"c","\u03f2":"c","\u2ca5":"c","\u0441":"c","\uabaf":"c","\ud801\udc3d":"c","\u2ded":"\u0368","\ud83d\udf4c":"C","\ud806\udcf2":"C","\ud806\udce9":"C","\uff23":"C","\u216d":"C","\u2102":"C","\u212d":"C","\ud835\udc02":"C","\ud835\udc36":"C","\ud835\udc6a":"C","\ud835\udc9e":"C","\ud835\udcd2":"C","\ud835\udd6e":"C","\ud835\udda2":"C","\ud835\uddd6":"C","\ud835\ude0a":"C","\ud835\ude3e":"C","\ud835\ude72":"C","\u03f9":"C","\u2ca4":"C","\u0421":"C","\u13df":"C","\ua4da":"C","\ud800\udea2":"C","\ud800\udf02":"C","\ud801\udc15":"C","\ud801\udd1c":"C","\xa2":"c\u0338","\u023c":"c\u0338","\u20a1":"C\u20eb","\ud83c\udd6e":"C\u20e0","\xe7":"c\u0326","\u04ab":"c\u0326","\xc7":"C\u0326","\u04aa":"C\u0326","\u0187":"C\'","\u2105":"c/o","\u2106":"c/u","\ud83c\udd6d":"\u33c4\\t\u20dd","\u22f4":"\ua793","\u025b":"\ua793","\u03b5":"\ua793","\u03f5":"\ua793","\ud835\udec6":"\ua793","\ud835\udedc":"\ua793","\ud835\udf00":"\ua793","\ud835\udf16":"\ua793","\ud835\udf3a":"\ua793","\ud835\udf50":"\ua793","\ud835\udf74":"\ua793","\ud835\udf8a":"\ua793","\ud835\udfae":"\ua793","\ud835\udfc4":"\ua793","\u2c89":"\ua793","\u0454":"\ua793","\u0511":"\ua793","\uab9b":"\ua793","\ud806\udcce":"\ua793","\ud801\udc29":"\ua793","\u20ac":"\ua792","\u2c88":"\ua792","\u0404":"\ua792","\u2377":"\ua793\u0332","\u037d":"\ua73f","\u03ff":"\ua73e","\u217e":"d","\u2146":"d","\ud835\udc1d":"d","\ud835\udc51":"d","\ud835\udc85":"d","\ud835\udcb9":"d","\ud835\udced":"d","\ud835\udd21":"d","\ud835\udd55":"d","\ud835\udd89":"d","\ud835\uddbd":"d","\ud835\uddf1":"d","\ud835\ude25":"d","\ud835\ude59":"d","\ud835\ude8d":"d","\u0501":"d","\u13e7":"d","\u146f":"d","\ua4d2":"d","\u216e":"D","\u2145":"D","\ud835\udc03":"D","\ud835\udc37":"D","\ud835\udc6b":"D","\ud835\udc9f":"D","\ud835\udcd3":"D","\ud835\udd07":"D","\ud835\udd3b":"D","\ud835\udd6f":"D","\ud835\udda3":"D","\ud835\uddd7":"D","\ud835\ude0b":"D","\ud835\ude3f":"D","\ud835\ude73":"D","\u13a0":"D","\u15de":"D","\u15ea":"D","\ua4d3":"D","\u0257":"d\u0314","\u0256":"d\u0328","\u018c":"d\u0304","\u0111":"d\u0335","\u0110":"D\u0335","\xd0":"D\u0335","\u0189":"D\u0335","\u20ab":"d\u0335\u0331","\ua77a":"\ua779","\u147b":"d\xb7","\u1487":"d\'","\u02a4":"d\u021d","\u01f3":"dz","\u02a3":"dz","\u01f2":"Dz","\u01f1":"DZ","\u01c6":"d\u017e","\u01c5":"D\u017e","\u01c4":"D\u017d","\u02a5":"d\u0291","\uab70":"\u1d05","\u2e39":"\u1e9f","\u03b4":"\u1e9f","\ud835\udec5":"\u1e9f","\ud835\udeff":"\u1e9f","\ud835\udf39":"\u1e9f","\ud835\udf73":"\u1e9f","\ud835\udfad":"\u1e9f","\u056e":"\u1e9f","\u1577":"\u1e9f","\u212e":"e","\uff45":"e","\u212f":"e","\u2147":"e","\ud835\udc1e":"e","\ud835\udc52":"e","\ud835\udc86":"e","\ud835\udcee":"e","\ud835\udd22":"e","\ud835\udd56":"e","\ud835\udd8a":"e","\ud835\uddbe":"e","\ud835\uddf2":"e","\ud835\ude26":"e","\ud835\ude5a":"e","\ud835\ude8e":"e","\uab32":"e","\u0435":"e","\u04bd":"e","\u2df7":"\u0364","\u22ff":"E","\uff25":"E","\u2130":"E","\ud835\udc04":"E","\ud835\udc38":"E","\ud835\udc6c":"E","\ud835\udcd4":"E","\ud835\udd08":"E","\ud835\udd3c":"E","\ud835\udd70":"E","\ud835\udda4":"E","\ud835\uddd8":"E","\ud835\ude0c":"E","\ud835\ude40":"E","\ud835\ude74":"E","\u0395":"E","\ud835\udeac":"E","\ud835\udee6":"E","\ud835\udf20":"E","\ud835\udf5a":"E","\ud835\udf94":"E","\u0415":"E","\u2d39":"E","\u13ac":"E","\ua4f0":"E","\ud806\udca6":"E","\ud806\udcae":"E","\ud800\ude86":"E","\u011b":"\u0115","\u011a":"\u0114","\u0247":"e\u0338","\u0246":"E\u0338","\u04bf":"e\u0328","\uab7c":"\u1d07","\u0259":"\u01dd","\u04d9":"\u01dd","\u2203":"\u018e","\u2d3a":"\u018e","\ua4f1":"\u018e","\u025a":"\u01dd\u02de","\u1d14":"\u01ddo","\uab41":"\u01ddo\u0338","\uab42":"\u01ddo\u0335","\u04d8":"\u018f","\ud834\ude21":"\u0190","\u2107":"\u0190","\u0510":"\u0190","\u13cb":"\u0190","\ud81b\udf2d":"\u0190","\ud801\udc01":"\u0190","\u1d9f":"\u1d4b","\u1d08":"\u025c","\u0437":"\u025c","\u0499":"\u025c\u0326","\ud801\udc42":"\u025e","\ua79d":"\u029a","\ud801\udc2a":"\u029a","\ud835\udc1f":"f","\ud835\udc53":"f","\ud835\udc87":"f","\ud835\udcbb":"f","\ud835\udcef":"f","\ud835\udd23":"f","\ud835\udd57":"f","\ud835\udd8b":"f","\ud835\uddbf":"f","\ud835\uddf3":"f","\ud835\ude27":"f","\ud835\ude5b":"f","\ud835\ude8f":"f","\uab35":"f","\ua799":"f","\u017f":"f","\u1e9d":"f","\u0584":"f","\ud834\ude13":"F","\u2131":"F","\ud835\udc05":"F","\ud835\udc39":"F","\ud835\udc6d":"F","\ud835\udcd5":"F","\ud835\udd09":"F","\ud835\udd3d":"F","\ud835\udd71":"F","\ud835\udda5":"F","\ud835\uddd9":"F","\ud835\ude0d":"F","\ud835\ude41":"F","\ud835\ude75":"F","\ua798":"F","\u03dc":"F","\ud835\udfca":"F","\u15b4":"F","\ua4dd":"F","\ud806\udcc2":"F","\ud806\udca2":"F","\ud800\ude87":"F","\ud800\udea5":"F","\ud801\udd25":"F","\u0192":"f\u0326","\u0191":"F\u0326","\u1d6e":"f\u0334","\u213b":"FAX","\ufb00":"ff","\ufb03":"ffi","\ufb04":"ffl","\ufb01":"fi","\ufb02":"fl","\u02a9":"f\u014b","\u15b5":"\u2132","\ua4de":"\u2132","\ud834\ude30":"\ua7fb","\u15b7":"\ua7fb","\uff47":"g","\u210a":"g","\ud835\udc20":"g","\ud835\udc54":"g","\ud835\udc88":"g","\ud835\udcf0":"g","\ud835\udd24":"g","\ud835\udd58":"g","\ud835\udd8c":"g","\ud835\uddc0":"g","\ud835\uddf4":"g","\ud835\ude28":"g","\ud835\ude5c":"g","\ud835\ude90":"g","\u0261":"g","\u1d83":"g","\u018d":"g","\u0581":"g","\ud835\udc06":"G","\ud835\udc3a":"G","\ud835\udc6e":"G","\ud835\udca2":"G","\ud835\udcd6":"G","\ud835\udd0a":"G","\ud835\udd3e":"G","\ud835\udd72":"G","\ud835\udda6":"G","\ud835\uddda":"G","\ud835\ude0e":"G","\ud835\ude42":"G","\ud835\ude76":"G","\u050c":"G","\u13c0":"G","\u13f3":"G","\ua4d6":"G","\u1da2":"\u1d4d","\u0260":"g\u0314","\u01e7":"\u011f","\u01e6":"\u011e","\u01f5":"\u0123","\u01e5":"g\u0335","\u01e4":"G\u0335","\u0193":"G\'","\u050d":"\u0262","\uab90":"\u0262","\u13fb":"\u0262","\uff48":"h","\u210e":"h","\ud835\udc21":"h","\ud835\udc89":"h","\ud835\udcbd":"h","\ud835\udcf1":"h","\ud835\udd25":"h","\ud835\udd59":"h","\ud835\udd8d":"h","\ud835\uddc1":"h","\ud835\uddf5":"h","\ud835\ude29":"h","\ud835\ude5d":"h","\ud835\ude91":"h","\u04bb":"h","\u0570":"h","\u13c2":"h","\uff28":"H","\u210b":"H","\u210c":"H","\u210d":"H","\ud835\udc07":"H","\ud835\udc3b":"H","\ud835\udc6f":"H","\ud835\udcd7":"H","\ud835\udd73":"H","\ud835\udda7":"H","\ud835\udddb":"H","\ud835\ude0f":"H","\ud835\ude43":"H","\ud835\ude77":"H","\u0397":"H","\ud835\udeae":"H","\ud835\udee8":"H","\ud835\udf22":"H","\ud835\udf5c":"H","\ud835\udf96":"H","\u2c8e":"H","\u041d":"H","\u13bb":"H","\u157c":"H","\ua4e7":"H","\ud800\udecf":"H","\u1d78":"\u1d34","\u0266":"h\u0314","\ua695":"h\u0314","\u13f2":"h\u0314","\u2c67":"H\u0329","\u04a2":"H\u0329","\u0127":"h\u0335","\u210f":"h\u0335","\u045b":"h\u0335","\u0126":"H\u0335","\u04c9":"H\u0326","\u04c7":"H\u0326","\u043d":"\u029c","\uab8b":"\u029c","\u04a3":"\u029c\u0329","\u04ca":"\u029c\u0326","\u04c8":"\u029c\u0326","\u050a":"\u01f6","\uab80":"\u2c76","\u0370":"\u2c75","\u13a8":"\u2c75","\u13b0":"\u2c75","\ua6b1":"\u2c75","\ua795":"\ua727","\u02db":"i","\u2373":"i","\uff49":"i","\u2170":"i","\u2139":"i","\u2148":"i","\ud835\udc22":"i","\ud835\udc56":"i","\ud835\udc8a":"i","\ud835\udcbe":"i","\ud835\udcf2":"i","\ud835\udd26":"i","\ud835\udd5a":"i","\ud835\udd8e":"i","\ud835\uddc2":"i","\ud835\uddf6":"i","\ud835\ude2a":"i","\ud835\ude5e":"i","\ud835\ude92":"i","\u0131":"i","\ud835\udea4":"i","\u026a":"i","\u0269":"i","\u03b9":"i","\u1fbe":"i","\u037a":"i","\ud835\udeca":"i","\ud835\udf04":"i","\ud835\udf3e":"i","\ud835\udf78":"i","\ud835\udfb2":"i","\u0456":"i","\ua647":"i","\u04cf":"i","\uab75":"i","\u13a5":"i","\ud806\udcc3":"i","\u24db":"\u24be","\u2378":"i\u0332","\u01d0":"\u012d","\u01cf":"\u012c","\u0268":"i\u0335","\u1d7b":"i\u0335","\u1d7c":"i\u0335","\u2171":"ii","\u2172":"iii","\u0133":"ij","\u2173":"iv","\u2178":"ix","\uff4a":"j","\u2149":"j","\ud835\udc23":"j","\ud835\udc57":"j","\ud835\udc8b":"j","\ud835\udcbf":"j","\ud835\udcf3":"j","\ud835\udd27":"j","\ud835\udd5b":"j","\ud835\udd8f":"j","\ud835\uddc3":"j","\ud835\uddf7":"j","\ud835\ude2b":"j","\ud835\ude5f":"j","\ud835\ude93":"j","\u03f3":"j","\u0458":"j","\uff2a":"J","\ud835\udc09":"J","\ud835\udc3d":"J","\ud835\udc71":"J","\ud835\udca5":"J","\ud835\udcd9":"J","\ud835\udd0d":"J","\ud835\udd41":"J","\ud835\udd75":"J","\ud835\udda9":"J","\ud835\udddd":"J","\ud835\ude11":"J","\ud835\ude45":"J","\ud835\ude79":"J","\ua7b2":"J","\u037f":"J","\u0408":"J","\u13ab":"J","\u148d":"J","\ua4d9":"J","\u0249":"j\u0335","\u0248":"J\u0335","\u1499":"J\xb7","\ud835\udea5":"\u0237","\u0575":"\u0237","\uab7b":"\u1d0a","\ud835\udc24":"k","\ud835\udc58":"k","\ud835\udc8c":"k","\ud835\udcc0":"k","\ud835\udcf4":"k","\ud835\udd28":"k","\ud835\udd5c":"k","\ud835\udd90":"k","\ud835\uddc4":"k","\ud835\uddf8":"k","\ud835\ude2c":"k","\ud835\ude60":"k","\ud835\ude94":"k","\u212a":"K","\uff2b":"K","\ud835\udc0a":"K","\ud835\udc3e":"K","\ud835\udc72":"K","\ud835\udca6":"K","\ud835\udcda":"K","\ud835\udd0e":"K","\ud835\udd42":"K","\ud835\udd76":"K","\ud835\uddaa":"K","\ud835\uddde":"K","\ud835\ude12":"K","\ud835\ude46":"K","\ud835\ude7a":"K","\u039a":"K","\ud835\udeb1":"K","\ud835\udeeb":"K","\ud835\udf25":"K","\ud835\udf5f":"K","\ud835\udf99":"K","\u2c94":"K","\u041a":"K","\u13e6":"K","\u16d5":"K","\ua4d7":"K","\ud801\udd18":"K","\u0199":"k\u0314","\u2c69":"K\u0329","\u049a":"K\u0329","\u20ad":"K\u0335","\ua740":"K\u0335","\u049e":"K\u0335","\u0198":"K\'","\u05c0":"l","|":"l","\u2223":"l","\u23fd":"l","\uffe8":"l","\u0661":"l","\u06f1":"l","\ud800\udf20":"l","\ud83a\udcc7":"l","\ud835\udfcf":"l","\ud835\udfd9":"l","\ud835\udfe3":"l","\ud835\udfed":"l","\ud835\udff7":"l","\ud83e\udff1":"l","I":"l","\uff29":"l","\u2160":"l","\u2110":"l","\u2111":"l","\ud835\udc08":"l","\ud835\udc3c":"l","\ud835\udc70":"l","\ud835\udcd8":"l","\ud835\udd40":"l","\ud835\udd74":"l","\ud835\udda8":"l","\ud835\udddc":"l","\ud835\ude10":"l","\ud835\ude44":"l","\ud835\ude78":"l","\u0196":"l","\uff4c":"l","\u217c":"l","\u2113":"l","\ud835\udc25":"l","\ud835\udc59":"l","\ud835\udc8d":"l","\ud835\udcc1":"l","\ud835\udcf5":"l","\ud835\udd29":"l","\ud835\udd5d":"l","\ud835\udd91":"l","\ud835\uddc5":"l","\ud835\uddf9":"l","\ud835\ude2d":"l","\ud835\ude61":"l","\ud835\ude95":"l","\u01c0":"l","\u0399":"l","\ud835\udeb0":"l","\ud835\udeea":"l","\ud835\udf24":"l","\ud835\udf5e":"l","\ud835\udf98":"l","\u2c92":"l","\u0406":"l","\u04c0":"l","\u05d5":"l","\u05df":"l","\u0627":"l","\ud83b\ude00":"l","\ud83b\ude80":"l","\ufe8e":"l","\ufe8d":"l","\u07ca":"l","\u2d4f":"l","\u16c1":"l","\ua4f2":"l","\ud81b\udf28":"l","\ud800\ude8a":"l","\ud800\udf09":"l","\ud834\ude2a":"L","\u216c":"L","\u2112":"L","\ud835\udc0b":"L","\ud835\udc3f":"L","\ud835\udc73":"L","\ud835\udcdb":"L","\ud835\udd0f":"L","\ud835\udd43":"L","\ud835\udd77":"L","\ud835\uddab":"L","\ud835\udddf":"L","\ud835\ude13":"L","\ud835\ude47":"L","\ud835\ude7b":"L","\u2cd0":"L","\u13de":"L","\u14aa":"L","\ua4e1":"L","\ud81b\udf16":"L","\ud806\udca3":"L","\ud806\udcb2":"L","\ud801\udc1b":"L","\ud801\udd26":"L","\ufd3c":"l\u030b","\ufd3d":"l\u030b","\u0142":"l\u0338","\u0141":"L\u0338","\u026d":"l\u0328","\u0197":"l\u0335","\u019a":"l\u0335","\u026b":"l\u0334","\u0625":"l\u0655","\ufe88":"l\u0655","\ufe87":"l\u0655","\u0673":"l\u0655","\u0140":"l\xb7","\u013f":"l\xb7","\u14b7":"l\xb7","\ud83c\udd02":"l,","\u2488":"l.","\u05f1":"l\'","\u2493":"l2.","\u33eb":"l2\u65e5","\u32cb":"l2\u6708","\u3364":"l2\u70b9","\u2494":"l3.","\u33ec":"l3\u65e5","\u3365":"l3\u70b9","\u2495":"l4.","\u33ed":"l4\u65e5","\u3366":"l4\u70b9","\u2496":"l5.","\u33ee":"l5\u65e5","\u3367":"l5\u70b9","\u2497":"l6.","\u33ef":"l6\u65e5","\u3368":"l6\u70b9","\u2498":"l7.","\u33f0":"l7\u65e5","\u3369":"l7\u70b9","\u2499":"l8.","\u33f1":"l8\u65e5","\u336a":"l8\u70b9","\u249a":"l9.","\u33f2":"l9\u65e5","\u336b":"l9\u70b9","\u01c9":"lj","\u0132":"lJ","\u01c8":"Lj","\u01c7":"LJ","\u2016":"ll","\u2225":"ll","\u2161":"ll","\u01c1":"ll","\u05f0":"ll","\ud800\udd99":"l\u0335l\u0335","\u2492":"ll.","\u2162":"lll","\ud800\udd98":"l\u0335l\u0335S\u0335","\u33ea":"ll\u65e5","\u32ca":"ll\u6708","\u3363":"ll\u70b9","\u042e":"lO","\u2491":"lO.","\u33e9":"lO\u65e5","\u32c9":"lO\u6708","\u3362":"lO\u70b9","\u02aa":"ls","\u20b6":"lt","\u2163":"lV","\u2168":"lX","\u026e":"l\u021d","\u02ab":"lz","\u0623":"l\u0674","\ufe84":"l\u0674","\ufe83":"l\u0674","\u0672":"l\u0674","\u0675":"l\u0674","\ufdf3":"l\u0643\u0628\u0631","\ufdf2":"l\u0644\u0644\u0651\u0670o","\u33e0":"l\u65e5","\u32c0":"l\u6708","\u3359":"l\u70b9","\u2cd1":"\u029f","\uabae":"\u029f","\ud801\udc43":"\u029f","\uff2d":"M","\u216f":"M","\u2133":"M","\ud835\udc0c":"M","\ud835\udc40":"M","\ud835\udc74":"M","\ud835\udcdc":"M","\ud835\udd10":"M","\ud835\udd44":"M","\ud835\udd78":"M","\ud835\uddac":"M","\ud835\udde0":"M","\ud835\ude14":"M","\ud835\ude48":"M","\ud835\ude7c":"M","\u039c":"M","\ud835\udeb3":"M","\ud835\udeed":"M","\ud835\udf27":"M","\ud835\udf61":"M","\ud835\udf9b":"M","\u03fa":"M","\u2c98":"M","\u041c":"M","\u13b7":"M","\u15f0":"M","\u16d6":"M","\ua4df":"M","\ud800\udeb0":"M","\ud800\udf11":"M","\u04cd":"M\u0326","\ud83d\udf6b":"MB","\u2de8":"\u1ddf","\ud835\udc27":"n","\ud835\udc5b":"n","\ud835\udc8f":"n","\ud835\udcc3":"n","\ud835\udcf7":"n","\ud835\udd2b":"n","\ud835\udd5f":"n","\ud835\udd93":"n","\ud835\uddc7":"n","\ud835\uddfb":"n","\ud835\ude2f":"n","\ud835\ude63":"n","\ud835\ude97":"n","\u0578":"n","\u057c":"n","\uff2e":"N","\u2115":"N","\ud835\udc0d":"N","\ud835\udc41":"N","\ud835\udc75":"N","\ud835\udca9":"N","\ud835\udcdd":"N","\ud835\udd11":"N","\ud835\udd79":"N","\ud835\uddad":"N","\ud835\udde1":"N","\ud835\ude15":"N","\ud835\ude49":"N","\ud835\ude7d":"N","\u039d":"N","\ud835\udeb4":"N","\ud835\udeee":"N","\ud835\udf28":"N","\ud835\udf62":"N","\ud835\udf9c":"N","\u2c9a":"N","\ua4e0":"N","\ud801\udd13":"N","\ud800\udd8e":"N\u030a","\u0273":"n\u0328","\u019e":"n\u0329","\u03b7":"n\u0329","\ud835\udec8":"n\u0329","\ud835\udf02":"n\u0329","\ud835\udf3c":"n\u0329","\ud835\udf76":"n\u0329","\ud835\udfb0":"n\u0329","\u019d":"N\u0326","\u1d70":"n\u0334","\u01cc":"nj","\u01cb":"Nj","\u01ca":"NJ","\u2116":"No","\u0377":"\u1d0e","\u0438":"\u1d0e","\ud801\udc4d":"\u1d0e","\u0146":"\u0272","\u0c02":"o","\u0c82":"o","\u0d02":"o","\u0d82":"o","\u0966":"o","\u0a66":"o","\u0ae6":"o","\u0be6":"o","\u0c66":"o","\u0ce6":"o","\u0d66":"o","\u0e50":"o","\u0ed0":"o","\u1040":"o","\u0665":"o","\u06f5":"o","\uff4f":"o","\u2134":"o","\ud835\udc28":"o","\ud835\udc5c":"o","\ud835\udc90":"o","\ud835\udcf8":"o","\ud835\udd2c":"o","\ud835\udd60":"o","\ud835\udd94":"o","\ud835\uddc8":"o","\ud835\uddfc":"o","\ud835\ude30":"o","\ud835\ude64":"o","\ud835\ude98":"o","\u1d0f":"o","\u1d11":"o","\uab3d":"o","\u03bf":"o","\ud835\uded0":"o","\ud835\udf0a":"o","\ud835\udf44":"o","\ud835\udf7e":"o","\ud835\udfb8":"o","\u03c3":"o","\ud835\uded4":"o","\ud835\udf0e":"o","\ud835\udf48":"o","\ud835\udf82":"o","\ud835\udfbc":"o","\u2c9f":"o","\u043e":"o","\u10ff":"o","\u0585":"o","\u05e1":"o","\u0647":"o","\ud83b\ude24":"o","\ud83b\ude64":"o","\ud83b\ude84":"o","\ufeeb":"o","\ufeec":"o","\ufeea":"o","\ufee9":"o","\u06be":"o","\ufbac":"o","\ufbad":"o","\ufbab":"o","\ufbaa":"o","\u06c1":"o","\ufba8":"o","\ufba9":"o","\ufba7":"o","\ufba6":"o","\u06d5":"o","\u0d20":"o","\u101d":"o","\ud801\udcea":"o","\ud806\udcc8":"o","\ud806\udcd7":"o","\ud801\udc2c":"o","\u07c0":"O","\u09e6":"O","\u0b66":"O","\u3007":"O","\ud805\udcd0":"O","\ud806\udce0":"O","\ud835\udfce":"O","\ud835\udfd8":"O","\ud835\udfe2":"O","\ud835\udfec":"O","\ud835\udff6":"O","\ud83e\udff0":"O","\uff2f":"O","\ud835\udc0e":"O","\ud835\udc42":"O","\ud835\udc76":"O","\ud835\udcaa":"O","\ud835\udcde":"O","\ud835\udd12":"O","\ud835\udd46":"O","\ud835\udd7a":"O","\ud835\uddae":"O","\ud835\udde2":"O","\ud835\ude16":"O","\ud835\ude4a":"O","\ud835\ude7e":"O","\u039f":"O","\ud835\udeb6":"O","\ud835\udef0":"O","\ud835\udf2a":"O","\ud835\udf64":"O","\ud835\udf9e":"O","\u2c9e":"O","\u041e":"O","\u0555":"O","\u2d54":"O","\u12d0":"O","\u0b20":"O","\ud801\udcc2":"O","\ua4f3":"O","\ud806\udcb5":"O","\ud800\ude92":"O","\ud800\udeab":"O","\ud801\udc04":"O","\ud801\udd16":"O","\u2070":"\xba","\u1d52":"\xba","\u01d2":"\u014f","\u01d1":"\u014e","\u06ff":"o\u0302","\u0150":"\xd6","\xf8":"o\u0338","\uab3e":"o\u0338","\xd8":"O\u0338","\u2d41":"O\u0338","\u01fe":"O\u0338\u0301","\u0275":"o\u0335","\ua74b":"o\u0335","\u04e9":"o\u0335","\u0473":"o\u0335","\uab8e":"o\u0335","\uabbb":"o\u0335","\u2296":"O\u0335","\u229d":"O\u0335","\u236c":"O\u0335","\ud834\ude1a":"O\u0335","\ud83d\udf14":"O\u0335","\u019f":"O\u0335","\ua74a":"O\u0335","\u03b8":"O\u0335","\u03d1":"O\u0335","\ud835\udec9":"O\u0335","\ud835\udedd":"O\u0335","\ud835\udf03":"O\u0335","\ud835\udf17":"O\u0335","\ud835\udf3d":"O\u0335","\ud835\udf51":"O\u0335","\ud835\udf77":"O\u0335","\ud835\udf8b":"O\u0335","\ud835\udfb1":"O\u0335","\ud835\udfc5":"O\u0335","\u0398":"O\u0335","\u03f4":"O\u0335","\ud835\udeaf":"O\u0335","\ud835\udeb9":"O\u0335","\ud835\udee9":"O\u0335","\ud835\udef3":"O\u0335","\ud835\udf23":"O\u0335","\ud835\udf2d":"O\u0335","\ud835\udf5d":"O\u0335","\ud835\udf67":"O\u0335","\ud835\udf97":"O\u0335","\ud835\udfa1":"O\u0335","\u04e8":"O\u0335","\u0472":"O\u0335","\u2d31":"O\u0335","\u13be":"O\u0335","\u13eb":"O\u0335","\uab74":"o\u031b","\ufcd9":"o\u0670","\ud83c\udd01":"O,","\ud83c\udd00":"O.","\u01a1":"o\'","\u01a0":"O\'","\u13a4":"O\'","%":"\xba/\u2080","\u066a":"\xba/\u2080","\u2052":"\xba/\u2080","\u2030":"\xba/\u2080\u2080","\u0609":"\xba/\u2080\u2080","\u2031":"\xba/\u2080\u2080\u2080","\u060a":"\xba/\u2080\u2080\u2080","\u0153":"oe","\u0152":"OE","\u0276":"o\u1d07","\u221e":"oo","\ua74f":"oo","\ua699":"oo","\ua74e":"OO","\ua698":"OO","\ufcd7":"o\u062c","\ufc51":"o\u062c","\ufcd8":"o\u0645","\ufc52":"o\u0645","\ufd93":"o\u0645\u062c","\ufd94":"o\u0645\u0645","\ufc53":"o\u0649","\ufc54":"o\u0649","\u0d5f":"o\u0d30o","\u1010":"o\u102c","\u3358":"O\u70b9","\u2184":"\u0254","\u1d10":"\u0254","\u037b":"\u0254","\ud801\udc4b":"\u0254","\u2183":"\u0186","\u03fd":"\u0186","\ua4db":"\u0186","\ud801\udc23":"\u0186","\uab3f":"\u0254\u0338","\uab62":"\u0254e","\ud801\udc3f":"\u0277","\u2374":"p","\uff50":"p","\ud835\udc29":"p","\ud835\udc5d":"p","\ud835\udc91":"p","\ud835\udcc5":"p","\ud835\udcf9":"p","\ud835\udd2d":"p","\ud835\udd61":"p","\ud835\udd95":"p","\ud835\uddc9":"p","\ud835\uddfd":"p","\ud835\ude31":"p","\ud835\ude65":"p","\ud835\ude99":"p","\u03c1":"p","\u03f1":"p","\ud835\uded2":"p","\ud835\udee0":"p","\ud835\udf0c":"p","\ud835\udf1a":"p","\ud835\udf46":"p","\ud835\udf54":"p","\ud835\udf80":"p","\ud835\udf8e":"p","\ud835\udfba":"p","\ud835\udfc8":"p","\u2ca3":"p","\u0440":"p","\uff30":"P","\u2119":"P","\ud835\udc0f":"P","\ud835\udc43":"P","\ud835\udc77":"P","\ud835\udcab":"P","\ud835\udcdf":"P","\ud835\udd13":"P","\ud835\udd7b":"P","\ud835\uddaf":"P","\ud835\udde3":"P","\ud835\ude17":"P","\ud835\ude4b":"P","\ud835\ude7f":"P","\u03a1":"P","\ud835\udeb8":"P","\ud835\udef2":"P","\ud835\udf2c":"P","\ud835\udf66":"P","\ud835\udfa0":"P","\u2ca2":"P","\u0420":"P","\u13e2":"P","\u146d":"P","\ua4d1":"P","\ud800\ude95":"P","\u01a5":"p\u0314","\u1d7d":"p\u0335","\u1477":"p\xb7","\u1486":"P\'","\u1d29":"\u1d18","\uabb2":"\u1d18","\u03c6":"\u0278","\u03d5":"\u0278","\ud835\uded7":"\u0278","\ud835\udedf":"\u0278","\ud835\udf11":"\u0278","\ud835\udf19":"\u0278","\ud835\udf4b":"\u0278","\ud835\udf53":"\u0278","\ud835\udf85":"\u0278","\ud835\udf8d":"\u0278","\ud835\udfbf":"\u0278","\ud835\udfc7":"\u0278","\u2cab":"\u0278","\u0444":"\u0278","\ud835\udc2a":"q","\ud835\udc5e":"q","\ud835\udc92":"q","\ud835\udcc6":"q","\ud835\udcfa":"q","\ud835\udd2e":"q","\ud835\udd62":"q","\ud835\udd96":"q","\ud835\uddca":"q","\ud835\uddfe":"q","\ud835\ude32":"q","\ud835\ude66":"q","\ud835\ude9a":"q","\u051b":"q","\u0563":"q","\u0566":"q","\u211a":"Q","\ud835\udc10":"Q","\ud835\udc44":"Q","\ud835\udc78":"Q","\ud835\udcac":"Q","\ud835\udce0":"Q","\ud835\udd14":"Q","\ud835\udd7c":"Q","\ud835\uddb0":"Q","\ud835\udde4":"Q","\ud835\ude18":"Q","\ud835\ude4c":"Q","\ud835\ude80":"Q","\u2d55":"Q","\u02a0":"q\u0314","\ud83d\udf00":"QE","\u1d90":"\u024b","\u1d0b":"\u0138","\u03ba":"\u0138","\u03f0":"\u0138","\ud835\udecb":"\u0138","\ud835\udede":"\u0138","\ud835\udf05":"\u0138","\ud835\udf18":"\u0138","\ud835\udf3f":"\u0138","\ud835\udf52":"\u0138","\ud835\udf79":"\u0138","\ud835\udf8c":"\u0138","\ud835\udfb3":"\u0138","\ud835\udfc6":"\u0138","\u2c95":"\u0138","\u043a":"\u0138","\uabb6":"\u0138","\u049b":"\u0138\u0329","\u049f":"\u0138\u0335","\ud835\udc2b":"r","\ud835\udc5f":"r","\ud835\udc93":"r","\ud835\udcc7":"r","\ud835\udcfb":"r","\ud835\udd2f":"r","\ud835\udd63":"r","\ud835\udd97":"r","\ud835\uddcb":"r","\ud835\uddff":"r","\ud835\ude33":"r","\ud835\ude67":"r","\ud835\ude9b":"r","\uab47":"r","\uab48":"r","\u1d26":"r","\u2c85":"r","\u0433":"r","\uab81":"r","\ud834\ude16":"R","\u211b":"R","\u211c":"R","\u211d":"R","\ud835\udc11":"R","\ud835\udc45":"R","\ud835\udc79":"R","\ud835\udce1":"R","\ud835\udd7d":"R","\ud835\uddb1":"R","\ud835\udde5":"R","\ud835\ude19":"R","\ud835\ude4d":"R","\ud835\ude81":"R","\u01a6":"R","\u13a1":"R","\u13d2":"R","\ud801\udcb4":"R","\u1587":"R","\ua4e3":"R","\ud81b\udf35":"R","\u027d":"r\u0328","\u027c":"r\u0329","\u024d":"r\u0335","\u0493":"r\u0335","\u1d72":"r\u0334","\u0491":"r\'","\ud806\udce3":"rn","m":"rn","\u217f":"rn","\ud835\udc26":"rn","\ud835\udc5a":"rn","\ud835\udc8e":"rn","\ud835\udcc2":"rn","\ud835\udcf6":"rn","\ud835\udd2a":"rn","\ud835\udd5e":"rn","\ud835\udd92":"rn","\ud835\uddc6":"rn","\ud835\uddfa":"rn","\ud835\ude2e":"rn","\ud835\ude62":"rn","\ud835\ude96":"rn","\ud805\udf00":"rn","\u20a5":"rn\u0338","\u0271":"rn\u0326","\u1d6f":"rn\u0334","\u20a8":"Rs","\uab71":"\u0280","\uaba2":"\u0280","\u044f":"\u1d19","\u1d73":"\u027e\u0334","\u2129":"\u027f","\uff53":"s","\ud835\udc2c":"s","\ud835\udc60":"s","\ud835\udc94":"s","\ud835\udcc8":"s","\ud835\udcfc":"s","\ud835\udd30":"s","\ud835\udd64":"s","\ud835\udd98":"s","\ud835\uddcc":"s","\ud835\ude00":"s","\ud835\ude34":"s","\ud835\ude68":"s","\ud835\ude9c":"s","\ua731":"s","\u01bd":"s","\u0455":"s","\uabaa":"s","\ud806\udcc1":"s","\ud801\udc48":"s","\uff33":"S","\ud835\udc12":"S","\ud835\udc46":"S","\ud835\udc7a":"S","\ud835\udcae":"S","\ud835\udce2":"S","\ud835\udd16":"S","\ud835\udd4a":"S","\ud835\udd7e":"S","\ud835\uddb2":"S","\ud835\udde6":"S","\ud835\ude1a":"S","\ud835\ude4e":"S","\ud835\ude82":"S","\u0405":"S","\u054f":"S","\u13d5":"S","\u13da":"S","\ua4e2":"S","\ud81b\udf3a":"S","\ud800\ude96":"S","\ud801\udc20":"S","\u0282":"s\u0328","\u1d74":"s\u0334","\ua7b5":"\xdf","\u03b2":"\xdf","\u03d0":"\xdf","\ud835\udec3":"\xdf","\ud835\udefd":"\xdf","\ud835\udf37":"\xdf","\ud835\udf71":"\xdf","\ud835\udfab":"\xdf","\u13f0":"\xdf","\ud83d\udf5c":"sss","\ufb06":"st","\u222b":"\u0283","\uab4d":"\u0283","\u2211":"\u01a9","\u2140":"\u01a9","\u03a3":"\u01a9","\ud835\udeba":"\u01a9","\ud835\udef4":"\u01a9","\ud835\udf2e":"\u01a9","\ud835\udf68":"\u01a9","\ud835\udfa2":"\u01a9","\u2d49":"\u01a9","\u222c":"\u0283\u0283","\u222d":"\u0283\u0283\u0283","\u2a0c":"\u0283\u0283\u0283\u0283","\ud835\udc2d":"t","\ud835\udc61":"t","\ud835\udc95":"t","\ud835\udcc9":"t","\ud835\udcfd":"t","\ud835\udd31":"t","\ud835\udd65":"t","\ud835\udd99":"t","\ud835\uddcd":"t","\ud835\ude01":"t","\ud835\ude35":"t","\ud835\ude69":"t","\ud835\ude9d":"t","\u22a4":"T","\u27d9":"T","\ud83d\udf68":"T","\uff34":"T","\ud835\udc13":"T","\ud835\udc47":"T","\ud835\udc7b":"T","\ud835\udcaf":"T","\ud835\udce3":"T","\ud835\udd17":"T","\ud835\udd4b":"T","\ud835\udd7f":"T","\ud835\uddb3":"T","\ud835\udde7":"T","\ud835\ude1b":"T","\ud835\ude4f":"T","\ud835\ude83":"T","\u03a4":"T","\ud835\udebb":"T","\ud835\udef5":"T","\ud835\udf2f":"T","\ud835\udf69":"T","\ud835\udfa3":"T","\u2ca6":"T","\u0422":"T","\u13a2":"T","\ua4d4":"T","\ud81b\udf0a":"T","\ud806\udcbc":"T","\ud800\ude97":"T","\ud800\udeb1":"T","\ud800\udf15":"T","\u01ad":"t\u0314","\u2361":"T\u0308","\u023e":"T\u0338","\u021a":"\u0162","\u01ae":"T\u0328","\u04ac":"T\u0329","\u20ae":"T\u20eb","\u0167":"t\u0335","\u0166":"T\u0335","\u1d75":"t\u0334","\u10a0":"\ua786","\ua728":"T3","\u02a8":"t\u0255","\u2121":"TEL","\ua777":"tf","\u02a6":"ts","\u02a7":"t\u0283","\ua729":"t\u021d","\u03c4":"\u1d1b","\ud835\uded5":"\u1d1b","\ud835\udf0f":"\u1d1b","\ud835\udf49":"\u1d1b","\ud835\udf83":"\u1d1b","\ud835\udfbd":"\u1d1b","\u0442":"\u1d1b","\uab72":"\u1d1b","\u04ad":"\u1d1b\u0329","\u0163":"\u01ab","\u021b":"\u01ab","\u13bf":"\u01ab","\ud835\udc2e":"u","\ud835\udc62":"u","\ud835\udc96":"u","\ud835\udcca":"u","\ud835\udcfe":"u","\ud835\udd32":"u","\ud835\udd66":"u","\ud835\udd9a":"u","\ud835\uddce":"u","\ud835\ude02":"u","\ud835\ude36":"u","\ud835\ude6a":"u","\ud835\ude9e":"u","\ua79f":"u","\u1d1c":"u","\uab4e":"u","\uab52":"u","\u028b":"u","\u03c5":"u","\ud835\uded6":"u","\ud835\udf10":"u","\ud835\udf4a":"u","\ud835\udf84":"u","\ud835\udfbe":"u","\u057d":"u","\ud801\udcf6":"u","\ud806\udcd8":"u","\u222a":"U","\u22c3":"U","\ud835\udc14":"U","\ud835\udc48":"U","\ud835\udc7c":"U","\ud835\udcb0":"U","\ud835\udce4":"U","\ud835\udd18":"U","\ud835\udd4c":"U","\ud835\udd80":"U","\ud835\uddb4":"U","\ud835\udde8":"U","\ud835\ude1c":"U","\ud835\ude50":"U","\ud835\ude84":"U","\u054d":"U","\u1200":"U","\ud801\udcce":"U","\u144c":"U","\ua4f4":"U","\ud81b\udf42":"U","\ud806\udcb8":"U","\u01d4":"\u016d","\u01d3":"\u016c","\u1d7e":"u\u0335","\uab9c":"u\u0335","\u0244":"U\u0335","\u13cc":"U\u0335","\u1458":"U\xb7","\u1467":"U\'","\u1d6b":"ue","\uab63":"uo","\u1e43":"\uab51","\u057a":"\u0270","\u1223":"\u0270","\u2127":"\u01b1","\u162e":"\u01b1","\u1634":"\u01b1","\u1d7f":"\u028a\u0335","\u2228":"v","\u22c1":"v","\uff56":"v","\u2174":"v","\ud835\udc2f":"v","\ud835\udc63":"v","\ud835\udc97":"v","\ud835\udccb":"v","\ud835\udcff":"v","\ud835\udd33":"v","\ud835\udd67":"v","\ud835\udd9b":"v","\ud835\uddcf":"v","\ud835\ude03":"v","\ud835\ude37":"v","\ud835\ude6b":"v","\ud835\ude9f":"v","\u1d20":"v","\u03bd":"v","\ud835\udece":"v","\ud835\udf08":"v","\ud835\udf42":"v","\ud835\udf7c":"v","\ud835\udfb6":"v","\u0475":"v","\u05d8":"v","\ud805\udf06":"v","\uaba9":"v","\ud806\udcc0":"v","\ud834\ude0d":"V","\u0667":"V","\u06f7":"V","\u2164":"V","\ud835\udc15":"V","\ud835\udc49":"V","\ud835\udc7d":"V","\ud835\udcb1":"V","\ud835\udce5":"V","\ud835\udd19":"V","\ud835\udd4d":"V","\ud835\udd81":"V","\ud835\uddb5":"V","\ud835\udde9":"V","\ud835\ude1d":"V","\ud835\ude51":"V","\ud835\ude85":"V","\u0474":"V","\u2d38":"V","\u13d9":"V","\u142f":"V","\ua6df":"V","\ua4e6":"V","\ud81b\udf08":"V","\ud806\udca0":"V","\ud801\udd1d":"V","\ud800\udd97":"V\u0335","\u143b":"V\xb7","\ud83d\udf6c":"VB","\u2175":"vi","\u2176":"vii","\u2177":"viii","\u2165":"Vl","\u2166":"Vll","\u2167":"Vlll","\ud83d\udf08":"V\u1de4","\u1d27":"\u028c","\ud801\udcd8":"\u028c","\u0668":"\u0245","\u06f8":"\u0245","\u039b":"\u0245","\ud835\udeb2":"\u0245","\ud835\udeec":"\u0245","\ud835\udf26":"\u0245","\ud835\udf60":"\u0245","\ud835\udf9a":"\u0245","\u041b":"\u0245","\u2d37":"\u0245","\ud801\udcb0":"\u0245","\u1431":"\u0245","\ua6ce":"\u0245","\ua4e5":"\u0245","\ud81b\udf3d":"\u0245","\ud800\ude8d":"\u0245","\u04c5":"\u0245\u0326","\u143d":"\u0245\xb7","\u026f":"w","\ud835\udc30":"w","\ud835\udc64":"w","\ud835\udc98":"w","\ud835\udccc":"w","\ud835\udd00":"w","\ud835\udd34":"w","\ud835\udd68":"w","\ud835\udd9c":"w","\ud835\uddd0":"w","\ud835\ude04":"w","\ud835\ude38":"w","\ud835\ude6c":"w","\ud835\udea0":"w","\u1d21":"w","\u0461":"w","\u051d":"w","\u0561":"w","\ud805\udf0a":"w","\ud805\udf0e":"w","\ud805\udf0f":"w","\uab83":"w","\ud806\udcef":"W","\ud806\udce6":"W","\ud835\udc16":"W","\ud835\udc4a":"W","\ud835\udc7e":"W","\ud835\udcb2":"W","\ud835\udce6":"W","\ud835\udd1a":"W","\ud835\udd4e":"W","\ud835\udd82":"W","\ud835\uddb6":"W","\ud835\uddea":"W","\ud835\ude1e":"W","\ud835\ude52":"W","\ud835\ude86":"W","\u051c":"W","\u13b3":"W","\u13d4":"W","\ua4ea":"W","\u047d":"w\u0486\u0487","\ud805\udcc5":"w\u0307","\u20a9":"W\u0335","\ua761":"w\u0326","\u1d0d":"\u028d","\u043c":"\u028d","\uab87":"\u028d","\u04ce":"\u028d\u0326","\u166e":"x","\xd7":"x","\u292b":"x","\u292c":"x","\u2a2f":"x","\uff58":"x","\u2179":"x","\ud835\udc31":"x","\ud835\udc65":"x","\ud835\udc99":"x","\ud835\udccd":"x","\ud835\udd01":"x","\ud835\udd35":"x","\ud835\udd69":"x","\ud835\udd9d":"x","\ud835\uddd1":"x","\ud835\ude05":"x","\ud835\ude39":"x","\ud835\ude6d":"x","\ud835\udea1":"x","\u0445":"x","\u1541":"x","\u157d":"x","\u2def":"\u036f","\u166d":"X","\u2573":"X","\ud800\udf22":"X","\ud806\udcec":"X","\uff38":"X","\u2169":"X","\ud835\udc17":"X","\ud835\udc4b":"X","\ud835\udc7f":"X","\ud835\udcb3":"X","\ud835\udce7":"X","\ud835\udd1b":"X","\ud835\udd4f":"X","\ud835\udd83":"X","\ud835\uddb7":"X","\ud835\uddeb":"X","\ud835\ude1f":"X","\ud835\ude53":"X","\ud835\ude87":"X","\ua7b3":"X","\u03a7":"X","\ud835\udebe":"X","\ud835\udef8":"X","\ud835\udf32":"X","\ud835\udf6c":"X","\ud835\udfa6":"X","\u2cac":"X","\u0425":"X","\u2d5d":"X","\u16b7":"X","\ua4eb":"X","\ud800\ude90":"X","\ud800\udeb4":"X","\ud800\udf17":"X","\ud801\udd27":"X","\u2a30":"x\u0307","\u04b2":"X\u0329","\ud800\udd96":"X\u0335","\u217a":"xi","\u217b":"xii","\u216a":"Xl","\u216b":"Xll","\u0263":"y","\u1d8c":"y","\uff59":"y","\ud835\udc32":"y","\ud835\udc66":"y","\ud835\udc9a":"y","\ud835\udcce":"y","\ud835\udd02":"y","\ud835\udd36":"y","\ud835\udd6a":"y","\ud835\udd9e":"y","\ud835\uddd2":"y","\ud835\ude06":"y","\ud835\ude3a":"y","\ud835\ude6e":"y","\ud835\udea2":"y","\u028f":"y","\u1eff":"y","\uab5a":"y","\u03b3":"y","\u213d":"y","\ud835\udec4":"y","\ud835\udefe":"y","\ud835\udf38":"y","\ud835\udf72":"y","\ud835\udfac":"y","\u0443":"y","\u04af":"y","\u10e7":"y","\ud806\udcdc":"y","\uff39":"Y","\ud835\udc18":"Y","\ud835\udc4c":"Y","\ud835\udc80":"Y","\ud835\udcb4":"Y","\ud835\udce8":"Y","\ud835\udd1c":"Y","\ud835\udd50":"Y","\ud835\udd84":"Y","\ud835\uddb8":"Y","\ud835\uddec":"Y","\ud835\ude20":"Y","\ud835\ude54":"Y","\ud835\ude88":"Y","\u03a5":"Y","\u03d2":"Y","\ud835\udebc":"Y","\ud835\udef6":"Y","\ud835\udf30":"Y","\ud835\udf6a":"Y","\ud835\udfa4":"Y","\u2ca8":"Y","\u0423":"Y","\u04ae":"Y","\u13a9":"Y","\u13bd":"Y","\ua4ec":"Y","\ud81b\udf43":"Y","\ud806\udca4":"Y","\ud800\udeb2":"Y","\u01b4":"y\u0314","\u024f":"y\u0335","\u04b1":"y\u0335","\xa5":"Y\u0335","\u024e":"Y\u0335","\u04b0":"Y\u0335","\u0292":"\u021d","\ua76b":"\u021d","\u2ccd":"\u021d","\u04e1":"\u021d","\u10f3":"\u021d","\ud835\udc33":"z","\ud835\udc67":"z","\ud835\udc9b":"z","\ud835\udccf":"z","\ud835\udd03":"z","\ud835\udd37":"z","\ud835\udd6b":"z","\ud835\udd9f":"z","\ud835\uddd3":"z","\ud835\ude07":"z","\ud835\ude3b":"z","\ud835\ude6f":"z","\ud835\udea3":"z","\u1d22":"z","\uab93":"z","\ud806\udcc4":"z","\ud800\udef5":"Z","\ud806\udce5":"Z","\uff3a":"Z","\u2124":"Z","\u2128":"Z","\ud835\udc19":"Z","\ud835\udc4d":"Z","\ud835\udc81":"Z","\ud835\udcb5":"Z","\ud835\udce9":"Z","\ud835\udd85":"Z","\ud835\uddb9":"Z","\ud835\udded":"Z","\ud835\ude21":"Z","\ud835\ude55":"Z","\ud835\ude89":"Z","\u0396":"Z","\ud835\udead":"Z","\ud835\udee7":"Z","\ud835\udf21":"Z","\ud835\udf5b":"Z","\ud835\udf95":"Z","\u13c3":"Z","\ua4dc":"Z","\ud806\udca9":"Z","\u0290":"z\u0328","\u01b6":"z\u0335","\u01b5":"Z\u0335","\u0225":"z\u0326","\u0224":"Z\u0326","\u1d76":"z\u0334","\u01bf":"\xfe","\u03f8":"\xfe","\u03f7":"\xde","\ud801\udcc4":"\xde","\u2079":"\ua770","\u1d24":"\u01a8","\u03e9":"\u01a8","\ua645":"\u01a8","\u044c":"\u0185","\uab9f":"\u0185","\u044b":"\u0185i","\uab7e":"\u0242","\u02e4":"\u02c1","\ua6cd":"\u02a1","\u2299":"\u0298","\u2609":"\u0298","\u2a00":"\u0298","\ua668":"\u0298","\u2d59":"\u0298","\ud801\udcc3":"\u0298","\u213e":"\u0393","\ud835\udeaa":"\u0393","\ud835\udee4":"\u0393","\ud835\udf1e":"\u0393","\ud835\udf58":"\u0393","\ud835\udf92":"\u0393","\u2c84":"\u0393","\u0413":"\u0393","\u13b1":"\u0393","\u14a5":"\u0393","\ud81b\udf07":"\u0393","\u0492":"\u0393\u0335","\u14af":"\u0393\xb7","\u0490":"\u0393\'","\u2206":"\u0394","\u25b3":"\u0394","\ud83d\udf02":"\u0394","\ud835\udeab":"\u0394","\ud835\udee5":"\u0394","\ud835\udf1f":"\u0394","\ud835\udf59":"\u0394","\ud835\udf93":"\u0394","\u2c86":"\u0394","\u2d60":"\u0394","\u1403":"\u0394","\ud81b\udf1a":"\u0394","\ud800\ude85":"\u0394","\ud800\udea3":"\u0394","\u2359":"\u0394\u0332","\u140f":"\u0394\xb7","\u142c":"\u0394\u1420","\ud835\udfcb":"\u03dd","\ud835\udec7":"\u03b6","\ud835\udf01":"\u03b6","\ud835\udf3b":"\u03b6","\ud835\udf75":"\u03b6","\ud835\udfaf":"\u03b6","\u2ce4":"\u03d7","\ud835\udecc":"\u03bb","\ud835\udf06":"\u03bb","\ud835\udf40":"\u03bb","\ud835\udf7a":"\u03bb","\ud835\udfb4":"\u03bb","\u2c96":"\u03bb","\ud801\udcdb":"\u03bb","\xb5":"\u03bc","\ud835\udecd":"\u03bc","\ud835\udf07":"\u03bc","\ud835\udf41":"\u03bc","\ud835\udf7b":"\u03bc","\ud835\udfb5":"\u03bc","\ud835\udecf":"\u03be","\ud835\udf09":"\u03be","\ud835\udf43":"\u03be","\ud835\udf7d":"\u03be","\ud835\udfb7":"\u03be","\ud835\udeb5":"\u039e","\ud835\udeef":"\u039e","\ud835\udf29":"\u039e","\ud835\udf63":"\u039e","\ud835\udf9d":"\u039e","\u03d6":"\u03c0","\u213c":"\u03c0","\ud835\uded1":"\u03c0","\ud835\udee1":"\u03c0","\ud835\udf0b":"\u03c0","\ud835\udf1b":"\u03c0","\ud835\udf45":"\u03c0","\ud835\udf55":"\u03c0","\ud835\udf7f":"\u03c0","\ud835\udf8f":"\u03c0","\ud835\udfb9":"\u03c0","\ud835\udfc9":"\u03c0","\u1d28":"\u03c0","\u043f":"\u03c0","\u220f":"\u03a0","\u213f":"\u03a0","\ud835\udeb7":"\u03a0","\ud835\udef1":"\u03a0","\ud835\udf2b":"\u03a0","\ud835\udf65":"\u03a0","\ud835\udf9f":"\u03a0","\u2ca0":"\u03a0","\u041f":"\u03a0","\ua6db":"\u03a0","\ud800\udead":"\u03d8","\ud800\udf12":"\u03d8","\u03db":"\u03c2","\ud835\uded3":"\u03c2","\ud835\udf0d":"\u03c2","\ud835\udf47":"\u03c2","\ud835\udf81":"\u03c2","\ud835\udfbb":"\u03c2","\ud835\udebd":"\u03a6","\ud835\udef7":"\u03a6","\ud835\udf31":"\u03a6","\ud835\udf6b":"\u03a6","\ud835\udfa5":"\u03a6","\u2caa":"\u03a6","\u0424":"\u03a6","\u0553":"\u03a6","\u1240":"\u03a6","\u16f0":"\u03a6","\ud800\udeb3":"\u03a6","\uab53":"\u03c7","\uab55":"\u03c7","\ud835\uded8":"\u03c7","\ud835\udf12":"\u03c7","\ud835\udf4c":"\u03c7","\ud835\udf86":"\u03c7","\ud835\udfc0":"\u03c7","\u2cad":"\u03c7","\ud835\uded9":"\u03c8","\ud835\udf13":"\u03c8","\ud835\udf4d":"\u03c8","\ud835\udf87":"\u03c8","\ud835\udfc1":"\u03c8","\u0471":"\u03c8","\ud801\udcf9":"\u03c8","\ud835\udebf":"\u03a8","\ud835\udef9":"\u03a8","\ud835\udf33":"\u03a8","\ud835\udf6d":"\u03a8","\ud835\udfa7":"\u03a8","\u2cae":"\u03a8","\u0470":"\u03a8","\ud801\udcd1":"\u03a8","\u16d8":"\u03a8","\ud800\udeb5":"\u03a8","\u2375":"\u03c9","\ua7b7":"\u03c9","\ud835\udeda":"\u03c9","\ud835\udf14":"\u03c9","\ud835\udf4e":"\u03c9","\ud835\udf88":"\u03c9","\ud835\udfc2":"\u03c9","\u2cb1":"\u03c9","\ua64d":"\u03c9","\u2126":"\u03a9","\ud835\udec0":"\u03a9","\ud835\udefa":"\u03a9","\ud835\udf34":"\u03a9","\ud835\udf6e":"\u03a9","\ud835\udfa8":"\u03a9","\u162f":"\u03a9","\u1635":"\u03a9","\ud800\udeb6":"\u03a9","\u2379":"\u03c9\u0332","\u1f7d":"\u1ff4","\u2630":"\u2cb6","\u2cdc":"\u03ec","\u0497":"\u0436\u0329","\u0496":"\u0416\u0329","\ud834\ude0b":"\u0418","\u0376":"\u0418","\ua6a1":"\u0418","\ud801\udc25":"\u0418","\u0419":"\u040d","\u048a":"\u040d\u0326","\u045d":"\u0439","\u048b":"\u0439\u0326","\ud801\udcbc":"\u04c3","\u1d2b":"\u043b","\u04c6":"\u043b\u0326","\uab60":"\u0459","\ud801\udceb":"\ua669","\u1dee":"\u2dec","\ud801\udccd":"\u040b","\ud834\ude02":"\u04fe","\ud834\ude22":"\u0460","\u13c7":"\u0460","\u15ef":"\u0460","\u047c":"\u0460\u0486\u0487","\u18ed":"\u0460\xb7","\ua7b6":"\ua64c","\u04cc":"\u04b7","\u04cb":"\u04b6","\u04be":"\u04bc\u0328","\u2cbd":"\u0448","\u2cbc":"\u0428","\ua650":"\u042al","\u2108":"\u042d","\ud83d\udf01":"\ua658","\ud81b\udf1c":"\ua658","\ua992":"\u2c3f","\u0587":"\u0565\u0582","\u1294":"\u0571","\ufb14":"\u0574\u0565","\ufb15":"\u0574\u056b","\ufb17":"\u0574\u056d","\ufb13":"\u0574\u0576","\u2229":"\u0548","\u22c2":"\u0548","\ud834\ude45":"\u0548","\u1260":"\u0548","\u144e":"\u0548","\ua4f5":"\u0548","\u145a":"\u0548\xb7","\u1468":"\u0548\'","\ufb16":"\u057e\u0576","\u20bd":"\u0554","\u02d3":"\u0559","\u02bf":"\u0559","\u2135":"\u05d0","\ufb21":"\u05d0","\ufb2f":"\ufb2e","\ufb30":"\ufb2e","\ufb4f":"\u05d0\u05dc","\u2136":"\u05d1","\u2137":"\u05d2","\u2138":"\u05d3","\ufb22":"\u05d3","\ufb23":"\u05d4","\ufb39":"\ufb1d","\ufb24":"\u05db","\ufb25":"\u05dc","\ufb26":"\u05dd","\ufb20":"\u05e2","\ufb27":"\u05e8","\ufb2b":"\ufb2a","\ufb49":"\ufb2a","\ufb2d":"\ufb2c","\ufb28":"\u05ea","\ufe80":"\u0621","\u06fd":"\u0621\u0348","\ufe82":"\u0622","\ufe81":"\u0622","\ufb51":"\u0671","\ufb50":"\u0671","\ud83b\ude01":"\u0628","\ud83b\ude21":"\u0628","\ud83b\ude61":"\u0628","\ud83b\ude81":"\u0628","\ud83b\udea1":"\u0628","\ufe91":"\u0628","\ufe92":"\u0628","\ufe90":"\u0628","\ufe8f":"\u0628","\u0751":"\u0628\u06db","\u08b6":"\u0628\u06e2","\u08a1":"\u0628\u0654","\ufca0":"\u0628o","\ufce2":"\u0628o","\ufc9c":"\u0628\u062c","\ufc05":"\u0628\u062c","\ufc9d":"\u0628\u062d","\ufc06":"\u0628\u062d","\ufdc2":"\u0628\u062d\u0649","\ufc9e":"\u0628\u062e","\ufc07":"\u0628\u062e","\ufcd2":"\u0628\u062e","\ufc4b":"\u0628\u062e","\ufd9e":"\u0628\u062e\u0649","\ufc6a":"\u0628\u0631","\ufc6b":"\u0628\u0632","\ufc9f":"\u0628\u0645","\ufce1":"\u0628\u0645","\ufc6c":"\u0628\u0645","\ufc08":"\u0628\u0645","\ufc6d":"\u0628\u0646","\ufc6e":"\u0628\u0649","\ufc09":"\u0628\u0649","\ufc6f":"\u0628\u0649","\ufc0a":"\u0628\u0649","\ufb54":"\u067b","\ufb55":"\u067b","\ufb53":"\u067b","\ufb52":"\u067b","\u06d0":"\u067b","\ufbe6":"\u067b","\ufbe7":"\u067b","\ufbe5":"\u067b","\ufbe4":"\u067b","\ufb5c":"\u0680","\ufb5d":"\u0680","\ufb5b":"\u0680","\ufb5a":"\u0680","\u08a9":"\u0754","\u0767":"\u0754","\u2365":"\u0629","\xf6":"\u0629","\ufe94":"\u0629","\ufe93":"\u0629","\u06c3":"\u0629","\ud83b\ude15":"\u062a","\ud83b\ude35":"\u062a","\ud83b\ude75":"\u062a","\ud83b\ude95":"\u062a","\ud83b\udeb5":"\u062a","\ufe97":"\u062a","\ufe98":"\u062a","\ufe96":"\u062a","\ufe95":"\u062a","\ufca5":"\u062ao","\ufce4":"\u062ao","\ufca1":"\u062a\u062c","\ufc0b":"\u062a\u062c","\ufd50":"\u062a\u062c\u0645","\ufda0":"\u062a\u062c\u0649","\ufd9f":"\u062a\u062c\u0649","\ufca2":"\u062a\u062d","\ufc0c":"\u062a\u062d","\ufd52":"\u062a\u062d\u062c","\ufd51":"\u062a\u062d\u062c","\ufd53":"\u062a\u062d\u0645","\ufca3":"\u062a\u062e","\ufc0d":"\u062a\u062e","\ufd54":"\u062a\u062e\u0645","\ufda2":"\u062a\u062e\u0649","\ufda1":"\u062a\u062e\u0649","\ufc70":"\u062a\u0631","\ufc71":"\u062a\u0632","\ufca4":"\u062a\u0645","\ufce3":"\u062a\u0645","\ufc72":"\u062a\u0645","\ufc0e":"\u062a\u0645","\ufd55":"\u062a\u0645\u062c","\ufd56":"\u062a\u0645\u062d","\ufd57":"\u062a\u0645\u062e","\ufda4":"\u062a\u0645\u0649","\ufda3":"\u062a\u0645\u0649","\ufc73":"\u062a\u0646","\ufc74":"\u062a\u0649","\ufc0f":"\u062a\u0649","\ufc75":"\u062a\u0649","\ufc10":"\u062a\u0649","\ufb60":"\u067a","\ufb61":"\u067a","\ufb5f":"\u067a","\ufb5e":"\u067a","\ufb64":"\u067f","\ufb65":"\u067f","\ufb63":"\u067f","\ufb62":"\u067f","\ud83b\ude02":"\u062c","\ud83b\ude22":"\u062c","\ud83b\ude42":"\u062c","\ud83b\ude62":"\u062c","\ud83b\ude82":"\u062c","\ud83b\udea2":"\u062c","\ufe9f":"\u062c","\ufea0":"\u062c","\ufe9e":"\u062c","\ufe9d":"\u062c","\ufca7":"\u062c\u062d","\ufc15":"\u062c\u062d","\ufda6":"\u062c\u062d\u0649","\ufdbe":"\u062c\u062d\u0649","\ufdfb":"\u062c\u0644 \u062c\u0644l\u0644o","\ufca8":"\u062c\u0645","\ufc16":"\u062c\u0645","\ufd59":"\u062c\u0645\u062d","\ufd58":"\u062c\u0645\u062d","\ufda7":"\u062c\u0645\u0649","\ufda5":"\u062c\u0645\u0649","\ufd1d":"\u062c\u0649","\ufd01":"\u062c\u0649","\ufd1e":"\u062c\u0649","\ufd02":"\u062c\u0649","\ufb78":"\u0683","\ufb79":"\u0683","\ufb77":"\u0683","\ufb76":"\u0683","\ufb74":"\u0684","\ufb75":"\u0684","\ufb73":"\u0684","\ufb72":"\u0684","\ufb7c":"\u0686","\ufb7d":"\u0686","\ufb7b":"\u0686","\ufb7a":"\u0686","\ufb80":"\u0687","\ufb81":"\u0687","\ufb7f":"\u0687","\ufb7e":"\u0687","\ud83b\ude07":"\u062d","\ud83b\ude27":"\u062d","\ud83b\ude47":"\u062d","\ud83b\ude67":"\u062d","\ud83b\ude87":"\u062d","\ud83b\udea7":"\u062d","\ufea3":"\u062d","\ufea4":"\u062d","\ufea2":"\u062d","\ufea1":"\u062d","\u0685":"\u062d\u06db","\u0681":"\u062d\u0654","\u0772":"\u062d\u0654","\ufca9":"\u062d\u062c","\ufc17":"\u062d\u062c","\ufdbf":"\u062d\u062c\u0649","\ufcaa":"\u062d\u0645","\ufc18":"\u062d\u0645","\ufd5b":"\u062d\u0645\u0649","\ufd5a":"\u062d\u0645\u0649","\ufd1b":"\u062d\u0649","\ufcff":"\u062d\u0649","\ufd1c":"\u062d\u0649","\ufd00":"\u062d\u0649","\ud83b\ude17":"\u062e","\ud83b\ude37":"\u062e","\ud83b\ude57":"\u062e","\ud83b\ude77":"\u062e","\ud83b\ude97":"\u062e","\ud83b\udeb7":"\u062e","\ufea7":"\u062e","\ufea8":"\u062e","\ufea6":"\u062e","\ufea5":"\u062e","\ufcab":"\u062e\u062c","\ufc19":"\u062e\u062c","\ufc1a":"\u062e\u062d","\ufcac":"\u062e\u0645","\ufc1b":"\u062e\u0645","\ufd1f":"\u062e\u0649","\ufd03":"\u062e\u0649","\ufd20":"\u062e\u0649","\ufd04":"\u062e\u0649","\ud800\udee1":"\u062f","\ud83b\ude03":"\u062f","\ud83b\ude83":"\u062f","\ud83b\udea3":"\u062f","\ufeaa":"\u062f","\ufea9":"\u062f","\u0688":"\u062f\u0615","\ufb89":"\u062f\u0615","\ufb88":"\u062f\u0615","\u068e":"\u062f\u06db","\ufb87":"\u062f\u06db","\ufb86":"\u062f\u06db","\u06ee":"\u062f\u0302","\u08ae":"\u062f\u0324\u0323","\ud83b\ude18":"\u0630","\ud83b\ude98":"\u0630","\ud83b\udeb8":"\u0630","\ufeac":"\u0630","\ufeab":"\u0630","\ufc5b":"\u0630\u0670","\u068b":"\u068a\u0615","\ufb85":"\u068c","\ufb84":"\u068c","\ufb83":"\u068d","\ufb82":"\u068d","\ud83b\ude13":"\u0631","\ud83b\ude93":"\u0631","\ud83b\udeb3":"\u0631","\ufeae":"\u0631","\ufead":"\u0631","\u0691":"\u0631\u0615","\ufb8d":"\u0631\u0615","\ufb8c":"\u0631\u0615","\u0698":"\u0631\u06db","\ufb8b":"\u0631\u06db","\ufb8a":"\u0631\u06db","\u0692":"\u0631\u0306","\u08b9":"\u0631\u0306\u0307","\u06ef":"\u0631\u0302","\u076c":"\u0631\u0654","\ufc5c":"\u0631\u0670","\ufdf6":"\u0631\u0633\u0648\u0644","\ufdfc":"\u0631\u0649l\u0644","\ud83b\ude06":"\u0632","\ud83b\ude86":"\u0632","\ud83b\udea6":"\u0632","\ufeb0":"\u0632","\ufeaf":"\u0632","\u08b2":"\u0632\u0302","\u0771":"\u0697\u0615","\ud83b\ude0e":"\u0633","\ud83b\ude2e":"\u0633","\ud83b\ude4e":"\u0633","\ud83b\ude6e":"\u0633","\ud83b\ude8e":"\u0633","\ud83b\udeae":"\u0633","\ufeb3":"\u0633","\ufeb4":"\u0633","\ufeb2":"\u0633","\ufeb1":"\u0633","\u0634":"\u0633\u06db","\ud83b\ude14":"\u0633\u06db","\ud83b\ude34":"\u0633\u06db","\ud83b\ude54":"\u0633\u06db","\ud83b\ude74":"\u0633\u06db","\ud83b\ude94":"\u0633\u06db","\ud83b\udeb4":"\u0633\u06db","\ufeb7":"\u0633\u06db","\ufeb8":"\u0633\u06db","\ufeb6":"\u0633\u06db","\ufeb5":"\u0633\u06db","\u077e":"\u0633\u0302","\ufd31":"\u0633o","\ufce8":"\u0633o","\ufd32":"\u0633\u06dbo","\ufcea":"\u0633\u06dbo","\ufcad":"\u0633\u062c","\ufd34":"\u0633\u062c","\ufc1c":"\u0633\u062c","\ufd2d":"\u0633\u06db\u062c","\ufd37":"\u0633\u06db\u062c","\ufd25":"\u0633\u06db\u062c","\ufd09":"\u0633\u06db\u062c","\ufd5d":"\u0633\u062c\u062d","\ufd5e":"\u0633\u062c\u0649","\ufd69":"\u0633\u06db\u062c\u0649","\ufcae":"\u0633\u062d","\ufd35":"\u0633\u062d","\ufc1d":"\u0633\u062d","\ufd2e":"\u0633\u06db\u062d","\ufd38":"\u0633\u06db\u062d","\ufd26":"\u0633\u06db\u062d","\ufd0a":"\u0633\u06db\u062d","\ufd5c":"\u0633\u062d\u062c","\ufd68":"\u0633\u06db\u062d\u0645","\ufd67":"\u0633\u06db\u062d\u0645","\ufdaa":"\u0633\u06db\u062d\u0649","\ufcaf":"\u0633\u062e","\ufd36":"\u0633\u062e","\ufc1e":"\u0633\u062e","\ufd2f":"\u0633\u06db\u062e","\ufd39":"\u0633\u06db\u062e","\ufd27":"\u0633\u06db\u062e","\ufd0b":"\u0633\u06db\u062e","\ufda8":"\u0633\u062e\u0649","\ufdc6":"\u0633\u062e\u0649","\ufd2a":"\u0633\u0631","\ufd0e":"\u0633\u0631","\ufd29":"\u0633\u06db\u0631","\ufd0d":"\u0633\u06db\u0631","\ufcb0":"\u0633\u0645","\ufce7":"\u0633\u0645","\ufc1f":"\u0633\u0645","\ufd30":"\u0633\u06db\u0645","\ufce9":"\u0633\u06db\u0645","\ufd28":"\u0633\u06db\u0645","\ufd0c":"\u0633\u06db\u0645","\ufd61":"\u0633\u0645\u062c","\ufd60":"\u0633\u0645\u062d","\ufd5f":"\u0633\u0645\u062d","\ufd6b":"\u0633\u06db\u0645\u062e","\ufd6a":"\u0633\u06db\u0645\u062e","\ufd63":"\u0633\u0645\u0645","\ufd62":"\u0633\u0645\u0645","\ufd6d":"\u0633\u06db\u0645\u0645","\ufd6c":"\u0633\u06db\u0645\u0645","\ufd17":"\u0633\u0649","\ufcfb":"\u0633\u0649","\ufd18":"\u0633\u0649","\ufcfc":"\u0633\u0649","\ufd19":"\u0633\u06db\u0649","\ufcfd":"\u0633\u06db\u0649","\ufd1a":"\u0633\u06db\u0649","\ufcfe":"\u0633\u06db\u0649","\ud800\udef2":"\u0635","\ud83b\ude11":"\u0635","\ud83b\ude31":"\u0635","\ud83b\ude51":"\u0635","\ud83b\ude71":"\u0635","\ud83b\ude91":"\u0635","\ud83b\udeb1":"\u0635","\ufebb":"\u0635","\ufebc":"\u0635","\ufeba":"\u0635","\ufeb9":"\u0635","\u069e":"\u0635\u06db","\u08af":"\u0635\u0324\u0323","\ufcb1":"\u0635\u062d","\ufc20":"\u0635\u062d","\ufd65":"\u0635\u062d\u062d","\ufd64":"\u0635\u062d\u062d","\ufda9":"\u0635\u062d\u0649","\ufcb2":"\u0635\u062e","\ufd2b":"\u0635\u0631","\ufd0f":"\u0635\u0631","\ufdf5":"\u0635\u0644\u0639\u0645","\ufdf9":"\u0635\u0644\u0649","\ufdf0":"\u0635\u0644\u0649","\ufdfa":"\u0635\u0644\u0649 l\u0644\u0644o \u0639\u0644\u0649o \u0648\u0633\u0644\u0645","\ufcb3":"\u0635\u0645","\ufc21":"\u0635\u0645","\ufdc5":"\u0635\u0645\u0645","\ufd66":"\u0635\u0645\u0645","\ufd21":"\u0635\u0649","\ufd05":"\u0635\u0649","\ufd22":"\u0635\u0649","\ufd06":"\u0635\u0649","\ud83b\ude19":"\u0636","\ud83b\ude39":"\u0636","\ud83b\ude59":"\u0636","\ud83b\ude79":"\u0636","\ud83b\ude99":"\u0636","\ud83b\udeb9":"\u0636","\ufebf":"\u0636","\ufec0":"\u0636","\ufebe":"\u0636","\ufebd":"\u0636","\ufcb4":"\u0636\u062c","\ufc22":"\u0636\u062c","\ufcb5":"\u0636\u062d","\ufc23":"\u0636\u062d","\ufd6e":"\u0636\u062d\u0649","\ufdab":"\u0636\u062d\u0649","\ufcb6":"\u0636\u062e","\ufc24":"\u0636\u062e","\ufd70":"\u0636\u062e\u0645","\ufd6f":"\u0636\u062e\u0645","\ufd2c":"\u0636\u0631","\ufd10":"\u0636\u0631","\ufcb7":"\u0636\u0645","\ufc25":"\u0636\u0645","\ufd23":"\u0636\u0649","\ufd07":"\u0636\u0649","\ufd24":"\u0636\u0649","\ufd08":"\u0636\u0649","\ud800\udee8":"\u0637","\ud83b\ude08":"\u0637","\ud83b\ude68":"\u0637","\ud83b\ude88":"\u0637","\ud83b\udea8":"\u0637","\ufec3":"\u0637","\ufec4":"\u0637","\ufec2":"\u0637","\ufec1":"\u0637","\u069f":"\u0637\u06db","\ufcb8":"\u0637\u062d","\ufc26":"\u0637\u062d","\ufd33":"\u0637\u0645","\ufd3a":"\u0637\u0645","\ufc27":"\u0637\u0645","\ufd72":"\u0637\u0645\u062d","\ufd71":"\u0637\u0645\u062d","\ufd73":"\u0637\u0645\u0645","\ufd74":"\u0637\u0645\u0649","\ufd11":"\u0637\u0649","\ufcf5":"\u0637\u0649","\ufd12":"\u0637\u0649","\ufcf6":"\u0637\u0649","\ud83b\ude1a":"\u0638","\ud83b\ude7a":"\u0638","\ud83b\ude9a":"\u0638","\ud83b\udeba":"\u0638","\ufec7":"\u0638","\ufec8":"\u0638","\ufec6":"\u0638","\ufec5":"\u0638","\ufcb9":"\u0638\u0645","\ufd3b":"\u0638\u0645","\ufc28":"\u0638\u0645","\u060f":"\u0639","\ud83b\ude0f":"\u0639","\ud83b\ude2f":"\u0639","\ud83b\ude4f":"\u0639","\ud83b\ude6f":"\u0639","\ud83b\ude8f":"\u0639","\ud83b\udeaf":"\u0639","\ufecb":"\u0639","\ufecc":"\u0639","\ufeca":"\u0639","\ufec9":"\u0639","\ufcba":"\u0639\u062c","\ufc29":"\u0639\u062c","\ufdc4":"\u0639\u062c\u0645","\ufd75":"\u0639\u062c\u0645","\ufdf7":"\u0639\u0644\u0649o","\ufcbb":"\u0639\u0645","\ufc2a":"\u0639\u0645","\ufd77":"\u0639\u0645\u0645","\ufd76":"\u0639\u0645\u0645","\ufd78":"\u0639\u0645\u0649","\ufdb6":"\u0639\u0645\u0649","\ufd13":"\u0639\u0649","\ufcf7":"\u0639\u0649","\ufd14":"\u0639\u0649","\ufcf8":"\u0639\u0649","\ud83b\ude1b":"\u063a","\ud83b\ude3b":"\u063a","\ud83b\ude5b":"\u063a","\ud83b\ude7b":"\u063a","\ud83b\ude9b":"\u063a","\ud83b\udebb":"\u063a","\ufecf":"\u063a","\ufed0":"\u063a","\ufece":"\u063a","\ufecd":"\u063a","\ufcbc":"\u063a\u062c","\ufc2b":"\u063a\u062c","\ufcbd":"\u063a\u0645","\ufc2c":"\u063a\u0645","\ufd79":"\u063a\u0645\u0645","\ufd7b":"\u063a\u0645\u0649","\ufd7a":"\u063a\u0645\u0649","\ufd15":"\u063a\u0649","\ufcf9":"\u063a\u0649","\ufd16":"\u063a\u0649","\ufcfa":"\u063a\u0649","\ud83b\ude10":"\u0641","\ud83b\ude30":"\u0641","\ud83b\ude70":"\u0641","\ud83b\ude90":"\u0641","\ud83b\udeb0":"\u0641","\ufed3":"\u0641","\ufed4":"\u0641","\ufed2":"\u0641","\ufed1":"\u0641","\u06a7":"\u0641","\ufcbe":"\u0641\u062c","\ufc2d":"\u0641\u062c","\ufcbf":"\u0641\u062d","\ufc2e":"\u0641\u062d","\ufcc0":"\u0641\u062e","\ufc2f":"\u0641\u062e","\ufd7d":"\u0641\u062e\u0645","\ufd7c":"\u0641\u062e\u0645","\ufcc1":"\u0641\u0645","\ufc30":"\u0641\u0645","\ufdc1":"\u0641\u0645\u0649","\ufc7c":"\u0641\u0649","\ufc31":"\u0641\u0649","\ufc7d":"\u0641\u0649","\ufc32":"\u0641\u0649","\ud83b\ude1e":"\u06a1","\ud83b\ude7e":"\u06a1","\u08bb":"\u06a1","\u066f":"\u06a1","\ud83b\ude1f":"\u06a1","\ud83b\ude5f":"\u06a1","\u08bc":"\u06a1","\u06a4":"\u06a1\u06db","\ufb6c":"\u06a1\u06db","\ufb6d":"\u06a1\u06db","\ufb6b":"\u06a1\u06db","\ufb6a":"\u06a1\u06db","\u06a8":"\u06a1\u06db","\u08a4":"\u06a2\u06db","\ufb70":"\u06a6","\ufb71":"\u06a6","\ufb6f":"\u06a6","\ufb6e":"\u06a6","\ud83b\ude12":"\u0642","\ud83b\ude32":"\u0642","\ud83b\ude52":"\u0642","\ud83b\ude72":"\u0642","\ud83b\ude92":"\u0642","\ud83b\udeb2":"\u0642","\ufed7":"\u0642","\ufed8":"\u0642","\ufed6":"\u0642","\ufed5":"\u0642","\ufcc2":"\u0642\u062d","\ufc33":"\u0642\u062d","\ufdf1":"\u0642\u0644\u0649","\ufcc3":"\u0642\u0645","\ufc34":"\u0642\u0645","\ufdb4":"\u0642\u0645\u062d","\ufd7e":"\u0642\u0645\u062d","\ufd7f":"\u0642\u0645\u0645","\ufdb2":"\u0642\u0645\u0649","\ufc7e":"\u0642\u0649","\ufc35":"\u0642\u0649","\ufc7f":"\u0642\u0649","\ufc36":"\u0642\u0649","\ud83b\ude0a":"\u0643","\ud83b\ude2a":"\u0643","\ud83b\ude6a":"\u0643","\ufedb":"\u0643","\ufedc":"\u0643","\ufeda":"\u0643","\ufed9":"\u0643","\u06a9":"\u0643","\ufb90":"\u0643","\ufb91":"\u0643","\ufb8f":"\u0643","\ufb8e":"\u0643","\u06aa":"\u0643","\u06ad":"\u0643\u06db","\ufbd5":"\u0643\u06db","\ufbd6":"\u0643\u06db","\ufbd4":"\u0643\u06db","\ufbd3":"\u0643\u06db","\u0763":"\u0643\u06db","\ufc80":"\u0643l","\ufc37":"\u0643l","\ufcc4":"\u0643\u062c","\ufc38":"\u0643\u062c","\ufcc5":"\u0643\u062d","\ufc39":"\u0643\u062d","\ufcc6":"\u0643\u062e","\ufc3a":"\u0643\u062e","\ufcc7":"\u0643\u0644","\ufceb":"\u0643\u0644","\ufc81":"\u0643\u0644","\ufc3b":"\u0643\u0644","\ufcc8":"\u0643\u0645","\ufcec":"\u0643\u0645","\ufc82":"\u0643\u0645","\ufc3c":"\u0643\u0645","\ufdc3":"\u0643\u0645\u0645","\ufdbb":"\u0643\u0645\u0645","\ufdb7":"\u0643\u0645\u0649","\ufc83":"\u0643\u0649","\ufc3d":"\u0643\u0649","\ufc84":"\u0643\u0649","\ufc3e":"\u0643\u0649","\u0762":"\u06ac","\ufb94":"\u06af","\ufb95":"\u06af","\ufb93":"\u06af","\ufb92":"\u06af","\u08b0":"\u06af","\u06b4":"\u06af\u06db","\ufb9c":"\u06b1","\ufb9d":"\u06b1","\ufb9b":"\u06b1","\ufb9a":"\u06b1","\ufb98":"\u06b3","\ufb99":"\u06b3","\ufb97":"\u06b3","\ufb96":"\u06b3","\ud83b\ude0b":"\u0644","\ud83b\ude2b":"\u0644","\ud83b\ude4b":"\u0644","\ud83b\ude8b":"\u0644","\ud83b\udeab":"\u0644","\ufedf":"\u0644","\ufee0":"\u0644","\ufede":"\u0644","\ufedd":"\u0644","\u06b7":"\u0644\u06db","\u06b5":"\u0644\u0306","\ufefc":"\u0644l","\ufefb":"\u0644l","\ufefa":"\u0644l\u0655","\ufef9":"\u0644l\u0655","\ufef8":"\u0644l\u0674","\ufef7":"\u0644l\u0674","\ufccd":"\u0644o","\ufef6":"\u0644\u0622","\ufef5":"\u0644\u0622","\ufcc9":"\u0644\u062c","\ufc3f":"\u0644\u062c","\ufd83":"\u0644\u062c\u062c","\ufd84":"\u0644\u062c\u062c","\ufdba":"\u0644\u062c\u0645","\ufdbc":"\u0644\u062c\u0645","\ufdac":"\u0644\u062c\u0649","\ufcca":"\u0644\u062d","\ufc40":"\u0644\u062d","\ufdb5":"\u0644\u062d\u0645","\ufd80":"\u0644\u062d\u0645","\ufd82":"\u0644\u062d\u0649","\ufd81":"\u0644\u062d\u0649","\ufccb":"\u0644\u062e","\ufc41":"\u0644\u062e","\ufd86":"\u0644\u062e\u0645","\ufd85":"\u0644\u062e\u0645","\ufccc":"\u0644\u0645","\ufced":"\u0644\u0645","\ufc85":"\u0644\u0645","\ufc42":"\u0644\u0645","\ufd88":"\u0644\u0645\u062d","\ufd87":"\u0644\u0645\u062d","\ufdad":"\u0644\u0645\u0649","\ufc86":"\u0644\u0649","\ufc43":"\u0644\u0649","\ufc87":"\u0644\u0649","\ufc44":"\u0644\u0649","\ud83b\ude0c":"\u0645","\ud83b\ude2c":"\u0645","\ud83b\ude6c":"\u0645","\ud83b\ude8c":"\u0645","\ud83b\udeac":"\u0645","\ufee3":"\u0645","\ufee4":"\u0645","\ufee2":"\u0645","\ufee1":"\u0645","\u08a7":"\u0645\u06db","\u06fe":"\u0645\u0348","\ufc88":"\u0645l","\ufcce":"\u0645\u062c","\ufc45":"\u0645\u062c","\ufd8c":"\u0645\u062c\u062d","\ufd92":"\u0645\u062c\u062e","\ufd8d":"\u0645\u062c\u0645","\ufdc0":"\u0645\u062c\u0649","\ufccf":"\u0645\u062d","\ufc46":"\u0645\u062d","\ufd89":"\u0645\u062d\u062c","\ufd8a":"\u0645\u062d\u0645","\ufdf4":"\u0645\u062d\u0645\u062f","\ufd8b":"\u0645\u062d\u0649","\ufcd0":"\u0645\u062e","\ufc47":"\u0645\u062e","\ufd8e":"\u0645\u062e\u062c","\ufd8f":"\u0645\u062e\u0645","\ufdb9":"\u0645\u062e\u0649","\ufcd1":"\u0645\u0645","\ufc89":"\u0645\u0645","\ufc48":"\u0645\u0645","\ufdb1":"\u0645\u0645\u0649","\ufc49":"\u0645\u0649","\ufc4a":"\u0645\u0649","\ud83b\ude0d":"\u0646","\ud83b\ude2d":"\u0646","\ud83b\ude4d":"\u0646","\ud83b\ude6d":"\u0646","\ud83b\ude8d":"\u0646","\ud83b\udead":"\u0646","\ufee7":"\u0646","\ufee8":"\u0646","\ufee6":"\u0646","\ufee5":"\u0646","\u0768":"\u0646\u0615","\u0769":"\u0646\u0306","\ufcd6":"\u0646o","\ufcef":"\u0646o","\ufdb8":"\u0646\u062c\u062d","\ufdbd":"\u0646\u062c\u062d","\ufd98":"\u0646\u062c\u0645","\ufd97":"\u0646\u062c\u0645","\ufd99":"\u0646\u062c\u0649","\ufdc7":"\u0646\u062c\u0649","\ufcd3":"\u0646\u062d","\ufc4c":"\u0646\u062d","\ufd95":"\u0646\u062d\u0645","\ufd96":"\u0646\u062d\u0649","\ufdb3":"\u0646\u062d\u0649","\ufcd4":"\u0646\u062e","\ufc4d":"\u0646\u062e","\ufc8a":"\u0646\u0631","\ufc8b":"\u0646\u0632","\ufcd5":"\u0646\u0645","\ufcee":"\u0646\u0645","\ufc8c":"\u0646\u0645","\ufc4e":"\u0646\u0645","\ufd9b":"\u0646\u0645\u0649","\ufd9a":"\u0646\u0645\u0649","\ufc8d":"\u0646\u0646","\ufc8e":"\u0646\u0649","\ufc4f":"\u0646\u0649","\ufc8f":"\u0646\u0649","\ufc50":"\u0646\u0649","\u06c2":"\u06c0","\ufba5":"\u06c0","\ufba4":"\u06c0","\ud800\udee4":"\u0648","\ud83b\ude05":"\u0648","\ud83b\ude85":"\u0648","\ud83b\udea5":"\u0648","\ufeee":"\u0648","\ufeed":"\u0648","\u08b1":"\u0648","\u06cb":"\u0648\u06db","\ufbdf":"\u0648\u06db","\ufbde":"\u0648\u06db","\u06c7":"\u0648\u0313","\ufbd8":"\u0648\u0313","\ufbd7":"\u0648\u0313","\u06c6":"\u0648\u0306","\ufbda":"\u0648\u0306","\ufbd9":"\u0648\u0306","\u06c9":"\u0648\u0302","\ufbe3":"\u0648\u0302","\ufbe2":"\u0648\u0302","\u06c8":"\u0648\u0670","\ufbdc":"\u0648\u0670","\ufbdb":"\u0648\u0670","\u0624":"\u0648\u0674","\ufe86":"\u0648\u0674","\ufe85":"\u0648\u0674","\u0676":"\u0648\u0674","\u0677":"\u0648\u0313\u0674","\ufbdd":"\u0648\u0313\u0674","\ufdf8":"\u0648\u0633\u0644\u0645","\ufbe1":"\u06c5","\ufbe0":"\u06c5","\u066e":"\u0649","\ud83b\ude1c":"\u0649","\ud83b\ude7c":"\u0649","\u06ba":"\u0649","\ud83b\ude1d":"\u0649","\ud83b\ude5d":"\u0649","\ufb9f":"\u0649","\ufb9e":"\u0649","\u08bd":"\u0649","\ufbe8":"\u0649","\ufbe9":"\u0649","\ufef0":"\u0649","\ufeef":"\u0649","\u064a":"\u0649","\ud83b\ude09":"\u0649","\ud83b\ude29":"\u0649","\ud83b\ude49":"\u0649","\ud83b\ude69":"\u0649","\ud83b\ude89":"\u0649","\ud83b\udea9":"\u0649","\ufef3":"\u0649","\ufef4":"\u0649","\ufef2":"\u0649","\ufef1":"\u0649","\u06cc":"\u0649","\ufbfe":"\u0649","\ufbff":"\u0649","\ufbfd":"\u0649","\ufbfc":"\u0649","\u06d2":"\u0649","\ufbaf":"\u0649","\ufbae":"\u0649","\u0679":"\u0649\u0615","\ufb68":"\u0649\u0615","\ufb69":"\u0649\u0615","\ufb67":"\u0649\u0615","\ufb66":"\u0649\u0615","\u06bb":"\u0649\u0615","\ufba2":"\u0649\u0615","\ufba3":"\u0649\u0615","\ufba1":"\u0649\u0615","\ufba0":"\u0649\u0615","\u067e":"\u0649\u06db","\ufb58":"\u0649\u06db","\ufb59":"\u0649\u06db","\ufb57":"\u0649\u06db","\ufb56":"\u0649\u06db","\u062b":"\u0649\u06db","\ud83b\ude16":"\u0649\u06db","\ud83b\ude36":"\u0649\u06db","\ud83b\ude76":"\u0649\u06db","\ud83b\ude96":"\u0649\u06db","\ud83b\udeb6":"\u0649\u06db","\ufe9b":"\u0649\u06db","\ufe9c":"\u0649\u06db","\ufe9a":"\u0649\u06db","\ufe99":"\u0649\u06db","\u06bd":"\u0649\u06db","\u06d1":"\u0649\u06db","\u063f":"\u0649\u06db","\u08b7":"\u0649\u06db\u06e2","\u0756":"\u0649\u0306","\u06ce":"\u0649\u0306","\u08ba":"\u0649\u0306\u0307","\u063d":"\u0649\u0302","\u08a8":"\u0649\u0654","\ufc90":"\u0649\u0670","\ufc5d":"\u0649\u0670","\ufcde":"\u0649o","\ufcf1":"\u0649o","\ufce6":"\u0649\u06dbo","\u0626":"\u0649\u0674","\ufe8b":"\u0649\u0674","\ufe8c":"\u0649\u0674","\ufe8a":"\u0649\u0674","\ufe89":"\u0649\u0674","\u0678":"\u0649\u0674","\ufbeb":"\u0649\u0674l","\ufbea":"\u0649\u0674l","\ufc9b":"\u0649\u0674o","\ufce0":"\u0649\u0674o","\ufbed":"\u0649\u0674o","\ufbec":"\u0649\u0674o","\ufbf8":"\u0649\u0674\u067b","\ufbf7":"\u0649\u0674\u067b","\ufbf6":"\u0649\u0674\u067b","\ufc97":"\u0649\u0674\u062c","\ufc00":"\u0649\u0674\u062c","\ufc98":"\u0649\u0674\u062d","\ufc01":"\u0649\u0674\u062d","\ufc99":"\u0649\u0674\u062e","\ufc64":"\u0649\u0674\u0631","\ufc65":"\u0649\u0674\u0632","\ufc9a":"\u0649\u0674\u0645","\ufcdf":"\u0649\u0674\u0645","\ufc66":"\u0649\u0674\u0645","\ufc02":"\u0649\u0674\u0645","\ufc67":"\u0649\u0674\u0646","\ufbef":"\u0649\u0674\u0648","\ufbee":"\u0649\u0674\u0648","\ufbf1":"\u0649\u0674\u0648\u0313","\ufbf0":"\u0649\u0674\u0648\u0313","\ufbf3":"\u0649\u0674\u0648\u0306","\ufbf2":"\u0649\u0674\u0648\u0306","\ufbf5":"\u0649\u0674\u0648\u0670","\ufbf4":"\u0649\u0674\u0648\u0670","\ufbfb":"\u0649\u0674\u0649","\ufbfa":"\u0649\u0674\u0649","\ufc68":"\u0649\u0674\u0649","\ufbf9":"\u0649\u0674\u0649","\ufc03":"\u0649\u0674\u0649","\ufc69":"\u0649\u0674\u0649","\ufc04":"\u0649\u0674\u0649","\ufcda":"\u0649\u062c","\ufc55":"\u0649\u062c","\ufc11":"\u0649\u06db\u062c","\ufdaf":"\u0649\u062c\u0649","\ufcdb":"\u0649\u062d","\ufc56":"\u0649\u062d","\ufdae":"\u0649\u062d\u0649","\ufcdc":"\u0649\u062e","\ufc57":"\u0649\u062e","\ufc91":"\u0649\u0631","\ufc76":"\u0649\u06db\u0631","\ufc92":"\u0649\u0632","\ufc77":"\u0649\u06db\u0632","\ufcdd":"\u0649\u0645","\ufcf0":"\u0649\u0645","\ufc93":"\u0649\u0645","\ufc58":"\u0649\u0645","\ufca6":"\u0649\u06db\u0645","\ufce5":"\u0649\u06db\u0645","\ufc78":"\u0649\u06db\u0645","\ufc12":"\u0649\u06db\u0645","\ufd9d":"\u0649\u0645\u0645","\ufd9c":"\u0649\u0645\u0645","\ufdb0":"\u0649\u0645\u0649","\ufc94":"\u0649\u0646","\ufc79":"\u0649\u06db\u0646","\ufc95":"\u0649\u0649","\ufc59":"\u0649\u0649","\ufc96":"\u0649\u0649","\ufc5a":"\u0649\u0649","\ufc7a":"\u0649\u06db\u0649","\ufc13":"\u0649\u06db\u0649","\ufc7b":"\u0649\u06db\u0649","\ufc14":"\u0649\u06db\u0649","\ufbb1":"\u06d3","\ufbb0":"\u06d3","\ud800\udeb8":"\u2d40","\u205e":"\u2d42","\u2e3d":"\u2d42","\u2999":"\u2d42","\ufe19":"\u2d57","\u205d":"\u2d57","\u22ee":"\u2d57","\u0544":"\u1206","\u054c":"\u1261","\u053b":"\u12ae","\u054a":"\u1323","\u0906":"\u0905\u093e","\u0912":"\u0905\u093e\u0946","\u0913":"\u0905\u093e\u0947","\u0914":"\u0905\u093e\u0948","\u0904":"\u0905\u0946","\u0911":"\u0905\u0949","\u090d":"\u090f\u0945","\u090e":"\u090f\u0946","\u0910":"\u090f\u0947","\u0908":"\u0930\u094d\u0907","\u0abd":"\u093d","\ud804\udddc":"\ua8fb","\ud804\uddcb":"\u093a","\u0ac1":"\u0941","\u0ac2":"\u0942","\u0a4b":"\u0946","\u0a4d":"\u094d","\u0acd":"\u094d","\u0986":"\u0985\u09be","\u09e0":"\u098b\u09c3","\u09e1":"\u098b\u09c3","\ud805\udc92":"\u0998","\ud805\udc94":"\u099a","\ud805\udc96":"\u099c","\ud805\udc98":"\u099e","\ud805\udc99":"\u099f","\ud805\udc9b":"\u09a1","\ud805\udcaa":"\u09a3","\ud805\udc9e":"\u09a4","\ud805\udc9f":"\u09a5","\ud805\udca0":"\u09a6","\ud805\udca1":"\u09a7","\ud805\udca2":"\u09a8","\ud805\udca3":"\u09aa","\ud805\udca9":"\u09ac","\ud805\udca7":"\u09ae","\ud805\udca8":"\u09af","\ud805\udcab":"\u09b0","\ud805\udc9d":"\u09b2","\ud805\udcad":"\u09b7","\ud805\udcae":"\u09b8","\ud805\udcc4":"\u09bd","\ud805\udcb0":"\u09be","\ud805\udcb1":"\u09bf","\ud805\udcb9":"\u09c7","\ud805\udcbc":"\u09cb","\ud805\udcbe":"\u09cc","\ud805\udcc2":"\u09cd","\ud805\udcbd":"\u09d7","\u0a09":"\u0a73\u0a41","\u0a0a":"\u0a73\u0a42","\u0a06":"\u0a05\u0a3e","\u0a10":"\u0a05\u0a48","\u0a14":"\u0a05\u0a4c","\u0a07":"\u0a72\u0a3f","\u0a08":"\u0a72\u0a40","\u0a0f":"\u0a72\u0a47","\u0a86":"\u0a85\u0abe","\u0a91":"\u0a85\u0abe\u0ac5","\u0a93":"\u0a85\u0abe\u0ac7","\u0a94":"\u0a85\u0abe\u0ac8","\u0a8d":"\u0a85\u0ac5","\u0a8f":"\u0a85\u0ac7","\u0a90":"\u0a85\u0ac8","\u0b06":"\u0b05\u0b3e","\u0bee":"\u0b85","\u0bb0":"\u0b88","\u0bbe":"\u0b88","\u0beb":"\u0b88\u0bc1","\u0be8":"\u0b89","\u0d09":"\u0b89","\u0b8a":"\u0b89\u0bb3","\u0d0a":"\u0b89\u0d57","\u0bed":"\u0b8e","\u0bf7":"\u0b8e\u0bb5","\u0b9c":"\u0b90","\u0d1c":"\u0b90","\u0be7":"\u0b95","\u0bea":"\u0b9a","\u0bec":"\u0b9a\u0bc1","\u0bf2":"\u0b9a\u0bc2","\u0d3a":"\u0b9f\u0bbf","\u0d23":"\u0ba3","\u0bfa":"\u0ba8\u0bc0","\u0bf4":"\u0bae\u0bc0","\u0bf0":"\u0baf","\u0d34":"\u0bb4","\u0bd7":"\u0bb3","\u0bc8":"\u0ba9","\u0d36":"\u0bb6","\u0bf8":"\u0bb7","\u0d3f":"\u0bbf","\u0d40":"\u0bbf","\u0bca":"\u0bc6\u0b88","\u0bcc":"\u0bc6\u0bb3","\u0bcb":"\u0bc7\u0b88","\u0c85":"\u0c05","\u0c86":"\u0c06","\u0c87":"\u0c07","\u0c60":"\u0c0b\u0c3e","\u0c61":"\u0c0c\u0c3e","\u0c92":"\u0c12","\u0c14":"\u0c12\u0c4c","\u0c94":"\u0c12\u0c4c","\u0c13":"\u0c12\u0c55","\u0c93":"\u0c12\u0c55","\u0c9c":"\u0c1c","\u0c9e":"\u0c1e","\u0c22":"\u0c21\u0323","\u0ca3":"\u0c23","\u0c25":"\u0c27\u05bc","\u0c2d":"\u0c2c\u0323","\u0caf":"\u0c2f","\u0c20":"\u0c30\u05bc","\u0cb1":"\u0c31","\u0cb2":"\u0c32","\u0c37":"\u0c35\u0323","\u0c39":"\u0c35\u0c3e","\u0c2e":"\u0c35\u0c41","\u0c42":"\u0c41\u0c3e","\u0c44":"\u0c43\u0c3e","\u0ce1":"\u0c8c\u0cbe","\u0d08":"\u0d07\u0d57","\u0d10":"\u0d0e\u0d46","\u0d13":"\u0d12\u0d3e","\u0d14":"\u0d12\u0d57","\u0d61":"\u0d1e","\u0d6b":"\u0d26\u0d4d\u0d30","\u0d79":"\u0d28\u0d41","\u0d0c":"\u0d28\u0d41","\u0d19":"\u0d28\u0d41","\u0d6f":"\u0d28\u0d4d","\u0d7b":"\u0d28\u0d4d","\u0d6c":"\u0d28\u0d4d\u0d28","\u0d5a":"\u0d28\u0d4d\u0d2e","\u0d31":"\u0d30","\u0d6a":"\u0d30\u0d4d","\u0d7c":"\u0d30\u0d4d","\u0d6e":"\u0d35\u0d4d\u0d30","\u0d76":"\u0d39\u0d4d\u0d2e","\u0d42":"\u0d41","\u0d43":"\u0d41","\u0d48":"\u0d46\u0d46","\u0dea":"\u0da2","\u0deb":"\u0daf","\ud805\udc13":"\ud805\udc34\ud805\udc42\ud805\udc12","\ud805\udc19":"\ud805\udc34\ud805\udc42\ud805\udc18","\ud805\udc24":"\ud805\udc34\ud805\udc42\ud805\udc23","\ud805\udc2a":"\ud805\udc34\ud805\udc42\ud805\udc29","\ud805\udc2d":"\ud805\udc34\ud805\udc42\ud805\udc2c","\ud805\udc2f":"\ud805\udc34\ud805\udc42\ud805\udc2e","\ud805\uddd8":"\ud805\udd82","\ud805\uddd9":"\ud805\udd82","\ud805\uddda":"\ud805\udd83","\ud805\udddb":"\ud805\udd84","\ud805\udddc":"\ud805\uddb2","\ud805\udddd":"\ud805\uddb3","\u0e03":"\u0e02","\u0e14":"\u0e04","\u0e15":"\u0e04","\u0e21":"\u0e06","\u0e88":"\u0e08","\u0e0b":"\u0e0a","\u0e0f":"\u0e0e","\u0e17":"\u0e11","\u0e9a":"\u0e1a","\u0e9b":"\u0e1b","\u0e9d":"\u0e1d","\u0e9e":"\u0e1e","\u0e9f":"\u0e1f","\u0e26":"\u0e20","\u0e8d":"\u0e22","\u17d4":"\u0e2f","\u0e45":"\u0e32","\u0e33":"\u030a\u0e32","\u17b7":"\u0e34","\u17b8":"\u0e35","\u17b9":"\u0e36","\u17ba":"\u0e37","\u0eb8":"\u0e38","\u0eb9":"\u0e39","\u0e41":"\u0e40\u0e40","\u0edc":"\u0eab\u0e99","\u0edd":"\u0eab\u0ea1","\u0eb3":"\u030a\u0eb2","\u0f02":"\u0f60\u0f74\u0f82\u0f7f","\u0f03":"\u0f60\u0f74\u0f82\u0f14","\u0f6a":"\u0f62","\u0f00":"\u0f68\u0f7c\u0f7e","\u0f77":"\u0fb2\u0f71\u0f80","\u0f79":"\u0fb3\u0f71\u0f80","\ud807\udcb2":"\ud807\udcaa","\u1081":"\u1002\u103e","\u1000":"\u1002\u102c","\u1070":"\u1003\u103e","\u1066":"\u1015\u103e","\u101f":"\u1015\u102c","\u106f":"\u1015\u102c\u103e","\u107e":"\u107d\u103e","\u1029":"\u101e\u103c","\u102a":"\u101e\u103c\u1031\u102c\u103a","\u109e":"\u1083\u030a","\u17a3":"\u17a2","\u19d0":"\u199e","\u19d1":"\u19b1","\u1a80":"\u1a45","\u1a90":"\u1a45","\uaa53":"\uaa01","\uaa56":"\uaa23","\u1b52":"\u1b0d","\u1b53":"\u1b11","\u1b58":"\u1b28","\ua9a3":"\ua99d","\u1896":"\u185c","\u1855":"\u1835","\u1ff6":"\u13ef","\u140d":"\u1401\xb7","\u142b":"\u1401\u1420","\u1411":"\u1404\xb7","\u1413":"\u1405\xb7","\u142d":"\u1405\u1420","\u1415":"\u1406\xb7","\u1418":"\u140a\xb7","\u142e":"\u140a\u1420","\u141a":"\u140b\xb7","\u18dd":"\u141e\u18df","\u14d1":"\u1421","\u1540":"\u1429","\u143f":"\u1432\xb7","\u1443":"\u1434\xb7","\u2369":"\u1435","\u1447":"\u1439\xb7","\u145c":"\u144f\xb7","\u2e27":"\u1450","\u2283":"\u1450","\u145e":"\u1450\xb7","\u1469":"\u1450\'","\u27c9":"\u1450/","\u2ad7":"\u1450\u1455","\u1460":"\u1451\xb7","\u2e26":"\u1455","\u2282":"\u1455","\u1462":"\u1455\xb7","\u146a":"\u1455\'","\u1464":"\u1456\xb7","\u1475":"\u146b\xb7","\u1485":"\u146b\'","\u1479":"\u146e\xb7","\u147d":"\u1470\xb7","\u1603":"\u1489","\u1493":"\u1489\xb7","\u1495":"\u148b\xb7","\u1497":"\u148c\xb7","\u149b":"\u148e\xb7","\u1602":"\u1490","\u149d":"\u1490\xb7","\u149f":"\u1491\xb7","\u14ad":"\u14a3\xb7","\u14b1":"\u14a6\xb7","\u14b3":"\u14a7\xb7","\u14b5":"\u14a8\xb7","\u14b9":"\u14ab\xb7","\u14ca":"\u14c0\xb7","\u18c7":"\u14c2\xb7","\u18c9":"\u14c3\xb7","\u18cb":"\u14c4\xb7","\u18cd":"\u14c5\xb7","\u14cc":"\u14c7\xb7","\u14ce":"\u14c8\xb7","\u1604":"\u14d3","\u14dd":"\u14d3\xb7","\u14df":"\u14d5\xb7","\u14e1":"\u14d6\xb7","\u14e3":"\u14d7\xb7","\u14e5":"\u14d8\xb7","\u1607":"\u14da","\u14e7":"\u14da\xb7","\u14e9":"\u14db\xb7","\u14f7":"\u14ed\xb7","\u14f9":"\u14ef\xb7","\u14fb":"\u14f0\xb7","\u14fd":"\u14f1\xb7","\u14ff":"\u14f2\xb7","\u1501":"\u14f4\xb7","\u1503":"\u14f5\xb7","\u150c":"\u150b<","\u150e":"\u150bb","\u150d":"\u150b\u1455","\u150f":"\u150b\u1490","\u1518":"\u1510\xb7","\u151a":"\u1511\xb7","\u151c":"\u1512\xb7","\u151e":"\u1513\xb7","\u1520":"\u1514\xb7","\u1522":"\u1515\xb7","\u1524":"\u1516\xb7","\u1532":"\u1528\xb7","\u1534":"\u1529\xb7","\u1536":"\u152a\xb7","\u1538":"\u152b\xb7","\u153a":"\u152d\xb7","\u153c":"\u152e\xb7","\u1622":"\u1543","\u18e0":"\u1543\xb7","\u1623":"\u1546","\u1624":"\u154a","\u154f":"\u154c\xb7","\u1583":"\u1550b","\u1584":"\u1550b\u0307","\u1581":"\u1550d","\u157f":"\u1550P","\u166f":"\u1550\u146b","\u157e":"\u1550\u146c","\u1580":"\u1550\u146e","\u1582":"\u1550\u1470","\u1585":"\u1550\u1483","\u155c":"\u155a\xb7","\u18e3":"\u155e\xb7","\u18e4":"\u1566\xb7","\u1569":"\u1567\xb7","\u18e5":"\u156b\xb7","\u18e8":"\u1586\xb7","\u1591":"\u1595J","\u1670":"\u1595\u1489","\u158e":"\u1595\u148a","\u158f":"\u1595\u148b","\u1590":"\u1595\u148c","\u1592":"\u1595\u148e","\u1593":"\u1595\u1490","\u1594":"\u1595\u1491","\u1673":"\u1596J","\u1671":"\u1596\u148b","\u1672":"\u1596\u148c","\u1674":"\u1596\u148e","\u1675":"\u1596\u1490","\u1676":"\u1596\u1491","\u18ea":"\u1597\xb7","\u1677":"\u15a7\xb7","\u1678":"\u15a8\xb7","\u1679":"\u15a9\xb7","\u167a":"\u15aa\xb7","\u167b":"\u15ab\xb7","\u167c":"\u15ac\xb7","\u167d":"\u15ad\xb7","\u2aab":"\u15d2","\u2aaa":"\u15d5","\ua4f7":"\u15e1","\u18f0":"\u15f4\xb7","\u18f2":"\u161b\xb7","\u1dbb":"\u1646","\ua4ed":"\u1660","\u1dba":"\u18d4","\u1d3e":"\u18d6","\u18dc":"\u18df\u141e","\u02e1":"\u18f3","\u02b3":"\u18f4","\u02e2":"\u18f5","\u18db":"\u18f5","\ua6b0":"\u16b9","\u16e1":"\u16bc","\u237f":"\u16bd","\u16c2":"\u16bd","\ud834\ude3f":"\u16cb","\u2191":"\u16cf","\u21bf":"\u16d0","\u296e":"\u16d0\u21c2","\u2963":"\u16d0\u16da","\u2d63":"\u16ef","\u21be":"\u16da","\u2a21":"\u16da","\u22c4":"\u16dc","\u25c7":"\u16dc","\u25ca":"\u16dc","\u2662":"\u16dc","\ud83d\udf54":"\u16dc","\ud806\udcb7":"\u16dc","\ud800\ude94":"\u16dc","\u235a":"\u16dc\u0332","\u22c8":"\u16de","\u2a1d":"\u16de","\ud801\udcd0":"\u16e6","\u2195":"\u16e8","\ud803\udcfc":"\ud803\udc82","\ud803\udcfa":"\ud803\udca5","\u3131":"\u1100","\u11a8":"\u1100","\u1101":"\u1100\u1100","\u3132":"\u1100\u1100","\u11a9":"\u1100\u1100","\u11fa":"\u1100\u1102","\u115a":"\u1100\u1103","\u11c3":"\u1100\u1105","\u11fb":"\u1100\u1107","\u11aa":"\u1100\u1109","\u3133":"\u1100\u1109","\u11c4":"\u1100\u1109\u1100","\u11fc":"\u1100\u110e","\u11fd":"\u1100\u110f","\u11fe":"\u1100\u1112","\u3134":"\u1102","\u11ab":"\u1102","\u1113":"\u1102\u1100","\u11c5":"\u1102\u1100","\u1114":"\u1102\u1102","\u3165":"\u1102\u1102","\u11ff":"\u1102\u1102","\u1115":"\u1102\u1103","\u3166":"\u1102\u1103","\u11c6":"\u1102\u1103","\ud7cb":"\u1102\u1105","\u1116":"\u1102\u1107","\u115b":"\u1102\u1109","\u11c7":"\u1102\u1109","\u3167":"\u1102\u1109","\u115c":"\u1102\u110c","\u11ac":"\u1102\u110c","\u3135":"\u1102\u110c","\ud7cc":"\u1102\u110e","\u11c9":"\u1102\u1110","\u115d":"\u1102\u1112","\u11ad":"\u1102\u1112","\u3136":"\u1102\u1112","\u11c8":"\u1102\u1140","\u3168":"\u1102\u1140","\u3137":"\u1103","\u11ae":"\u1103","\u1117":"\u1103\u1100","\u11ca":"\u1103\u1100","\u1104":"\u1103\u1103","\u3138":"\u1103\u1103","\ud7cd":"\u1103\u1103","\ud7ce":"\u1103\u1103\u1107","\u115e":"\u1103\u1105","\u11cb":"\u1103\u1105","\ua960":"\u1103\u1106","\ua961":"\u1103\u1107","\ud7cf":"\u1103\u1107","\ua962":"\u1103\u1109","\ud7d0":"\u1103\u1109","\ud7d1":"\u1103\u1109\u1100","\ua963":"\u1103\u110c","\ud7d2":"\u1103\u110c","\ud7d3":"\u1103\u110e","\ud7d4":"\u1103\u1110","\u3139":"\u1105","\u11af":"\u1105","\ua964":"\u1105\u1100","\u11b0":"\u1105\u1100","\u313a":"\u1105\u1100","\ua965":"\u1105\u1100\u1100","\ud7d5":"\u1105\u1100\u1100","\u11cc":"\u1105\u1100\u1109","\u3169":"\u1105\u1100\u1109","\ud7d6":"\u1105\u1100\u1112","\u1118":"\u1105\u1102","\u11cd":"\u1105\u1102","\ua966":"\u1105\u1103","\u11ce":"\u1105\u1103","\u316a":"\u1105\u1103","\ua967":"\u1105\u1103\u1103","\u11cf":"\u1105\u1103\u1112","\u1119":"\u1105\u1105","\u11d0":"\u1105\u1105","\ud7d7":"\u1105\u1105\u110f","\ua968":"\u1105\u1106","\u11b1":"\u1105\u1106","\u313b":"\u1105\u1106","\u11d1":"\u1105\u1106\u1100","\u11d2":"\u1105\u1106\u1109","\ud7d8":"\u1105\u1106\u1112","\ua969":"\u1105\u1107","\u11b2":"\u1105\u1107","\u313c":"\u1105\u1107","\ud7d9":"\u1105\u1107\u1103","\ua96a":"\u1105\u1107\u1107","\u11d3":"\u1105\u1107\u1109","\u316b":"\u1105\u1107\u1109","\ua96b":"\u1105\u1107\u110b","\u11d5":"\u1105\u1107\u110b","\ud7da":"\u1105\u1107\u1111","\u11d4":"\u1105\u1107\u1112","\ua96c":"\u1105\u1109","\u11b3":"\u1105\u1109","\u313d":"\u1105\u1109","\u11d6":"\u1105\u1109\u1109","\u111b":"\u1105\u110b","\ud7dd":"\u1105\u110b","\ua96d":"\u1105\u110c","\ua96e":"\u1105\u110f","\u11d8":"\u1105\u110f","\u11b4":"\u1105\u1110","\u313e":"\u1105\u1110","\u11b5":"\u1105\u1111","\u313f":"\u1105\u1111","\u111a":"\u1105\u1112","\u3140":"\u1105\u1112","\u113b":"\u1105\u1112","\u11b6":"\u1105\u1112","\ud7f2":"\u1105\u1112","\u11d7":"\u1105\u1140","\u316c":"\u1105\u1140","\ud7db":"\u1105\u114c","\u11d9":"\u1105\u1159","\u316d":"\u1105\u1159","\ud7dc":"\u1105\u1159\u1112","\u3141":"\u1106","\u11b7":"\u1106","\ua96f":"\u1106\u1100","\u11da":"\u1106\u1100","\ud7de":"\u1106\u1102","\ud7df":"\u1106\u1102\u1102","\ua970":"\u1106\u1103","\u11db":"\u1106\u1105","\ud7e0":"\u1106\u1106","\u111c":"\u1106\u1107","\u316e":"\u1106\u1107","\u11dc":"\u1106\u1107","\ud7e1":"\u1106\u1107\u1109","\ua971":"\u1106\u1109","\u11dd":"\u1106\u1109","\u316f":"\u1106\u1109","\u11de":"\u1106\u1109\u1109","\u111d":"\u1106\u110b","\u3171":"\u1106\u110b","\u11e2":"\u1106\u110b","\ud7e2":"\u1106\u110c","\u11e0":"\u1106\u110e","\u11e1":"\u1106\u1112","\u11df":"\u1106\u1140","\u3170":"\u1106\u1140","\u3142":"\u1107","\u11b8":"\u1107","\u111e":"\u1107\u1100","\u3172":"\u1107\u1100","\u111f":"\u1107\u1102","\u1120":"\u1107\u1103","\u3173":"\u1107\u1103","\ud7e3":"\u1107\u1103","\u11e3":"\u1107\u1105","\ud7e4":"\u1107\u1105\u1111","\ud7e5":"\u1107\u1106","\u1108":"\u1107\u1107","\u3143":"\u1107\u1107","\ud7e6":"\u1107\u1107","\u112c":"\u1107\u1107\u110b","\u3179":"\u1107\u1107\u110b","\u1121":"\u1107\u1109","\u3144":"\u1107\u1109","\u11b9":"\u1107\u1109","\u1122":"\u1107\u1109\u1100","\u3174":"\u1107\u1109\u1100","\u1123":"\u1107\u1109\u1103","\u3175":"\u1107\u1109\u1103","\ud7e7":"\u1107\u1109\u1103","\u1124":"\u1107\u1109\u1107","\u1125":"\u1107\u1109\u1109","\u1126":"\u1107\u1109\u110c","\ua972":"\u1107\u1109\u1110","\u112b":"\u1107\u110b","\u3178":"\u1107\u110b","\u11e6":"\u1107\u110b","\u1127":"\u1107\u110c","\u3176":"\u1107\u110c","\ud7e8":"\u1107\u110c","\u1128":"\u1107\u110e","\ud7e9":"\u1107\u110e","\ua973":"\u1107\u110f","\u1129":"\u1107\u1110","\u3177":"\u1107\u1110","\u112a":"\u1107\u1111","\u11e4":"\u1107\u1111","\ua974":"\u1107\u1112","\u11e5":"\u1107\u1112","\u3145":"\u1109","\u11ba":"\u1109","\u112d":"\u1109\u1100","\u317a":"\u1109\u1100","\u11e7":"\u1109\u1100","\u112e":"\u1109\u1102","\u317b":"\u1109\u1102","\u112f":"\u1109\u1103","\u317c":"\u1109\u1103","\u11e8":"\u1109\u1103","\u1130":"\u1109\u1105","\u11e9":"\u1109\u1105","\u1131":"\u1109\u1106","\ud7ea":"\u1109\u1106","\u1132":"\u1109\u1107","\u317d":"\u1109\u1107","\u11ea":"\u1109\u1107","\u1133":"\u1109\u1107\u1100","\ud7eb":"\u1109\u1107\u110b","\u110a":"\u1109\u1109","\u3146":"\u1109\u1109","\u11bb":"\u1109\u1109","\ud7ec":"\u1109\u1109\u1100","\ud7ed":"\u1109\u1109\u1103","\ua975":"\u1109\u1109\u1107","\u1134":"\u1109\u1109\u1109","\u1135":"\u1109\u110b","\u1136":"\u1109\u110c","\u317e":"\u1109\u110c","\ud7ef":"\u1109\u110c","\u1137":"\u1109\u110e","\ud7f0":"\u1109\u110e","\u1138":"\u1109\u110f","\u1139":"\u1109\u1110","\ud7f1":"\u1109\u1110","\u113a":"\u1109\u1111","\ud7ee":"\u1109\u1140","\u3147":"\u110b","\u11bc":"\u110b","\u1141":"\u110b\u1100","\u11ec":"\u110b\u1100","\u11ed":"\u110b\u1100\u1100","\u1142":"\u110b\u1103","\ua976":"\u110b\u1105","\u1143":"\u110b\u1106","\u1144":"\u110b\u1107","\u1145":"\u110b\u1109","\u11f1":"\u110b\u1109","\u3182":"\u110b\u1109","\u1147":"\u110b\u110b","\u3180":"\u110b\u110b","\u11ee":"\u110b\u110b","\u1148":"\u110b\u110c","\u1149":"\u110b\u110e","\u11ef":"\u110b\u110f","\u114a":"\u110b\u1110","\u114b":"\u110b\u1111","\ua977":"\u110b\u1112","\u1146":"\u110b\u1140","\u11f2":"\u110b\u1140","\u3183":"\u110b\u1140","\u3148":"\u110c","\u11bd":"\u110c","\ud7f7":"\u110c\u1107","\ud7f8":"\u110c\u1107\u1107","\u114d":"\u110c\u110b","\u110d":"\u110c\u110c","\u3149":"\u110c\u110c","\ud7f9":"\u110c\u110c","\ua978":"\u110c\u110c\u1112","\u314a":"\u110e","\u11be":"\u110e","\u1152":"\u110e\u110f","\u1153":"\u110e\u1112","\u314b":"\u110f","\u11bf":"\u110f","\u314c":"\u1110","\u11c0":"\u1110","\ua979":"\u1110\u1110","\u314d":"\u1111","\u11c1":"\u1111","\u1156":"\u1111\u1107","\u11f3":"\u1111\u1107","\ud7fa":"\u1111\u1109","\u1157":"\u1111\u110b","\u3184":"\u1111\u110b","\u11f4":"\u1111\u110b","\ud7fb":"\u1111\u1110","\ua97a":"\u1111\u1112","\u314e":"\u1112","\u11c2":"\u1112","\u11f5":"\u1112\u1102","\u11f6":"\u1112\u1105","\u11f7":"\u1112\u1106","\u11f8":"\u1112\u1107","\ua97b":"\u1112\u1109","\u1158":"\u1112\u1112","\u3185":"\u1112\u1112","\u113d":"\u113c\u113c","\u113f":"\u113e\u113e","\u317f":"\u1140","\u11eb":"\u1140","\ud7f3":"\u1140\u1107","\ud7f4":"\u1140\u1107\u110b","\u3181":"\u114c","\u11f0":"\u114c","\ud7f5":"\u114c\u1106","\ud7f6":"\u114c\u1112","\u114f":"\u114e\u114e","\u1151":"\u1150\u1150","\u3186":"\u1159","\u11f9":"\u1159","\ua97c":"\u1159\u1159","\u3164":"\u1160","\u314f":"\u1161","\u11a3":"\u1161\u30fc","\u1176":"\u1161\u1169","\u1177":"\u1161\u116e","\u1162":"\u1161\u4e28","\u3150":"\u1161\u4e28","\u3151":"\u1163","\u1178":"\u1163\u1169","\u1179":"\u1163\u116d","\u11a4":"\u1163\u116e","\u1164":"\u1163\u4e28","\u3152":"\u1163\u4e28","\u3153":"\u1165","\u117c":"\u1165\u30fc","\u117a":"\u1165\u1169","\u117b":"\u1165\u116e","\u1166":"\u1165\u4e28","\u3154":"\u1165\u4e28","\u3155":"\u1167","\u11a5":"\u1167\u1163","\u117d":"\u1167\u1169","\u117e":"\u1167\u116e","\u1168":"\u1167\u4e28","\u3156":"\u1167\u4e28","\u3157":"\u1169","\u116a":"\u1169\u1161","\u3158":"\u1169\u1161","\u116b":"\u1169\u1161\u4e28","\u3159":"\u1169\u1161\u4e28","\u11a6":"\u1169\u1163","\u11a7":"\u1169\u1163\u4e28","\u117f":"\u1169\u1165","\u1180":"\u1169\u1165\u4e28","\ud7b0":"\u1169\u1167","\u1181":"\u1169\u1167\u4e28","\u1182":"\u1169\u1169","\ud7b1":"\u1169\u1169\u4e28","\u1183":"\u1169\u116e","\u116c":"\u1169\u4e28","\u315a":"\u1169\u4e28","\u315b":"\u116d","\ud7b2":"\u116d\u1161","\ud7b3":"\u116d\u1161\u4e28","\u1184":"\u116d\u1163","\u3187":"\u116d\u1163","\u1186":"\u116d\u1163","\u1185":"\u116d\u1163\u4e28","\u3188":"\u116d\u1163\u4e28","\ud7b4":"\u116d\u1165","\u1187":"\u116d\u1169","\u1188":"\u116d\u4e28","\u3189":"\u116d\u4e28","\u315c":"\u116e","\u1189":"\u116e\u1161","\u118a":"\u116e\u1161\u4e28","\u116f":"\u116e\u1165","\u315d":"\u116e\u1165","\u118b":"\u116e\u1165\u30fc","\u1170":"\u116e\u1165\u4e28","\u315e":"\u116e\u1165\u4e28","\ud7b5":"\u116e\u1167","\u118c":"\u116e\u1167\u4e28","\u118d":"\u116e\u116e","\u1171":"\u116e\u4e28","\u315f":"\u116e\u4e28","\ud7b6":"\u116e\u4e28\u4e28","\u3160":"\u1172","\u118e":"\u1172\u1161","\ud7b7":"\u1172\u1161\u4e28","\u118f":"\u1172\u1165","\u1190":"\u1172\u1165\u4e28","\u1191":"\u1172\u1167","\u318a":"\u1172\u1167","\u1192":"\u1172\u1167\u4e28","\u318b":"\u1172\u1167\u4e28","\ud7b8":"\u1172\u1169","\u1193":"\u1172\u116e","\u1194":"\u1172\u4e28","\u318c":"\u1172\u4e28","\u318d":"\u119e","\ud7c5":"\u119e\u1161","\u119f":"\u119e\u1165","\ud7c6":"\u119e\u1165\u4e28","\u11a0":"\u119e\u116e","\u11a2":"\u119e\u119e","\u11a1":"\u119e\u4e28","\u318e":"\u119e\u4e28","\u30d8":"\u3078","\u2341":"\u303c","\u29c4":"\u303c","\ua49e":"\ua04a","\ua4ac":"\ua050","\ua49c":"\ua0c0","\ua4a8":"\ua132","\ua4bf":"\ua259","\ua4be":"\ua2b1","\ua494":"\ua2cd","\ua4c0":"\ua3ab","\ua4c2":"\ua3b5","\ua4ba":"\ua3bf","\ua4b0":"\ua3c2","\ua4a7":"\ua458","\u22a5":"\ua4d5","\u27c2":"\ua4d5","\ud834\ude1c":"\ua4d5","\ua7b1":"\ua4d5","\ua79e":"\ua4e4","\u2141":"\ua4e8","\u2142":"\ua4f6","\ud834\ude15":"\ua4f6","\ud834\ude2b":"\ua4f6","\ud81b\udf26":"\ua4f6","\ud801\udc11":"\ua4f6","\u2143":"\ud81b\udf00","\ud806\udee6":"\ud806\udee5\ud806\udeef","\ud806\udee8":"\ud806\udee5\ud806\udee5","\ud806\udee9":"\ud806\udee5\ud806\udee5\ud806\udeef","\ud806\udeea":"\ud806\udee5\ud806\udee5\ud806\udef0","\ud806\udee7":"\ud806\udee5\ud806\udef0","\ud806\udef4":"\ud806\udef3\ud806\udeef","\ud806\udef6":"\ud806\udef3\ud806\udef3","\ud806\udef7":"\ud806\udef3\ud806\udef3\ud806\udeef","\ud806\udef8":"\ud806\udef3\ud806\udef3\ud806\udef0","\ud806\udef5":"\ud806\udef3\ud806\udef0","\ud806\udeec":"\ud806\udeeb\ud806\udeef","\ud806\udeed":"\ud806\udeeb\ud806\udeeb","\ud806\udeee":"\ud806\udeeb\ud806\udeeb\ud806\udeef","\u2295":"\ud800\udea8","\u2a01":"\ud800\udea8","\ud83d\udf28":"\ud800\udea8","\ua69a":"\ud800\udea8","\u25bd":"\ud800\udebc","\ud834\ude14":"\ud800\udebc","\ud83d\udf04":"\ud800\udebc","\u29d6":"\ud800\udec0","\ua79b":"\ud801\udc3a","\ua79a":"\ud801\udc12","\ud801\udca0":"\ud801\udc86","\ud800\udfd1":"\ud800\udf82","\ud800\udfd3":"\ud800\udf93","\ud808\udc38":"\ud800\udf9a","\u2625":"\ud802\udd9e","\ud80c\udef9":"\ud802\udd9e","\u3039":"\u5344","\uf967":"\u4e0d","\ud87e\udc00":"\u4e3d","\ufa70":"\u4e26","\u239c":"\u4e28","\u239f":"\u4e28","\u23a2":"\u4e28","\u23a5":"\u4e28","\u23aa":"\u4e28","\u23ae":"\u4e28","\u31d1":"\u4e28","\u1175":"\u4e28","\u3163":"\u4e28","\u2f01":"\u4e28","\u119c":"\u4e28\u30fc","\u1198":"\u4e28\u1161","\u1199":"\u4e28\u1163","\ud7bd":"\u4e28\u1163\u1169","\ud7be":"\u4e28\u1163\u4e28","\ud7bf":"\u4e28\u1167","\ud7c0":"\u4e28\u1167\u4e28","\u119a":"\u4e28\u1169","\ud7c1":"\u4e28\u1169\u4e28","\ud7c2":"\u4e28\u116d","\u119b":"\u4e28\u116e","\ud7c3":"\u4e28\u1172","\u119d":"\u4e28\u119e","\ud7c4":"\u4e28\u4e28","\uf905":"\u4e32","\ud87e\udc01":"\u4e38","\uf95e":"\u4e39","\ud87e\udc02":"\u4e41","\u31e0":"\u4e59","\u2f04":"\u4e59","\u31df":"\u4e5a","\u2e83":"\u4e5a","\u31d6":"\u4e5b","\u2e82":"\u4e5b","\u2ef2":"\u4e80","\uf91b":"\u4e82","\u31da":"\u4e85","\u2f05":"\u4e85","\uf9ba":"\u4e86","\u30cb":"\u4e8c","\u2f06":"\u4e8c","\ud87e\udc03":"\ud840\udd22","\u2f07":"\u4ea0","\uf977":"\u4eae","\u2f08":"\u4eba","\u30a4":"\u4ebb","\u2e85":"\u4ebb","\uf9fd":"\u4ec0","\ud87e\udc19":"\u4ecc","\uf9a8":"\u4ee4","\ud87e\udc04":"\u4f60","\u5002":"\u4f75","\ud87e\udc07":"\u4f75","\ufa73":"\u4f80","\uf92d":"\u4f86","\uf9b5":"\u4f8b","\ufa30":"\u4fae","\ud87e\udc05":"\u4fae","\ud87e\udc06":"\u4fbb","\uf965":"\u4fbf","\u503c":"\u5024","\uf9d4":"\u502b","\ud87e\udc08":"\u507a","\ud87e\udc09":"\u5099","\ud87e\udc0b":"\u50cf","\uf9bb":"\u50da","\ufa31":"\u50e7","\ud87e\udc0a":"\u50e7","\ud87e\udc0c":"\u349e","\u2f09":"\u513f","\ufa0c":"\u5140","\u2e8e":"\u5140","\ufa74":"\u5145","\ufa32":"\u514d","\ud87e\udc0e":"\u514d","\ud87e\udc0f":"\u5154","\ud87e\udc10":"\u5164","\u2f0a":"\u5165","\ud87e\udc14":"\u5167","\ufa72":"\u5168","\uf978":"\u5169","\u30cf":"\u516b","\u2f0b":"\u516b","\uf9d1":"\u516d","\ud87e\udc11":"\u5177","\ud87e\udc12":"\ud841\udd1c","\ud87e\udd1b":"\ud841\udd25","\ufa75":"\u5180","\ud87e\udc13":"\u34b9","\u2f0c":"\u5182","\ud87e\udc15":"\u518d","\ud87e\udc16":"\ud841\udd4b","\ud87e\udcd2":"\u5192","\ud87e\udcd3":"\u5195","\ud87e\uddca":"\u34bb","\ud87e\udcd4":"\u6700","\u2f0d":"\u5196","\ud87e\udc17":"\u5197","\ud87e\udc18":"\u51a4","\u2f0e":"\u51ab","\ud87e\udc1a":"\u51ac","\ufa71":"\u51b5","\ud87e\udc1b":"\u51b5","\uf92e":"\u51b7","\uf979":"\u51c9","\uf955":"\u51cc","\uf954":"\u51dc","\ufa15":"\u51de","\u2f0f":"\u51e0","\ud87e\udc0d":"\ud841\ude3a","\ud87e\udc1d":"\u51f5","\u2f10":"\u51f5","\u2f11":"\u5200","\u2e89":"\u5202","\ud87e\udc1e":"\u5203","\ufa00":"\u5207","\ud87e\udc50":"\u5207","\uf99c":"\u5217","\uf9dd":"\u5229","\ud87e\udc1f":"\u34df","\uf9ff":"\u523a","\ud87e\udc20":"\u523b","\ud87e\udc21":"\u5246","\ud87e\udc22":"\u5272","\ud87e\udc23":"\u5277","\uf9c7":"\u5289","\ud87e\uddd9":"\ud842\udc04","\u30ab":"\u529b","\uf98a":"\u529b","\u2f12":"\u529b","\uf99d":"\u52a3","\ud87e\udc24":"\u3515","\ud87e\udd92":"\u52b3","\ufa76":"\u52c7","\ud87e\udc25":"\u52c7","\ufa33":"\u52c9","\ud87e\udc26":"\u52c9","\uf952":"\u52d2","\uf92f":"\u52de","\ufa34":"\u52e4","\ud87e\udc27":"\u52e4","\uf97f":"\u52f5","\u2f13":"\u52f9","\ufa77":"\u52fa","\ud87e\udc28":"\u52fa","\ud87e\udc29":"\u5305","\ud87e\udc2a":"\u5306","\ud87e\udddd":"\ud842\udcde","\u2f14":"\u5315","\uf963":"\u5317","\ud87e\udc2b":"\u5317","\u2f15":"\u531a","\u2f16":"\u5338","\uf9eb":"\u533f","\u2f17":"\u5341","\u3038":"\u5341","\u303a":"\u5345","\ud87e\udc2c":"\u5349","\u0fd6":"\u534d","\u0fd5":"\u5350","\ufa35":"\u5351","\ud87e\udc2d":"\u5351","\ud87e\udc2e":"\u535a","\u30c8":"\u535c","\u2f18":"\u535c","\u2f19":"\u5369","\u2e8b":"\u353e","\ud87e\udc2f":"\u5373","\uf91c":"\u5375","\ud87e\udc30":"\u537d","\ud87e\udc31":"\u537f","\ud87e\udc32":"\u537f","\ud87e\udc33":"\u537f","\u2f1a":"\u5382","\ud87e\udc34":"\ud842\ude2c","\u2f1b":"\u53b6","\uf96b":"\u53c3","\u2f1c":"\u53c8","\ud87e\udc36":"\u53ca","\ud87e\udc37":"\u53df","\ud87e\udc38":"\ud842\udf63","\u30ed":"\u53e3","\u2f1d":"\u53e3","\u56d7":"\u53e3","\u2f1e":"\u53e3","\uf906":"\u53e5","\ud87e\udc39":"\u53eb","\ud87e\udc3a":"\u53f1","\ud87e\udc3b":"\u5406","\uf9de":"\u540f","\uf9ed":"\u541d","\ud87e\udc3d":"\u5438","\uf980":"\u5442","\ud87e\udc3e":"\u5448","\ud87e\udc3f":"\u5468","\ud87e\udc3c":"\u549e","\ud87e\udc40":"\u54a2","\uf99e":"\u54bd","\u439b":"\u3588","\ud87e\udc41":"\u54f6","\ud87e\udc42":"\u5510","\ud87e\udc43":"\u5553","\u555f":"\u5553","\ufa79":"\u5555","\ud87e\udc44":"\u5563","\ud87e\udc45":"\u5584","\ud87e\udc46":"\u5584","\uf90b":"\u5587","\ufa7a":"\u5599","\ud87e\udc47":"\u5599","\ufa36":"\u559d","\ufa78":"\u559d","\ud87e\udc48":"\u55ab","\ud87e\udc49":"\u55b3","\ufa0d":"\u55c0","\ud87e\udc4a":"\u55c2","\ufa7b":"\u55e2","\ufa37":"\u5606","\ud87e\udc4c":"\u5606","\ud87e\udc4e":"\u5651","\ud87e\udc4f":"\u5674","\ufa38":"\u5668","\uf9a9":"\u56f9","\ud87e\udc4b":"\u5716","\ud87e\udc4d":"\u5717","\u2f1f":"\u571f","\u58eb":"\u571f","\u2f20":"\u571f","\ud87e\udc55":"\u578b","\ud87e\udc52":"\u57ce","\u39b3":"\u363d","\ud87e\udc53":"\u57f4","\ud87e\udc54":"\u580d","\ud87e\udc57":"\u5831","\ud87e\udc56":"\u5832","\ufa39":"\u5840","\ufa10":"\u585a","\ufa7c":"\u585a","\uf96c":"\u585e","\u586b":"\u5861","\u58ff":"\u58ab","\ud87e\udc58":"\u58ac","\ufa7d":"\u58b3","\uf94a":"\u58d8","\uf942":"\u58df","\ud87e\udc59":"\ud845\udce4","\ud87e\udc51":"\u58ee","\ud87e\udc5a":"\u58f2","\ud87e\udc5b":"\u58f7","\u2f21":"\u5902","\ud87e\udc5c":"\u5906","\u2f22":"\u590a","\u30bf":"\u5915","\u2f23":"\u5915","\ud87e\udc5d":"\u591a","\ud87e\udc5e":"\u5922","\u2f24":"\u5927","\ufa7e":"\u5944","\uf90c":"\u5948","\uf909":"\u5951","\ufa7f":"\u5954","\ud87e\udc5f":"\u5962","\uf981":"\u5973","\u2f25":"\u5973","\ud87e\udc60":"\ud845\udea8","\ud87e\udc61":"\ud845\udeea","\ud87e\udc65":"\u59d8","\ud87e\udc62":"\u59ec","\ud87e\udc63":"\u5a1b","\ud87e\udc64":"\u5a27","\ufa80":"\u5a62","\ud87e\udc66":"\u5a66","\u5b00":"\u5aaf","\ud87e\udc67":"\u36ee","\ud87e\udc68":"\u36fc","\ud87e\udd86":"\u5ab5","\ud87e\udc69":"\u5b08","\ufa81":"\u5b28","\ud87e\udc6a":"\u5b3e","\ud87e\udc6b":"\u5b3e","\u2f26":"\u5b50","\u2f27":"\u5b80","\ufa04":"\u5b85","\ud87e\udc6c":"\ud846\uddc8","\ud87e\udc6d":"\u5bc3","\ud87e\udc6e":"\u5bd8","\uf95f":"\u5be7","\uf9aa":"\u5be7","\ud87e\udc6f":"\u5be7","\uf9bc":"\u5bee","\ud87e\udc70":"\u5bf3","\ud87e\udc71":"\ud846\udf18","\u2f28":"\u5bf8","\ud87e\udc72":"\u5bff","\ud87e\udc73":"\u5c06","\u2f29":"\u5c0f","\ud87e\udc75":"\u5c22","\u2e90":"\u5c22","\u2f2a":"\u5c22","\u2e8f":"\u5c23","\ud87e\udc76":"\u3781","\u2f2b":"\u5c38","\uf9bd":"\u5c3f","\ud87e\udc77":"\u5c60","\uf94b":"\u5c62","\ufa3b":"\u5c64","\uf9df":"\u5c65","\ufa3c":"\u5c6e","\ud87e\udc78":"\u5c6e","\u2f2c":"\u5c6e","\ud87e\udcf8":"\ud847\udd0b","\u2f2d":"\u5c71","\ud87e\udc79":"\u5cc0","\ud87e\udc7a":"\u5c8d","\ud87e\udc7b":"\ud847\udde4","\ud87e\udc7d":"\ud847\udde6","\uf9d5":"\u5d19","\ud87e\udc7c":"\u5d43","\uf921":"\u5d50","\ud87e\udc7f":"\u5d6b","\ud87e\udc7e":"\u5d6e","\ud87e\udc80":"\u5d7c","\ud87e\uddf4":"\u5db2","\uf9ab":"\u5dba","\u2f2e":"\u5ddb","\ud87e\udc82":"\u5de2","\u30a8":"\u5de5","\u2f2f":"\u5de5","\u2f30":"\u5df1","\u2e92":"\u5df3","\ud87e\udc83":"\u382f","\ud87e\udc84":"\u5dfd","\u2f31":"\u5dfe","\u5e32":"\u5e21","\ud87e\udc85":"\u5e28","\ud87e\udc86":"\u5e3d","\ud87e\udc87":"\u5e69","\ud87e\udc88":"\u3862","\ud87e\udc89":"\ud848\udd83","\u2f32":"\u5e72","\uf98e":"\u5e74","\ud87e\udd39":"\ud848\udd9f","\u2e93":"\u5e7a","\u2f33":"\u5e7a","\u2f34":"\u5e7f","\ufa01":"\u5ea6","\ud87e\udc8a":"\u387c","\ud87e\udc8b":"\u5eb0","\ud87e\udc8c":"\u5eb3","\ud87e\udc8d":"\u5eb6","\uf928":"\u5eca","\ud87e\udc8e":"\u5eca","\uf9a2":"\u5ec9","\ufa82":"\u5ed2","\ufa0b":"\u5ed3","\ufa83":"\u5ed9","\uf982":"\u5eec","\u2f35":"\u5ef4","\ud87e\udc90":"\u5efe","\u2f36":"\u5efe","\ud87e\udc91":"\ud848\udf31","\ud87e\udc92":"\ud848\udf31","\uf943":"\u5f04","\u2f37":"\u5f0b","\u2f38":"\u5f13","\ud87e\udc94":"\u5f22","\ud87e\udc95":"\u5f22","\u2f39":"\u5f50","\u2e94":"\u5f51","\ud87e\udc74":"\u5f53","\ud87e\udc96":"\u38c7","\u2f3a":"\u5f61","\ud87e\udc99":"\u5f62","\ufa84":"\u5f69","\ud87e\udc9a":"\u5f6b","\u2f3b":"\u5f73","\uf9d8":"\u5f8b","\ud87e\udc9b":"\u38e3","\ud87e\udc9c":"\u5f9a","\uf966":"\u5fa9","\ufa85":"\u5fad","\u2f3c":"\u5fc3","\u2e96":"\u5fc4","\u2e97":"\u38fa","\ud87e\udc9d":"\u5fcd","\ud87e\udc9e":"\u5fd7","\uf9a3":"\u5ff5","\ud87e\udc9f":"\u5ff9","\uf960":"\u6012","\uf9ac":"\u601c","\ufa6b":"\u6075","\ud87e\udca2":"\u391c","\ud87e\udca1":"\u393a","\ud87e\udca0":"\u6081","\ufa3d":"\u6094","\ud87e\udca3":"\u6094","\ud87e\udca5":"\u60c7","\ufa86":"\u60d8","\uf9b9":"\u60e1","\ud87e\udca4":"\ud849\uded4","\ufa88":"\u6108","\ufa3e":"\u6168","\uf9d9":"\u6144","\ud87e\udca6":"\u6148","\ud87e\udca7":"\u614c","\ud87e\udca9":"\u614c","\ufa87":"\u614e","\ud87e\udca8":"\u614e","\ufa8a":"\u6160","\ud87e\udcaa":"\u617a","\ufa3f":"\u618e","\ufa89":"\u618e","\ud87e\udcab":"\u618e","\uf98f":"\u6190","\ud87e\udcad":"\u61a4","\ud87e\udcae":"\u61af","\ud87e\udcac":"\u61b2","\ufad0":"\ud84a\udc44","\ufacf":"\ud84a\udc4a","\ud87e\udcaf":"\u61de","\ufa40":"\u61f2","\ufa8b":"\u61f2","\ud87e\udcb0":"\u61f2","\uf90d":"\u61f6","\ud87e\udcb1":"\u61f6","\uf990":"\u6200","\u2f3d":"\u6208","\ud87e\udcb2":"\u6210","\ud87e\udcb3":"\u621b","\uf9d2":"\u622e","\ufa8c":"\u6234","\u2f3e":"\u6236","\u6238":"\u6236","\u2f3f":"\u624b","\u2e98":"\u624c","\ud87e\udcb4":"\u625d","\ud87e\udcb5":"\u62b1","\uf925":"\u62c9","\uf95b":"\u62cf","\ufa02":"\u62d3","\ud87e\udcb6":"\u62d4","\ud87e\udcba":"\u62fc","\uf973":"\u62fe","\ud87e\udcb8":"\ud84a\udf0c","\ud87e\udcb9":"\u633d","\ud87e\udcb7":"\u6350","\ud87e\udcbb":"\u6368","\uf9a4":"\u637b","\ud87e\udcbc":"\u6383","\uf975":"\u63a0","\ud87e\udcc1":"\u63a9","\ufa8d":"\u63c4","\ud87e\udcbd":"\u63e4","\ufa8f":"\u6452","\ud87e\udcbe":"\ud84a\udff1","\ufa8e":"\u641c","\ud87e\udcbf":"\u6422","\ud87e\udcc0":"\u63c5","\ud87e\udcc3":"\u6469","\ud87e\udcc6":"\u6477","\ud87e\udcc4":"\u647e","\ud87e\udcc2":"\u3a2e","\u6409":"\u3a41","\uf991":"\u649a","\ud87e\udcc5":"\u649d","\uf930":"\u64c4","\ud87e\udcc7":"\u3a6c","\u2f40":"\u652f","\u2f41":"\u6534","\u2e99":"\u6535","\ufa41":"\u654f","\ud87e\udcc8":"\u654f","\ufa90":"\u6556","\ud87e\udcc9":"\u656c","\uf969":"\u6578","\ud87e\udcca":"\ud84c\udc0a","\u2f42":"\u6587","\u2eeb":"\u6589","\u2f43":"\u6597","\uf9be":"\u6599","\u2f44":"\u65a4","\u2f45":"\u65b9","\uf983":"\u65c5","\u2f46":"\u65e0","\u2e9b":"\u65e1","\ufa42":"\u65e2","\ud87e\udccb":"\u65e3","\u2f47":"\u65e5","\uf9e0":"\u6613","\u66f6":"\u3ada","\ud87e\udcd1":"\u3ae4","\ud87e\udccd":"\u6649","\u6669":"\u665a","\ufa12":"\u6674","\ufa91":"\u6674","\ufa43":"\u6691","\ud87e\udccf":"\u6691","\uf9c5":"\u6688","\ud87e\udcd0":"\u3b08","\ud87e\udcd5":"\u669c","\ufa06":"\u66b4","\uf98b":"\u66c6","\ud87e\udcce":"\u3b19","\ud87e\udc97":"\ud84c\udeb8","\u2f48":"\u66f0","\uf901":"\u66f4","\ud87e\udccc":"\u66f8","\u2f49":"\u6708","\ud87e\udd80":"\ud84c\udf5f","\u80a6":"\u670c","\u80d0":"\u670f","\u80ca":"\u6710","\u8101":"\u6713","\u80f6":"\u3b35","\uf929":"\u6717","\ufa92":"\u6717","\ud87e\udcd8":"\u6717","\u8127":"\u6718","\ufa93":"\u671b","\ud87e\udcd9":"\u671b","\u5e50":"\u3b3a","\u4420":"\u3b3b","\ud87e\udd89":"\ud84c\udf93","\u81a7":"\u6723","\ud87e\udd8a":"\ud84c\udf9c","\u2f4a":"\u6728","\uf9e1":"\u674e","\ud87e\udcdc":"\u6753","\ufa94":"\u6756","\ud87e\udcdb":"\u675e","\ud87e\udcdd":"\ud84c\udfc3","\u67ff":"\u676e","\uf9c8":"\u677b","\ud87e\udce0":"\u6785","\uf9f4":"\u6797","\ud87e\udcde":"\u3b49","\ufad1":"\ud84c\udfd5","\uf9c9":"\u67f3","\ud87e\udcdf":"\u67fa","\uf9da":"\u6817","\ud87e\udce5":"\u681f","\ud87e\udce1":"\u6852","\ud87e\udce3":"\ud84d\udc6d","\uf97a":"\u6881","\ufa44":"\u6885","\ud87e\udce2":"\u6885","\ud87e\udce4":"\u688e","\uf9e2":"\u68a8","\ud87e\udce6":"\u6914","\ud87e\udce8":"\u6942","\ufad2":"\u3b9d","\ud87e\udce7":"\u3b9d","\u69e9":"\u3ba3","\u6a27":"\u699d","\ud87e\udce9":"\u69a3","\ud87e\udcea":"\u69ea","\uf914":"\u6a02","\uf95c":"\u6a02","\uf9bf":"\u6a02","\uf94c":"\u6a13","\ud87e\udcec":"\ud84d\udea3","\ud87e\udceb":"\u6aa8","\uf931":"\u6ad3","\ud87e\udced":"\u6adb","\uf91d":"\u6b04","\ud87e\udcee":"\u3c18","\u2f4b":"\u6b20","\ud87e\udcef":"\u6b21","\ud87e\udcf0":"\ud84e\udca7","\ud87e\udcf1":"\u6b54","\ud87e\udcf2":"\u3c4e","\u2f4c":"\u6b62","\u2eed":"\u6b6f","\ud87e\udcf3":"\u6b72","\uf98c":"\u6b77","\ufa95":"\u6b79","\u2f4d":"\u6b79","\u2e9e":"\u6b7a","\ud87e\udcf4":"\u6b9f","\uf9a5":"\u6bae","\u2f4e":"\u6bb3","\uf970":"\u6bba","\ufa96":"\u6bba","\ud87e\udcf5":"\u6bba","\ud87e\udcf6":"\u6bbb","\ud87e\udcf7":"\ud84e\ude8d","\u2f4f":"\u6bcb","\u2e9f":"\u6bcd","\ud87e\udcf9":"\ud84e\udefa","\u2f50":"\u6bd4","\u2f51":"\u6bdb","\u2f52":"\u6c0f","\u2ea0":"\u6c11","\u2f53":"\u6c14","\u2f54":"\u6c34","\u2ea1":"\u6c35","\u2ea2":"\u6c3a","\ud87e\udcfa":"\u6c4e","\ud87e\udcfe":"\u6c67","\uf972":"\u6c88","\ud87e\udcfc":"\u6cbf","\uf968":"\u6ccc","\ud87e\udcfd":"\u6ccd","\uf9e3":"\u6ce5","\ud87e\udcfb":"\ud84f\udcbc","\uf915":"\u6d1b","\ufa05":"\u6d1e","\ud87e\udd07":"\u6d34","\ud87e\udd00":"\u6d3e","\uf9ca":"\u6d41","\ufa97":"\u6d41","\ud87e\udd02":"\u6d41","\ud87e\udcff":"\u6d16","\ud87e\udd03":"\u6d69","\uf92a":"\u6d6a","\ufa45":"\u6d77","\ud87e\udd01":"\u6d77","\ud87e\udd04":"\u6d78","\ud87e\udd05":"\u6d85","\ud87e\udd06":"\ud84f\udd1e","\uf9f5":"\u6dcb","\uf94d":"\u6dda","\uf9d6":"\u6dea","\ud87e\udd0e":"\u6df9","\ufa46":"\u6e1a","\ud87e\udd08":"\u6e2f","\ud87e\udd09":"\u6e6e","\u6f59":"\u6e88","\ufa99":"\u6ecb","\ud87e\udd0b":"\u6ecb","\uf9cb":"\u6e9c","\uf9ec":"\u6eba","\ud87e\udd0c":"\u6ec7","\uf904":"\u6ed1","\ufa98":"\u6edb","\ud87e\udd0a":"\u3d33","\uf94e":"\u6f0f","\ufa47":"\u6f22","\ufa9a":"\u6f22","\uf992":"\u6f23","\ud87e\udd0d":"\ud84f\uded1","\ud87e\udd0f":"\u6f6e","\ud87e\udd10":"\ud84f\udf5e","\ud87e\udd11":"\ud84f\udf8e","\ud87e\udd12":"\u6fc6","\uf922":"\u6feb","\uf984":"\u6ffe","\ud87e\udd15":"\u701b","\ufa9b":"\u701e","\ud87e\udd14":"\u701e","\ud87e\udd13":"\u7039","\ud87e\udd17":"\u704a","\ud87e\udd16":"\u3d96","\u2f55":"\u706b","\u2ea3":"\u706c","\ud87e\udc35":"\u7070","\ud87e\udd19":"\u7077","\ud87e\udd18":"\u707d","\uf9fb":"\u7099","\ud87e\udd1a":"\u70ad","\uf99f":"\u70c8","\uf916":"\u70d9","\ufa48":"\u716e","\ufa9c":"\u716e","\ud87e\udd1d":"\ud850\ude63","\ud87e\udd1c":"\u7145","\uf993":"\u7149","\ufa6c":"\ud850\udeee","\ud87e\udd1e":"\u719c","\uf9c0":"\u71ce","\uf9ee":"\u71d0","\ud87e\udd1f":"\ud850\udfab","\uf932":"\u7210","\uf91e":"\u721b","\ud87e\udd20":"\u7228","\u2f56":"\u722a","\ufa49":"\u722b","\u2ea4":"\u722b","\ufa9e":"\u7235","\ud87e\udd21":"\u7235","\u2f57":"\u7236","\u2f58":"\u723b","\u2ea6":"\u4e2c","\u2f59":"\u723f","\u2f5a":"\u7247","\ud87e\udd22":"\u7250","\u2f5b":"\u7259","\ud87e\udd23":"\ud851\ude08","\u2f5c":"\u725b","\uf946":"\u7262","\ud87e\udd24":"\u7280","\ud87e\udd25":"\u7295","\u2f5d":"\u72ac","\u2ea8":"\u72ad","\ufa9f":"\u72af","\uf9fa":"\u72c0","\ud87e\udd26":"\ud851\udf35","\uf92b":"\u72fc","\ufa16":"\u732a","\ufaa0":"\u732a","\ud87e\udd27":"\ud852\udc14","\uf9a7":"\u7375","\ud87e\udd28":"\u737a","\u2f5e":"\u7384","\uf961":"\u7387","\uf9db":"\u7387","\u2f5f":"\u7389","\ud87e\udd29":"\u738b","\ud87e\udd2a":"\u3eac","\ud87e\udd2b":"\u73a5","\uf9ad":"\u73b2","\ud87e\udd2c":"\u3eb8","\ud87e\udd2d":"\u3eb8","\uf917":"\u73de","\uf9cc":"\u7409","\uf9e4":"\u7406","\ufa4a":"\u7422","\ud87e\udd2e":"\u7447","\ud87e\udd2f":"\u745c","\uf9ae":"\u7469","\ufaa1":"\u7471","\ud87e\udd30":"\u7471","\ud87e\udd31":"\u7485","\uf994":"\u7489","\uf9ef":"\u7498","\ud87e\udd32":"\u74ca","\u2f60":"\u74dc","\u2f61":"\u74e6","\ud87e\udd33":"\u3f1b","\ufaa2":"\u7506","\u2f62":"\u7518","\u2f63":"\u751f","\ud87e\udd34":"\u7524","\u2f64":"\u7528","\u2f65":"\u7530","\ufaa3":"\u753b","\ud87e\udd36":"\u753e","\ud87e\udd35":"\ud853\udc36","\uf9cd":"\u7559","\uf976":"\u7565","\uf962":"\u7570","\ud87e\udd38":"\u7570","\ud87e\udd37":"\ud853\udc92","\u2f66":"\u758b","\u2f67":"\u7592","\uf9e5":"\u75e2","\ud87e\udd3a":"\u7610","\ufaa5":"\u761f","\ufaa4":"\u761d","\uf9c1":"\u7642","\uf90e":"\u7669","\u2f68":"\u7676","\u2f69":"\u767d","\ud87e\udd3b":"\ud853\udfa1","\ud87e\udd3c":"\ud853\udfb8","\u2f6a":"\u76ae","\u2f6b":"\u76bf","\ud87e\udd3d":"\ud854\udc44","\ud87e\udd3e":"\u3ffc","\ufa17":"\u76ca","\ufaa6":"\u76ca","\ufaa7":"\u76db","\uf933":"\u76e7","\ud87e\udd3f":"\u4008","\u2f6c":"\u76ee","\ufaa8":"\u76f4","\ud87e\udd40":"\u76f4","\ud87e\udd42":"\ud854\udcf2","\ud87e\udd41":"\ud854\udcf3","\uf96d":"\u7701","\ufad3":"\u4018","\ud87e\udd43":"\ud854\udd19","\ud87e\udd45":"\u771e","\ud87e\udd46":"\u771f","\ud87e\udd47":"\u771f","\ud87e\udd44":"\ud854\udd33","\ufaaa":"\u7740","\ufaa9":"\u774a","\ud87e\udd48":"\u774a","\u9fc3":"\u4039","\ufad4":"\u4039","\ud87e\udd49":"\u4039","\u6663":"\u403f","\ud87e\udd4b":"\u4046","\ud87e\udd4a":"\u778b","\ufad5":"\ud854\ude49","\ufa9d":"\u77a7","\u2f6d":"\u77db","\u2f6e":"\u77e2","\u2f6f":"\u77f3","\ud87e\udd4c":"\u4096","\ud87e\udd4d":"\ud855\udc1d","\u784f":"\u7814","\ud87e\udd4e":"\u784e","\uf9ce":"\u786b","\uf93b":"\u788c","\ud87e\udd4f":"\u788c","\ufa4b":"\u7891","\uf947":"\u78ca","\ufaab":"\u78cc","\ud87e\udd50":"\u78cc","\uf964":"\u78fb","\ud87e\udd51":"\u40e3","\uf985":"\u792a","\u2f70":"\u793a","\u2ead":"\u793b","\ufa18":"\u793c","\ufa4c":"\u793e","\ufa4e":"\u7948","\ufa4d":"\u7949","\ud87e\udd52":"\ud855\ude26","\ufa4f":"\u7950","\ufa50":"\u7956","\ud87e\udd53":"\u7956","\ufa51":"\u795d","\ufa19":"\u795e","\ufa1a":"\u7965","\ufa61":"\u8996","\ufab8":"\u8996","\uf93c":"\u797f","\ud87e\udd54":"\ud855\ude9a","\ufa52":"\u798d","\ufa53":"\u798e","\ufa1b":"\u798f","\ud87e\udd56":"\u798f","\ud87e\udd55":"\ud855\udec5","\uf9b6":"\u79ae","\u2f71":"\u79b8","\u2f72":"\u79be","\uf995":"\u79ca","\ud87e\udd58":"\u412f","\ud87e\udd57":"\u79eb","\uf956":"\u7a1c","\ud87e\udd5a":"\u7a4a","\ufa54":"\u7a40","\ud87e\udd59":"\u7a40","\ud87e\udd5b":"\u7a4f","\u2f73":"\u7a74","\ufa55":"\u7a81","\ud87e\udd5c":"\ud856\udd7c","\ufaac":"\u7ab1","\uf9f7":"\u7acb","\u2f74":"\u7acb","\u2eef":"\u7adc","\ud87e\udd5d":"\ud856\udea7","\ud87e\udd5e":"\ud856\udea7","\ud87e\udd5f":"\u7aee","\u2f75":"\u7af9","\uf9f8":"\u7b20","\ufa56":"\u7bc0","\ufaad":"\u7bc0","\ud87e\udd60":"\u4202","\ud87e\udd61":"\ud856\udfab","\ud87e\udd62":"\u7bc6","\ud87e\udd64":"\u4227","\ud87e\udd63":"\u7bc9","\ud87e\udd65":"\ud857\udc80","\ufad6":"\ud857\udcd0","\uf9a6":"\u7c3e","\uf944":"\u7c60","\u2f76":"\u7c73","\ufaae":"\u7c7b","\uf9f9":"\u7c92","\ufa1d":"\u7cbe","\ud87e\udd66":"\u7cd2","\ufa03":"\u7cd6","\ud87e\udd68":"\u7ce8","\ud87e\udd67":"\u42a0","\ud87e\udd69":"\u7ce3","\uf97b":"\u7ce7","\u2f77":"\u7cf8","\u2eaf":"\u7cf9","\ud87e\udd6b":"\ud857\udf86","\ud87e\udd6a":"\u7d00","\uf9cf":"\u7d10","\uf96a":"\u7d22","\uf94f":"\u7d2f","\u7d76":"\u7d55","\ud87e\udd6c":"\u7d63","\ufaaf":"\u7d5b","\uf93d":"\u7da0","\uf957":"\u7dbe","\ud87e\udd6e":"\u7dc7","\uf996":"\u7df4","\ufa57":"\u7df4","\ufab0":"\u7df4","\ud87e\udd6f":"\u7e02","\ud87e\udd6d":"\u4301","\ufa58":"\u7e09","\uf950":"\u7e37","\ufa59":"\u7e41","\ud87e\udd70":"\u7e45","\ud87e\udc98":"\ud858\uddda","\ud87e\udd71":"\u4334","\u2f78":"\u7f36","\ud87e\udd72":"\ud858\ude28","\ufab1":"\u7f3e","\ud87e\udd73":"\ud858\ude47","\u2f79":"\u7f51","\u2eab":"\u7f52","\u2eb2":"\u7f52","\u2eb1":"\u7f53","\ud87e\udd74":"\u4359","\ufa5a":"\u7f72","\ud87e\udd75":"\ud858\uded9","\uf9e6":"\u7f79","\ud87e\udd76":"\u7f7a","\uf90f":"\u7f85","\ud87e\udd77":"\ud858\udf3e","\u2f7a":"\u7f8a","\ud87e\udd78":"\u7f95","\uf9af":"\u7f9a","\ufa1e":"\u7fbd","\u2f7b":"\u7fbd","\ud87e\udd79":"\u7ffa","\uf934":"\u8001","\u2f7c":"\u8001","\u2eb9":"\u8002","\ufa5b":"\u8005","\ufab2":"\u8005","\ud87e\udd7a":"\u8005","\u2f7d":"\u800c","\ud87e\udd7b":"\ud859\udcda","\u2f7e":"\u8012","\ud87e\udd7c":"\ud859\udd23","\u2f7f":"\u8033","\uf9b0":"\u8046","\ud87e\udd7d":"\u8060","\ud87e\udd7e":"\ud859\udda8","\uf997":"\u806f","\ud87e\udd7f":"\u8070","\uf945":"\u807e","\u2f80":"\u807f","\u2eba":"\u8080","\u2f81":"\u8089","\uf953":"\u808b","\ud87e\udcd6":"\u80ad","\ud87e\udd82":"\u80b2","\ud87e\udd81":"\u43d5","\ud87e\udcd7":"\u43d9","\u8141":"\u80fc","\ud87e\udd83":"\u8103","\ud87e\udd85":"\u813e","\ud87e\udd84":"\u440b","\ud87e\udcda":"\u6721","\ud87e\udd87":"\ud859\udfa7","\ud87e\udd88":"\ud859\udfb5","\u6726":"\u4443","\uf926":"\u81d8","\u2f82":"\u81e3","\uf9f6":"\u81e8","\u2f83":"\u81ea","\ufa5c":"\u81ed","\u2f84":"\u81f3","\u2f85":"\u81fc","\ud87e\udc93":"\u8201","\ud87e\udd8b":"\u8201","\ud87e\udd8c":"\u8204","\u2f86":"\u820c","\ufa6d":"\u8218","\u2f87":"\u821b","\u2f88":"\u821f","\ud87e\udd8e":"\u446b","\u2f89":"\u826e","\uf97c":"\u826f","\u2f8a":"\u8272","\u2f8b":"\u8278","\ufa5d":"\u8279","\ufa5e":"\u8279","\u2ebe":"\u8279","\u2ebf":"\u8279","\u2ec0":"\u8279","\ud87e\udd90":"\u828b","\ud87e\udd8f":"\u8291","\ud87e\udd91":"\u829d","\ud87e\udd93":"\u82b1","\ud87e\udd94":"\u82b3","\ud87e\udd95":"\u82bd","\uf974":"\u82e5","\ud87e\udd98":"\u82e5","\ud87e\udd96":"\u82e6","\ud87e\udd97":"\ud85a\udf3c","\uf9fe":"\u8336","\ufab3":"\u8352","\ud87e\udd9a":"\u8363","\ud87e\udd99":"\u831d","\ud87e\udd9c":"\u8323","\ud87e\udd9d":"\u83bd","\ud87e\udda0":"\u8353","\uf93e":"\u83c9","\ud87e\udda1":"\u83ca","\ud87e\udda2":"\u83cc","\ud87e\udda3":"\u83dc","\ud87e\udd9e":"\u83e7","\ufab4":"\u83ef","\uf958":"\u83f1","\ufa5f":"\u8457","\ud87e\udd9f":"\u8457","\ud87e\udda4":"\ud85b\udc36","\ud87e\udd9b":"\u83ad","\uf918":"\u843d","\uf96e":"\u8449","\u853f":"\u848d","\ud87e\udda6":"\ud85b\udcd5","\ud87e\udda5":"\ud85b\udd6b","\uf999":"\u84ee","\ud87e\udda8":"\u84f1","\ud87e\udda9":"\u84f3","\uf9c2":"\u84fc","\ud87e\uddaa":"\u8516","\ud87e\udda7":"\u452b","\ud87e\uddac":"\u8564","\ud87e\uddad":"\ud85b\udf2c","\uf923":"\u85cd","\ud87e\uddae":"\u455d","\ud87e\uddb0":"\ud85b\udfb1","\ud87e\uddaf":"\u4561","\uf9f0":"\u85fa","\uf935":"\u8606","\ud87e\uddb2":"\u456b","\ufa20":"\u8612","\uf91f":"\u862d","\ud87e\uddb1":"\ud85c\udcd2","\u8641":"\u8637","\uf910":"\u863f","\u2f8c":"\u864d","\u2ec1":"\u864e","\ud87e\uddb3":"\u8650","\uf936":"\u865c","\ud87e\uddb4":"\u865c","\ud87e\uddb5":"\u8667","\ud87e\uddb6":"\u8669","\u2f8d":"\u866b","\ud87e\uddb7":"\u86a9","\ud87e\uddb8":"\u8688","\ud87e\uddba":"\u86e2","\ud87e\uddb9":"\u870e","\ud87e\uddbc":"\u8728","\ud87e\uddbd":"\u876b","\ud87e\uddc0":"\u87e1","\ufab5":"\u8779","\ud87e\uddbb":"\u8779","\ud87e\uddbe":"\u8786","\ud87e\uddbf":"\u45d7","\ud87e\uddab":"\ud85c\udfca","\uf911":"\u87ba","\ud87e\uddc1":"\u8801","\ud87e\uddc2":"\u45f9","\uf927":"\u881f","\u2f8e":"\u8840","\ufa08":"\u884c","\u2f8f":"\u884c","\ud87e\uddc3":"\u8860","\ud87e\uddc4":"\u8863","\u2f90":"\u8863","\u2ec2":"\u8864","\uf9a0":"\u88c2","\ud87e\uddc5":"\ud85d\ude67","\uf9e7":"\u88cf","\ud87e\uddc6":"\u88d7","\ud87e\uddc7":"\u88de","\uf9e8":"\u88e1","\uf912":"\u88f8","\ud87e\uddc9":"\u88fa","\ud87e\uddc8":"\u4635","\ufa60":"\u8910","\ufab6":"\u8941","\uf924":"\u8964","\u2f91":"\u897e","\u2ec4":"\u897f","\u2ec3":"\u8980","\ufab7":"\u8986","\ufa0a":"\u898b","\u2f92":"\u898b","\ud87e\uddcb":"\ud85e\udcae","\u2ec5":"\u89c1","\u2f93":"\u89d2","\u2f94":"\u8a00","\ud87e\uddcc":"\ud85e\udd66","\u8a7d":"\u8a2e","\u8a1e":"\u46b6","\ud87e\uddcd":"\u46be","\ud87e\uddce":"\u46c7","\ud87e\uddcf":"\u8aa0","\uf96f":"\u8aaa","\uf9a1":"\u8aaa","\ufab9":"\u8abf","\ufabb":"\u8acb","\uf97d":"\u8ad2","\uf941":"\u8ad6","\ufabe":"\u8aed","\ud87e\uddd0":"\u8aed","\ufa22":"\u8af8","\ufaba":"\u8af8","\uf95d":"\u8afe","\ufabd":"\u8afe","\ufa62":"\u8b01","\ufabc":"\u8b01","\ufa63":"\u8b39","\ufabf":"\u8b39","\uf9fc":"\u8b58","\uf95a":"\u8b80","\u8b8f":"\u8b86","\ufac0":"\u8b8a","\ud87e\uddd1":"\u8b8a","\u2ec8":"\u8ba0","\u2f95":"\u8c37","\u2f96":"\u8c46","\uf900":"\u8c48","\ud87e\uddd2":"\u8c55","\u2f97":"\u8c55","\u8c63":"\u8c5c","\u2f98":"\u8c78","\ud87e\uddd3":"\ud85f\udca8","\u2f99":"\u8c9d","\ud87e\uddd4":"\u8cab","\ud87e\uddd5":"\u8cc1","\uf948":"\u8cc2","\uf903":"\u8cc8","\ufa64":"\u8cd3","\ufa65":"\u8d08","\ufac1":"\u8d08","\ud87e\uddd6":"\u8d1b","\u2ec9":"\u8d1d","\u2f9a":"\u8d64","\u2f9b":"\u8d70","\ud87e\uddd7":"\u8d77","\u8d86":"\u8d7f","\ufad7":"\ud85f\uded3","\ud87e\uddd8":"\ud85f\udf2f","\u2f9c":"\u8db3","\ud87e\uddda":"\u8dcb","\ud87e\udddb":"\u8dbc","\u8dfa":"\u8de5","\uf937":"\u8def","\ud87e\udddc":"\u8df0","\u8e9b":"\u8e97","\u2f9d":"\u8eab","\uf902":"\u8eca","\u2f9e":"\u8eca","\ud87e\uddde":"\u8ed4","\u8f27":"\u8eff","\uf998":"\u8f26","\uf9d7":"\u8f2a","\ufac2":"\u8f38","\ud87e\udddf":"\u8f38","\ufa07":"\u8f3b","\uf98d":"\u8f62","\u2ecb":"\u8f66","\u2f9f":"\u8f9b","\ud87e\udd8d":"\u8f9e","\uf971":"\u8fb0","\u2fa0":"\u8fb0","\u2fa1":"\u8fb5","\ufa66":"\u8fb6","\u2ecc":"\u8fb6","\u2ecd":"\u8fb6","\ud87e\udc81":"\u5de1","\uf99a":"\u9023","\ufa25":"\u9038","\ufa67":"\u9038","\ufac3":"\u9072","\uf9c3":"\u907c","\ud87e\udde0":"\ud861\uddd2","\ud87e\udde1":"\ud861\udded","\uf913":"\u908f","\u2fa2":"\u9091","\ud87e\udde2":"\u9094","\uf92c":"\u90ce","\u90de":"\u90ce","\ufa2e":"\u90ce","\ud87e\udde3":"\u90f1","\ufa26":"\u90fd","\ud87e\udde5":"\ud861\udf2e","\ud87e\udde4":"\u9111","\ud87e\udde6":"\u911b","\u2fa3":"\u9149","\uf919":"\u916a","\ufac4":"\u9199","\uf9b7":"\u91b4","\u2fa4":"\u91c6","\uf9e9":"\u91cc","\u2fa5":"\u91cc","\uf97e":"\u91cf","\uf90a":"\u91d1","\u2fa6":"\u91d1","\uf9b1":"\u9234","\ud87e\udde7":"\u9238","\ufac5":"\u9276","\ud87e\udde8":"\u92d7","\ud87e\udde9":"\u92d8","\ud87e\uddea":"\u927c","\uf93f":"\u9304","\uf99b":"\u934a","\u93ae":"\u93ad","\ud87e\uddeb":"\u93f9","\ud87e\uddec":"\u9415","\ud87e\udded":"\ud862\udffa","\u2ed0":"\u9485","\u2ed1":"\u9577","\u2fa7":"\u9577","\u2ed2":"\u9578","\u2ed3":"\u957f","\u2fa8":"\u9580","\ud87e\uddee":"\u958b","\ud87e\uddef":"\u4995","\uf986":"\u95ad","\ud87e\uddf0":"\u95b7","\ud87e\uddf1":"\ud863\udd77","\u2ed4":"\u95e8","\u2fa9":"\u961c","\u2ecf":"\u961d","\u2ed6":"\u961d","\uf9c6":"\u962e","\uf951":"\u964b","\ufa09":"\u964d","\uf959":"\u9675","\uf9d3":"\u9678","\ufac6":"\u967c","\uf9dc":"\u9686","\uf9f1":"\u96a3","\ud87e\uddf2":"\u49e6","\u2faa":"\u96b6","\ufa2f":"\u96b7","\u96b8":"\u96b7","\uf9b8":"\u96b7","\u2fab":"\u96b9","\ud87e\uddf3":"\u96c3","\uf9ea":"\u96e2","\ufa68":"\u96e3","\ufac7":"\u96e3","\u2fac":"\u96e8","\uf9b2":"\u96f6","\uf949":"\u96f7","\ud87e\uddf5":"\u9723","\ud87e\uddf6":"\ud864\udd45","\uf938":"\u9732","\uf9b3":"\u9748","\u2fad":"\u9751","\u2ed8":"\u9752","\ufa1c":"\u9756","\ufac8":"\u9756","\ud87e\udc1c":"\ud864\udddf","\u2fae":"\u975e","\u2faf":"\u9762","\ud87e\uddf7":"\ud864\ude1a","\u2fb0":"\u9769","\ud87e\uddf8":"\u4a6e","\ud87e\uddf9":"\u4a76","\u2fb1":"\u97cb","\ufac9":"\u97db","\ud87e\uddfa":"\u97e0","\u2ed9":"\u97e6","\u2fb2":"\u97ed","\ud87e\uddfb":"\ud865\udc0a","\u2fb3":"\u97f3","\ufa69":"\u97ff","\ufaca":"\u97ff","\u2fb4":"\u9801","\ud87e\uddfc":"\u4ab2","\ufacb":"\u980b","\ud87e\uddfe":"\u980b","\ud87e\uddff":"\u980b","\uf9b4":"\u9818","\ud87e\ude00":"\u9829","\ud87e\uddfd":"\ud865\udc96","\ufa6a":"\u983b","\ufacc":"\u983b","\uf9d0":"\u985e","\u2eda":"\u9875","\u2fb5":"\u98a8","\ud87e\ude01":"\ud865\uddb6","\u2edb":"\u98ce","\u2fb6":"\u98db","\u2edc":"\u98de","\u2edd":"\u98df","\u2fb7":"\u98df","\u2edf":"\u98e0","\ud87e\ude02":"\u98e2","\ufa2a":"\u98ef","\ufa2b":"\u98fc","\ud87e\ude03":"\u4b33","\ufa2c":"\u9928","\ud87e\ude04":"\u9929","\u2ee0":"\u9963","\u2fb8":"\u9996","\u2fb9":"\u9999","\ud87e\ude05":"\u99a7","\u2fba":"\u99ac","\ud87e\ude06":"\u99c2","\uf91a":"\u99f1","\ud87e\ude07":"\u99fe","\uf987":"\u9a6a","\u2ee2":"\u9a6c","\u2fbb":"\u9aa8","\ud87e\ude08":"\u4bce","\u2fbc":"\u9ad8","\u2fbd":"\u9adf","\ud87e\ude09":"\ud866\udf30","\ufacd":"\u9b12","\ud87e\ude0a":"\u9b12","\u2fbe":"\u9b25","\u2fbf":"\u9b2f","\u2fc0":"\u9b32","\u2fc1":"\u9b3c","\u2ee4":"\u9b3c","\u2fc2":"\u9b5a","\uf939":"\u9b6f","\ud87e\ude0b":"\u9c40","\uf9f2":"\u9c57","\u2ee5":"\u9c7c","\u2fc3":"\u9ce5","\ud87e\ude0c":"\u9cfd","\ud87e\ude0d":"\u4cce","\ud87e\ude0f":"\u9d67","\ud87e\ude0e":"\u4ced","\ud87e\ude10":"\ud868\udcce","\ufa2d":"\u9db4","\ud87e\ude12":"\ud868\udd05","\ud87e\ude11":"\u4cf8","\uf93a":"\u9dfa","\ud87e\ude13":"\ud868\ude0e","\uf920":"\u9e1e","\u9e43":"\u9e42","\u2fc4":"\u9e75","\uf940":"\u9e7f","\u2fc5":"\u9e7f","\ud87e\ude14":"\ud868\ude91","\uf988":"\u9e97","\uf9f3":"\u9e9f","\u2fc6":"\u9ea5","\u2ee8":"\u9ea6","\ud87e\ude15":"\u9ebb","\u2fc7":"\u9ebb","\ud87e\udc8f":"\ud868\udf92","\u2fc8":"\u9ec3","\u2ee9":"\u9ec4","\u2fc9":"\u9ecd","\uf989":"\u9ece","\ud87e\ude16":"\u4d56","\u2fca":"\u9ed1","\u9ed2":"\u9ed1","\ufa3a":"\u58a8","\ud87e\ude17":"\u9ef9","\u2fcb":"\u9ef9","\u2fcc":"\u9efd","\ud87e\ude19":"\u9f05","\ud87e\ude18":"\u9efe","\u2fcd":"\u9f0e","\ud87e\ude1a":"\u9f0f","\u2fce":"\u9f13","\ud87e\ude1b":"\u9f16","\u2fcf":"\u9f20","\ud87e\ude1c":"\u9f3b","\u2fd0":"\u9f3b","\ufad8":"\u9f43","\u2fd1":"\u9f4a","\u2eec":"\u9f50","\u2fd2":"\u9f52","\ud87e\ude1d":"\ud869\ude00","\u2eee":"\u9f7f","\uf9c4":"\u9f8d","\u2fd3":"\u9f8d","\ufad9":"\u9f8e","\u2ef0":"\u9f99","\uf907":"\u9f9c","\uf908":"\u9f9c","\uface":"\u9f9c","\u2fd4":"\u9f9c","\u2ef3":"\u9f9f","\u2fd5":"\u9fa0"}')},function(e,t,r){var n=r(23);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},function(e,t,r){var n=r(230),i=r(16);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?i(e):t}},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){e.exports=r(233)},function(e,t,r){var n=r(234);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"===typeof e[i]&&n.push(i);for(var o=0;o<n.length;o++){var a=n[o],s=e[a];e[a]=function(n){var i=t.operation(r),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))})),i.attempt((function(){n.apply(e,o)}))}.bind(e,s),e[a].options=r}}},function(e,t){function r(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=r&&(t=i,r=a)}return t}},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SendingNetworkScheduler=void 0;var a=o(r(4)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),u=(r(8),r(24));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var l=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.RETRY_BACKOFF_RATELIMIT,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.QUEUE_MESSAGES;n(this,e),this.retryAlgorithm=r,this.queueAlgorithm=i,(0,a.default)(this,"queues",{}),(0,a.default)(this,"activeQueues",[]),(0,a.default)(this,"procFn",null),(0,a.default)(this,"processQueue",(function(e){var r=t.peekNextEvent(e);if(!r){var n=t.activeQueues.indexOf(e);return n>=0&&t.activeQueues.splice(n,1),void f("Stopping queue '%s' as it is now empty",e)}f("Queue '%s' has %s pending events",e,t.queues[e].length),Promise.resolve().then((function(){return t.procFn(r.event)})).then((function(n){t.removeNextEvent(e),f("Queue '%s' sent event %s",e,r.event.getId()),r.defer.resolve(n),t.processQueue(e)}),(function(n){r.attempts+=1;var i=t.retryAlgorithm(r.event,r.attempts,n);f("retry(%s) err=%s event_id=%s waitTime=%s",r.attempts,n,r.event.getId(),i),-1===i?(f("Queue '%s' giving up on event %s",e,r.event.getId()),t.removeNextEvent(e),r.defer.reject(n),t.processQueue(e)):setTimeout(t.processQueue,i,e)}))}))}return i(e,[{key:"getQueueForEvent",value:function(e){var t=this.queueAlgorithm(e);return t&&this.queues[t]?this.queues[t].map((function(e){return e.event})):null}},{key:"removeEventFromQueue",value:function(e){var t=this.queueAlgorithm(e);if(!t||!this.queues[t])return!1;var r=!1;return s.removeElement(this.queues[t],(function(t){if(t.event.getId()===e.getId())return r=!0,!0})),r}},{key:"setProcessFunction",value:function(e){this.procFn=e,this.startProcessingQueues()}},{key:"queueEvent",value:function(e){var t=this.queueAlgorithm(e);if(!t)return null;this.queues[t]||(this.queues[t]=[]);var r=s.defer();return this.queues[t].push({event:e,defer:r,attempts:0}),f("Queue algorithm dumped event %s into queue '%s'",e.getId(),t),this.startProcessingQueues(),r.promise}},{key:"startProcessingQueues",value:function(){var e=this;this.procFn&&Object.keys(this.queues).filter((function(t){return-1===e.activeQueues.indexOf(t)&&e.queues[t].length>0})).forEach((function(t){e.activeQueues.push(t),f("Spinning up queue: '%s'",t),e.processQueue(t)}))}},{key:"peekNextEvent",value:function(e){var t=this.queues[e];return Array.isArray(t)?t[0]:null}},{key:"removeNextEvent",value:function(e){var t=this.queues[e];return Array.isArray(t)?t.shift():null}}],[{key:"RETRY_BACKOFF_RATELIMIT",value:function(e,t,r){if(400===r.httpStatus||403===r.httpStatus||401===r.httpStatus)return-1;if("rejected"===r.cors)return-1;if("M_TOO_LARGE"===r.name)return-1;if("M_LIMIT_EXCEEDED"===r.name){var n=r.data.retry_after_ms;if(n>0)return n}return t>4?-1:1e3*Math.pow(2,t)}},{key:"QUEUE_MESSAGES",value:function(e){return e.getType()===u.EventType.RoomMessage||e.hasAssocation()?"message":null}}]),e}();function f(){}t.SendingNetworkScheduler=l},function(e,t,r){var n=r(237);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";(function(e){var n=r(12),i=r(9),o=r(20),a=r(1),s=r(2);function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var c=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncApi=void 0;var l=c(r(4)),f=r(49),h=r(124),d=r(128),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),v=r(79),y=r(35),g=r(129),m=r(8),b=r(62),w=r(59),k=r(131),S=r(80),E=r(25),x=r(24);function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t){return"FILTER_SYNC_"+e+(t?"_"+t:"")}function P(){var e;(e=m.logger).log.apply(e,arguments)}var R=function(){function t(e){var r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),this.client=e,this.opts=i,(0,l.default)(this,"_peekRoom",null),(0,l.default)(this,"currentSyncRequest",null),(0,l.default)(this,"syncState",null),(0,l.default)(this,"syncStateData",null),(0,l.default)(this,"catchingUp",!1),(0,l.default)(this,"running",!1),(0,l.default)(this,"keepAliveTimer",null),(0,l.default)(this,"connectionReturnedDefer",null),(0,l.default)(this,"notifEvents",[]),(0,l.default)(this,"failedSyncCount",0),(0,l.default)(this,"storeIsInvalid",!1),(0,l.default)(this,"onOnline",(function(){P("Browser thinks we are back online"),n.startKeepAlives(0)})),this.opts.initialSyncLimit=null!==(r=this.opts.initialSyncLimit)&&void 0!==r?r:8,this.opts.resolveInvitesToProfiles=this.opts.resolveInvitesToProfiles||!1,this.opts.pollTimeout=this.opts.pollTimeout||3e4,this.opts.pendingEventOrdering=this.opts.pendingEventOrdering||w.PendingEventOrdering.Chronological,this.opts.experimentalThreadSupport=!0===this.opts.experimentalThreadSupport,i.canResetEntireTimeline||(i.canResetEntireTimeline=function(e){return!1}),e.getNotifTimelineSet()&&e.reEmitter.reEmit(e.getNotifTimelineSet(),["Room.timeline","Room.timelineReset"])}return s(t,[{key:"createRoom",value:function(e){var t=this.client,r=t.timelineSupport,n=t.unstableClientRelationAggregation,i=new h.Room(e,t,t.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:r,unstableClientRelationAggregation:n});return t.reEmitter.reEmit(i,["Room.name","Room.timeline","Room.redaction","Room.redactionCancelled","Room.receipt","Room.tags","Room.timelineReset","Room.localEchoUpdated","Room.accountData","Room.myMembership","Room.replaceEvent"]),this.registerStateListeners(i),i}},{key:"createGroup",value:function(e){var t=this.client,r=new d.Group(e);return t.reEmitter.reEmit(r,["Group.profile","Group.myMembership"]),t.store.storeGroup(r),r}},{key:"registerStateListeners",value:function(e){var t=this.client;t.reEmitter.reEmit(e.currentState,["RoomState.events","RoomState.members","RoomState.newMember"]),e.currentState.on("RoomState.newMember",(function(e,r,n){n.user=t.getUser(n.userId),t.reEmitter.reEmit(n,["RoomMember.name","RoomMember.typing","RoomMember.powerLevel","RoomMember.membership"])}))}},{key:"deregisterStateListeners",value:function(e){e.currentState.removeAllListeners("RoomState.events"),e.currentState.removeAllListeners("RoomState.members"),e.currentState.removeAllListeners("RoomState.newMember")}},{key:"syncLeftRooms",value:function(){var e=this,t=this.client,r=new v.Filter(this.client.credentials.userId);r.setTimelineLimit(1),r.setIncludeLeaveRooms(!0);var n=this.opts.pollTimeout+8e4,i={timeout:0};return t.getOrCreateFilter(M(t.credentials.userId,"LEFT_ROOMS"),r).then((function(e){return i.filter=e,t.http.authedRequest(void 0,"GET","/sync",i,void 0,n)})).then((function(r){var n=[];r.rooms&&r.rooms.leave&&(n=e.mapSyncResponseToRoomArray(r.rooms.leave));var i=[];return n.forEach((function(r){var n=r.room;if(i.push(n),r.isBrandNewRoom){r.timeline=r.timeline||{};var a=e.mapSyncEventsFormat(r.timeline,n),s=e.partitionThreadedEvents(a),u=o(s,2),c=u[0],l=u[1],f=e.mapSyncEventsFormat(r.state,n);n.getLiveTimeline().setPaginationToken(r.timeline.prev_batch,y.EventTimeline.BACKWARDS),e.processRoomEvents(n,f,c),e.processThreadEvents(n,l),n.recalculate(),t.store.storeRoom(n),t.emit("Room",n),e.processEventsForNotifs(n,a)}})),i}))}},{key:"partitionThreadedEvents",value:function(e){var t=this;return this.opts.experimentalThreadSupport?e.reduce((function(r,n){var i=t.client.getRoom(n.getRoomId()),o=n.isThreadRelation;if(!o){var a=n.parentEventId,s=(null===i||void 0===i?void 0:i.findEventById(a))||e.find((function(e){return e.getId()===a}));o=null===s||void 0===s?void 0:s.isThreadRelation}return r[o?1:0].push(n),r}),[[],[]]):[e,[]]}},{key:"peek",value:function(e){var t=this;if(this._peekRoom&&this._peekRoom.roomId===e)return Promise.resolve(this._peekRoom);var r=this.client;return this._peekRoom=this.createRoom(e),this.client.roomInitialSync(e,20).then((function(e){e.messages=e.messages||{chunk:[]},e.messages.chunk=e.messages.chunk||[],e.state=e.state||[];var n=p.deepCopy(e.state).map(r.getEventMapper()),i=e.state.map(r.getEventMapper()),o=e.messages.chunk.map(r.getEventMapper());return e.presence&&Array.isArray(e.presence)&&e.presence.map(r.getEventMapper()).forEach((function(e){var t=r.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):((t=I(r,e.getContent().user_id)).setPresenceEvent(e),r.store.storeUser(t)),r.emit("event",e)})),e.messages.start&&(t._peekRoom.oldState.paginationToken=e.messages.start),t._peekRoom.oldState.setStateEvents(n),t._peekRoom.currentState.setStateEvents(i),t.resolveInvites(t._peekRoom),t._peekRoom.recalculate(),t._peekRoom.addEventsToTimeline(o.reverse(),!0,t._peekRoom.getLiveTimeline(),e.messages.start),r.store.storeRoom(t._peekRoom),r.emit("Room",t._peekRoom),t.peekPoll(t._peekRoom),t._peekRoom}))}},{key:"stopPeeking",value:function(){this._peekRoom=null}},{key:"peekPoll",value:function(e,t){var r=this;this._peekRoom===e?this.client.http.authedRequest(void 0,"GET","/events",{room_id:e.roomId,timeout:3e4,from:t},void 0,5e4).then((function(t){if(r._peekRoom===e){t.chunk.filter((function(e){return"m.presence"===e.type})).map(r.client.getEventMapper()).forEach((function(e){var t=r.client.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):((t=I(r.client,e.getContent().user_id)).setPresenceEvent(e),r.client.store.storeUser(t)),r.client.emit("event",e)}));var n=t.chunk.filter((function(t){return t.room_id===e.roomId&&t.event_id})).map(r.client.getEventMapper());e.addLiveEvents(n),r.peekPoll(e,t.end)}else P("Stopped peeking in room %s",e.roomId)}),(function(n){m.logger.error("[%s] Peek poll failed: %s",e.roomId,n),setTimeout((function(){r.peekPoll(e,t)}),3e4)})):P("Stopped peeking in room %s",e.roomId)}},{key:"getSyncState",value:function(){return this.syncState}},{key:"getSyncStateData",value:function(){return this.syncStateData}},{key:"recoverFromSyncStartupError",value:function(){var e=i(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=this.startKeepAlives(),this.updateSyncState(k.SyncState.Error,{error:r}),e.next=6,n;case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"wasLazyLoadingToggled",value:function(){var e=i(u().mark((function e(){var t,r,n,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],r=!1,e.next=4,this.client.store.isNewlyCreated();case 4:if(e.sent){e.next=11;break}return e.next=8,this.client.store.getClientOptions();case 8:return(n=e.sent)&&(r=!!n.lazyLoadMembers),e.abrupt("return",r!==t);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldAbortSync",value:function(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(m.logger.warn("Token no longer valid - assuming logout"),this.stop(),!0)}},{key:"sync",value:function(){var t=this,r=this.client;this.running=!0,e.window&&e.window.addEventListener&&e.window.addEventListener("online",this.onOnline,!1);var n=Promise.resolve(),o=null,a=function(){var e=i(u().mark((function e(){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P("Getting push rules..."),e.next=4,r.getPushRules();case 4:i=e.sent,P("Got push rules"),r.pushRules=i,e.next=19;break;case 9:if(e.prev=9,e.t0=e.catch(0),m.logger.error("Getting push rules failed",e.t0),!t.shouldAbortSync(e.t0)){e.next=14;break}return e.abrupt("return");case 14:return P("Waiting for saved sync before retrying push rules..."),e.next=17,t.recoverFromSyncStartupError(n,e.t0);case 17:return a(),e.abrupt("return");case 19:c();case 20:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=new v.Filter(r.credentials.userId);return e.setTimelineLimit(t.opts.initialSyncLimit),e},c=function(){var e=i(u().mark((function e(){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P("Checking lazy load status..."),t.opts.lazyLoadMembers&&r.isGuest()&&(t.opts.lazyLoadMembers=!1),!t.opts.lazyLoadMembers){e.next=8;break}return P("Checking server lazy load support..."),e.next=6,r.doesServerSupportLazyLoading();case 6:e.sent?(P("Enabling lazy load on sync filter..."),t.opts.filter||(t.opts.filter=s()),t.opts.filter.setLazyLoadMembers(!0)):(P("LL: lazy loading requested but not supported by server, so disabling"),t.opts.lazyLoadMembers=!1);case 8:return P("Checking whether lazy loading has changed in store..."),e.next=11,t.wasLazyLoadingToggled(t.opts.lazyLoadMembers);case 11:if(!e.sent){e.next=19;break}return t.storeIsInvalid=!0,n=b.InvalidStoreError.TOGGLED_LAZY_LOADING,i=new b.InvalidStoreError(n,!!t.opts.lazyLoadMembers),t.updateSyncState(k.SyncState.Error,{error:i}),m.logger.warn("InvalidStoreError: store is not usable: stopping sync."),e.abrupt("return");case 19:return t.opts.lazyLoadMembers&&t.opts.crypto&&t.opts.crypto.enableLazyLoading(),e.prev=20,P("Storing client options..."),e.next=24,t.client.storeClientOptions();case 24:P("Stored client options"),e.next=31;break;case 27:throw e.prev=27,e.t0=e.catch(20),m.logger.error("Storing client options failed",e.t0),e.t0;case 31:l();case 32:case"end":return e.stop()}}),e,null,[[20,27]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=i(u().mark((function e(){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("Getting filter..."),i=t.opts.filter?t.opts.filter:s(),e.prev=2,e.next=5,r.getOrCreateFilter(M(r.credentials.userId),i);case 5:a=e.sent,e.next=18;break;case 8:if(e.prev=8,e.t0=e.catch(2),m.logger.error("Getting filter failed",e.t0),!t.shouldAbortSync(e.t0)){e.next=13;break}return e.abrupt("return");case 13:return P("Waiting for saved sync before retrying filter..."),e.next=16,t.recoverFromSyncStartupError(n,e.t0);case 16:return l(),e.abrupt("return");case 18:return r.resetNotifTimelineSet(),null===t.currentSyncRequest&&(P("Sending first sync request..."),t.currentSyncRequest=t.doSyncRequest({filterId:a},o)),P("Waiting for saved sync before starting sync processing..."),e.next=23,n;case 23:return e.next=25,t.enhancePrivacyCheck();case 25:t.doSync({filterId:a});case 26:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();r.isGuest()?this.doSync({}):(P("Getting saved sync token..."),n=r.store.getSavedSyncToken().then((function(e){return P("Got saved sync token"),o=e,P("Getting saved sync..."),r.store.getSavedSync()})).then((function(e){if(P("Got reply from saved sync, exists? ".concat(!!e)),e)return t.syncFromCache(e)})).catch((function(e){m.logger.error("Getting saved sync failed",e)})),a())}},{key:"stop",value:function(){P("SyncApi.stop"),e.window&&e.window.removeEventListener&&e.window.removeEventListener("online",this.onOnline,!1),this.running=!1,this.currentSyncRequest&&this.currentSyncRequest.abort(),this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),this.keepAliveTimer=null)}},{key:"retryImmediately",value:function(){return!!this.connectionReturnedDefer&&(this.startKeepAlives(0),!0)}},{key:"syncFromCache",value:function(){var e=i(u().mark((function e(t){var r,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("sync(): not doing HTTP hit, instead returning stored /sync data"),r=t.nextBatch,this.client.store.setSyncToken(r),n={oldSyncToken:null,nextSyncToken:r,catchingUp:!1,fromCache:!0},i={next_batch:r,rooms:t.roomsData,groups:t.groupsData,account_data:{events:t.accountData}},e.prev=5,e.next=8,this.processSyncResponse(n,i);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),m.logger.error("Error processing cached sync",e.t0.stack||e.t0);case 13:this.storeIsInvalid||this.updateSyncState(k.SyncState.Prepared,n);case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"doSync",value:function(){var e=i(u().mark((function e(t){var r,n,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.client,this.running){e.next=6;break}return P("Sync no longer running: exiting."),this.connectionReturnedDefer&&(this.connectionReturnedDefer.reject(),this.connectionReturnedDefer=null),this.updateSyncState(k.SyncState.Stopped),e.abrupt("return");case 6:return n=r.store.getSyncToken(),e.prev=7,null===this.currentSyncRequest&&(this.currentSyncRequest=this.doSyncRequest(t,n)),e.next=11,this.currentSyncRequest;case 11:i=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(7),this.onSyncError(e.t0,t),e.abrupt("return");case 18:return e.prev=18,this.currentSyncRequest=null,e.finish(18);case 21:return r.store.setSyncToken(i.next_batch),this.failedSyncCount=0,e.next=25,r.store.setSyncData(i);case 25:if(o={oldSyncToken:n,nextSyncToken:i.next_batch,catchingUp:this.catchingUp},!this.opts.crypto){e.next=29;break}return e.next=29,this.opts.crypto.onSyncWillProcess(o);case 29:return e.prev=29,e.next=32,this.processSyncResponse(o,i);case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(29),m.logger.error("Caught /sync error",e.t1.stack||e.t1),this.client.emit("sync.unexpectedError",e.t1);case 38:if(o.catchingUp=this.catchingUp,t.hasSyncedBefore||(this.updateSyncState(k.SyncState.Prepared,o),t.hasSyncedBefore=!0),!this.opts.crypto){e.next=43;break}return e.next=43,this.opts.crypto.onSyncCompleted(o);case 43:if(this.updateSyncState(k.SyncState.Syncing,o),!r.store.wantsSave()){e.next=49;break}if(!this.opts.crypto){e.next=48;break}return e.next=48,this.opts.crypto.saveDeviceList(0);case 48:r.store.save();case 49:return e.next=51,this.enhancePrivacyCheck();case 51:this.doSync(t);case 52:case"end":return e.stop()}}),e,this,[[7,14,18,21],[29,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"doSyncRequest",value:function(e,t){var r=this.getSyncParams(e,t);return this.client.http.authedRequest(void 0,"GET","/sync",r,void 0,r.timeout+8e4)}},{key:"getSyncParams",value:function(e,t){var r=this.opts.pollTimeout;("SYNCING"!==this.getSyncState()||this.catchingUp)&&(this.catchingUp=!0,r=0);var n=e.filterId;this.client.isGuest()&&!n&&(n=this.getGuestFilter());var i={filter:n,timeout:r};return this.opts.disablePresence&&(i.set_presence="offline"),t?i.since=t:i._cacheBuster=Date.now(),"ERROR"!=this.getSyncState()&&"RECONNECTING"!=this.getSyncState()||(i.timeout=0),i}},{key:"onSyncError",value:function(e,t){var r=this;if(!this.running)return P("Sync no longer running: exiting"),this.connectionReturnedDefer&&(this.connectionReturnedDefer.reject(),this.connectionReturnedDefer=null),void this.updateSyncState(k.SyncState.Stopped);m.logger.error("/sync error %s",e),m.logger.error(e),this.shouldAbortSync(e)||(this.failedSyncCount++,m.logger.log("Number of consecutive failed sync requests:",this.failedSyncCount),P("Starting keep-alive"),this.startKeepAlives().then((function(e){e&&r.getSyncState()===k.SyncState.Error&&r.updateSyncState(k.SyncState.Catchup,{oldSyncToken:null,nextSyncToken:null,catchingUp:!0}),r.doSync(t)})),this.currentSyncRequest=null,this.updateSyncState(this.failedSyncCount>=3?k.SyncState.Error:k.SyncState.Reconnecting,{error:e}))}},{key:"processSyncResponse",value:function(){var e=i(u().mark((function e(t,r){var n,a,s,c,l,f,d,v,b,w=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.client,r.presence&&Array.isArray(r.presence.events)&&r.presence.events.map(n.getEventMapper()).forEach((function(e){var t=n.store.getUser(e.getSender());t?t.setPresenceEvent(e):((t=I(n,e.getSender())).setPresenceEvent(e),n.store.storeUser(t)),n.emit("event",e)})),r.account_data&&Array.isArray(r.account_data.events)&&(a=r.account_data.events.map(n.getEventMapper()),s=a.reduce((function(e,t){return e[t.getId()]=n.store.getAccountData(t.getType()),e}),{}),n.store.storeAccountDataEvents(a),a.forEach((function(e){if(e.getType()===x.EventType.PushRules){var t=e.getContent();n.pushRules=g.PushProcessor.rewriteDefaultRules(t)}var r=s[e.getId()];return n.emit("accountData",e,r),e}))),r.to_device&&Array.isArray(r.to_device.events)&&r.to_device.events.length>0?(c=[],r.to_device.events.map(n.getEventMapper()).map((function(e){if("m.key.verification.cancel"===e.getType()){var t=e.getContent().transaction_id;t&&c.push(t)}return e})).forEach((function(e){var t=e.getContent();if("m.room.message"!=e.getType()||"m.bad.encrypted"!=t.msgtype){if("m.key.verification.start"===e.getType()||"m.key.verification.request"===e.getType()){var r=t.transaction_id;c.includes(r)&&e.flagCancelled()}n.emit("toDeviceEvent",e)}else m.logger.log("Ignoring undecryptable to-device event from "+e.getSender())}))):this.catchingUp=!1,r.groups&&(r.groups.invite&&this.processGroupSyncEntry(r.groups.invite,S.Category.Invite),r.groups.join&&this.processGroupSyncEntry(r.groups.join,S.Category.Join),r.groups.leave&&this.processGroupSyncEntry(r.groups.leave,S.Category.Leave)),l=[],f=[],d=[],r.rooms&&(r.rooms.invite&&(l=this.mapSyncResponseToRoomArray(r.rooms.invite)),r.rooms.join&&(f=this.mapSyncResponseToRoomArray(r.rooms.join)),r.rooms.leave&&(d=this.mapSyncResponseToRoomArray(r.rooms.leave))),this.notifEvents=[],l.forEach((function(e){var t=e.room,r=w.mapSyncEventsFormat(e.invite_state,t);w.processRoomEvents(t,r),e.isBrandNewRoom&&(t.recalculate(),n.store.storeRoom(t),n.emit("Room",t)),r.forEach((function(e){n.emit("event",e)})),t.updateMyMembership("invite")})),e.next=13,p.promiseMapSeries(f,function(){var e=i(u().mark((function e(r){var a,s,c,l,f,d,v,g,m,b,k,S,E,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.room,s=w.mapSyncEventsFormat(r.state,a),c=w.mapSyncEventsFormat(r.timeline,a,!1),l=w.mapSyncEventsFormat(r.ephemeral),f=w.mapSyncEventsFormat(r.account_data),d=n.isRoomEncrypted(a.roomId),r.unread_notifications&&(a.setUnreadNotificationCount(h.NotificationCountType.Total,r.unread_notifications.notification_count),(!d||d&&a.getUnreadNotificationCount(h.NotificationCountType.Highlight)<=0)&&a.setUnreadNotificationCount(h.NotificationCountType.Highlight,r.unread_notifications.highlight_count)),r.timeline=r.timeline||{},!r.isBrandNewRoom){e.next=12;break}a.getLiveTimeline().setPaginationToken(r.timeline.prev_batch,y.EventTimeline.BACKWARDS),e.next=26;break;case 12:if(!r.timeline.limited){e.next=26;break}v=!0,g=c.length-1;case 15:if(!(g>=0)){e.next=25;break}if(m=c[g].getId(),!a.getTimelineForEvent(m)){e.next=22;break}return P("Already have event "+m+" in limited sync - not resetting"),v=!1,c.splice(0,g),e.abrupt("break",25);case 22:g--,e.next=15;break;case 25:v&&(w.deregisterStateListeners(a),a.resetLiveTimeline(r.timeline.prev_batch,w.opts.canResetEntireTimeline(a.roomId)?null:t.oldSyncToken),n.resetNotifTimelineSet(),w.registerStateListeners(a));case 26:return b=w.partitionThreadedEvents(c),k=o(b,2),S=k[0],E=k[1],w.processRoomEvents(a,s,S,t.fromCache),w.processThreadEvents(a,E),r.summary&&a.setSummary(r.summary),a.addEphemeralEvents(l),a.addAccountData(f),a.recalculate(),r.isBrandNewRoom&&(n.store.storeRoom(a),n.emit("Room",a)),w.processEventsForNotifs(a,c),x=function(){var e=i(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.emit("event",t),!t.isState()||"m.room.encryption"!=t.getType()||!w.opts.crypto){e.next=4;break}return e.next=4,w.opts.crypto.onCryptoEvent(t);case 4:t.isState()&&"im.vector.user_status"===t.getType()&&((r=n.store.getUser(t.getStateKey()))?r.unstable_updateStatusMessage(t):((r=I(n,t.getStateKey())).unstable_updateStatusMessage(t),n.store.storeUser(r)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=38,p.promiseMapSeries(s,x);case 38:return e.next=40,p.promiseMapSeries(S,x);case 40:return e.next=42,p.promiseMapSeries(E,x);case 42:l.forEach((function(e){n.emit("event",e)})),f.forEach((function(e){n.emit("event",e)})),a.updateMyMembership("join"),a.decryptCriticalEvents();case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:if(d.forEach((function(e){var t=e.room,r=w.mapSyncEventsFormat(e.state,t),i=w.mapSyncEventsFormat(e.timeline,t),a=w.mapSyncEventsFormat(e.account_data),s=w.partitionThreadedEvents(i),u=o(s,2),c=u[0],l=u[1];w.processRoomEvents(t,r,c),w.processThreadEvents(t,l),t.addAccountData(a),t.recalculate(),e.isBrandNewRoom&&(n.store.storeRoom(t),n.emit("Room",t)),w.processEventsForNotifs(t,i),r.forEach((function(e){n.emit("event",e)})),c.forEach((function(e){n.emit("event",e)})),l.forEach((function(e){n.emit("event",e)})),a.forEach((function(e){n.emit("event",e)})),t.updateMyMembership("leave")})),t.oldSyncToken&&this.notifEvents.length&&(this.notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),this.notifEvents.forEach((function(e){n.getNotifTimelineSet().addLiveEvent(e)}))),!r.device_lists){e.next=21;break}if(!this.opts.crypto){e.next=21;break}return e.next=19,this.opts.crypto.handleDeviceListChanges(t,r.device_lists);case 19:e.next=21;break;case 21:this.opts.crypto&&r.device_one_time_keys_count&&(v=r.device_one_time_keys_count.signed_curve25519||0,this.opts.crypto.updateOneTimeKeyCount(v)),this.opts.crypto&&r["org.sendingnetwork.msc2732.device_unused_fallback_key_types"]&&(b=r["org.sendingnetwork.msc2732.device_unused_fallback_key_types"],this.opts.crypto.setNeedsNewFallback(b instanceof Array&&!b.includes("signed_curve25519")));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"startKeepAlives",value:function(e){return void 0===e&&(e=2e3+Math.floor(5e3*Math.random())),null!==this.keepAliveTimer&&clearTimeout(this.keepAliveTimer),e>0?this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this),e):this.pokeKeepAlive(),this.connectionReturnedDefer||(this.connectionReturnedDefer=p.defer()),this.connectionReturnedDefer.promise}},{key:"enhancePrivacyForRoom",value:function(e,t){if(e&&t&&!t.privacyEnhanced){var r=[],n=[],i=(new Date).getTime();if(e.force_e2e_encryption&&this.client.isRoomEncrypted(t.roomId)){var o=t.currentState.events.get(x.EventType.RoomEncryption).get("");if(o&&!t.getLiveTimeline().getEvents().find((function(e){return e.event.type==x.EventType.RoomEncryption}))){var a=new E.SendingNetworkEvent(O(O({},o.event),{},{type:x.EventType.RoomEncryptionHint,origin_server_ts:i,state_key:"",event_id:"$"+Math.random()+"-"+Math.random()}));n.push(a)}}if(e.messages_retention_duration>0){var s=t.currentState.events.get(x.EventType.RoomCreate).get("").event.sender,u=new E.SendingNetworkEvent({content:{max_lifetime:e.messages_retention_duration,mock:!0},origin_server_ts:i,state_key:"",type:x.EventType.RoomRetention,room_id:t.roomId,sender:s,event_id:"$"+Math.random()+"-"+Math.random()});r.push(u),n.push(u)}this.processRoomEvents(t,r,n),r.length>0&&this.client.emit("event",r[0]),t.privacyEnhanced=!0}}},{key:"enhancePrivacyCheck",value:function(){var e=i(u().mark((function e(){var t,r,n,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.client.getRooms()).length<=0)){e.next=4;break}return P("No room(s) loaded, will check later."),e.abrupt("return");case 4:if(!(t.filter((function(e){return!e.privacyEnhanced})).length<=0)){e.next=8;break}return P("All room(s) already have privacy enhanced events."),e.abrupt("return");case 8:return e.next=10,this.client.getCapabilities();case 10:for(i in r=e.sent,n=r["im.hiseas.privacy"],P("Perform privacy enhancement check on ".concat(t.length," rooms: "),n),t)o=t[i],this.enhancePrivacyForRoom(n,o);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pokeKeepAlive",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=function(){clearTimeout(e.keepAliveTimer),e.connectionReturnedDefer&&(e.connectionReturnedDefer.resolve(t),e.connectionReturnedDefer=null)};this.client.http.request(void 0,"GET","/_api/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15e3}).then((function(){r()}),(function(n){400==n.httpStatus||404==n.httpStatus?e.keepAliveTimer=setTimeout(r,2e3):(t=!0,e.keepAliveTimer=setTimeout(e.pokeKeepAlive.bind(e,t),5e3+Math.floor(5e3*Math.random())),e.updateSyncState(k.SyncState.Error,{error:n}))}))}},{key:"processGroupSyncEntry",value:function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r],o=e[i],a=this.client.store.getGroup(i),s=null===a;null===a&&(a=this.createGroup(i)),o.profile&&a.setProfile(o.profile.name,o.profile.avatar_url),o.inviter&&a.setInviter({userId:o.inviter}),a.setMyMembership(t),s&&this.client.emit("Group",a)}}},{key:"mapSyncResponseToRoomArray",value:function(e){var t=this,r=this.client;return Object.keys(e).map((function(n){var i=e[n],o=r.store.getRoom(n),a=!1;return o||(o=t.createRoom(n),a=!0),i.room=o,i.isBrandNewRoom=a,i}))}},{key:"mapSyncEventsFormat",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!Array.isArray(e.events))return[];var n=this.client.getEventMapper({decrypt:r});return e.events.map((function(e){return t&&(e.room_id=t.roomId),n(e)}))}},{key:"resolveInvites",value:function(e){if(e&&this.opts.resolveInvitesToProfiles){var t=this.client;e.getMembersWithMembership("invite").forEach((function(r){if(!r._requestedProfileInfo){r._requestedProfileInfo=!0;var n=t.getUser(r.userId);(n?Promise.resolve({avatar_url:n.avatarUrl,displayname:n.displayName}):t.getProfileInfo(r.userId)).then((function(t){var n=r.events.member;"invite"===n.getContent().membership&&(n.getContent().avatar_url=t.avatar_url,n.getContent().displayname=t.displayname,r.setMembershipEvent(n,e.currentState))}),(function(e){}))}}))}}},{key:"processRoomEvents",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.getLiveTimeline(),a=0==o.getEvents().length;if(a){var s,u=n(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;this.client.getPushActionsForEvent(c)}}catch(l){u.e(l)}finally{u.f()}o.initialiseState(t)}this.resolveInvites(e),e.recalculate(),a||(e.oldState.setStateEvents(t||[]),e.currentState.setStateEvents(t||[])),e.addLiveEvents(r||[],null,i)}},{key:"processThreadEvents",value:function(e,t){t.sort((function(e,t){return e.getTs()-t.getTs()})).forEach((function(t){e.addThreadedEvent(t)}))}},{key:"processEventsForNotifs",value:function(e,t){if(this.client.getNotifTimelineSet())for(var r=0;r<t.length;r++){var n=this.client.getPushActionsForEvent(t[r]);n&&n.notify&&n.tweaks&&n.tweaks.highlight&&this.notifEvents.push(t[r])}}},{key:"getGuestFilter",value:function(){return"{}"}},{key:"updateSyncState",value:function(e,t){var r=this.syncState;this.syncState=e,this.syncStateData=t,this.client.emit("sync",this.syncState,r,t)}}]),t}();function I(e,t){var r=new f.User(t);return e.reEmitter.reEmit(r,["User.avatarUrl","User.displayName","User.presence","User.wallet","User.currentlyActive","User.lastPresenceTs"]),r}t.SyncApi=R}).call(this,r(11))},function(e,t,r){var n=r(48);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t,r){"use strict";var n=r(31),i=r(9),o=r(1),a=r(2),s=r(16),u=r(14),c=r(15);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.Relations=void 0;var h=f(r(4)),d=r(17),p=r(25),v=r(8),y=r(24),g=function(e){u(r,e);var t=c(r);function r(e,n,a){var u;return o(this,r),(u=t.call(this)).relationType=e,u.eventType=n,u.room=a,(0,h.default)(s(u),"relationEventIds",new Set),(0,h.default)(s(u),"relations",new Set),(0,h.default)(s(u),"annotationsByKey",{}),(0,h.default)(s(u),"annotationsBySender",{}),(0,h.default)(s(u),"sortedAnnotationsByKey",[]),(0,h.default)(s(u),"targetEvent",null),(0,h.default)(s(u),"creationEmitted",!1),(0,h.default)(s(u),"onEventStatus",(function(e,t){e.isSending()?t===p.EventStatus.CANCELLED&&(e.removeListener("Event.status",u.onEventStatus),u.removeEvent(e)):e.removeListener("Event.status",u.onEventStatus)})),(0,h.default)(s(u),"onBeforeRedaction",function(){var e=i(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.relations.has(t)){e.next=2;break}return e.abrupt("return");case 2:if(u.relations.delete(t),u.relationType!==y.RelationType.Annotation){e.next=7;break}u.removeAnnotationFromAggregation(t),e.next=12;break;case 7:if(u.relationType!==y.RelationType.Replace||!u.targetEvent){e.next=12;break}return e.next=10,u.getLastReplacement();case 10:r=e.sent,u.targetEvent.makeReplaced(r);case 12:t.removeListener("Event.beforeRedaction",u.onBeforeRedaction),u.emit("Relations.redaction",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u}return a(r,[{key:"addEvent",value:function(){var e=i(l().mark((function e(t){var r,n,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.relationEventIds.has(t.getId())){e.next=2;break}return e.abrupt("return");case 2:if(r=t.getRelation()){e.next=6;break}return v.logger.error("Event must have relation info"),e.abrupt("return");case 6:if(n=r.rel_type,i=t.getType(),this.relationType===n&&this.eventType===i){e.next=11;break}return v.logger.error("Event relation info doesn't match this container"),e.abrupt("return");case 11:if(t.isSending()&&t.on("Event.status",this.onEventStatus),this.relations.add(t),this.relationEventIds.add(t.getId()),this.relationType!==y.RelationType.Annotation){e.next=18;break}this.addAnnotationToAggregation(t),e.next=23;break;case 18:if(this.relationType!==y.RelationType.Replace||!this.targetEvent){e.next=23;break}return e.next=21,this.getLastReplacement();case 21:o=e.sent,this.targetEvent.makeReplaced(o);case 23:t.on("Event.beforeRedaction",this.onBeforeRedaction),this.emit("Relations.add",t),this.maybeEmitCreated();case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeEvent",value:function(){var e=i(l().mark((function e(t){var r,n,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.relations.has(t)){e.next=2;break}return e.abrupt("return");case 2:if(r=t.getRelation()){e.next=6;break}return v.logger.error("Event must have relation info"),e.abrupt("return");case 6:if(n=r.rel_type,i=t.getType(),this.relationType===n&&this.eventType===i){e.next=11;break}return v.logger.error("Event relation info doesn't match this container"),e.abrupt("return");case 11:if(this.relations.delete(t),this.relationType!==y.RelationType.Annotation){e.next=16;break}this.removeAnnotationFromAggregation(t),e.next=21;break;case 16:if(this.relationType!==y.RelationType.Replace||!this.targetEvent){e.next=21;break}return e.next=19,this.getLastReplacement();case 19:o=e.sent,this.targetEvent.makeReplaced(o);case 21:this.emit("Relations.remove",t);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelations",value:function(){return n(this.relations)}},{key:"addAnnotationToAggregation",value:function(e){var t=e.getRelation().key;if(t){var r=this.annotationsByKey[t];r||(r=this.annotationsByKey[t]=new Set,this.sortedAnnotationsByKey.push([t,r])),r.add(e),this.sortedAnnotationsByKey.sort((function(e,t){var r=e[1];return t[1].size-r.size}));var n=e.getSender(),i=this.annotationsBySender[n];i||(i=this.annotationsBySender[n]=new Set),i.add(e)}}},{key:"removeAnnotationFromAggregation",value:function(e){var t=e.getRelation().key;if(t){var r=this.annotationsByKey[t];r&&(r.delete(e),this.sortedAnnotationsByKey.sort((function(e,t){var r=e[1];return t[1].size-r.size})));var n=e.getSender(),i=this.annotationsBySender[n];i&&i.delete(e)}}},{key:"getSortedAnnotationsByKey",value:function(){return this.relationType!==y.RelationType.Annotation?null:this.sortedAnnotationsByKey}},{key:"getAnnotationsBySender",value:function(){return this.relationType!==y.RelationType.Annotation?null:this.annotationsBySender}},{key:"getLastReplacement",value:function(){var e=i(l().mark((function e(){var t,r,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.relationType===y.RelationType.Replace){e.next=2;break}return e.abrupt("return",null);case 2:if(this.targetEvent){e.next=4;break}return e.abrupt("return",null);case 4:if(t=this.targetEvent.getServerAggregatedRelation(y.RelationType.Replace),r=t&&t.origin_server_ts,null===(n=this.getRelations().reduce((function(e,t){return t.getSender()!==i.targetEvent.getSender()||r&&r>t.getTs()||e&&e.getTs()>t.getTs()?e:t}),null))||void 0===n||!n.shouldAttemptDecryption()){e.next=12;break}return e.next=10,n.attemptDecryption(this.room.client.crypto);case 10:e.next=15;break;case 12:if(null===n||void 0===n||!n.isBeingDecrypted()){e.next=15;break}return e.next=15,n.getDecryptionPromise();case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTargetEvent",value:function(){var e=i(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.targetEvent){e.next=2;break}return e.abrupt("return");case 2:if(this.targetEvent=t,this.relationType!==y.RelationType.Replace){e.next=8;break}return e.next=6,this.getLastReplacement();case 6:(r=e.sent)&&this.targetEvent.makeReplaced(r);case 8:this.maybeEmitCreated();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"maybeEmitCreated",value:function(){this.creationEmitted||this.targetEvent&&this.relations.size&&(this.creationEmitted=!0,this.targetEvent.emit("Event.relationsCreated",this.relationType,this.eventType))}}]),r}(d.EventEmitter);t.Relations=g},function(e,t,r){"use strict";var n=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomSummary=void 0;var o=n((function e(t,r){i(this,e),this.roomId=t}));t.RoomSummary=o},function(e,t,r){"use strict";var n=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComponent=void 0;var o=function(){function e(t){n(this,e),this.filterJson=t}return i(e,[{key:"check",value:function(e){return this.checkFields(e.getRoomId(),e.getSender(),e.getType(),!!e.getContent()&&void 0!==e.getContent().url)}},{key:"toJSON",value:function(){return{types:this.filterJson.types||null,not_types:this.filterJson.not_types||[],rooms:this.filterJson.rooms||null,not_rooms:this.filterJson.not_rooms||[],senders:this.filterJson.senders||null,not_senders:this.filterJson.not_senders||[],contains_url:this.filterJson.contains_url||null}}},{key:"checkFields",value:function(e,t,r,n){for(var i={rooms:function(t){return e===t},senders:function(e){return t===e},types:function(e){return function(e,t){if(t.endsWith("*")){var r=t.slice(0,-1);return e.substr(0,r.length)===r}return e===t}(r,e)}},o=0;o<Object.keys(i).length;o++){var a=Object.keys(i)[o],s=i[a],u="not_"+a,c=this.filterJson[u];if(null!==c&&void 0!==c&&c.some(s))return!1;var l=this.filterJson[a];if(l&&!l.some(s))return!1}var f=this.filterJson.contains_url;return void 0===f||f===n}},{key:"filter",value:function(e){return e.filter(this.check,this)}},{key:"limit",value:function(){return void 0!==this.filterJson.limit?this.filterJson.limit:10}}]),e}();t.FilterComponent=o},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.StubStore=void 0;var a=o(r(4)),s=function(){function e(){n(this,e),(0,a.default)(this,"accountData",{}),(0,a.default)(this,"fromToken",null)}return i(e,[{key:"isNewlyCreated",value:function(){return Promise.resolve(!0)}},{key:"getSyncToken",value:function(){return this.fromToken}},{key:"setSyncToken",value:function(e){this.fromToken=e}},{key:"storeGroup",value:function(e){}},{key:"getGroup",value:function(e){return null}},{key:"getGroups",value:function(){return[]}},{key:"storeRoom",value:function(e){}},{key:"getRoom",value:function(e){return null}},{key:"getRooms",value:function(){return[]}},{key:"removeRoom",value:function(e){}},{key:"getRoomSummaries",value:function(){return[]}},{key:"storeUser",value:function(e){}},{key:"getUser",value:function(e){return null}},{key:"getUsers",value:function(){return[]}},{key:"scrollback",value:function(e,t){return[]}},{key:"storeEvents",value:function(e,t,r,n){}},{key:"storeFilter",value:function(e){}},{key:"getFilter",value:function(e,t){return null}},{key:"getFilterIdByName",value:function(e){return null}},{key:"setFilterIdByName",value:function(e,t){}},{key:"storeAccountDataEvents",value:function(e){}},{key:"getAccountData",value:function(e){}},{key:"setSyncData",value:function(e){return Promise.resolve()}},{key:"wantsSave",value:function(){return!1}},{key:"save",value:function(){}},{key:"startup",value:function(){return Promise.resolve()}},{key:"getSavedSync",value:function(){return Promise.resolve(null)}},{key:"getSavedSyncToken",value:function(){return Promise.resolve(null)}},{key:"deleteAllData",value:function(){return Promise.resolve()}},{key:"getOutOfBandMembers",value:function(){return Promise.resolve(null)}},{key:"setOutOfBandMembers",value:function(e,t){return Promise.resolve()}},{key:"clearOutOfBandMembers",value:function(){return Promise.resolve()}},{key:"getClientOptions",value:function(){return Promise.resolve({})}},{key:"storeClientOptions",value:function(e){return Promise.resolve()}},{key:"getAssets",value:function(){return Promise.resolve(void 0)}},{key:"storeAssets",value:function(e){return Promise.resolve()}}]),e}();t.StubStore=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDPStreamMetadataPurpose=t.SDPStreamMetadataKey=void 0;var n;t.SDPStreamMetadataKey="org.sendingnetwork.msc3077.sdp_stream_metadata",t.SDPStreamMetadataPurpose=n,function(e){e.Usermedia="m.usermedia",e.Screenshare="m.screenshare"}(n||(t.SDPStreamMetadataPurpose=n={}))},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(16),a=r(14),s=r(15),u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.CallFeedEvent=t.CallFeed=void 0;var c,l=u(r(4)),f=u(r(17));t.CallFeedEvent=c,function(e){e.NewStream="new_stream",e.MuteStateChanged="mute_state_changed",e.VolumeChanged="volume_changed",e.Speaking="speaking"}(c||(t.CallFeedEvent=c={}));var h=function(e){a(r,e);var t=s(r);function r(e){var i;return n(this,r),i=t.call(this),(0,l.default)(o(i),"stream",void 0),(0,l.default)(o(i),"userId",void 0),(0,l.default)(o(i),"purpose",void 0),(0,l.default)(o(i),"client",void 0),(0,l.default)(o(i),"roomId",void 0),(0,l.default)(o(i),"audioMuted",void 0),(0,l.default)(o(i),"videoMuted",void 0),(0,l.default)(o(i),"measuringVolumeActivity",!1),(0,l.default)(o(i),"audioContext",void 0),(0,l.default)(o(i),"analyser",void 0),(0,l.default)(o(i),"frequencyBinCount",void 0),(0,l.default)(o(i),"speakingThreshold",-60),(0,l.default)(o(i),"speaking",!1),(0,l.default)(o(i),"volumeLooperTimeout",void 0),(0,l.default)(o(i),"onAddTrack",(function(){i.emit(c.NewStream,i.stream)})),i.client=e.client,i.roomId=e.roomId,i.userId=e.userId,i.purpose=e.purpose,i.audioMuted=e.audioMuted,i.videoMuted=e.videoMuted,i.updateStream(null,e.stream),i.hasAudioTrack&&i.initVolumeMeasuring(),i}return i(r,[{key:"hasAudioTrack",get:function(){return this.stream.getAudioTracks().length>0}},{key:"updateStream",value:function(e,t){e&&(e.removeEventListener("addtrack",this.onAddTrack),this.measureVolumeActivity(!1)),t&&(this.stream=t,t.addEventListener("addtrack",this.onAddTrack),this.hasAudioTrack?this.initVolumeMeasuring():this.measureVolumeActivity(!1)),this.emit(c.NewStream,this.stream)}},{key:"initVolumeMeasuring",value:function(){var e=window.AudioContext||window.webkitAudioContext;this.hasAudioTrack&&e&&(this.audioContext=new e,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.1,this.audioContext.createMediaStreamSource(this.stream).connect(this.analyser),this.frequencyBinCount=new Float32Array(this.analyser.frequencyBinCount))}},{key:"getMember",value:function(){return this.client.getRoom(this.roomId).getMember(this.userId)}},{key:"isLocal",value:function(){return this.userId===this.client.getUserId()}},{key:"isAudioMuted",value:function(){return 0===this.stream.getAudioTracks().length||this.audioMuted}},{key:"isVideoMuted",value:function(){return 0===this.stream.getVideoTracks().length||this.videoMuted}},{key:"setNewStream",value:function(e){this.updateStream(this.stream,e)}},{key:"setAudioMuted",value:function(e){this.audioMuted=e,this.emit(c.MuteStateChanged,this.audioMuted,this.videoMuted)}},{key:"setVideoMuted",value:function(e){this.videoMuted=e,this.emit(c.MuteStateChanged,this.audioMuted,this.videoMuted)}},{key:"measureVolumeActivity",value:function(e){if(e){if(!this.audioContext||!this.analyser||!this.frequencyBinCount||!this.hasAudioTrack)return;this.measuringVolumeActivity=!0,this.volumeLooper()}else this.measuringVolumeActivity=!1,this.emit(c.VolumeChanged,-1/0)}},{key:"setSpeakingThreshold",value:function(e){this.speakingThreshold=e}},{key:"volumeLooper",value:function(){var e=this;this.analyser&&(this.volumeLooperTimeout=setTimeout((function(){if(e.measuringVolumeActivity){e.analyser.getFloatFrequencyData(e.frequencyBinCount);for(var t=-1/0,r=0;r<e.frequencyBinCount.length;r++)e.frequencyBinCount[r]>t&&(t=e.frequencyBinCount[r]);e.emit(c.VolumeChanged,t);var n=t>e.speakingThreshold;e.speaking!==n&&(e.speaking=n,e.emit(c.Speaking,e.speaking)),e.volumeLooper()}}),250))}},{key:"dispose",value:function(){clearTimeout(this.volumeLooperTimeout)}}]),r}(f.default);t.CallFeed=h},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.CallEventHandler=void 0;var c=u(r(4)),l=r(8),f=r(81),h=r(24),d=function(){function e(t){var r=this;o(this,e),(0,c.default)(this,"client",void 0),(0,c.default)(this,"calls",void 0),(0,c.default)(this,"callEventBuffer",void 0),(0,c.default)(this,"candidateEventsByCall",void 0),(0,c.default)(this,"evaluateEventBuffer",i(s().mark((function e(){var t,i,o,a,u,c,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SYNCING"!==r.client.getSyncState()){e.next=32;break}return e.next=3,Promise.all(r.callEventBuffer.map((function(e){r.client.decryptEventIfNeeded(e)})));case 3:t=new Set,i=n(r.callEventBuffer);try{for(i.s();!(o=i.n()).done;)(a=o.value).getType()!==h.EventType.CallAnswer&&a.getType()!==h.EventType.CallHangup||t.add(a.getContent().call_id)}catch(s){i.e(s)}finally{i.f()}u=n(r.callEventBuffer),e.prev=7,u.s();case 9:if((c=u.n()).done){e.next=23;break}if((f=c.value).getType()!==h.EventType.CallInvite||!t.has(f.getContent().call_id)){e.next=13;break}return e.abrupt("continue",21);case 13:return e.prev=13,e.next=16,r.handleCallEvent(f);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),l.logger.error("Caught exception handling call event",e.t0);case 21:e.next=9;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(7),u.e(e.t1);case 28:return e.prev=28,u.f(),e.finish(28);case 31:r.callEventBuffer=[];case 32:case"end":return e.stop()}}),e,null,[[7,25,28,31],[13,18]])})))),(0,c.default)(this,"onRoomTimeline",(function(e){r.client.decryptEventIfNeeded(e),(r.eventIsACall(e)||e.isBeingDecrypted())&&r.callEventBuffer.push(e),(e.isBeingDecrypted()||e.isDecryptionFailure())&&e.once("Event.decrypted",i(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.eventIsACall(e)){t.next=2;break}return t.abrupt("return");case 2:if(!r.callEventBuffer.includes(e)){t.next=6;break}r.evaluateEventBuffer(),t.next=14;break;case 6:return t.prev=6,t.next=9,r.handleCallEvent(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),l.logger.error("Caught exception handling call event",t.t0);case 14:case"end":return t.stop()}}),t,null,[[6,11]])}))))})),this.client=t,this.calls=new Map,this.callEventBuffer=[],this.candidateEventsByCall=new Map}return a(e,[{key:"start",value:function(){this.client.on("sync",this.evaluateEventBuffer),this.client.on("Room.timeline",this.onRoomTimeline)}},{key:"stop",value:function(){this.client.removeListener("sync",this.evaluateEventBuffer),this.client.removeListener("Room.timeline",this.onRoomTimeline)}},{key:"eventIsACall",value:function(e){var t=e.getType();return t.startsWith("m.call.")||t.startsWith("org.sendingnetwork.call.")}},{key:"handleCallEvent",value:function(){var e=i(s().mark((function e(t){var r,i,o,a,u,c,d,p,v,y,g,m,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getContent(),i=t.getType(),o=t.getSender()===this.client.credentials.userId,a=r.call_id?this.calls.get(r.call_id):void 0,i!==h.EventType.CallInvite){e.next=46;break}if(!o){e.next=7;break}return e.abrupt("return");case 7:if(!(t.getLocalAge()>r.lifetime-3e3)){e.next=9;break}return e.abrupt("return");case 9:if(!a||a.state!==f.CallState.Ended){e.next=11;break}return e.abrupt("return");case 11:if(a&&l.logger.log("WARN: Already have a SendingNetworkCall with id ".concat(r.call_id," but got an ")+"invite. Clobbering."),u=this.client.getTurnServersExpiry()-Date.now(),l.logger.info("Current turn creds expire in "+u+" ms"),a=(0,f.createNewSendingNetworkCall)(this.client,t.getRoomId(),{forceTURN:this.client.forceTURN})){e.next=18;break}return l.logger.log("Incoming call ID "+r.call_id+" but this client doesn't support WebRTC"),e.abrupt("return");case 18:return a.callId=r.call_id,e.next=21,a.initWithInvite(t);case 21:if(this.calls.set(a.callId,a),this.candidateEventsByCall.get(a.callId)){c=n(this.candidateEventsByCall.get(a.callId));try{for(c.s();!(d=c.n()).done;)p=d.value,a.onRemoteIceCandidatesReceived(p)}catch(s){c.e(s)}finally{c.f()}}y=n(this.calls.values()),e.prev=24,y.s();case 26:if((g=y.n()).done){e.next=34;break}if(m=g.value,b=[f.CallState.WaitLocalMedia,f.CallState.CreateOffer,f.CallState.InviteSent].includes(m.state),a.roomId!==m.roomId||m.direction!==f.CallDirection.Outbound||!b){e.next=32;break}return v=m,e.abrupt("break",34);case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),y.e(e.t0);case 39:return e.prev=39,y.f(),e.finish(39);case 42:return v?v.state===f.CallState.WaitLocalMedia||v.state===f.CallState.CreateOffer||v.callId>a.callId?(l.logger.log("Glare detected: answering incoming call "+a.callId+" and canceling outgoing call "+v.callId),v.replacedBy(a),a.answer()):(l.logger.log("Glare detected: rejecting incoming call "+a.callId+" and keeping outgoing call "+v.callId),a.hangup(f.CallErrorCode.Replaced,!0)):this.client.emit("Call.incoming",a),e.abrupt("return");case 46:if(i!==h.EventType.CallCandidates){e.next=53;break}if(!o){e.next=49;break}return e.abrupt("return");case 49:return a?a.onRemoteIceCandidatesReceived(t):(this.candidateEventsByCall.has(r.call_id)||this.candidateEventsByCall.set(r.call_id,[]),this.candidateEventsByCall.get(r.call_id).push(t)),e.abrupt("return");case 53:if(![h.EventType.CallHangup,h.EventType.CallReject].includes(i)){e.next=56;break}return a?a.state!==f.CallState.Ended&&(i===h.EventType.CallHangup?a.onHangupReceived(r):a.onRejectReceived(r),this.calls.delete(r.call_id)):(a=(0,f.createNewSendingNetworkCall)(this.client,t.getRoomId()))&&(a.callId=r.call_id,a.initWithHangup(t),this.calls.set(r.call_id,a)),e.abrupt("return");case 56:if(a&&a.hasPeerConnection){e.next=59;break}return l.logger.warn("Discarding an event, we don't have a call/peerConn",i),e.abrupt("return");case 59:if(t.getContent().party_id!==a.ourPartyId){e.next=61;break}return e.abrupt("return");case 61:e.t1=i,e.next=e.t1===h.EventType.CallAnswer?64:e.t1===h.EventType.CallSelectAnswer?66:e.t1===h.EventType.CallNegotiate?68:e.t1===h.EventType.CallAssertedIdentity||e.t1===h.EventType.CallAssertedIdentityPrefix?70:e.t1===h.EventType.CallSDPStreamMetadataChanged||e.t1===h.EventType.CallSDPStreamMetadataChangedPrefix?72:74;break;case 64:return o?a.state===f.CallState.Ringing&&a.onAnsweredElsewhere(r):a.onAnswerReceived(t),e.abrupt("break",74);case 66:return a.onSelectAnswerReceived(t),e.abrupt("break",74);case 68:return a.onNegotiateReceived(t),e.abrupt("break",74);case 70:return a.onAssertedIdentityReceived(t),e.abrupt("break",74);case 72:return a.onSDPStreamMetadataChangedReceived(t),e.abrupt("break",74);case 74:case"end":return e.stop()}}),e,this,[[24,36,39,42]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.CallEventHandler=d},function(e,t,r){"use strict";var n=r(248),i=r(249);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r(250);function b(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!r&&1===e.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=a.exec(b);if(k){var S=(k=k[0]).toLowerCase();this.protocol=S,b=b.substr(k.length)}if(r||k||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||k&&y[k]||(b=b.substr(2),this.slashes=!0)}if(!y[k]&&(E||k&&!g[k])){for(var x,_,T=-1,O=0;O<h.length;O++){-1!==(M=b.indexOf(h[O]))&&(-1===T||M<T)&&(T=M)}-1!==(_=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(x=b.slice(0,_),b=b.slice(_+1),this.auth=decodeURIComponent(x)),T=-1;for(O=0;O<f.length;O++){var M;-1!==(M=b.indexOf(f[O]))&&(-1===T||M<T)&&(T=M)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var R=this.hostname.split(/\./),I=(O=0,R.length);O<I;O++){var L=R[O];if(L&&!L.match(d)){for(var C="",A=0,j=L.length;A<j;A++)L.charCodeAt(A)>127?C+="x":C+=L[A];if(!C.match(d)){var D=R.slice(0,O),N=R.slice(O+1),U=L.match(p);U&&(D.push(U[1]),N.unshift(U[2])),N.length&&(b="/"+N.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[S])for(O=0,I=l.length;O<I;O++){var q=l[O];if(-1!==b.indexOf(q)){var K=encodeURIComponent(q);K===q&&(K=escape(q)),b=b.split(q).join(K)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),t&&(this.query=m.parse(this.query)),b=b.slice(0,G)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||y[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",m=r.search||"";r.path=v+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=w||b||r.host&&e.pathname,S=k,E=r.pathname&&r.pathname.split("/")||[],x=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),k=k&&(""===p[0]||""===E[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(x)r.hostname=r.host=E.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=E.slice(-1)[0],T=(r.host||e.host||E.length>1)&&("."===_||".."===_)||""===_,O=0,M=E.length;M>=0;M--)"."===(_=E[M])?E.splice(M,1):".."===_?(E.splice(M,1),O++):O&&(E.splice(M,1),O--);if(!k&&!S)for(;O--;O)E.unshift("..");!k||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),T&&"/"!==E.join("/").substr(-1)&&E.push("");var P,R=""===E[0]||E[0]&&"/"===E[0].charAt(0);x&&(r.hostname=r.host=R?"":E.length?E.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift()));return(k=k||r.host&&E.length)&&!R&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e,n){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function v(e){throw new RangeError(h[e])}function y(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+y((e=e.replace(f,".")).split("."),t).join(".")}function m(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function b(e){return y(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,r){var n=0;for(e=r?d(e/700):e>>1,e+=d(e/t);e>455;n+=36)e=d(e/35);return d(n+36*e/(e+38))}function S(e){var t,r,n,i,o,a,s,c,l,f,h,p=[],y=e.length,g=0,m=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&v("not-basic"),p.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=g,a=1,s=36;i>=y&&v("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>d((u-g)/a))&&v("overflow"),g+=c*a,!(c<(l=s<=w?1:s>=w+26?26:s-w));s+=36)a>d(u/(f=36-l))&&v("overflow"),a*=f;w=k(g-o,t=p.length+1,0==o),d(g/t)>u-m&&v("overflow"),m+=d(g/t),g%=t,p.splice(g++,0,m)}return b(p)}function E(e){var t,r,n,i,o,a,s,c,l,f,h,y,g,b,S,E=[];for(y=(e=m(e)).length,t=128,r=0,o=72,a=0;a<y;++a)(h=e[a])<128&&E.push(p(h));for(n=i=E.length,i&&E.push("-");n<y;){for(s=u,a=0;a<y;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>d((u-r)/(g=n+1))&&v("overflow"),r+=(s-t)*g,t=s,a=0;a<y;++a)if((h=e[a])<t&&++r>u&&v("overflow"),h==t){for(c=r,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)S=c-f,b=36-f,E.push(p(w(f+S%b,0))),c=d(S/b);E.push(p(w(c,0))),o=k(r,g,n==i),r=0,++n}++r,++t}return E.join("")}s={version:"1.4.1",ucs2:{decode:m,encode:b},decode:S,encode:E,toASCII:function(e){return g(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()}).call(this,r(40)(e),r(11))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(251),t.encode=t.stringify=r(252)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,v=e[l].replace(s,"%20"),y=v.indexOf(r);y>=0?(f=v.substr(0,y),h=v.substr(y+1)):(f=v,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),n(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?o(a(e),(function(a){var s=encodeURIComponent(n(a))+r;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[a]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";var n=r(9),i=r(1),o=r(2);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var s=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomList=void 0;var u=s(r(4)),c=r(33),l=function(){function e(t){i(this,e),this.cryptoStore=t,(0,u.default)(this,"roomEncryption",{})}return o(e,[{key:"init",value:function(){var e=n(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ROOMS],(function(e){t.cryptoStore.getEndToEndRooms(e,(function(e){t.roomEncryption=e}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomEncryption",value:function(e){return this.roomEncryption[e]||null}},{key:"isRoomEncrypted",value:function(e){return Boolean(this.getRoomEncryption(e))}},{key:"setRoomEncryption",value:function(){var e=n(a().mark((function e(t,r){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.roomEncryption[t]=r,e.next=3,this.cryptoStore.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ROOMS],(function(e){n.cryptoStore.storeEndToEndRoom(t,r,e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();t.RoomList=l},function(e,t,r){"use strict";var n=r(23),i=r(12),o=r(9),a=r(20),s=r(1),u=r(2),c=r(14),l=r(15);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageCryptoStore=void 0;var h=r(8),d=r(73);function p(e){return"crypto.sessions/"+e}function v(e){return"crypto.session.problems/"+e}function y(e,t){return"crypto.inboundgroupsessions/"+e+"/"+t}function g(e,t){return"crypto.inboundgroupsessions.withheld/"+e+"/"+t}function m(e){return"crypto.rooms/"+e}var b=function(e){c(r,e);var t=l(r);function r(e){var n;return s(this,r),(n=t.call(this)).store=e,n}return u(r,[{key:"countEndToEndSessions",value:function(e,t){for(var r=0,n=0;n<this.store.length;++n)this.store.key(n).startsWith(p(""))&&++r;t(r)}},{key:"_getEndToEndSessions",value:function(e){for(var t=w(this.store,p(e)),r={},n=0,i=Object.entries(t||{});n<i.length;n++){var o=a(i[n],2),s=o[0],u=o[1];r[s]="string"===typeof u?{session:u}:u}return r}},{key:"getEndToEndSession",value:function(e,t,r,n){n(this._getEndToEndSessions(e)[t]||{})}},{key:"getEndToEndSessions",value:function(e,t,r){r(this._getEndToEndSessions(e)||{})}},{key:"getAllEndToEndSessions",value:function(e,t){for(var r=0;r<this.store.length;++r)if(this.store.key(r).startsWith(p("")))for(var n=this.store.key(r).split("/")[1],i=0,o=Object.values(this._getEndToEndSessions(n));i<o.length;i++){t(o[i])}}},{key:"storeEndToEndSession",value:function(e,t,r,n){var i=this._getEndToEndSessions(e)||{};i[t]=r,k(this.store,p(e),i)}},{key:"storeEndToEndSessionProblem",value:function(){var e=o(f().mark((function e(t,r,n){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=v(t),(o=w(this.store,i)||[]).push({type:r,fixed:n,time:Date.now()}),o.sort((function(e,t){return e.time-t.time})),k(this.store,i,o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getEndToEndSessionProblem",value:function(){var e=o(f().mark((function e(t,r){var n,o,a,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v(t),(o=w(this.store,n)||[]).length){e.next=4;break}return e.abrupt("return",null);case 4:a=o[o.length-1],s=i(o),e.prev=6,s.s();case 8:if((u=s.n()).done){e.next=14;break}if(!((c=u.value).time>r)){e.next=12;break}return e.abrupt("return",Object.assign({},c,{fixed:a.fixed}));case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:if(!a.fixed){e.next=26;break}return e.abrupt("return",null);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e,this,[[6,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"filterOutNotifiedErrorDevices",value:function(){var e=o(f().mark((function e(t){var r,o,a,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=w(this.store,"crypto.notified_error_devices")||{},o=[],a=i(t);try{for(a.s();!(s=a.n()).done;)u=s.value,c=u.userId,l=u.deviceInfo,c in r?l.deviceId in r[c]||(o.push(u),r[c][l.deviceId]=!0):(o.push(u),r[c]=n({},l.deviceId,!0))}catch(f){a.e(f)}finally{a.f()}return k(this.store,"crypto.notified_error_devices",r),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEndToEndInboundGroupSession",value:function(e,t,r,n){n(w(this.store,y(e,t)),w(this.store,g(e,t)))}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){for(var r=0;r<this.store.length;++r){var n=this.store.key(r);n.startsWith("crypto.inboundgroupsessions/")&&t({senderKey:n.substr("crypto.inboundgroupsessions/".length,43),sessionId:n.substr("crypto.inboundgroupsessions/".length+44),sessionData:w(this.store,n)})}t(null)}},{key:"addEndToEndInboundGroupSession",value:function(e,t,r,n){w(this.store,y(e,t))||this.storeEndToEndInboundGroupSession(e,t,r,n)}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,r,n){k(this.store,y(e,t),r)}},{key:"storeEndToEndInboundGroupSessionWithheld",value:function(e,t,r,n){k(this.store,g(e,t),r)}},{key:"getEndToEndDeviceData",value:function(e,t){t(w(this.store,"crypto.device_data"))}},{key:"storeEndToEndDeviceData",value:function(e,t){k(this.store,"crypto.device_data",e)}},{key:"storeEndToEndRoom",value:function(e,t,r){k(this.store,m(e),t)}},{key:"getEndToEndRooms",value:function(e,t){for(var r={},n=m(""),i=0;i<this.store.length;++i){var o=this.store.key(i);if(o.startsWith(n))r[o.substr(n.length)]=w(this.store,o)}t(r)}},{key:"getSessionsNeedingBackup",value:function(e){var t=this,r=w(this.store,"crypto.sessionsneedingbackup")||{},n=[];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i))if("break"===function(){var r=i.substr(0,43),o=i.substr(44);if(t.getEndToEndInboundGroupSession(r,o,null,(function(e){n.push({senderKey:r,sessionId:o,sessionData:e})})),e&&i.length>=e)return"break"}())break}return Promise.resolve(n)}},{key:"countSessionsNeedingBackup",value:function(){var e=w(this.store,"crypto.sessionsneedingbackup")||{};return Promise.resolve(Object.keys(e).length)}},{key:"unmarkSessionsNeedingBackup",value:function(e){var t,r=w(this.store,"crypto.sessionsneedingbackup")||{},n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;delete r[o.senderKey+"/"+o.sessionId]}}catch(a){n.e(a)}finally{n.f()}return k(this.store,"crypto.sessionsneedingbackup",r),Promise.resolve()}},{key:"markSessionsNeedingBackup",value:function(e){var t,r=w(this.store,"crypto.sessionsneedingbackup")||{},n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r[o.senderKey+"/"+o.sessionId]=!0}}catch(a){n.e(a)}finally{n.f()}return k(this.store,"crypto.sessionsneedingbackup",r),Promise.resolve()}},{key:"deleteAllData",value:function(){return this.store.removeItem("crypto.account"),Promise.resolve()}},{key:"getAccount",value:function(e,t){t(w(this.store,"crypto.account"))}},{key:"storeAccount",value:function(e,t){k(this.store,"crypto.account",t)}},{key:"getCrossSigningKeys",value:function(e,t){t(w(this.store,"crypto.cross_signing_keys"))}},{key:"getSecretStorePrivateKey",value:function(e,t,r){t(w(this.store,"crypto."+"ssss_cache.".concat(r)))}},{key:"storeCrossSigningKeys",value:function(e,t){k(this.store,"crypto.cross_signing_keys",t)}},{key:"storeSecretStorePrivateKey",value:function(e,t,r){k(this.store,"crypto."+"ssss_cache.".concat(t),r)}},{key:"doTxn",value:function(e,t,r){return Promise.resolve(r(null))}}],[{key:"exists",value:function(e){for(var t=e.length,r=0;r<t;r++)if(e.key(r).startsWith("crypto."))return!0;return!1}}]),r}(d.MemoryCryptoStore);function w(e,t){try{return JSON.parse(e.getItem(t))}catch(r){h.logger.log("Error: Failed to get key %s: %s",t,r.stack||r),h.logger.log(r.stack)}return null}function k(e,t,r){e.setItem(t,JSON.stringify(r))}t.LocalStorageCryptoStore=b},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Backend=void 0,t.upgradeDatabase=function(e,t){l.logger.log("Upgrading IndexedDBCryptoStore from version ".concat(t)+" to ".concat(10)),t<1&&function(e){var t=e.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});t.createIndex("session",["requestBody.room_id","requestBody.session_id"]),t.createIndex("state","state")}(e);t<2&&e.createObjectStore("account");if(t<3){e.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]}).createIndex("deviceKey","deviceKey")}t<4&&e.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]});t<5&&e.createObjectStore("device_data");t<6&&e.createObjectStore("rooms");t<7&&e.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]});t<8&&e.createObjectStore("inbound_group_sessions_withheld",{keyPath:["senderCurve25519Key","sessionId"]});if(t<9){e.createObjectStore("session_problems",{keyPath:["deviceKey","time"]}).createIndex("deviceKey","deviceKey"),e.createObjectStore("notified_error_devices",{keyPath:["userId","deviceId"]})}t<10&&e.createObjectStore("shared_history_inbound_group_sessions",{keyPath:["roomId"]})};var c=u(r(4)),l=r(8),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}t.VERSION=10;var d=function(){function e(t){var r=this;o(this,e),this.db=t,(0,c.default)(this,"nextTxnId",0),t.onversionchange=function(){l.logger.log("versionchange for indexeddb ".concat(r.db.name,": closing")),t.close()}}return a(e,[{key:"startup",value:function(){var e=i(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteAllData",value:function(){var e=i(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("This is not implemented, call IDBFactory::deleteDatabase(dbName) instead.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOrAddOutgoingRoomKeyRequest",value:function(e){var t=this,r=e.requestBody;return new Promise((function(n,i){var o=t.db.transaction("outgoingRoomKeyRequests","readwrite");o.onerror=i,t._getOutgoingRoomKeyRequest(o,r,(function(t){if(t)return l.logger.log("already have key request outstanding for "+"".concat(r.room_id," / ").concat(r.session_id,": ")+"not sending another"),void n(t);l.logger.log("enqueueing key request for ".concat(r.room_id," / ")+r.session_id),o.oncomplete=function(){n(e)},o.objectStore("outgoingRoomKeyRequests").add(e)}))}))}},{key:"getOutgoingRoomKeyRequest",value:function(e){var t=this;return new Promise((function(r,n){var i=t.db.transaction("outgoingRoomKeyRequests","readonly");i.onerror=n,t._getOutgoingRoomKeyRequest(i,e,(function(e){r(e)}))}))}},{key:"_getOutgoingRoomKeyRequest",value:function(e,t,r){var n=e.objectStore("outgoingRoomKeyRequests").index("session").openCursor([t.room_id,t.session_id]);n.onsuccess=function(){var e=n.result;if(e){var i=e.value;f.deepCompare(i.requestBody,t)?r(i):e.continue()}else r(null)}}},{key:"getOutgoingRoomKeyRequestByState",value:function(e){if(0===e.length)return Promise.resolve(null);var t,r=0;var n=this.db.transaction("outgoingRoomKeyRequests","readonly"),i=n.objectStore("outgoingRoomKeyRequests"),o=e[r];return i.index("state").openCursor(o).onsuccess=function n(i){var o=i.target.result;if(o)t=o.value;else if(!(++r>=e.length)){var a=e[r];i.target.source.openCursor(a).onsuccess=n}},v(n).then((function(){return t}))}},{key:"getAllOutgoingRoomKeyRequestsByState",value:function(e){var t=this;return new Promise((function(r,n){var i=t.db.transaction("outgoingRoomKeyRequests","readonly").objectStore("outgoingRoomKeyRequests").index("state").getAll(e);i.onsuccess=function(){return r(i.result)},i.onerror=function(){return n(i.error)}}))}},{key:"getOutgoingRoomKeyRequestsByTarget",value:function(e,t,r){var n=0,i=[];var o=this.db.transaction("outgoingRoomKeyRequests","readonly"),a=o.objectStore("outgoingRoomKeyRequests"),s=r[n];return a.index("state").openCursor(s).onsuccess=function o(a){var s=a.target.result;if(s){var u=s.value;u.recipients.includes({userId:e,deviceId:t})&&i.push(u),s.continue()}else{if(++n>=r.length)return;var c=r[n];a.target.source.openCursor(c).onsuccess=o}},v(o).then((function(){return i}))}},{key:"updateOutgoingRoomKeyRequest",value:function(e,t,r){var n=null;var i=this.db.transaction("outgoingRoomKeyRequests","readwrite");return i.objectStore("outgoingRoomKeyRequests").openCursor(e).onsuccess=function(e){var i=e.target.result;if(i){var o=i.value;o.state==t?(Object.assign(o,r),i.update(o),n=o):l.logger.warn("Cannot update room key request from ".concat(t," ")+"as it was already updated to ".concat(o.state))}},v(i).then((function(){return n}))}},{key:"deleteOutgoingRoomKeyRequest",value:function(e,t){var r=this.db.transaction("outgoingRoomKeyRequests","readwrite"),n=r.objectStore("outgoingRoomKeyRequests").openCursor(e);return n.onsuccess=function(){var e=n.result;if(e){var r=e.value;r.state==t?e.delete():l.logger.warn("Cannot delete room key request in state ".concat(r.state," ")+"(expected ".concat(t,")"))}},v(r)}},{key:"getAccount",value:function(e,t){var r=e.objectStore("account").get("-");r.onsuccess=function(){try{t(r.result||null)}catch(n){p(e,n)}}}},{key:"storeAccount",value:function(e,t){e.objectStore("account").put(t,"-")}},{key:"getCrossSigningKeys",value:function(e,t){var r=e.objectStore("account").get("crossSigningKeys");r.onsuccess=function(){try{t(r.result||null)}catch(n){p(e,n)}}}},{key:"getSecretStorePrivateKey",value:function(e,t,r){var n=e.objectStore("account").get("ssss_cache:".concat(r));n.onsuccess=function(){try{t(n.result||null)}catch(r){p(e,r)}}}},{key:"storeCrossSigningKeys",value:function(e,t){e.objectStore("account").put(t,"crossSigningKeys")}},{key:"storeSecretStorePrivateKey",value:function(e,t,r){e.objectStore("account").put(r,"ssss_cache:".concat(t))}},{key:"countEndToEndSessions",value:function(e,t){var r=e.objectStore("sessions").count();r.onsuccess=function(){try{t(r.result)}catch(n){p(e,n)}}}},{key:"getEndToEndSessions",value:function(e,t,r){var n=t.objectStore("sessions").index("deviceKey").openCursor(e),i={};n.onsuccess=function(){var e=n.result;if(e)i[e.value.sessionId]={session:e.value.session,lastReceivedMessageTs:e.value.lastReceivedMessageTs},e.continue();else try{r(i)}catch(o){p(t,o)}}}},{key:"getEndToEndSession",value:function(e,t,r,n){var i=r.objectStore("sessions").get([e,t]);i.onsuccess=function(){try{i.result?n({session:i.result.session,lastReceivedMessageTs:i.result.lastReceivedMessageTs}):n(null)}catch(e){p(r,e)}}}},{key:"getAllEndToEndSessions",value:function(e,t){var r=e.objectStore("sessions").openCursor();r.onsuccess=function(){try{var n=r.result;n?(t(n.value),n.continue()):t(null)}catch(i){p(e,i)}}}},{key:"storeEndToEndSession",value:function(e,t,r,n){n.objectStore("sessions").put({deviceKey:e,sessionId:t,session:r.session,lastReceivedMessageTs:r.lastReceivedMessageTs})}},{key:"storeEndToEndSessionProblem",value:function(){var e=i(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.db.transaction("session_problems","readwrite"),i.objectStore("session_problems").put({deviceKey:t,type:r,fixed:n,time:Date.now()}),e.abrupt("return",v(i));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getEndToEndSessionProblem",value:function(){var e=i(s().mark((function e(t,r){var i,o,a,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.db.transaction("session_problems","readwrite"),a=o.objectStore("session_problems"),u=a.index("deviceKey"),(c=u.getAll(t)).onsuccess=function(){var e=c.result;if(e.length){e.sort((function(e,t){return e.time-t.time}));var t,o=e[e.length-1],a=n(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.time>r)return void(i=Object.assign({},s,{fixed:o.fixed}))}}catch(u){a.e(u)}finally{a.f()}i=o.fixed?null:o}else i=null},e.next=7,v(o);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"filterOutNotifiedErrorDevices",value:function(){var e=i(s().mark((function e(t){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.db.transaction("notified_error_devices","readwrite"),n=r.objectStore("notified_error_devices"),i=[],e.next=5,Promise.all(t.map((function(e){return new Promise((function(t){var r=e.userId,o=e.deviceInfo,a=n.get([r,o.deviceId]);a.onsuccess=function(){a.result||(n.put({userId:r,deviceId:o.deviceId}),i.push(e)),t()}}))})));case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEndToEndInboundGroupSession",value:function(e,t,r,n){var i=!1,o=!1,a=r.objectStore("inbound_group_sessions").get([e,t]);a.onsuccess=function(){try{i=a.result?a.result.session:null,!1!==o&&n(i,o)}catch(e){p(r,e)}};var s=r.objectStore("inbound_group_sessions_withheld").get([e,t]);s.onsuccess=function(){try{o=s.result?s.result.session:null,!1!==i&&n(i,o)}catch(e){p(r,e)}}}},{key:"getAllEndToEndInboundGroupSessions",value:function(e,t){var r=e.objectStore("inbound_group_sessions").openCursor();r.onsuccess=function(){var n=r.result;if(n){try{t({senderKey:n.value.senderCurve25519Key,sessionId:n.value.sessionId,sessionData:n.value.session})}catch(i){p(e,i)}n.continue()}else try{t(null)}catch(i){p(e,i)}}}},{key:"addEndToEndInboundGroupSession",value:function(e,t,r,n){var i=n.objectStore("inbound_group_sessions").add({senderCurve25519Key:e,sessionId:t,session:r});i.onerror=function(r){"ConstraintError"===i.error.name?(r.stopPropagation(),r.preventDefault(),l.logger.log("Ignoring duplicate inbound group session: "+e+" / "+t)):p(n,new Error("Failed to add inbound group session: "+i.error))}}},{key:"storeEndToEndInboundGroupSession",value:function(e,t,r,n){n.objectStore("inbound_group_sessions").put({senderCurve25519Key:e,sessionId:t,session:r})}},{key:"storeEndToEndInboundGroupSessionWithheld",value:function(e,t,r,n){n.objectStore("inbound_group_sessions_withheld").put({senderCurve25519Key:e,sessionId:t,session:r})}},{key:"getEndToEndDeviceData",value:function(e,t){var r=e.objectStore("device_data").get("-");r.onsuccess=function(){try{t(r.result||null)}catch(n){p(e,n)}}}},{key:"storeEndToEndDeviceData",value:function(e,t){t.objectStore("device_data").put(e,"-")}},{key:"storeEndToEndRoom",value:function(e,t,r){r.objectStore("rooms").put(t,e)}},{key:"getEndToEndRooms",value:function(e,t){var r={},n=e.objectStore("rooms").openCursor();n.onsuccess=function(){var i=n.result;if(i)r[i.key]=i.value,i.continue();else try{t(r)}catch(o){p(e,o)}}}},{key:"getSessionsNeedingBackup",value:function(e){var t=this;return new Promise((function(r,n){var i=[],o=t.db.transaction(["sessions_needing_backup","inbound_group_sessions"],"readonly");o.onerror=n,o.oncomplete=function(){r(i)};var a=o.objectStore("sessions_needing_backup"),s=o.objectStore("inbound_group_sessions"),u=a.openCursor();u.onsuccess=function(){var t=u.result;if(t){var r=s.get(t.key);r.onsuccess=function(){i.push({senderKey:r.result.senderCurve25519Key,sessionId:r.result.sessionId,sessionData:r.result.session})},(!e||i.length<e)&&t.continue()}}}))}},{key:"countSessionsNeedingBackup",value:function(e){e||(e=this.db.transaction("sessions_needing_backup","readonly"));var t=e.objectStore("sessions_needing_backup");return new Promise((function(e,r){var n=t.count();n.onerror=r,n.onsuccess=function(){return e(n.result)}}))}},{key:"unmarkSessionsNeedingBackup",value:function(){var e=i(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=this.db.transaction("sessions_needing_backup","readwrite")),n=r.objectStore("sessions_needing_backup"),e.next=4,Promise.all(t.map((function(e){return new Promise((function(t,r){var i=n.delete([e.senderKey,e.sessionId]);i.onsuccess=t,i.onerror=r}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"markSessionsNeedingBackup",value:function(){var e=i(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=this.db.transaction("sessions_needing_backup","readwrite")),n=r.objectStore("sessions_needing_backup"),e.next=4,Promise.all(t.map((function(e){return new Promise((function(t,r){var i=n.put({senderCurve25519Key:e.senderKey,sessionId:e.sessionId});i.onsuccess=t,i.onerror=r}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addSharedHistoryInboundGroupSession",value:function(e,t,r,n){n||(n=this.db.transaction("shared_history_inbound_group_sessions","readwrite"));var i=n.objectStore("shared_history_inbound_group_sessions"),o=i.get([e]);o.onsuccess=function(){var n=(o.result||{sessions:[]}).sessions;n.push([t,r]),i.put({roomId:e,sessions:n})}}},{key:"getSharedHistoryInboundGroupSessions",value:function(e,t){t||(t=this.db.transaction("shared_history_inbound_group_sessions","readonly"));var r=t.objectStore("shared_history_inbound_group_sessions").get([e]);return new Promise((function(e,t){r.onsuccess=function(){var t=(r.result||{sessions:[]}).sessions;e(t)},r.onerror=t}))}},{key:"doTxn",value:function(e,t,r){arguments.length>3&&void 0!==arguments[3]||l.logger;var n=this.db.transaction(t,e),i=v(n),o=r(n);return i.then((function(){return o}))}}]),e}();function p(e,t){e._mx_abortexception=t;try{e.abort()}catch(t){}}function v(e){return new Promise((function(t,r){e.oncomplete=function(){void 0!==e._mx_abortexception&&r(e._mx_abortexception),t(null)},e.onerror=function(t){void 0!==e._mx_abortexception?r(e._mx_abortexception):(l.logger.log("Error performing indexeddb txn",t),r(e.error))},e.onabort=function(t){void 0!==e._mx_abortexception?r(e._mx_abortexception):(l.logger.log("Error performing indexeddb txn",t),r(e.error))}}))}t.Backend=d},function(e,t,r){"use strict";var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,i=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,a=/\\([\u000b\u0020-\u00ff])/g,s=/([\\"])/g,u=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function c(e){var t=String(e);if(o.test(t))return t;if(t.length>0&&!i.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(s,"\\$1")+'"'}function l(e){this.parameters=Object.create(null),this.type=e}t.format=function(e){if(!e||"object"!==typeof e)throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!u.test(r))throw new TypeError("invalid type");var n=r;if(t&&"object"===typeof t)for(var i,a=Object.keys(t).sort(),s=0;s<a.length;s++){if(i=a[s],!o.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+c(t[i])}return n},t.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"===typeof e?function(e){var t;"function"===typeof e.getHeader?t=e.getHeader("content-type"):"object"===typeof e.headers&&(t=e.headers&&e.headers["content-type"]);if("string"!==typeof t)throw new TypeError("content-type header is missing from object");return t}(e):e;if("string"!==typeof t)throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),i=-1!==r?t.substr(0,r).trim():t.trim();if(!u.test(i))throw new TypeError("invalid media type");var o=new l(i.toLowerCase());if(-1!==r){var s,c,f;for(n.lastIndex=r;c=n.exec(t);){if(c.index!==r)throw new TypeError("invalid parameter format");r+=c[0].length,s=c[1].toLowerCase(),'"'===(f=c[2])[0]&&(f=f.substr(1,f.length-2).replace(a,"$1")),o.parameters[s]=f}if(r!==t.length)throw new TypeError("invalid parameter format")}return o}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.clearTimeout=function(e){if(0===a.length)return;var t;for(t=0;t<a.length;t++){if(a[t].key==e){a.splice(t,1);break}}0===t&&u()},t.setNow=function(e){s=e||Date.now},t.setTimeout=function(e,t){(t=t||0)<0&&(t=0);var r=s()+t,n=o++;for(var i=arguments.length,c=new Array(i>2?i-2:0),f=2;f<i;f++)c[f-2]=arguments[f];var h={runAt:r,func:e,params:c,key:n},d=l(a,(function(e){return e.runAt-r}));return a.splice(d,0,h),u(),n};var n,i=r(8),o=0,a=[];var s=Date.now;function u(){n&&e.clearTimeout(n);var t=a[0];if(t){var r=s(),i=Math.min(t.runAt-r,1e3);n=e.setTimeout(c,i)}}function c(){for(var t,r=s(),n=[];;){var o=a[0];if(!o||o.runAt>r)break;(t=a.shift()).key,n.push(t)}u();for(var c=0;c<n.length;c++){t=n[c];try{t.func.apply(e,t.params)}catch(l){i.logger.error("Uncaught exception in callback function",l.stack||l)}}}function l(e,t){for(var r=0,n=e.length;r<n;){var i=r+n>>1;t(e[i])>0?n=i:r=i+1}return r}}).call(this,r(11))},function(e,t,r){"use strict";(function(e,n){var i,o=r(20),a=r(12),s=r(9),u=r(1),c=r(2),l=r(16),f=r(14),h=r(15),d=r(23);function p(){p=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var v=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingRoomKeyRequest=t.Crypto=void 0,t.fixBackupKey=Z,t.isCryptoAvailable=function(){return Boolean(e.Olm)},t.verificationMethods=void 0;var y=v(r(4)),g=v(r(63)),m=r(17),b=r(61),w=r(8),k=r(135),S=H(r(28)),E=r(260),x=r(64),_=H(r(136)),T=r(65),O=r(261),M=r(262),P=r(263),R=r(33),I=r(138),L=r(264),C=r(85),A=r(86),j=r(87),D=r(267),N=r(268),U=r(269),B=r(62),F=r(51),q=r(139),K=r(140),z=r(25);function G(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(G=function(e){return e?r:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=G(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var V=x.DeviceInfo.DeviceVerification,W=(d(i={},I.ReciprocateQRCode.NAME,I.ReciprocateQRCode),d(i,L.SAS.NAME,L.SAS),d(i,I.SHOW_QR_CODE_METHOD,U.IllegalMethod),d(i,I.SCAN_QR_CODE_METHOD,U.IllegalMethod),i),X={RECIPROCATE_QR_CODE:I.ReciprocateQRCode.NAME,SAS:L.SAS.NAME};t.verificationMethods=X;var Y=function(t){f(i,t);var r=h(i);function i(e,t,n,c,f,h,d,v){var g;if(u(this,i),(g=r.call(this)).baseApis=e,g.sessionStore=t,g.userId=n,g.deviceId=c,g.clientStore=f,g.cryptoStore=h,g.roomList=d,(0,y.default)(l(g),"backupManager",void 0),(0,y.default)(l(g),"crossSigningInfo",void 0),(0,y.default)(l(g),"olmDevice",void 0),(0,y.default)(l(g),"deviceList",void 0),(0,y.default)(l(g),"dehydrationManager",void 0),(0,y.default)(l(g),"secretStorage",void 0),(0,y.default)(l(g),"reEmitter",void 0),(0,y.default)(l(g),"verificationMethods",void 0),(0,y.default)(l(g),"supportedAlgorithms",void 0),(0,y.default)(l(g),"outgoingRoomKeyRequestManager",void 0),(0,y.default)(l(g),"toDeviceVerificationRequests",void 0),(0,y.default)(l(g),"inRoomVerificationRequests",void 0),(0,y.default)(l(g),"trustCrossSignedDevices",!0),(0,y.default)(l(g),"lastOneTimeKeyCheck",null),(0,y.default)(l(g),"oneTimeKeyCheckInProgress",!1),(0,y.default)(l(g),"roomEncryptors",{}),(0,y.default)(l(g),"roomDecryptors",{}),(0,y.default)(l(g),"deviceKeys",{}),(0,y.default)(l(g),"globalBlacklistUnverifiedDevices",!1),(0,y.default)(l(g),"globalErrorOnUnknownDevices",!0),(0,y.default)(l(g),"receivedRoomKeyRequests",[]),(0,y.default)(l(g),"receivedRoomKeyRequestCancellations",[]),(0,y.default)(l(g),"processingRoomKeyRequests",!1),(0,y.default)(l(g),"lazyLoadMembers",!1),(0,y.default)(l(g),"roomDeviceTrackingState",{}),(0,y.default)(l(g),"lastNewSessionForced",{}),(0,y.default)(l(g),"sendKeyRequestsImmediately",!1),(0,y.default)(l(g),"oneTimeKeyCount",void 0),(0,y.default)(l(g),"needsNewFallback",void 0),(0,y.default)(l(g),"onDeviceListUserCrossSigningUpdated",function(){var e=s(p().mark((function e(t){var r,n,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==g.userId){e.next=15;break}if(r=g.deviceList.getStoredCrossSigningForUser(t),n=r?r.getId():null,i=g.crossSigningInfo.getId(),o=i!==n,!i||!n||o){e.next=10;break}return e.next=8,g.checkOwnCrossSigningTrust();case 8:e.next=13;break;case 10:g.storeTrustedSelfKeys(null),g.emit("crossSigning.keysChanged",{}),g.emit("userTrustStatusChanged",g.userId,g.checkUserTrust(t));case 13:e.next=20;break;case 15:return e.next=17,g.checkDeviceVerifications(t);case 17:(a=g.deviceList.getStoredCrossSigningForUser(t))&&(a.updateCrossSigningVerifiedBefore(g.checkUserTrust(t).isCrossSigningVerified()),g.deviceList.setRawStoredCrossSigningForUser(t,a.toStorage())),g.emit("userTrustStatusChanged",t,g.checkUserTrust(t));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,y.default)(l(g),"onToDeviceEvent",(function(e){try{w.logger.log("received to_device ".concat(e.getType()," from: ")+"".concat(e.getSender()," id: ").concat(e.getId())),"m.room_key"==e.getType()||"m.forwarded_room_key"==e.getType()?g.onRoomKeyEvent(e):"m.room_key_request"==e.getType()?g.onRoomKeyRequestEvent(e):"m.secret.request"===e.getType()?g.secretStorage.onRequestReceived(e):"m.secret.send"===e.getType()?g.secretStorage.onSecretReceived(e):"org.sendingnetwork.room_key.withheld"===e.getType()?g.onRoomKeyWithheldEvent(e):e.getContent().transaction_id?g.onKeyVerificationMessage(e):"m.bad.encrypted"===e.getContent().msgtype?g.onToDeviceBadEncrypted(e):(e.isBeingDecrypted()||e.shouldAttemptDecryption())&&(e.isBeingDecrypted()||e.attemptDecryption(l(g)),e.once("Event.decrypted",(function(e){g.onToDeviceEvent(e)})))}catch(t){w.logger.error("Error handling toDeviceEvent:",t)}})),(0,y.default)(l(g),"onTimelineEvent",(function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.liveEvent,a=void 0===o||o;if(D.InRoomChannel.validateEvent(e,g.baseApis)){var s=function(e){var t=new D.InRoomChannel(g.baseApis,e.getRoomId());return new j.VerificationRequest(t,g.verificationMethods,g.baseApis)};g.handleVerificationEvent(e,g.inRoomVerificationRequests,s,a)}})),g.reEmitter=new b.ReEmitter(l(g)),v){g.verificationMethods=new Map;var m,x=a(v);try{for(x.s();!(m=x.n()).done;){var O=m.value;"string"===typeof O?W[O]&&g.verificationMethods.set(O,W[O]):O.NAME?g.verificationMethods.set(O.NAME,O):w.logger.warn("Excluding unknown verification method ".concat(O))}}catch(L){x.e(L)}finally{x.f()}}else g.verificationMethods=W;g.backupManager=new K.BackupManager(e,s(p().mark((function e(){var t,r,n,i,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getSessionBackupPrivateKey();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,g.getSecret("m.megolm_backup.v1");case 7:if(!(r=e.sent)){e.next=19;break}if(!(n=Z(r))){e.next=18;break}return e.next=13,g.getSecretStorageKey();case 13:return i=e.sent,a=o(i,1),s=a[0],e.next=18,g.storeSecret("m.megolm_backup.v1",n,[s]);case 18:return e.abrupt("return",S.decodeBase64(n||r));case 19:if(!g.baseApis.cryptoCallbacks||!g.baseApis.cryptoCallbacks.getBackupKey){e.next=23;break}return e.next=22,g.baseApis.cryptoCallbacks.getBackupKey();case 22:return e.abrupt("return",e.sent);case 23:throw new Error("Unable to get private key");case 24:case"end":return e.stop()}}),e)})))),g.olmDevice=new k.OlmDevice(h),g.deviceList=new E.DeviceList(e,h,g.olmDevice),g.deviceList.on("userCrossSigningUpdated",g.onDeviceListUserCrossSigningUpdated),g.reEmitter.reEmit(g.deviceList,["crypto.devicesUpdated","crypto.willUpdateDevices"]),g.supportedAlgorithms=Object.keys(_.DECRYPTION_CLASSES),g.outgoingRoomKeyRequestManager=new P.OutgoingRoomKeyRequestManager(e,g.deviceId,g.cryptoStore),g.toDeviceVerificationRequests=new N.ToDeviceRequests,g.inRoomVerificationRequests=new D.InRoomRequests;var R=g.baseApis.cryptoCallbacks||{},I=(0,T.createCryptoStoreCacheCallbacks)(h,g.olmDevice);return g.crossSigningInfo=new T.CrossSigningInfo(n,R,I),g.secretStorage=new M.SecretStorage(e,R,e),g.dehydrationManager=new q.DehydrationManager(l(g)),!R.getCrossSigningKey&&R.getSecretStorageKey&&(R.getCrossSigningKey=function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.CrossSigningInfo.getFromSecretStorage(t,g.secretStorage));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g}return c(i,[{key:"init",value:function(){var t=s(p().mark((function t(){var r,n,i,o,a,s=this,u=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:{},n=r.exportedOlmDevice,i=r.pickleKey,w.logger.log("Crypto: initialising Olm..."),t.next=4,e.Olm.init();case 4:return w.logger.log(n?"Crypto: initialising Olm device from exported device...":"Crypto: initialising Olm device..."),t.next=7,this.olmDevice.init({fromExportedDevice:n,pickleKey:i});case 7:return w.logger.log("Crypto: loading device list..."),t.next=10,this.deviceList.load();case 10:return this.deviceKeys["ed25519:"+this.deviceId]=this.olmDevice.deviceEd25519Key,this.deviceKeys["curve25519:"+this.deviceId]=this.olmDevice.deviceCurve25519Key,w.logger.log("Crypto: fetching own devices..."),(o=this.deviceList.getRawStoredDevicesForUser(this.userId))||(o={}),o[this.deviceId]||(w.logger.log("Crypto: adding this device to the store..."),a={keys:this.deviceKeys,algorithms:this.supportedAlgorithms,verified:V.VERIFIED,known:!0},o[this.deviceId]=a,this.deviceList.storeDevicesForUser(this.userId,o),this.deviceList.saveIfDirty()),t.next=18,this.cryptoStore.doTxn("readonly",[R.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){s.cryptoStore.getCrossSigningKeys(e,(function(e){e&&0!==Object.keys(e).length&&(w.logger.log("Loaded cross-signing public keys from crypto store"),s.crossSigningInfo.setKeys(e))}))}));case 18:this.deviceList.startTrackingDeviceList(this.userId),w.logger.log("Crypto: checking for key backup..."),this.backupManager.checkAndStart();case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getCryptoTrustCrossSignedDevices",value:function(){return this.trustCrossSignedDevices}},{key:"setCryptoTrustCrossSignedDevices",value:function(e){this.trustCrossSignedDevices=e;var t,r=a(this.deviceList.getKnownUserIds());try{for(r.s();!(t=r.n()).done;)for(var n=t.value,i=this.deviceList.getRawStoredDevicesForUser(n),o=0,s=Object.keys(i);o<s.length;o++){var u=s[o],c=this.checkDeviceTrust(n,u);if(!c.isLocallyVerified()&&c.isCrossSigningVerified()){var l=this.deviceList.getStoredDevice(n,u);this.emit("deviceVerificationChanged",n,u,l)}}}catch(f){r.e(f)}finally{r.f()}}},{key:"createRecoveryKeyFromPassphrase",value:function(){var t=s(p().mark((function t(r){var n,i,o,a,s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new e.Olm.PkDecryption,t.prev=1,i={},!r){t.next=11;break}return t.next=6,(0,C.keyFromPassphrase)(r);case 6:o=t.sent,i.passphrase={algorithm:"m.pbkdf2",iterations:o.iterations,salt:o.salt},i.pubkey=n.init_with_private_key(o.key),t.next=12;break;case 11:i.pubkey=n.generate_key();case 12:return a=n.get_private_key(),s=(0,A.encodeRecoveryKey)(a),t.abrupt("return",{keyInfo:i,encodedPrivateKey:s,privateKey:a});case 15:return t.prev=15,n&&n.free(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,,15,18]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isCrossSigningReady",value:function(){var e=s(p().mark((function e(){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.crossSigningInfo.getId(),e.next=3,this.crossSigningInfo.isStoredInKeyCache();case 3:if(e.t0=e.sent,e.t0){e.next=8;break}return e.next=7,this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage);case 7:e.t0=e.sent;case 8:return r=e.t0,e.abrupt("return",!(!t||!r));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isSecretStorageReady",value:function(){var e=s(p().mark((function e(){var t,r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.secretStorage.hasKey();case 2:return t=e.sent,e.next=5,this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage);case 5:if(r=e.sent,e.t0=!this.backupManager.getKeyBackupEnabled(),e.t0){e.next=11;break}return e.next=10,this.baseApis.isKeyBackupKeyStored();case 10:e.t0=e.sent;case 11:return n=e.t0,e.abrupt("return",!!(t&&r&&n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bootstrapCrossSigning",value:function(){var e=s(p().mark((function e(){var t,r,n,i,o,a,u,c,l,f,h,d,v,y,g=this,m=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r=t.authUploadDeviceSigningKeys,n=t.setupNewCrossSigning,w.logger.log("Bootstrapping cross-signing"),i=this.baseApis.cryptoCallbacks,o=new O.EncryptionSetupBuilder(this.baseApis.store.accountData,i),a=new T.CrossSigningInfo(this.userId,o.crossSigningCallbacks,o.crossSigningCallbacks),u=function(){var e=s(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resetKeys(),e.next=3,g.signObject(a.keys.master);case 3:return o.addCrossSigningKeys(r,a.keys),t=g.deviceList.getStoredDevice(g.userId,g.deviceId),e.next=7,a.signDevice(g.userId,t);case 7:if(n=e.sent,o.addKeySignature(g.userId,g.deviceId,n),!g.backupManager.backupInfo){e.next=13;break}return e.next=12,a.signObject(g.backupManager.backupInfo.auth_data,"master");case 12:o.addSessionBackup(g.backupManager.backupInfo);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=this.crossSigningInfo.getId(),e.next=9,this.crossSigningInfo.isStoredInKeyCache();case 9:return l=e.sent,e.next=12,this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage);case 12:if(f=e.sent,h=l||f,w.logger.log({setupNewCrossSigning:n,publicKeysOnDevice:c,privateKeysInCache:l,privateKeysInStorage:f,privateKeysExistSomewhere:h}),h&&!n){e.next=21;break}return w.logger.log("Cross-signing private keys not found locally or in secret storage, creating new keys"),e.next=19,u();case 19:e.next=29;break;case 21:if(!c||!l){e.next=25;break}w.logger.log("Cross-signing public keys trusted and private keys found locally"),e.next=29;break;case 25:if(!f){e.next=29;break}return w.logger.log("Cross-signing private keys not found locally, but they are available in secret storage, reading storage and caching locally"),e.next=29,this.checkOwnCrossSigningTrust({allowPrivateKeyRequests:!0});case 29:if(!(d=o.crossSigningCallbacks.privateKeys).size||this.baseApis.cryptoCallbacks.saveCrossSigningKeys){e.next=38;break}return v=new M.SecretStorage(o.accountDataClientAdapter,o.ssssCryptoCallbacks),e.next=34,v.hasKey();case 34:if(!e.sent){e.next=38;break}return w.logger.log("Storing new cross-signing private keys in secret storage"),e.next=38,T.CrossSigningInfo.storeInSecretStorage(d,v);case 38:return y=o.buildOperation(),e.next=41,y.apply(this);case 41:return e.next=43,o.persist(this);case 43:w.logger.log("Cross-signing ready");case 44:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bootstrapSecretStorage",value:function(){var e=s(p().mark((function e(){var t,r,n,i,a,u,c,l,f,h,v,y,g,m,b,k,E,x,_,P,R,I,L,C,j,D,N,U,B,q,K,z,G,H=this,V=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.length>0&&void 0!==V[0]?V[0]:{},r=t.createSecretStorageKey,n=void 0===r?s(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):r,i=t.keyBackupInfo,a=t.setupNewKeyBackup,u=t.setupNewSecretStorage,c=t.getKeyBackupPassphrase,w.logger.log("Bootstrapping Secure Secret Storage"),l=this.baseApis.cryptoCallbacks,f=new O.EncryptionSetupBuilder(this.baseApis.store.accountData,l),h=new M.SecretStorage(f.accountDataClientAdapter,f.ssssCryptoCallbacks),v=null,y=function(){var e=s(p().mark((function e(t,r){var n,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},r&&(t.key=r),e.next=4,h.addKey(M.SECRET_STORAGE_ALGORITHM_V1_AES,t);case 4:return n=e.sent,i=n.keyId,o=n.keyInfo,r&&f.ssssCryptoCallbacks.addPrivateKey(i,o,r),e.next=10,h.setDefaultKeyId(i);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=s(p().mark((function e(t,r){var n,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.mac){e.next=16;break}return e.next=3,H.baseApis.cryptoCallbacks.getSecretStorageKey({keys:d({},t,r)},"");case 3:if(!(n=e.sent)){e.next=16;break}return i=n[1],f.ssssCryptoCallbacks.addPrivateKey(t,r,i),e.next=9,(0,F.calculateKeyCheck)(i);case 9:return o=e.sent,a=o.iv,s=o.mac,r.iv=a,r.mac=s,e.next=16,f.setAccountData("m.secret_storage.key.".concat(t),r);case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=H.crossSigningInfo.getId(),!e.t0){e.next=5;break}return e.next=4,H.crossSigningInfo.isStoredInKeyCache("master");case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=17;break}return e.prev=6,w.logger.log("Adding cross-signing signature to key backup"),e.next=10,H.crossSigningInfo.signObject(t,"master");case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(6),w.logger.error("Signing key backup with cross-signing keys failed",e.t1);case 15:e.next=18;break;case 17:w.logger.warn("Cross-signing keys not available, skipping signature on key backup");case 18:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),e.next=11,this.getSecretStorageKey();case 11:if(b=e.sent,k=o(b||[null,null],2),E=k[0],x=k[1],_=!u&&x&&x.algorithm===M.SECRET_STORAGE_ALGORITHM_V1_AES,w.logger.log({keyBackupInfo:i,setupNewKeyBackup:a,setupNewSecretStorage:u,storageExists:_,oldKeyInfo:x}),_||i){e.next=27;break}return w.logger.log("Secret storage does not exist, creating new storage key"),e.next=19,n();case 19:return P=e.sent,R=P.keyInfo,I=P.privateKey,e.next=24,y(R,I);case 24:v=e.sent,e.next=53;break;case 27:if(_||!i){e.next=49;break}return w.logger.log("Secret storage does not exist, using key backup key"),e.next=31,this.getSessionBackupPrivateKey();case 31:if(e.t0=e.sent,e.t0){e.next=36;break}return e.next=35,c();case 35:e.t0=e.sent;case 36:return L=e.t0,C={},i.auth_data.private_key_salt&&i.auth_data.private_key_iterations&&(C.passphrase={algorithm:"m.pbkdf2",iterations:i.auth_data.private_key_iterations,salt:i.auth_data.private_key_salt,bits:256}),e.next=41,y(C,L);case 41:return v=e.sent,e.next=44,h.store("m.megolm_backup.v1",S.encodeBase64(L),[v]);case 44:return e.next=46,m(i.auth_data);case 46:f.addSessionBackup(i),e.next=53;break;case 49:if(w.logger.log("Secret storage exists"),!x||x.algorithm!==M.SECRET_STORAGE_ALGORITHM_V1_AES){e.next=53;break}return e.next=53,g(E,x);case 53:if(e.t2=!this.baseApis.cryptoCallbacks.saveCrossSigningKeys,!e.t2){e.next=58;break}return e.next=57,this.isCrossSigningReady();case 57:e.t2=e.sent;case 58:if(e.t1=e.t2,!e.t1){e.next=66;break}if(e.t3=v,e.t3){e.next=65;break}return e.next=64,this.crossSigningInfo.isStoredInSecretStorage(h);case 64:e.t3=!e.sent;case 65:e.t1=e.t3;case 66:if(!e.t1){e.next=73;break}return w.logger.log("Copying cross-signing private keys from cache to secret storage"),e.next=70,this.crossSigningInfo.getCrossSigningKeysFromCache();case 70:return j=e.sent,e.next=73,T.CrossSigningInfo.storeInSecretStorage(j,h);case 73:if(!a||i){e.next=87;break}return w.logger.log("Creating new message key backup version"),e.next=77,this.baseApis.prepareKeyBackupVersion(null,{secureSecretStorage:!1});case 77:return D=e.sent,N=(0,A.decodeRecoveryKey)(D.recovery_key),e.next=81,h.store("m.megolm_backup.v1",S.encodeBase64(N));case 81:return U={algorithm:D.algorithm,auth_data:D.auth_data},e.next=84,m(U.auth_data);case 84:return e.next=86,this.signObject(U.auth_data);case 86:f.addSessionBackup(U);case 87:return e.next=89,h.get("m.megolm_backup.v1");case 89:if(!(B=e.sent)){e.next=101;break}if(w.logger.info("Got session backup key from secret storage: caching"),!(q=Z(B))){e.next=96;break}return e.next=96,h.store("m.megolm_backup.v1",q,[v||E]);case 96:return K=new Uint8Array(S.decodeBase64(q||B)),e.next=99,f.addSessionBackupPrivateKeyToCache(K);case 99:e.next=116;break;case 101:if(!this.backupManager.getKeyBackupEnabled()){e.next=116;break}return e.next=104,this.getSessionBackupPrivateKey();case 104:if(e.t4=e.sent,e.t4){e.next=109;break}return e.next=108,c();case 108:e.t4=e.sent;case 109:if(z=e.t4){e.next=113;break}return w.logger.error("Key backup is enabled but couldn't get key backup key!"),e.abrupt("return");case 113:return w.logger.info("Got session backup key from cache/user that wasn't in SSSS: saving to SSSS"),e.next=116,h.store("m.megolm_backup.v1",S.encodeBase64(z));case 116:return G=f.buildOperation(),e.next=119,G.apply(this);case 119:return e.next=121,f.persist(this);case 121:w.logger.log("Secure Secret Storage ready");case 122:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addSecretStorageKey",value:function(e,t,r){return this.secretStorage.addKey(e,t,r)}},{key:"hasSecretStorageKey",value:function(e){return this.secretStorage.hasKey(e)}},{key:"getSecretStorageKey",value:function(e){return this.secretStorage.getKey(e)}},{key:"storeSecret",value:function(e,t,r){return this.secretStorage.store(e,t,r)}},{key:"getSecret",value:function(e){return this.secretStorage.get(e)}},{key:"isSecretStored",value:function(e,t){return this.secretStorage.isStored(e,t)}},{key:"requestSecret",value:function(e,t){return t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(this.userId))),this.secretStorage.request(e,t)}},{key:"getDefaultSecretStorageKeyId",value:function(){return this.secretStorage.getDefaultKeyId()}},{key:"setDefaultSecretStorageKeyId",value:function(e){return this.secretStorage.setDefaultKeyId(e)}},{key:"checkSecretStorageKey",value:function(e,t){return this.secretStorage.checkKey(e,t)}},{key:"checkSecretStoragePrivateKey",value:function(t,r){var n=null;try{return(n=new e.Olm.PkDecryption).init_with_private_key(t)===r}finally{n&&n.free()}}},{key:"getSessionBackupPrivateKey",value:function(){var e=s(p().mark((function e(){var t,r,i,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){o.cryptoStore.doTxn("readonly",[R.IndexedDBCryptoStore.STORE_ACCOUNT],(function(t){o.cryptoStore.getSecretStorePrivateKey(t,e,"m.megolm_backup.v1")}))}));case 2:if(!(t=e.sent)||"string"!==typeof t){e.next=7;break}return t=new Uint8Array(S.decodeBase64(Z(t)||t)),e.next=7,this.storeSessionBackupPrivateKey(t);case 7:if(!t||!t.ciphertext){e.next=13;break}return r=n.from(this.olmDevice.pickleKey),e.next=11,(0,F.decryptAES)(t,r,"m.megolm_backup.v1");case 11:i=e.sent,t=S.decodeBase64(i);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeSessionBackupPrivateKey",value:function(){var e=s(p().mark((function e(t){var r,i,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Uint8Array){e.next=2;break}throw new Error("storeSessionBackupPrivateKey expects Uint8Array, got ".concat(t));case 2:return r=n.from(this.olmDevice.pickleKey),e.next=5,(0,F.encryptAES)(S.encodeBase64(t),r,"m.megolm_backup.v1");case 5:return i=e.sent,e.abrupt("return",this.cryptoStore.doTxn("readwrite",[R.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){o.cryptoStore.storeSecretStorePrivateKey(e,"m.megolm_backup.v1",i)})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCrossSigningPrivateKey",value:function(t,r){var n=null;try{return(n=new e.Olm.PkSigning).init_with_seed(t)===r}finally{n&&n.free()}}},{key:"afterCrossSigningLocalKeyChange",value:function(){var e=s(p().mark((function e(){var t,r,n,i,s,u,c,l,f,h,v,y,g,m,b=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.logger.info("Starting cross-signing key change post-processing"),t=this.deviceList.getStoredDevice(this.userId,this.deviceId),e.next=4,this.crossSigningInfo.signDevice(this.userId,t);case 4:if(r=e.sent,w.logger.info("Starting background key sig upload for ".concat(this.deviceId)),function e(t){var n=t.shouldEmit;return b.baseApis.uploadKeySignatures(d({},b.userId,d({},b.deviceId,r))).then((function(t){var r=(t||{}).failures;if(Object.keys(r||[]).length>0)throw n&&b.baseApis.emit("crypto.keySignatureUploadFailure",r,"afterCrossSigningLocalKeyChange",e),new B.KeySignatureUploadError("Key upload failed",{failures:r});w.logger.info("Finished background key sig upload for ".concat(b.deviceId))})).catch((function(e){w.logger.error("Error during background key sig upload for ".concat(b.deviceId),e)}))}({shouldEmit:!0}),!(n=this.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications)){e.next=53;break}w.logger.info("Starting device verification upgrade"),i={},s=0,u=Object.entries(this.deviceList.crossSigningInfo);case 13:if(!(s<u.length)){e.next=22;break}return c=o(u[s],2),l=c[0],f=c[1],e.next=17,this.checkForDeviceVerificationUpgrade(l,T.CrossSigningInfo.fromStorage(f,l));case 17:(h=e.sent)&&(i[l]=h);case 19:s++,e.next=13;break;case 22:if(!(Object.keys(i).length>0)){e.next=52;break}return w.logger.info("Found ".concat(Object.keys(i).length," verif users to upgrade")),e.prev=24,e.next=27,n({users:i});case 27:if(!(v=e.sent)){e.next=47;break}y=a(v),e.prev=30,y.s();case 32:if((g=y.n()).done){e.next=39;break}if(!((m=g.value)in i)){e.next=37;break}return e.next=37,this.baseApis.setDeviceVerified(m,i[m].crossSigningInfo.getId());case 37:e.next=32;break;case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(30),y.e(e.t0);case 44:return e.prev=44,y.f(),e.finish(44);case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(24),w.logger.log("shouldUpgradeDeviceVerifications threw an error: not upgrading",e.t1);case 52:w.logger.info("Finished device verification upgrade");case 53:w.logger.info("Finished cross-signing key change post-processing");case 54:case"end":return e.stop()}}),e,this,[[24,49],[30,41,44,47]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkForDeviceVerificationUpgrade",value:function(){var e=s(p().mark((function e(t,r){var n,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.crossSigningInfo.checkUserTrust(r),!r.firstUse||n.isVerified()){e.next=8;break}return i=this.deviceList.getRawStoredDevicesForUser(t),e.next=5,this.checkForValidDeviceSignature(t,r.keys.master,i);case 5:if(!(o=e.sent).length){e.next=8;break}return e.abrupt("return",{devices:o.map((function(e){return x.DeviceInfo.fromStorage(i[e],e)})),crossSigningInfo:r});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"checkForValidDeviceSignature",value:function(){var e=s(p().mark((function e(t,r,n){var i,a,s,u,c,l,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(n&&r.signatures&&r.signatures[t])){e.next=18;break}a=0,s=Object.keys(r.signatures[t]);case 3:if(!(a<s.length)){e.next=18;break}if(u=s[a],c=u.split(":",2),l=o(c,2),!((f=l[1])in n)||n[f].verified!==V.VERIFIED){e.next=15;break}return e.prev=7,e.next=10,S.verifySignature(this.olmDevice,r,t,f,n[f].keys[u]);case 10:i.push(f),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:a++,e.next=3;break;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getCrossSigningId",value:function(e){return this.crossSigningInfo.getId(e)}},{key:"getStoredCrossSigningForUser",value:function(e){return this.deviceList.getStoredCrossSigningForUser(e)}},{key:"checkUserTrust",value:function(e){var t=this.deviceList.getStoredCrossSigningForUser(e);return t?this.crossSigningInfo.checkUserTrust(t):new T.UserTrustLevel(!1,!1,!1)}},{key:"checkDeviceTrust",value:function(e,t){var r=this.deviceList.getStoredDevice(e,t);return this.checkDeviceInfoTrust(e,r)}},{key:"checkDeviceInfoTrust",value:function(e,t){var r=!(!t||!t.isVerified()),n=this.deviceList.getStoredCrossSigningForUser(e);if(t&&n){var i=this.trustCrossSignedDevices||e===this.userId;return this.crossSigningInfo.checkDeviceTrust(n,t,r,i)}return new T.DeviceTrustLevel(!1,!1,r,!1)}},{key:"checkOwnCrossSigningTrust",value:function(){var e=s(p().mark((function e(){var t,r,n,i,o,a,s,u,c,l,f,h,v,y,g,m,b,k,S,E,x,_,T,O,M,P,R,I=this,L=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L.length>0&&void 0!==L[0]?L[0]:{},r=t.allowPrivateKeyRequests,n=void 0!==r&&r,i=this.userId,e.next=4,this.downloadKeys([this.userId]);case 4:return e.next=6,this.crossSigningInfo.getCrossSigningKeysFromCache();case 6:if(o=e.sent,a=this.deviceList.getStoredCrossSigningForUser(i)){e.next=11;break}return w.logger.error("Got cross-signing update event for user "+i+" but no new cross-signing information found!"),e.abrupt("return");case 11:if(s=a.getId(),u=this.crossSigningInfo.getId()!==s,c=a.getId()&&!o.has("master"),u&&w.logger.info("Got new master public key",s),!n||!u&&!c){e.next=27;break}return w.logger.info("Attempting to retrieve cross-signing master private key"),l=null,e.prev=18,e.next=21,this.crossSigningInfo.getCrossSigningKey("master",s);case 21:f=e.sent,l=f[1],w.logger.info("Got cross-signing master private key");case 24:return e.prev=24,l&&l.free(),e.finish(24);case 27:if(h=this.crossSigningInfo.getId("self_signing"),v=this.crossSigningInfo.getId("user_signing"),this.storeTrustedSelfKeys(a.keys),y=h!==a.getId("self_signing"),g=v!==a.getId("user_signing"),m=a.getId("self_signing")&&!o.has("self_signing"),b=a.getId("user_signing")&&!o.has("user_signing"),k={},y&&w.logger.info("Got new self-signing key",a.getId("self_signing")),!n||!y&&!m){e.next=53;break}return w.logger.info("Attempting to retrieve cross-signing self-signing private key"),S=null,e.prev=39,e.next=42,this.crossSigningInfo.getCrossSigningKey("self_signing",a.getId("self_signing"));case 42:E=e.sent,S=E[1],w.logger.info("Got cross-signing self-signing private key");case 45:return e.prev=45,S&&S.free(),e.finish(45);case 48:return x=this.deviceList.getStoredDevice(this.userId,this.deviceId),e.next=51,this.crossSigningInfo.signDevice(this.userId,x);case 51:_=e.sent,k[this.deviceId]=_;case 53:if(g&&w.logger.info("Got new user-signing key",a.getId("user_signing")),!n||!g&&!b){e.next=66;break}return w.logger.info("Attempting to retrieve cross-signing user-signing private key"),T=null,e.prev=57,e.next=60,this.crossSigningInfo.getCrossSigningKey("user_signing",a.getId("user_signing"));case 60:O=e.sent,T=O[1],w.logger.info("Got cross-signing user-signing private key");case 63:return e.prev=63,T&&T.free(),e.finish(63);case 66:if(!u){e.next=72;break}return M=this.crossSigningInfo.keys.master,e.next=70,this.signObject(M);case 70:P=M.signatures[this.userId]["ed25519:"+this.deviceId],k[this.crossSigningInfo.getId()]=Object.assign({},M,{signatures:d({},this.userId,d({},"ed25519:"+this.deviceId,P))});case 72:if((R=Object.keys(k)).length&&function e(t){var r=t.shouldEmit;return w.logger.info("Starting background key sig upload for ".concat(R)),I.baseApis.uploadKeySignatures(d({},I.userId,k)).then((function(t){var n=(t||{}).failures;if(w.logger.info("Finished background key sig upload for ".concat(R)),Object.keys(n||[]).length>0)throw r&&I.baseApis.emit("crypto.keySignatureUploadFailure",n,"checkOwnCrossSigningTrust",e),new B.KeySignatureUploadError("Key upload failed",{failures:n})})).catch((function(e){w.logger.error("Error during background key sig upload for ".concat(R),e)}))}({shouldEmit:!0}),this.emit("userTrustStatusChanged",i,this.checkUserTrust(i)),!u){e.next=79;break}return this.baseApis.emit("crossSigning.keysChanged",{}),e.next=79,this.afterCrossSigningLocalKeyChange();case 79:return e.next=81,this.backupManager.checkKeyBackup();case 81:case"end":return e.stop()}}),e,this,[[18,,24,27],[39,,45,48],[57,,63,66]])})));return function(){return e.apply(this,arguments)}}()},{key:"storeTrustedSelfKeys",value:function(){var e=s(p().mark((function e(t){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t?this.crossSigningInfo.setKeys(t):this.crossSigningInfo.clearKeys(),e.next=3,this.cryptoStore.doTxn("readwrite",[R.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){r.cryptoStore.storeCrossSigningKeys(e,r.crossSigningInfo.keys)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkDeviceVerifications",value:function(){var e=s(p().mark((function e(t){var r,n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications){e.next=3;break}return e.abrupt("return");case 3:if(w.logger.info("Starting device verification upgrade for ".concat(t)),!this.crossSigningInfo.keys.user_signing){e.next=17;break}if(!(n=this.deviceList.getStoredCrossSigningForUser(t))){e.next=17;break}return e.next=9,this.checkForDeviceVerificationUpgrade(t,n);case 9:if(!(i=e.sent)){e.next=17;break}return e.next=13,r({users:d({},t,i)});case 13:if(!e.sent.includes(t)){e.next=17;break}return e.next=17,this.baseApis.setDeviceVerified(t,n.getId());case 17:w.logger.info("Finished device verification upgrade for ".concat(t));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setTrustedBackupPubKey",value:function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sessionStore.setLocalTrustedBackupPubKey(t),e.next=3,this.backupManager.checkKeyBackup();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"enableLazyLoading",value:function(){this.lazyLoadMembers=!0}},{key:"registerEventHandlers",value:function(e){var t=this;e.on("RoomMember.membership",(function(e,r,n){try{t.onRoomMembership(e,r,n)}catch(i){w.logger.error("Error handling membership change:",i)}})),e.on("toDeviceEvent",this.onToDeviceEvent),e.on("Room.timeline",this.onTimelineEvent),e.on("Event.decrypted",this.onTimelineEvent)}},{key:"start",value:function(){this.outgoingRoomKeyRequestManager.start()}},{key:"stop",value:function(){this.outgoingRoomKeyRequestManager.stop(),this.deviceList.stop(),this.dehydrationManager.stop()}},{key:"getDeviceEd25519Key",value:function(){return this.olmDevice.deviceEd25519Key}},{key:"getDeviceCurve25519Key",value:function(){return this.olmDevice.deviceCurve25519Key}},{key:"setGlobalBlacklistUnverifiedDevices",value:function(e){this.globalBlacklistUnverifiedDevices=e}},{key:"getGlobalBlacklistUnverifiedDevices",value:function(){return this.globalBlacklistUnverifiedDevices}},{key:"setGlobalErrorOnUnknownDevices",value:function(e){this.globalErrorOnUnknownDevices=e}},{key:"getGlobalErrorOnUnknownDevices",value:function(){return this.globalErrorOnUnknownDevices}},{key:"uploadDeviceKeys",value:function(){var e=this,t={algorithms:this.supportedAlgorithms,device_id:this.deviceId,keys:this.deviceKeys,user_id:this.userId};return this.signObject(t).then((function(){return e.baseApis.uploadKeysRequest({device_keys:t})}))}},{key:"updateOneTimeKeyCount",value:function(e){if(!isFinite(e))throw new TypeError("Parameter for updateOneTimeKeyCount has to be a number");this.oneTimeKeyCount=e}},{key:"setNeedsNewFallback",value:function(e){this.needsNewFallback=!!e}},{key:"getNeedsNewFallback",value:function(){return this.needsNewFallback}},{key:"maybeUploadOneTimeKeys",value:function(){var e=this;if(!this.oneTimeKeyCheckInProgress){var t=Date.now();if(!(null!==this.lastOneTimeKeyCheck&&t-this.lastOneTimeKeyCheck<6e4)){this.lastOneTimeKeyCheck=t;var r=this.olmDevice.maxNumberOfOneTimeKeys(),n=Math.floor(r/2),i=function(){var t=s(p().mark((function t(r){var i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>r||e.getNeedsNewFallback())){t.next=21;break}if(!(n>r)){t.next=6;break}return w.logger.info("generating oneTimeKeys"),i=Math.min(n-r,5),t.next=6,e.olmDevice.generateOneTimeKeys(i);case 6:if(!e.getNeedsNewFallback()){t.next=10;break}return w.logger.info("generating fallback key"),t.next=10,e.olmDevice.generateFallbackKey();case 10:return w.logger.info("calling uploadOneTimeKeys"),t.next=13,e.uploadOneTimeKeys();case 13:if(!(o=t.sent).one_time_key_counts||!o.one_time_key_counts.signed_curve25519){t.next=18;break}r=o.one_time_key_counts.signed_curve25519,t.next=19;break;case 18:throw new Error("response for uploading keys does not contain one_time_key_counts.signed_curve25519");case 19:t.next=0;break;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();this.oneTimeKeyCheckInProgress=!0,Promise.resolve().then((function(){return void 0!==e.oneTimeKeyCount?Promise.resolve(e.oneTimeKeyCount):e.baseApis.uploadKeysRequest({}).then((function(e){return e.one_time_key_counts.signed_curve25519||0}))})).then((function(e){return i(e)})).catch((function(e){w.logger.error("Error uploading one-time keys",e.stack||e)})).finally((function(){e.oneTimeKeyCount=void 0,e.oneTimeKeyCheckInProgress=!1}))}}}},{key:"uploadOneTimeKeys",value:function(){var e=s(p().mark((function e(){var t,r,n,i,a,s,u,c,l,f,h,d,v,y;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],r={},!this.getNeedsNewFallback()){e.next=8;break}return e.next=5,this.olmDevice.getFallbackKey();case 5:for(n=e.sent,i=0,a=Object.entries(n.curve25519);i<a.length;i++)s=o(a[i],2),u=s[0],c=s[1],l={key:c,fallback:!0},r["signed_curve25519:"+u]=l,t.push(this.signObject(l));this.setNeedsNewFallback(!1);case 8:return e.next=10,this.olmDevice.getOneTimeKeys();case 10:for(d in f=e.sent,h={},f.curve25519)f.curve25519.hasOwnProperty(d)&&(v={key:f.curve25519[d]},h["signed_curve25519:"+d]=v,t.push(this.signObject(v)));return e.next=15,Promise.all(t);case 15:return e.next=17,this.baseApis.uploadKeysRequest({one_time_keys:h,"org.sendingnetwork.msc2732.fallback_keys":r});case 17:return y=e.sent,e.next=20,this.olmDevice.markKeysAsPublished();case 20:return e.abrupt("return",y);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadKeys",value:function(e,t){return this.deviceList.downloadKeys(e,t)}},{key:"getStoredDevicesForUser",value:function(e){return this.deviceList.getStoredDevicesForUser(e)}},{key:"getStoredDevice",value:function(e,t){return this.deviceList.getStoredDevice(e,t)}},{key:"saveDeviceList",value:function(e){return this.deviceList.saveIfDirty(e)}},{key:"setDeviceVerification",value:function(){var e=s(p().mark((function e(t,r,n,i,o){var a,u,c,l,f,h,v,y,g,m,b=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),!(a=this.deviceList.getStoredCrossSigningForUser(t))||a.getId()!==r){e.next=23;break}if(null===i&&null===o){e.next=7;break}throw new Error("Cannot set blocked or known for a cross-signing key");case 7:if(n){e.next=9;break}throw new Error("Cannot set a cross-signing key as unverified");case 9:if(this.crossSigningInfo.getId()||t!==this.crossSigningInfo.userId||(this.storeTrustedSelfKeys(a.keys),this.emit("userTrustStatusChanged",this.userId,this.checkUserTrust(t))),t===this.userId){e.next=22;break}return w.logger.info("Master key "+a.getId()+" for "+t+" marked verified. Signing..."),e.next=14,this.crossSigningInfo.signUser(a);case 14:if(!(u=e.sent)){e.next=19;break}return c=function(){var e=s(p().mark((function e(n){var i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.shouldEmit,w.logger.info("Uploading signature for "+t+"..."),e.next=4,b.baseApis.uploadKeySignatures(d({},t,d({},r,u)));case 4:if(o=e.sent,a=(o||{}).failures,!(Object.keys(a||[]).length>0)){e.next=9;break}throw i&&b.baseApis.emit("crypto.keySignatureUploadFailure",a,"setDeviceVerification",c),new B.KeySignatureUploadError("Key upload failed",{failures:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=19,c({shouldEmit:!0});case 19:return e.abrupt("return",u);case 22:return e.abrupt("return",a);case 23:if((l=this.deviceList.getRawStoredDevicesForUser(t))&&l[r]){e.next=26;break}throw new Error("Unknown device "+t+":"+r);case 26:if(f=l[r],h=f.verified,n?h=V.VERIFIED:null!==n&&h==V.VERIFIED&&(h=V.UNVERIFIED),i?h=V.BLOCKED:null!==i&&h==V.BLOCKED&&(h=V.UNVERIFIED),v=f.known,null!==o&&(v=o),f.verified===h&&f.known===v||(f.verified=h,f.known=v,this.deviceList.storeDevicesForUser(t,l),this.deviceList.saveIfDirty()),!n||t!==this.userId){e.next=47;break}if(w.logger.info("Own device "+r+" marked verified: signing"),!this.checkDeviceTrust(t,r).isCrossSigningVerified()){e.next=40;break}w.logger.log("Own device ".concat(r," already cross-signing verified")),e.next=43;break;case 40:return e.next=42,this.crossSigningInfo.signDevice(t,x.DeviceInfo.fromStorage(f,r));case 42:y=e.sent;case 43:if(!y){e.next=47;break}return g=function(){var e=s(p().mark((function e(n){var i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.shouldEmit,w.logger.info("Uploading signature for "+r),e.next=4,b.baseApis.uploadKeySignatures(d({},t,d({},r,y)));case 4:if(o=e.sent,a=(o||{}).failures,!(Object.keys(a||[]).length>0)){e.next=9;break}throw i&&b.baseApis.emit("crypto.keySignatureUploadFailure",a,"setDeviceVerification",g),new B.KeySignatureUploadError("Key upload failed",{failures:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=47,g({shouldEmit:!0});case 47:return m=x.DeviceInfo.fromStorage(f,r),this.emit("deviceVerificationChanged",t,r,m),e.abrupt("return",m);case 50:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"findVerificationRequestDMInProgress",value:function(e){return this.inRoomVerificationRequests.findRequestInProgress(e)}},{key:"getVerificationRequestsToDeviceInProgress",value:function(e){return this.toDeviceVerificationRequests.getRequestsInProgress(e)}},{key:"requestVerificationDM",value:function(e,t){var r=this.inRoomVerificationRequests.findRequestInProgress(t);if(r)return Promise.resolve(r);var n=new D.InRoomChannel(this.baseApis,t,e);return this.requestVerificationWithChannel(e,n,this.inRoomVerificationRequests)}},{key:"requestVerification",value:function(e,t){t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(e)));var r=this.toDeviceVerificationRequests.findRequestInProgress(e,t);if(r)return Promise.resolve(r);var n=new N.ToDeviceChannel(this.baseApis,e,t,N.ToDeviceChannel.makeTransactionId());return this.requestVerificationWithChannel(e,n,this.toDeviceVerificationRequests)}},{key:"requestVerificationWithChannel",value:function(){var e=s(p().mark((function e(t,r,n){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new j.VerificationRequest(r,this.verificationMethods,this.baseApis),r.transactionId&&n.setRequestByChannel(r,i),e.next=4,i.sendRequest();case 4:return(o=n.getRequestByChannel(r))?i=o:(w.logger.log("Crypto: adding new request to "+"requestsByTxnId with id ".concat(r.transactionId," ").concat(r.roomId)),n.setRequestByChannel(r,i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"beginKeyVerification",value:function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i){if(!(n=this.toDeviceVerificationRequests.getRequestBySenderAndTxnId(t,i)))throw new Error("No request found for user ".concat(t," with ")+"transactionId ".concat(i))}else{i=N.ToDeviceChannel.makeTransactionId();var o=new N.ToDeviceChannel(this.baseApis,t,[r],i,r);n=new j.VerificationRequest(o,this.verificationMethods,this.baseApis),this.toDeviceVerificationRequests.setRequestBySenderAndTxnId(t,i,n)}return n.beginKeyVerification(e,{userId:t,deviceId:r})}},{key:"legacyDeviceVerification",value:function(){var e=s(p().mark((function e(t,r,n){var i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=N.ToDeviceChannel.makeTransactionId(),o=new N.ToDeviceChannel(this.baseApis,t,[r],i,r),a=new j.VerificationRequest(o,this.verificationMethods,this.baseApis),this.toDeviceVerificationRequests.setRequestBySenderAndTxnId(t,i,a),s=a.beginKeyVerification(n,{userId:t,deviceId:r}),e.next=7,Promise.race([s.verify(),a.waitFor((function(e){return e.started}))]);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getOlmSessionsForUser",value:function(){var e=s(p().mark((function e(t){var r,n,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getStoredDevicesForUser(t)||[],n={},i=0;case 3:if(!(i<r.length)){e.next=13;break}return o=r[i],a=o.getIdentityKey(),e.next=8,this.olmDevice.getSessionInfoForDevice(a);case 8:s=e.sent,n[o.deviceId]={deviceIdKey:a,sessions:s};case 10:++i,e.next=3;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEventSenderDeviceInfo",value:function(e){var t=e.getSenderKey(),r=e.getWireContent().algorithm;if(!t||!r)return null;if(e.getForwardingCurve25519KeyChain().length>0)return null;if(e.isKeySourceUntrusted())return null;var n=this.deviceList.getDeviceByIdentityKey(r,t);if(null===n)return null;var i=e.getClaimedEd25519Key();return i?i!==n.getFingerprint()?(w.logger.warn("Event "+e.getId()+" claims ed25519 key "+i+" but sender device has key "+n.getFingerprint()),null):n:(w.logger.warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),null)}},{key:"getEventEncryptionInfo",value:function(e){var t={};if(t.senderKey=e.getSenderKey(),t.algorithm=e.getWireContent().algorithm,!t.senderKey||!t.algorithm)return t.encrypted=!1,t;t.encrypted=!0,e.getForwardingCurve25519KeyChain().length>0||e.isKeySourceUntrusted()?t.authenticated=!1:t.authenticated=!0,t.sender=this.deviceList.getDeviceByIdentityKey(t.algorithm,t.senderKey);var r=e.getClaimedEd25519Key();return r||(w.logger.warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),t.mismatchedSender=!0),t.sender&&r!==t.sender.getFingerprint()&&(w.logger.warn("Event "+e.getId()+" claims ed25519 key "+r+"but sender device has key "+t.sender.getFingerprint()),t.mismatchedSender=!0),t}},{key:"forceDiscardSession",value:function(e){var t=this.roomEncryptors[e];if(void 0===t)throw new Error("Room not encrypted");if(void 0===t.forceDiscardSession)throw new Error("Room encryption algorithm doesn't support session discarding");t.forceDiscardSession()}},{key:"setRoomEncryption",value:function(){var e=s(p().mark((function e(t,r,n){var i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.algorithm){e.next=3;break}return w.logger.log("Ignoring setRoomEncryption with no algorithm"),e.abrupt("return");case 3:if(!(i=this.roomList.getRoomEncryption(t))){e.next=8;break}if(JSON.stringify(i)==JSON.stringify(r)){e.next=8;break}return w.logger.error("Ignoring m.room.encryption event which requests a change of config in "+t),e.abrupt("return");case 8:if(!this.roomEncryptors[t]){e.next=11;break}return e.abrupt("return");case 11:if(o=null,i||(o=this.roomList.setRoomEncryption(t,r)),a=_.ENCRYPTION_CLASSES[r.algorithm]){e.next=16;break}throw new Error("Unable to encrypt with "+r.algorithm);case 16:if(s=new a({userId:this.userId,deviceId:this.deviceId,crypto:this,olmDevice:this.olmDevice,baseApis:this.baseApis,roomId:t,config:r}),this.roomEncryptors[t]=s,!o){e.next=21;break}return e.next=21,o;case 21:if(this.lazyLoadMembers){e.next=28;break}return w.logger.log("Enabling encryption in "+t+"; starting to track device lists for all users therein"),e.next=25,this.trackRoomDevices(t);case 25:n||this.deviceList.refreshOutdatedDeviceLists(),e.next=29;break;case 28:w.logger.log("Enabling encryption in "+t);case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"trackRoomDevices",value:function(e){var t=this,r=function(){var r=s(p().mark((function r(){var n;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.roomEncryptors[e]){r.next=2;break}return r.abrupt("return");case 2:if(n=t.clientStore.getRoom(e)){r.next=5;break}throw new Error("Unable to start tracking devices in unknown room ".concat(e));case 5:return w.logger.log("Starting to track devices for room ".concat(e," ...")),r.next=8,n.getEncryptionTargetMembers();case 8:r.sent.forEach((function(e){t.deviceList.startTrackingDeviceList(e.userId)}));case 10:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),n=this.roomDeviceTrackingState[e];return n||(n=r(),this.roomDeviceTrackingState[e]=n.catch((function(r){throw t.roomDeviceTrackingState[e]=null,r}))),n}},{key:"ensureOlmSessionsForUsers",value:function(e){for(var t={},r=0;r<e.length;++r){var n=e[r];t[n]=[];for(var i=this.getStoredDevicesForUser(n)||[],o=0;o<i.length;++o){var a=i[o];a.getIdentityKey()!=this.olmDevice.deviceCurve25519Key&&(a.verified!=V.BLOCKED&&t[n].push(a))}}return S.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,t)}},{key:"exportRoomKeys",value:function(){var e=s(p().mark((function e(){var t,r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.cryptoStore.doTxn("readonly",[R.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS],(function(e){r.cryptoStore.getAllEndToEndInboundGroupSessions(e,(function(e){if(null!==e){var n=r.olmDevice.exportInboundGroupSession(e.senderKey,e.sessionId,e.sessionData);delete n.first_known_index,n.algorithm=S.MEGOLM_ALGORITHM,t.push(n)}}))}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importRoomKeys",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,o=e.length;function a(){r.progressCallback({stage:"load_keys",successes:n,failures:i,total:o})}return Promise.all(e.map((function(e){return e.room_id&&e.algorithm?t.getRoomDecryptor(e.room_id,e.algorithm).importRoomKey(e,r).finally((function(){n++,r.progressCallback&&a()})):(w.logger.warn("ignoring room key entry with missing fields",e),i++,r.progressCallback&&a(),null)})))}},{key:"countSessionsNeedingBackup",value:function(){return this.backupManager.countSessionsNeedingBackup()}},{key:"prepareToEncrypt",value:function(e){var t=this.roomEncryptors[e.roomId];t&&t.prepareToEncrypt(e)}},{key:"encryptEvent",value:function(){var e=s(p().mark((function e(t,r){var n,i,o,a,s,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("Cannot send encrypted messages in unknown rooms");case 2:if(n=t.getRoomId(),i=this.roomEncryptors[n]){e.next=6;break}throw new Error("Room was previously configured to use encryption, but is no longer. Perhaps the node is hiding the configuration event.");case 6:return this.roomDeviceTrackingState[n]||this.trackRoomDevices(n),e.next=9,this.roomDeviceTrackingState[n];case 9:return o=t.getContent(),(a=o["m.relates_to"])&&delete(o=Object.assign({},o))["m.relates_to"],(s=o["io.element.performance_metrics"])&&delete(o=Object.assign({},o))["io.element.performance_metrics"],e.next=16,i.encryptMessage(r,t.getType(),o);case 16:u=e.sent,a&&(u["m.relates_to"]=a),s&&(u["io.element.performance_metrics"]=s),t.makeEncrypted("m.room.encrypted",u,this.olmDevice.deviceCurve25519Key,this.olmDevice.deviceEd25519Key);case 20:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"decryptEvent",value:function(){var e=s(p().mark((function e(t){var r,n,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isRedacted()){e.next=8;break}return r=new z.SendingNetworkEvent(t.getUnsigned().redacted_because),e.next=4,this.decryptEvent(r);case 4:return n=e.sent,e.abrupt("return",{clearEvent:{room_id:t.getRoomId(),type:"m.room.message",content:{},unsigned:{redacted_because:n.clearEvent}}});case 8:return i=t.getWireContent(),o=this.getRoomDecryptor(t.getRoomId(),i.algorithm),e.next=12,o.decryptEvent(t);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeviceListChanges",value:function(){var e=s(p().mark((function e(t,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.oldSyncToken){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.evalDeviceListChanges(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestRoomKey",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.outgoingRoomKeyRequestManager.queueRoomKeyRequest(e,t,n).then((function(){r.sendKeyRequestsImmediately&&r.outgoingRoomKeyRequestManager.sendQueuedRequests()})).catch((function(e){w.logger.error("Error requesting key for event",e)}))}},{key:"cancelRoomKeyRequest",value:function(e){this.outgoingRoomKeyRequestManager.cancelRoomKeyRequest(e).catch((function(e){w.logger.warn("Error clearing pending room key requests",e)}))}},{key:"cancelAndResendAllOutgoingKeyRequests",value:function(){var e=s(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.outgoingRoomKeyRequestManager.cancelAndResendAllOutgoingRequests();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCryptoEvent",value:function(){var e=s(p().mark((function e(t){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getRoomId(),n=t.getContent(),e.prev=2,e.next=5,this.setRoomEncryption(r,n,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),w.logger.error("Error configuring encryption in room "+r+":",e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSyncWillProcess",value:function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.oldSyncToken||(w.logger.log("Initial sync performed - resetting device tracking state"),this.deviceList.stopTrackingAllDeviceLists(),this.deviceList.startTrackingDeviceList(this.userId),this.roomDeviceTrackingState={}),this.sendKeyRequestsImmediately=!1;case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSyncCompleted",value:function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.deviceList.setSyncToken(t.nextSyncToken),this.deviceList.saveIfDirty(),this.deviceList.startTrackingDeviceList(this.userId),this.deviceList.refreshOutdatedDeviceLists(),t.catchingUp||(this.maybeUploadOneTimeKeys(),this.processReceivedRoomKeyRequests(),this.outgoingRoomKeyRequestManager.sendQueuedRequests(),this.sendKeyRequestsImmediately=!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"evalDeviceListChanges",value:function(){var e=s(p().mark((function e(t){var r,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.changed&&Array.isArray(t.changed)&&t.changed.forEach((function(e){n.deviceList.invalidateUserDeviceList(e)})),!(t.left&&Array.isArray(t.left)&&t.left.length)){e.next=8;break}return e.t0=Set,e.next=5,this.getTrackedE2eUsers();case 5:e.t1=e.sent,r=new e.t0(e.t1),t.left.forEach((function(e){r.has(e)||n.deviceList.stopTrackingDeviceList(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTrackedE2eUsers",value:function(){var e=s(p().mark((function e(){var t,r,n,i,o,s,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=a(this.getTrackedE2eRooms()),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=13;break}return i=n.value,e.next=8,i.getEncryptionTargetMembers();case 8:o=e.sent,s=a(o);try{for(s.s();!(u=s.n()).done;)c=u.value,t.push(c.userId)}catch(l){s.e(l)}finally{s.f()}case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTrackedE2eRooms",value:function(){var e=this;return this.clientStore.getRooms().filter((function(t){if(!e.roomEncryptors[t.roomId])return!1;if(!e.roomDeviceTrackingState[t.roomId])return!1;var r=t.getMyMembership();return"join"===r||"invite"===r}))}},{key:"onRoomKeyEvent",value:function(e){var t=e.getContent();t.room_id&&t.algorithm?(this.backupManager.checkedForBackup||this.backupManager.checkAndStart(),this.getRoomDecryptor(t.room_id,t.algorithm).onRoomKeyEvent(e)):w.logger.error("key event is missing fields")}},{key:"onRoomKeyWithheldEvent",value:function(e){var t=e.getContent();if(("m.no_olm"===t.code||t.room_id&&t.session_id)&&t.algorithm&&t.sender_key){w.logger.info("Got room key withheld event from ".concat(e.getSender()," (").concat(t.sender_key,") ")+"for ".concat(t.algorithm,"/").concat(t.room_id,"/").concat(t.session_id," ")+"with reason ".concat(t.code," (").concat(t.reason,")"));var r=this.getRoomDecryptor(t.room_id,t.algorithm);if(r.onRoomKeyWithheldEvent&&r.onRoomKeyWithheldEvent(e),!t.room_id){var n,i=this.getRoomDecryptors(t.algorithm),o=a(i);try{for(o.s();!(n=o.n()).done;){n.value.retryDecryptionFromSender(t.sender_key)}}catch(s){o.e(s)}finally{o.f()}}}else w.logger.error("key withheld event is missing fields")}},{key:"onKeyVerificationMessage",value:function(e){var t=this;if(N.ToDeviceChannel.validateEvent(e,this.baseApis)){this.handleVerificationEvent(e,this.toDeviceVerificationRequests,(function(e){if(N.ToDeviceChannel.canCreateRequest(N.ToDeviceChannel.getEventType(e))){var r=e.getContent(),n=r&&r.from_device;if(n){var i=e.getSender(),o=new N.ToDeviceChannel(t.baseApis,i,[n]);return new j.VerificationRequest(o,t.verificationMethods,t.baseApis)}}}))}}},{key:"handleVerificationEvent",value:function(){var e=s(p().mark((function e(t,r,n){var i,o,a,s,u,c=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(c.length>3&&void 0!==c[3])||c[3],!t.isSending()||t.status==z.EventStatus.SENT){e.next=15;break}return e.prev=2,e.next=5,new Promise((function(e,r){o=e,a=function(){t.status==z.EventStatus.CANCELLED&&r(new Error("Event status set to CANCELLED."))},t.once("Event.localEventIdReplaced",o),t.on("Event.status",a)}));case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),w.logger.error("error while waiting for the verification event to be sent: "+e.t0.message),e.abrupt("return");case 11:return e.prev=11,t.removeListener("Event.localEventIdReplaced",o),t.removeListener("Event.status",a),e.finish(11);case 15:if(s=r.getRequest(t),u=!1,s){e.next=24;break}if(s=n(t)){e.next=22;break}return w.logger.log("Crypto: could not find VerificationRequest for "+"".concat(t.getType(),", and could not create one, so ignoring.")),e.abrupt("return");case 22:u=!0,r.setRequest(t,s);case 24:return t.setVerificationRequest(s),e.prev=25,e.next=28,s.channel.handleEvent(t,s,i);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(25),w.logger.error("error while handling verification event: "+e.t1.message);case 33:u&&!s.initiatedByMe&&!s.invalid&&!s.observeOnly&&this.baseApis.emit("crypto.verification.request",s);case 35:case"end":return e.stop()}}),e,this,[[2,7,11,15],[25,30]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"onToDeviceBadEncrypted",value:function(){var e=s(p().mark((function e(t){var r,n,i,o,s,u,c,l,f,h,v,y,g,m=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getWireContent(),n=t.getSender(),i=r.algorithm,o=r.sender_key,s=function(){var e,t=m.getRoomDecryptors(S.MEGOLM_ALGORITHM),r=a(t);try{for(r.s();!(e=r.n()).done;){e.value.retryDecryptionFromSender(o)}}catch(n){r.e(n)}finally{r.f()}},void 0!==n&&void 0!==o&&void 0!==o){e.next=7;break}return e.abrupt("return");case 7:if(this.lastNewSessionForced[n]=this.lastNewSessionForced[n]||{},!((u=this.lastNewSessionForced[n][o]||0)+36e5>Date.now())){e.next=15;break}return w.logger.debug("New session already forced with device "+n+":"+o+" at "+u+": not forcing another"),e.next=13,this.olmDevice.recordSessionProblem(o,"wedged",!0);case 13:return s(),e.abrupt("return");case 15:if(c=this.deviceList.getDeviceByIdentityKey(i,o)){e.next=26;break}return e.next=19,this.downloadKeys([n],!1);case 19:if(c=this.deviceList.getDeviceByIdentityKey(i,o)){e.next=26;break}return w.logger.info("Couldn't find device for identity key "+o+": not re-establishing session"),e.next=24,this.olmDevice.recordSessionProblem(o,"wedged",!1);case 24:return s(),e.abrupt("return");case 26:return(l={})[n]=[c],e.next=30,S.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,l,!0);case 30:return this.lastNewSessionForced[n][o]=Date.now(),f={algorithm:S.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=34,S.encryptMessageForDevice(f.ciphertext,this.userId,this.deviceId,this.olmDevice,n,c,{type:"m.dummy"});case 34:return e.next=36,this.olmDevice.recordSessionProblem(o,"wedged",!0);case 36:return s(),e.next=39,this.baseApis.sendToDevice("m.room.encrypted",d({},n,d({},c.deviceId,f)));case 39:return e.next=41,this.outgoingRoomKeyRequestManager.getOutgoingSentRoomKeyRequest(n,c.deviceId);case 41:h=e.sent,v=a(h);try{for(v.s();!(y=v.n()).done;)g=y.value,this.requestRoomKey(g.requestBody,g.recipients,!0)}catch(p){v.e(p)}finally{v.f()}case 44:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRoomMembership",value:function(e,t,r){var n=t.roomId,i=this.roomEncryptors[n];i&&(this.roomDeviceTrackingState[n]&&("join"==t.membership?(w.logger.log("Join event for "+t.userId+" in "+n),this.deviceList.startTrackingDeviceList(t.userId)):"invite"==t.membership&&this.clientStore.getRoom(n).shouldEncryptForInvitedMembers()&&(w.logger.log("Invite event for "+t.userId+" in "+n),this.deviceList.startTrackingDeviceList(t.userId))),i.onRoomMembership(e,t,r))}},{key:"onRoomKeyRequestEvent",value:function(e){var t=e.getContent();if("request"===t.action){var r=new J(e);this.receivedRoomKeyRequests.push(r)}else if("request_cancellation"===t.action){var n=new Q(e);this.receivedRoomKeyRequestCancellations.push(n)}}},{key:"processReceivedRoomKeyRequests",value:function(){var e=s(p().mark((function e(){var t,r,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.processingRoomKeyRequests){e.next=2;break}return e.abrupt("return");case 2:return this.processingRoomKeyRequests=!0,e.prev=3,t=this.receivedRoomKeyRequests,this.receivedRoomKeyRequests=[],r=this.receivedRoomKeyRequestCancellations,this.receivedRoomKeyRequestCancellations=[],e.next=10,Promise.all(t.map((function(e){return n.processReceivedRoomKeyRequest(e)})));case 10:return e.next=12,Promise.all(r.map((function(e){return n.processReceivedRoomKeyRequestCancellation(e)})));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),w.logger.error("Error processing room key requsts: ".concat(e.t0));case 17:return e.prev=17,this.processingRoomKeyRequests=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"processReceivedRoomKeyRequest",value:function(){var e=s(p().mark((function e(t){var r,n,i,o,a,s,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,n=t.deviceId,i=t.requestBody,o=i.room_id,a=i.algorithm,w.logger.log("m.room_key_request from ".concat(r,":").concat(n)+" for ".concat(o," / ").concat(i.session_id," (id ").concat(t.requestId,")")),r===this.userId){e.next=24;break}if(this.roomEncryptors[o]){e.next=10;break}return w.logger.debug("room key request for unencrypted room ".concat(o)),e.abrupt("return");case 10:if(s=this.roomEncryptors[o],u=this.deviceList.getStoredDevice(r,n)){e.next=15;break}return w.logger.debug("Ignoring keyshare for unknown device ".concat(r,":").concat(n)),e.abrupt("return");case 15:return e.prev=15,e.next=18,s.reshareKeyWithDevice(i.sender_key,i.session_id,r,u);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),w.logger.warn("Failed to re-share keys for session "+i.session_id+" with device "+r+":"+u.deviceId,e.t0);case 23:return e.abrupt("return");case 24:if(n!==this.deviceId){e.next=27;break}return w.logger.log("Ignoring room key request from ourselves"),e.abrupt("return");case 27:if(this.roomDecryptors[o]){e.next=30;break}return w.logger.log("room key request for unencrypted room ".concat(o)),e.abrupt("return");case 30:if(c=this.roomDecryptors[o][a]){e.next=34;break}return w.logger.log("room key request for unknown alg ".concat(a," in room ").concat(o)),e.abrupt("return");case 34:return e.next=36,c.hasKeysForKeyRequest(t);case 36:if(e.sent){e.next=39;break}return w.logger.log("room key request for unknown session ".concat(o," / ")+i.session_id),e.abrupt("return");case 39:if(t.share=function(){c.shareKeysWithDevice(t)},!this.checkDeviceTrust(r,n).isVerified()){e.next=44;break}return w.logger.log("device is already verified: sharing keys"),t.share(),e.abrupt("return");case 44:this.emit("crypto.roomKeyRequest",t);case 45:case"end":return e.stop()}}),e,this,[[15,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"processReceivedRoomKeyRequestCancellation",value:function(){var e=s(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.logger.log("m.room_key_request cancellation for ".concat(t.userId,":")+"".concat(t.deviceId," (id ").concat(t.requestId,")")),this.emit("crypto.roomKeyRequestCancellation",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRoomDecryptor",value:function(e,t){var r,n;if((e=e||null)&&((r=this.roomDecryptors[e])||(this.roomDecryptors[e]=r={}),n=r[t]))return n;var i=_.DECRYPTION_CLASSES[t];if(!i)throw new _.DecryptionError("UNKNOWN_ENCRYPTION_ALGORITHM",'Unknown encryption algorithm "'+t+'".');return n=new i({userId:this.userId,crypto:this,olmDevice:this.olmDevice,baseApis:this.baseApis,roomId:e}),r&&(r[t]=n),n}},{key:"getRoomDecryptors",value:function(e){for(var t=[],r=0,n=Object.values(this.roomDecryptors);r<n.length;r++){var i=n[r];e in i&&t.push(i[e])}return t}},{key:"signObject",value:function(){var e=s(p().mark((function e(t){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signatures||{},n=t.unsigned,delete t.signatures,delete t.unsigned,r[this.userId]=r[this.userId]||{},e.next=7,this.olmDevice.sign(g.default.stringify(t));case 7:r[this.userId]["ed25519:"+this.deviceId]=e.sent,t.signatures=r,void 0!==n&&(t.unsigned=n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getOlmVersion",value:function(){return k.OlmDevice.getOlmVersion()}}]),i}(m.EventEmitter);function Z(e){if("string"!==typeof e||e.indexOf(",")<0)return null;var t=Uint8Array.from(e.split(","),(function(e){return parseInt(e)}));return S.encodeBase64(t)}t.Crypto=Y;var J=c((function e(t){u(this,e),(0,y.default)(this,"userId",void 0),(0,y.default)(this,"deviceId",void 0),(0,y.default)(this,"requestId",void 0),(0,y.default)(this,"requestBody",void 0),(0,y.default)(this,"share",void 0);var r=t.getContent();this.userId=t.getSender(),this.deviceId=r.requesting_device_id,this.requestId=r.request_id,this.requestBody=r.body||{},this.share=function(){throw new Error("don't know how to share keys for this request yet")}}));t.IncomingRoomKeyRequest=J;var Q=c((function e(t){u(this,e),(0,y.default)(this,"userId",void 0),(0,y.default)(this,"deviceId",void 0),(0,y.default)(this,"requestId",void 0);var r=t.getContent();this.userId=t.getSender(),this.deviceId=r.requesting_device_id,this.requestId=r.request_id}))}).call(this,r(11),r(18).Buffer)},function(e,t,r){"use strict";var n=r(9),i=r(1),o=r(2),a=r(16),s=r(14),u=r(15);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3)(r(4)),f=r(8),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28)),d=r(64),p=r(83);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var y=d.DeviceInfo.DeviceVerification,g=function(e){s(r,e);var t=u(r);function r(){var e;i(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,l.default)(a(e),"sessionPrepared",!1),(0,l.default)(a(e),"prepPromise",null),e}return o(r,[{key:"ensureSession",value:function(e){var t=this;return this.prepPromise?this.prepPromise:this.sessionPrepared?Promise.resolve():(this.prepPromise=this.crypto.downloadKeys(e).then((function(r){return t.crypto.ensureOlmSessionsForUsers(e)})).then((function(){t.sessionPrepared=!0})).finally((function(){t.prepPromise=null})),this.prepPromise)}},{key:"encryptMessage",value:function(){var e=n(c().mark((function e(t,r,n){var i,o,a,s,u,l,f,d,p,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEncryptionTargetMembers();case 2:return i=e.sent,o=i.map((function(e){return e.userId})),e.next=6,this.ensureSession(o);case 6:a={room_id:t.roomId,type:r,content:n},s={algorithm:h.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},u=[],l=0;case 10:if(!(l<o.length)){e.next=28;break}f=o[l],d=this.crypto.getStoredDevicesForUser(f),p=0;case 14:if(!(p<d.length)){e.next=25;break}if(v=d[p],v.getIdentityKey()!=this.olmDevice.deviceCurve25519Key){e.next=19;break}return e.abrupt("continue",22);case 19:if(v.verified!=y.BLOCKED){e.next=21;break}return e.abrupt("continue",22);case 21:u.push(h.encryptMessageForDevice(s.ciphertext,this.userId,this.deviceId,this.olmDevice,f,v,a));case 22:++p,e.next=14;break;case 25:++l,e.next=10;break;case 28:return e.next=30,Promise.all(u).then((function(){return s}));case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(p.EncryptionAlgorithm),m=function(e){s(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return o(r,[{key:"decryptEvent",value:function(){var e=n(c().mark((function e(t){var r,n,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getWireContent(),n=r.sender_key,i=r.ciphertext){e.next=5;break}throw new p.DecryptionError("OLM_MISSING_CIPHERTEXT","Missing ciphertext");case 5:if(this.olmDevice.deviceCurve25519Key in i){e.next=7;break}throw new p.DecryptionError("OLM_NOT_INCLUDED_IN_RECIPIENTS","Not included in recipients");case 7:return o=i[this.olmDevice.deviceCurve25519Key],e.prev=8,e.next=11,this.decryptMessage(n,o);case 11:a=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),new p.DecryptionError("OLM_BAD_ENCRYPTED_MESSAGE","Bad Encrypted Message",{sender:n,err:e.t0});case 17:if((s=JSON.parse(a)).recipient==this.userId){e.next=20;break}throw new p.DecryptionError("OLM_BAD_RECIPIENT","Message was intented for "+s.recipient);case 20:if(s.recipient_keys.ed25519==this.olmDevice.deviceEd25519Key){e.next=22;break}throw new p.DecryptionError("OLM_BAD_RECIPIENT_KEY","Message not intended for this device",{intended:s.recipient_keys.ed25519,our_key:this.olmDevice.deviceEd25519Key});case 22:if(s.sender==t.getSender()){e.next=24;break}throw new p.DecryptionError("OLM_FORWARDED_MESSAGE","Message forwarded from "+s.sender,{reported_sender:t.getSender()});case 24:if(s.room_id===t.getRoomId()){e.next=26;break}throw new p.DecryptionError("OLM_BAD_ROOM","Message intended for room "+s.room_id,{reported_room:t.getRoomId()});case 26:return u=s.keys||{},e.abrupt("return",{clearEvent:s,senderCurve25519Key:n,claimedEd25519Key:u.ed25519||null});case 28:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptMessage",value:function(){var e=n(c().mark((function e(t,r){var n,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.type){e.next=4;break}return e.abrupt("return",this.reallyDecryptMessage(t,r));case 4:return n=this.olmDevice.olmPrekeyPromise.then((function(){return i.reallyDecryptMessage(t,r)})),this.olmDevice.olmPrekeyPromise=n.catch((function(){})),e.next=8,n;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"reallyDecryptMessage",value:function(){var e=n(c().mark((function e(t,r){var n,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.olmDevice.getSessionIdsForDevice(t);case 2:n=e.sent,i={},o=0;case 5:if(!(o<n.length)){e.next=26;break}return a=n[o],e.prev=7,e.next=10,this.olmDevice.decryptMessage(t,a,r.type,r.body);case 10:return s=e.sent,f.logger.log("Decrypted Olm message from "+t+" with session "+a),e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(7),e.next=19,this.olmDevice.matchesSession(t,a,r.type,r.body);case 19:if(!e.sent){e.next=22;break}throw new Error("Error decrypting prekey message with existing session id "+a+": "+e.t0.message);case 22:i[a]=e.t0.message;case 23:o++,e.next=5;break;case 26:if(0===r.type){e.next=30;break}if(0!==n.length){e.next=29;break}throw new Error("No existing sessions");case 29:throw new Error("Error decrypting non-prekey message with existing sessions: "+JSON.stringify(i));case 30:return e.prev=30,e.next=33,this.olmDevice.createInboundSession(t,r.type,r.body);case 33:u=e.sent,e.next=40;break;case 36:throw e.prev=36,e.t1=e.catch(30),i["(new)"]=e.t1.message,new Error("Error decrypting prekey message: "+JSON.stringify(i));case 40:return f.logger.log("created new inbound Olm session ID "+u.session_id+" with "+t),e.abrupt("return",u.payload);case 42:case"end":return e.stop()}}),e,this,[[7,15],[30,36]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(p.DecryptionAlgorithm);(0,p.registerAlgorithm)(h.OLM_ALGORITHM,g,m)},function(e,t,r){"use strict";var n=r(12),i=r(31),o=r(20),a=r(9),s=r(1),u=r(2),c=r(16),l=r(14),f=r(15);function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var d=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingStatus=t.DeviceList=void 0;var p,v=d(r(4)),y=r(17),g=r(8),m=r(64),b=r(65),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28)),k=r(33),S=r(19);function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}t.TrackingStatus=p,function(e){e[e.NotTracked=0]="NotTracked",e[e.PendingDownload=1]="PendingDownload",e[e.DownloadInProgress=2]="DownloadInProgress",e[e.UpToDate=3]="UpToDate"}(p||(t.TrackingStatus=p={}));var x=function(e){l(r,e);var t=f(r);function r(e,n,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;return s(this,r),(o=t.call(this)).cryptoStore=n,o.keyDownloadChunkSize=a,(0,v.default)(c(o),"devices",{}),(0,v.default)(c(o),"crossSigningInfo",{}),(0,v.default)(c(o),"userByIdentityKey",{}),(0,v.default)(c(o),"deviceTrackingStatus",{}),(0,v.default)(c(o),"syncToken",null),(0,v.default)(c(o),"keyDownloadsInProgressByUser",{}),(0,v.default)(c(o),"dirty",!1),(0,v.default)(c(o),"savePromise",null),(0,v.default)(c(o),"resolveSavePromise",null),(0,v.default)(c(o),"savePromiseTime",null),(0,v.default)(c(o),"saveTimer",null),(0,v.default)(c(o),"hasFetched",null),(0,v.default)(c(o),"serialiser",void 0),o.serialiser=new _(e,i,c(o)),o}return u(r,[{key:"load",value:function(){var e=a(h().mark((function e(){var t,r,n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.doTxn("readonly",[k.IndexedDBCryptoStore.STORE_DEVICE_DATA],(function(e){i.cryptoStore.getEndToEndDeviceData(e,(function(e){i.hasFetched=Boolean(e&&e.devices),i.devices=e?e.devices:{},i.crossSigningInfo=e&&e.crossSigningInfo||{},i.deviceTrackingStatus=e?e.trackingStatus:{},i.syncToken=e?e.syncToken:null,i.userByIdentityKey={};for(var t=0,r=Object.keys(i.devices);t<r.length;t++)for(var n=r[t],o=i.devices[n],a=0,s=Object.keys(o);a<s.length;a++){var u=s[a],c=o[u].keys["curve25519:"+u];void 0!==c&&(i.userByIdentityKey[c]=n)}}))}));case 2:for(t=0,r=Object.keys(this.deviceTrackingStatus);t<r.length;t++)n=r[t],this.deviceTrackingStatus[n]==p.DownloadInProgress&&(this.deviceTrackingStatus[n]=p.PendingDownload);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){null!==this.saveTimer&&clearTimeout(this.saveTimer)}},{key:"saveIfDirty",value:function(){var e=a(h().mark((function e(){var t,r,n,i,o=this,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:500,this.dirty){e.next=3;break}return e.abrupt("return",Promise.resolve(!1));case 3:return r=Date.now()+t,this.savePromiseTime&&r<this.savePromiseTime&&(clearTimeout(this.saveTimer),this.saveTimer=null,this.savePromiseTime=null),null===(n=this.savePromise)&&(n=new Promise((function(e,t){o.resolveSavePromise=e})),this.savePromise=n),null===this.saveTimer&&(i=this.resolveSavePromise,this.savePromiseTime=r,this.saveTimer=setTimeout((function(){g.logger.log("Saving device tracking data",o.syncToken),o.savePromiseTime=null,o.saveTimer=null,o.savePromise=null,o.resolveSavePromise=null,o.cryptoStore.doTxn("readwrite",[k.IndexedDBCryptoStore.STORE_DEVICE_DATA],(function(e){o.cryptoStore.storeEndToEndDeviceData({devices:o.devices,crossSigningInfo:o.crossSigningInfo,trackingStatus:o.deviceTrackingStatus,syncToken:o.syncToken},e)})).then((function(){o.dirty=!1,i(!0)}),(function(e){g.logger.error("Failed to save device tracking data",o.syncToken),g.logger.error(e)}))}),t)),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSyncToken",value:function(){return this.syncToken}},{key:"setSyncToken",value:function(e){this.syncToken=e}},{key:"downloadKeys",value:function(e,t){var r=this,n=[],i=[];if(e.forEach((function(e){var o=r.deviceTrackingStatus[e];r.keyDownloadsInProgressByUser[e]?(g.logger.log("downloadKeys: already have a download in progress for "+"".concat(e,": awaiting its result")),i.push(r.keyDownloadsInProgressByUser[e])):(t||o!=p.UpToDate)&&n.push(e)})),0!=n.length){g.logger.log("downloadKeys: downloading for",n);var o=this.doKeyDownload(n);i.push(o)}return 0===i.length&&g.logger.log("downloadKeys: already have all necessary keys"),Promise.all(i).then((function(){return r.getDevicesFromStore(e)}))}},{key:"getDevicesFromStore",value:function(e){var t=this,r={};return e.map((function(e){r[e]={},(t.getStoredDevicesForUser(e)||[]).map((function(t){r[e][t.deviceId]=t}))})),r}},{key:"getKnownUserIds",value:function(){return Object.keys(this.devices)}},{key:"getStoredDevicesForUser",value:function(e){var t=this.devices[e];if(!t)return null;var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(m.DeviceInfo.fromStorage(t[n],n));return r}},{key:"getRawStoredDevicesForUser",value:function(e){return this.devices[e]}},{key:"getStoredCrossSigningForUser",value:function(e){return this.crossSigningInfo[e]?b.CrossSigningInfo.fromStorage(this.crossSigningInfo[e],e):null}},{key:"storeCrossSigningForUser",value:function(e,t){this.crossSigningInfo[e]=t,this.dirty=!0}},{key:"getStoredDevice",value:function(e,t){var r=this.devices[e];if(r&&r[t])return m.DeviceInfo.fromStorage(r[t],t)}},{key:"getUserByIdentityKey",value:function(e,t){return e!==w.OLM_ALGORITHM&&e!==w.MEGOLM_ALGORITHM?null:this.userByIdentityKey[t]}},{key:"getDeviceByIdentityKey",value:function(e,t){var r=this.getUserByIdentityKey(e,t);if(!r)return null;var n=this.devices[r];if(!n)return null;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];for(var a in o.keys){if(o.keys.hasOwnProperty(a))if(0===a.indexOf("curve25519:"))if(o.keys[a]==t)return m.DeviceInfo.fromStorage(o,i)}}return null}},{key:"storeDevicesForUser",value:function(e,t){this.setRawStoredDevicesForUser(e,t),this.dirty=!0}},{key:"startTrackingDeviceList",value:function(e){if("string"!==typeof e)throw new Error("userId must be a string; was "+e);this.deviceTrackingStatus[e]||(g.logger.log("Now tracking device list for "+e),this.deviceTrackingStatus[e]=p.PendingDownload,this.dirty=!0)}},{key:"stopTrackingDeviceList",value:function(e){this.deviceTrackingStatus[e]&&(g.logger.log("No longer tracking device list for "+e),this.deviceTrackingStatus[e]=p.NotTracked,this.dirty=!0)}},{key:"stopTrackingAllDeviceLists",value:function(){for(var e=0,t=Object.keys(this.deviceTrackingStatus);e<t.length;e++){var r=t[e];this.deviceTrackingStatus[r]=p.NotTracked}this.dirty=!0}},{key:"invalidateUserDeviceList",value:function(e){this.deviceTrackingStatus[e]&&(g.logger.log("Marking device list outdated for",e),this.deviceTrackingStatus[e]=p.PendingDownload,this.dirty=!0)}},{key:"refreshOutdatedDeviceLists",value:function(){this.saveIfDirty();for(var e=[],t=0,r=Object.keys(this.deviceTrackingStatus);t<r.length;t++){var n=r[t];this.deviceTrackingStatus[n]==p.PendingDownload&&e.push(n)}return this.doKeyDownload(e)}},{key:"setRawStoredDevicesForUser",value:function(e,t){if(void 0!==this.devices[e])for(var r=0,n=Object.entries(this.devices[e]);r<n.length;r++){var i=o(n[r],2),a=i[0],s=i[1].keys["curve25519:"+a];delete this.userByIdentityKey[s]}this.devices[e]=t;for(var u=0,c=Object.entries(t);u<c.length;u++){var l=o(c[u],2),f=l[0],h=l[1].keys["curve25519:"+f];this.userByIdentityKey[h]=e}}},{key:"setRawStoredCrossSigningForUser",value:function(e,t){this.crossSigningInfo[e]=t}},{key:"doKeyDownload",value:function(e){var t=this;if(0===e.length)return Promise.resolve();var r=this.serialiser.updateDevicesForUsers(e,this.syncToken).then((function(){n(!0)}),(function(t){throw g.logger.error("Error downloading keys for "+e+":",t),n(!1),t}));e.forEach((function(e){t.keyDownloadsInProgressByUser[e]=r,t.deviceTrackingStatus[e]==p.PendingDownload&&(t.deviceTrackingStatus[e]=p.DownloadInProgress)}));var n=function(n){t.emit("crypto.willUpdateDevices",e,!t.hasFetched),e.forEach((function(e){(t.dirty=!0,t.keyDownloadsInProgressByUser[e]===r)?(delete t.keyDownloadsInProgressByUser[e],t.deviceTrackingStatus[e]==p.DownloadInProgress&&(n?(t.deviceTrackingStatus[e]=p.UpToDate,g.logger.log("Device list for",e,"now up to date")):t.deviceTrackingStatus[e]=p.PendingDownload)):g.logger.log("Another update in the queue for",e,"- not marking up-to-date")})),t.saveIfDirty(),t.emit("crypto.devicesUpdated",e,!t.hasFetched),t.hasFetched=!0};return r}}]),r}(y.EventEmitter);t.DeviceList=x;var _=function(){function e(t,r,n){s(this,e),this.baseApis=t,this.olmDevice=r,this.deviceList=n,(0,v.default)(this,"downloadInProgress",!1),(0,v.default)(this,"keyDownloadsQueuedByUser",{}),(0,v.default)(this,"queuedQueryDeferred",null),(0,v.default)(this,"syncToken",null)}return u(e,[{key:"updateDevicesForUsers",value:function(e,t){var r=this;return e.forEach((function(e){r.keyDownloadsQueuedByUser[e]=!0})),this.queuedQueryDeferred||(this.queuedQueryDeferred=(0,S.defer)()),this.syncToken=t,this.downloadInProgress?(g.logger.log("Queued key download for",e),this.queuedQueryDeferred.promise):this.doQueuedQueries()}},{key:"doQueuedQueries",value:function(){var e=this;if(this.downloadInProgress)throw new Error("DeviceListUpdateSerialiser.doQueuedQueries called with request active");var t=Object.keys(this.keyDownloadsQueuedByUser);this.keyDownloadsQueuedByUser={};var r=this.queuedQueryDeferred;this.queuedQueryDeferred=null,g.logger.log("Starting key download for",t),this.downloadInProgress=!0;var o={};this.syncToken&&(o.token=this.syncToken);for(var s=[],u=function(r){var n=t.slice(r,r+e.deviceList.keyDownloadChunkSize);s.push((function(){return e.baseApis.downloadKeysForUsers(n,o)}))},c=0;c<t.length;c+=this.deviceList.keyDownloadChunkSize)u(c);return(0,S.chunkPromises)(s,3).then(function(){var r=a(h().mark((function r(o){var a,s,u,c,l,f,d;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Object.assign.apply(Object,[{}].concat(i(o.map((function(e){return e.device_keys||{}}))))),s=Object.assign.apply(Object,[{}].concat(i(o.map((function(e){return e.master_keys||{}}))))),u=Object.assign.apply(Object,[{}].concat(i(o.map((function(e){return e.self_signing_keys||{}}))))),c=Object.assign.apply(Object,[{}].concat(i(o.map((function(e){return e.user_signing_keys||{}}))))),l=n(t),r.prev=5,l.s();case 7:if((f=l.n()).done){r.next=21;break}return d=f.value,r.next=11,(0,S.sleep)(5);case 11:return r.prev=11,r.next=14,e.processQueryResponseForUser(d,a[d],{master:s[d],self_signing:u[d],user_signing:c[d]});case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(11),g.logger.error("Error processing keys for ".concat(d,":"),r.t0);case 19:r.next=7;break;case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(5),l.e(r.t1);case 26:return r.prev=26,l.f(),r.finish(26);case 29:case"end":return r.stop()}}),r,null,[[5,23,26,29],[11,16]])})));return function(e){return r.apply(this,arguments)}}()).then((function(){g.logger.log("Completed key download for "+t),e.downloadInProgress=!1,r.resolve(),e.queuedQueryDeferred&&e.doQueuedQueries()}),(function(n){g.logger.warn("Error downloading keys for "+t+":",n),e.downloadInProgress=!1,r.reject(n)})),r.promise}},{key:"processQueryResponseForUser",value:function(){var e=a(h().mark((function e(t,r,n){var i,o,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.logger.log("got device keys for "+t+":",r),g.logger.log("got cross-signing keys for "+t+":",n),i={},(o=this.deviceList.getRawStoredDevicesForUser(t))&&Object.keys(o).forEach((function(e){var t=m.DeviceInfo.fromStorage(o[e],e);i[e]=t})),e.next=7,T(this.olmDevice,t,i,r||{},this.baseApis.getUserId(),this.baseApis.deviceId);case 7:a={},Object.keys(i).forEach((function(e){a[e]=i[e].toStorage()})),this.deviceList.setRawStoredDevicesForUser(t,a),n&&(n.master||n.self_signing||n.user_signing)&&((s=this.deviceList.getStoredCrossSigningForUser(t)||new b.CrossSigningInfo(t)).setKeys(n),this.deviceList.setRawStoredCrossSigningForUser(t,s.toStorage()),this.deviceList.emit("userCrossSigningUpdated",t));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();function T(e,t,r,n,i,o){return O.apply(this,arguments)}function O(){return(O=a(h().mark((function e(t,r,n,i,o,a){var s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!1,e.t0=h().keys(n);case 2:if((e.t1=e.t0()).done){e.next=15;break}if(u=e.t1.value,n.hasOwnProperty(u)){e.next=6;break}return e.abrupt("continue",2);case 6:if(u in i){e.next=13;break}if(r!==o||u!==a){e.next=10;break}return g.logger.warn("Local device ".concat(u," missing from sync, skipping removal")),e.abrupt("continue",2);case 10:g.logger.log("Device "+r+":"+u+" has been removed"),delete n[u],s=!0;case 13:e.next=2;break;case 15:e.t2=h().keys(i);case 16:if((e.t3=e.t2()).done){e.next=33;break}if(c=e.t3.value,i.hasOwnProperty(c)){e.next=20;break}return e.abrupt("continue",16);case 20:if((l=i[c]).user_id===r){e.next=24;break}return g.logger.warn("Mismatched user_id "+l.user_id+" in keys from "+r+":"+c),e.abrupt("continue",16);case 24:if(l.device_id===c){e.next=27;break}return g.logger.warn("Mismatched device_id "+l.device_id+" in keys from "+r+":"+c),e.abrupt("continue",16);case 27:return e.next=29,M(t,n,l);case 29:if(!e.sent){e.next=31;break}s=!0;case 31:e.next=16;break;case 33:return e.abrupt("return",s);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r){return P.apply(this,arguments)}function P(){return(P=a(h().mark((function e(t,r,n){var i,o,a,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.keys){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=n.device_id,o=n.user_id,a="ed25519:"+i,s=n.keys[a]){e.next=9;break}return g.logger.warn("Device "+o+":"+i+" has no ed25519 key"),e.abrupt("return",!1);case 9:return u=n.unsigned||{},c=n.signatures||{},e.prev=11,e.next=14,w.verifySignature(t,n,o,i,s);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),g.logger.warn("Unable to verify signature on device "+o+":"+i+":"+e.t0),e.abrupt("return",!1);case 20:if(!(i in r)){e.next=27;break}if((l=r[i]).getFingerprint()==s){e.next=25;break}return g.logger.warn("Ed25519 key for device "+o+":"+i+" has changed"),e.abrupt("return",!1);case 25:e.next=28;break;case 27:r[i]=l=new m.DeviceInfo(i);case 28:return l.keys=n.keys||{},l.algorithms=n.algorithms||[],l.unsigned=u,l.signatures=c,e.abrupt("return",!0);case 33:case"end":return e.stop()}}),e,null,[[11,16]])})))).apply(this,arguments)}},function(e,t,r){"use strict";var n=r(16),i=r(14),o=r(15),a=r(12),s=r(20),u=r(9),c=r(1),l=r(2);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionSetupOperation=t.EncryptionSetupBuilder=void 0;var d=h(r(4)),p=r(8),v=r(25),y=r(17),g=r(65),m=r(33),b=r(82),w=function(){function e(t,r){c(this,e),(0,d.default)(this,"accountDataClientAdapter",void 0),(0,d.default)(this,"crossSigningCallbacks",void 0),(0,d.default)(this,"ssssCryptoCallbacks",void 0),(0,d.default)(this,"crossSigningKeys",null),(0,d.default)(this,"keySignatures",null),(0,d.default)(this,"keyBackupInfo",null),(0,d.default)(this,"sessionBackupPrivateKey",void 0),this.accountDataClientAdapter=new S(t),this.crossSigningCallbacks=new E,this.ssssCryptoCallbacks=new x(r)}return l(e,[{key:"addCrossSigningKeys",value:function(e,t){this.crossSigningKeys={authUpload:e,keys:t}}},{key:"addSessionBackup",value:function(e){this.keyBackupInfo=e}},{key:"addSessionBackupPrivateKeyToCache",value:function(e){this.sessionBackupPrivateKey=e}},{key:"addKeySignature",value:function(e,t,r){this.keySignatures||(this.keySignatures={});var n=this.keySignatures[e]||{};this.keySignatures[e]=n,n[t]=r}},{key:"setAccountData",value:function(){var e=u(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountDataClientAdapter.setAccountData(t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"buildOperation",value:function(){var e=this.accountDataClientAdapter.values;return new k(e,this.crossSigningKeys,this.keyBackupInfo,this.keySignatures)}},{key:"persist",value:function(){var e=u(f().mark((function e(t){var r,n,i,o,a,s=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.crossSigningKeys){e.next=14;break}r=(0,g.createCryptoStoreCacheCallbacks)(t.cryptoStore,t.olmDevice),n=0,i=["master","self_signing","user_signing"];case 3:if(!(n<i.length)){e.next=12;break}return o=i[n],p.logger.log("Cache ".concat(o," cross-signing private key locally")),a=this.crossSigningCallbacks.privateKeys.get(o),e.next=9,r.storeCrossSigningKeyCache(o,a);case 9:n++,e.next=3;break;case 12:return e.next=14,t.cryptoStore.doTxn("readwrite",[m.IndexedDBCryptoStore.STORE_ACCOUNT],(function(e){t.cryptoStore.storeCrossSigningKeys(e,s.crossSigningKeys.keys)}));case 14:if(!this.sessionBackupPrivateKey){e.next=17;break}return e.next=17,t.storeSessionBackupPrivateKey(this.sessionBackupPrivateKey);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.EncryptionSetupBuilder=w;var k=function(){function e(t,r,n,i){c(this,e),this.accountData=t,this.crossSigningKeys=r,this.keyBackupInfo=n,this.keySignatures=i}return l(e,[{key:"apply",value:function(){var e=u(f().mark((function e(t){var r,n,i,o,u,c,l,h,d,p,v,y;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.baseApis,!this.crossSigningKeys){e.next=7;break}for(n={},i=0,o=Object.entries(this.crossSigningKeys.keys);i<o.length;i++)u=s(o[i],2),c=u[0],l=u[1],n[c+"_key"]=l;return e.next=6,this.crossSigningKeys.authUpload((function(e){return r.uploadDeviceSigningKeys(e,n)}));case 6:t.crossSigningInfo.setKeys(this.crossSigningKeys.keys);case 7:if(!this.accountData){e.next=25;break}h=a(this.accountData),e.prev=9,h.s();case 11:if((d=h.n()).done){e.next=17;break}return p=s(d.value,2),v=p[0],y=p[1],e.next=15,r.setAccountData(v,y);case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),h.e(e.t0);case 22:return e.prev=22,h.f(),e.finish(22);case 25:if(!this.keySignatures){e.next=28;break}return e.next=28,r.uploadKeySignatures(this.keySignatures);case 28:if(!this.keyBackupInfo){e.next=36;break}if(!this.keyBackupInfo.version){e.next=34;break}return e.next=32,r.http.authedRequest(void 0,"PUT","/room_keys/version/"+this.keyBackupInfo.version,void 0,{algorithm:this.keyBackupInfo.algorithm,auth_data:this.keyBackupInfo.auth_data},{prefix:b.PREFIX_UNSTABLE});case 32:e.next=36;break;case 34:return e.next=36,r.http.authedRequest(void 0,"POST","/room_keys/version",void 0,this.keyBackupInfo,{prefix:b.PREFIX_UNSTABLE});case 36:case"end":return e.stop()}}),e,this,[[9,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.EncryptionSetupOperation=k;var S=function(e){i(r,e);var t=o(r);function r(e){var i;return c(this,r),(i=t.call(this)).existingValues=e,(0,d.default)(n(i),"values",new Map),i}return l(r,[{key:"getAccountDataFromServer",value:function(e){return Promise.resolve(this.getAccountData(e))}},{key:"getAccountData",value:function(e){var t=this.values.get(e);if(t)return t;var r=this.existingValues[e];return r?r.getContent():null}},{key:"setAccountData",value:function(e,t){var r=this,n=this.values.get(e);return this.values.set(e,t),Promise.resolve().then((function(){var i=new v.SendingNetworkEvent({type:e,content:t});return r.emit("accountData",i,n),{}}))}}]),r}(y.EventEmitter),E=function(){function e(){c(this,e),(0,d.default)(this,"privateKeys",new Map)}return l(e,[{key:"getCrossSigningKeyCache",value:function(e,t){return this.getCrossSigningKey(e,t)}},{key:"storeCrossSigningKeyCache",value:function(e,t){return this.privateKeys.set(e,t),Promise.resolve()}},{key:"getCrossSigningKey",value:function(e,t){return Promise.resolve(this.privateKeys.get(e))}},{key:"saveCrossSigningKeys",value:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=s(r[t],2),i=n[0],o=n[1];this.privateKeys.set(i,o)}}}]),e}(),x=function(){function e(t){c(this,e),this.delegateCryptoCallbacks=t,(0,d.default)(this,"privateKeys",new Map)}return l(e,[{key:"getSecretStorageKey",value:function(){var e=u(f().mark((function e(t,r){var n,i,o,a,u,c,l,h,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.keys,o=0,a=Object.keys(n);case 2:if(!(o<a.length)){e.next=10;break}if(u=a[o],!(c=this.privateKeys.get(u))){e.next=7;break}return e.abrupt("return",[u,c]);case 7:o++,e.next=2;break;case 10:if(null===this||void 0===this||null===(i=this.delegateCryptoCallbacks)||void 0===i||!i.getSecretStorageKey){e.next=16;break}return e.next=13,this.delegateCryptoCallbacks.getSecretStorageKey({keys:n},r);case 13:return(l=e.sent)&&(h=s(l,2),d=h[0],p=h[1],this.privateKeys.set(d,p)),e.abrupt("return",l);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addPrivateKey",value:function(e,t,r){var n,i;this.privateKeys.set(e,r),null===(n=this.delegateCryptoCallbacks)||void 0===n||null===(i=n.cacheSecretStorageKey)||void 0===i||i.call(n,e,t,r)}}]),e}()},function(e,t,r){"use strict";var n=r(20),i=r(23),o=r(12),a=r(9),s=r(1),u=r(2);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorage=t.SECRET_STORAGE_ALGORITHM_V1_AES=void 0;var f=l(r(4)),h=r(8),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28)),p=r(50),v=r(51);function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}t.SECRET_STORAGE_ALGORITHM_V1_AES="m.secret_storage.v1.aes-hmac-sha2";var g=function(){function e(t,r,n){s(this,e),this.accountDataAdapter=t,this.cryptoCallbacks=r,this.baseApis=n,(0,f.default)(this,"requests",new Map)}return u(e,[{key:"getDefaultKeyId",value:function(){var e=a(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.default_key");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",t.key);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDefaultKeyId",value:function(e){var t=this;return new Promise((function(r,n){var i=function n(i){"m.secret_storage.default_key"===i.getType()&&i.getContent().key===e&&(t.accountDataAdapter.removeListener("accountData",n),r())};t.accountDataAdapter.on("accountData",i),t.accountDataAdapter.setAccountData("m.secret_storage.default_key",{key:e}).catch((function(e){t.accountDataAdapter.removeListener("accountData",i),n(e)}))}))}},{key:"addKey",value:function(){var e=a(c().mark((function e(t,r,n){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={algorithm:t},r||(r={}),r.name&&(i.name=r.name),"m.secret_storage.v1.aes-hmac-sha2"!==t){e.next=15;break}if(r.passphrase&&(i.passphrase=r.passphrase),!r.key){e.next=13;break}return e.next=8,(0,v.calculateKeyCheck)(r.key);case 8:o=e.sent,a=o.iv,s=o.mac,i.iv=a,i.mac=s;case 13:e.next=16;break;case 15:throw new Error("Unknown key algorithm ".concat(t));case 16:if(n){e.next=21;break}case 17:n=(0,p.randomString)(32);case 18:return e.next=20,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key.".concat(n));case 20:if(e.sent){e.next=17;break}case 21:return e.next=23,this.accountDataAdapter.setAccountData("m.secret_storage.key.".concat(n),i);case 23:return e.abrupt("return",{keyId:n,keyInfo:i});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getKey",value:function(){var e=a(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.getDefaultKeyId();case 3:t=e.sent;case 4:if(t){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+t);case 8:return r=e.sent,e.abrupt("return",r?[t,r]:null);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasKey",value:function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Boolean,e.next=3,this.getKey(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkKey",value:function(){var e=a(c().mark((function e(t,r){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("m.secret_storage.v1.aes-hmac-sha2"!==r.algorithm){e.next=12;break}if(!r.mac){e.next=9;break}return e.next=4,(0,v.calculateKeyCheck)(t,r.iv);case 4:return n=e.sent,i=n.mac,e.abrupt("return",r.mac.replace(/=+$/g,"")===i.replace(/=+$/g,""));case 9:return e.abrupt("return",!0);case 10:e.next=13;break;case 12:throw new Error("Unknown algorithm");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"store",value:function(){var e=a(c().mark((function e(t,r,a){var s,u,l,f,d,p,v,y,g,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={},a){e.next=8;break}return e.next=4,this.getDefaultKeyId();case 4:if(u=e.sent){e.next=7;break}throw new Error("No keys specified and no default key present");case 7:a=[u];case 8:if(0!==a.length){e.next=10;break}throw new Error("Zero keys given to encrypt with!");case 10:l=o(a),e.prev=11,l.s();case 13:if((f=l.n()).done){e.next=35;break}return d=f.value,e.next=17,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+d);case 17:if(p=e.sent){e.next=20;break}throw new Error("Unknown key: "+d);case 20:if("m.secret_storage.v1.aes-hmac-sha2"!==p.algorithm){e.next=32;break}return v=i({},d,p),e.next=24,this.getSecretStorageKey(v,t);case 24:return y=e.sent,g=n(y,2),m=g[1],e.next=29,m.encrypt(r);case 29:s[d]=e.sent,e.next=33;break;case 32:h.logger.warn("unknown algorithm for secret storage key "+d+": "+p.algorithm);case 33:e.next=13;break;case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(11),l.e(e.t0);case 40:return e.prev=40,l.f(),e.finish(40);case 43:return e.next=45,this.accountDataAdapter.setAccountData(t,{encrypted:s});case 45:case"end":return e.stop()}}),e,this,[[11,37,40,43]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=a(c().mark((function e(t){var r,i,o,a,s,u,l,f,h,p,v,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountDataAdapter.getAccountDataFromServer(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(r.encrypted){e.next=7;break}throw new Error("Content is not encrypted!");case 7:i={},o=0,a=Object.keys(r.encrypted);case 9:if(!(o<a.length)){e.next=19;break}return s=a[o],e.next=13,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+s);case 13:u=e.sent,l=r.encrypted[s],"m.secret_storage.v1.aes-hmac-sha2"===u.algorithm&&l.iv&&l.ciphertext&&l.mac&&(i[s]=u);case 16:o++,e.next=9;break;case 19:if(0!==Object.keys(i).length){e.next=21;break}throw new Error("Could not decrypt ".concat(t," because none of ")+"the keys it is encrypted with are for a supported algorithm");case 21:return e.prev=21,e.next=24,this.getSecretStorageKey(i,t);case 24:if(p=e.sent,v=n(p,2),f=v[0],h=v[1],!(y=r.encrypted[f]).passthrough){e.next=31;break}return e.abrupt("return",(0,d.encodeBase64)(h.get_private_key()));case 31:return e.next=33,h.decrypt(y);case 33:return e.abrupt("return",e.sent);case 34:return e.prev=34,h&&h.free&&h.free(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[21,,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isStored",value:function(){var e=a(c().mark((function e(t,r){var n,i,o,a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accountDataAdapter.getAccountDataFromServer(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(n.encrypted){e.next=7;break}return e.abrupt("return",null);case 7:void 0===r&&(r=!0),i={},o=0,a=Object.keys(n.encrypted);case 10:if(!(o<a.length)){e.next=22;break}return s=a[o],e.next=14,this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+s);case 14:if(u=e.sent){e.next=17;break}return e.abrupt("continue",19);case 17:l=n.encrypted[s],"m.secret_storage.v1.aes-hmac-sha2"===u.algorithm&&l.iv&&l.ciphertext&&l.mac&&(i[s]=u);case 19:o++,e.next=10;break;case 22:return e.abrupt("return",Object.keys(i).length?i:null);case 23:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"request",value:function(e,t){var r,n,a=this,s=this.baseApis.makeTxnId(),u=new Promise((function(e,t){r=e,n=t}));this.requests.set(s,{name:e,devices:t,resolve:r,reject:n});var c,l={name:e,action:"request",requesting_device_id:this.baseApis.deviceId,request_id:s},f={},d=o(t);try{for(d.s();!(c=d.n()).done;){f[c.value]=l}}catch(p){d.e(p)}finally{d.f()}return h.logger.info("Request secret ".concat(e," from ").concat(t,", id ").concat(s)),this.baseApis.sendToDevice("m.secret.request",i({},this.baseApis.getUserId(),f)),{requestId:s,promise:u,cancel:function(e){var r,u={action:"request_cancellation",requesting_device_id:a.baseApis.deviceId,request_id:s},c={},l=o(t);try{for(l.s();!(r=l.n()).done;){c[r.value]=u}}catch(p){l.e(p)}finally{l.f()}a.baseApis.sendToDevice("m.secret.request",i({},a.baseApis.getUserId(),c)),n(new Error(e||"Cancelled"))}}}},{key:"onRequestReceived",value:function(){var e=a(c().mark((function e(t){var r,n,o,a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getSender(),n=t.getContent(),r===this.baseApis.getUserId()&&(n.name&&n.action&&n.requesting_device_id&&n.request_id)){e.next=4;break}return e.abrupt("return");case 4:if(o=n.requesting_device_id,"request_cancellation"!==n.action){e.next=8;break}e.next=31;break;case 8:if("request"!==n.action){e.next=31;break}if(o!==this.baseApis.deviceId){e.next=11;break}return e.abrupt("return");case 11:if(h.logger.info("received request for secret ("+r+", "+o+", "+n.request_id+")"),this.cryptoCallbacks.onSecretRequested){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,this.cryptoCallbacks.onSecretRequested(r,o,n.request_id,n.name,this.baseApis.checkDeviceTrust(r,o));case 16:if(!(a=e.sent)){e.next=30;break}return h.logger.info("Preparing ".concat(n.name," secret for ").concat(o)),s={type:"m.secret.send",content:{request_id:n.request_id,secret:a}},u={algorithm:d.OLM_ALGORITHM,sender_key:this.baseApis.crypto.olmDevice.deviceCurve25519Key,ciphertext:{}},e.next=23,d.ensureOlmSessionsForDevices(this.baseApis.crypto.olmDevice,this.baseApis,i({},r,[this.baseApis.getStoredDevice(r,o)]));case 23:return e.next=25,d.encryptMessageForDevice(u.ciphertext,this.baseApis.getUserId(),this.baseApis.deviceId,this.baseApis.crypto.olmDevice,r,this.baseApis.getStoredDevice(r,o),s);case 25:l=i({},r,i({},o,u)),h.logger.info("Sending ".concat(n.name," secret for ").concat(o)),this.baseApis.sendToDevice("m.room.encrypted",l),e.next=31;break;case 30:h.logger.info("Request denied for ".concat(n.name," secret for ").concat(o));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSecretReceived",value:function(e){if(e.getSender()===this.baseApis.getUserId()){var t=e.getContent();h.logger.log("got secret share for request",t.request_id);var r=this.requests.get(t.request_id);if(r){var n=this.baseApis.crypto.deviceList.getDeviceByIdentityKey(d.OLM_ALGORITHM,e.getSenderKey());if(!n)return void h.logger.log("secret share from unknown device with key",e.getSenderKey());if(!r.devices.includes(n.deviceId))return void h.logger.log("unsolicited secret share from device",n.deviceId);h.logger.log("Successfully received secret ".concat(r.name," ")+"from ".concat(n.deviceId)),r.resolve(t.secret)}}}},{key:"getSecretStorageKey",value:function(){var e=a(c().mark((function e(t,r){var i,o,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cryptoCallbacks.getSecretStorageKey){e.next=2;break}throw new Error("No getSecretStorageKey callback supplied");case 2:return e.next=4,this.cryptoCallbacks.getSecretStorageKey({keys:t},r);case 4:if(i=e.sent){e.next=7;break}throw new Error("getSecretStorageKey callback returned falsey");case 7:if(!(i.length<2)){e.next=9;break}throw new Error("getSecretStorageKey callback returned invalid data");case 9:if(o=n(i,2),s=o[0],u=o[1],t[s]){e.next=12;break}throw new Error("App returned unknown key from getSecretStorageKey!");case 12:if("m.secret_storage.v1.aes-hmac-sha2"!==t[s].algorithm){e.next=17;break}return l={encrypt:function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.encryptAES)(t,u,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),decrypt:function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.decryptAES)(t,u,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e.abrupt("return",[s,l]);case 17:throw new Error("Unknown key type: "+t[s].algorithm);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();t.SecretStorage=g},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomKeyRequestState=t.OutgoingRoomKeyRequestManager=void 0;var c,l=u(r(4)),f=r(8),h=r(24);t.RoomKeyRequestState=c,function(e){e[e.Unsent=0]="Unsent",e[e.Sent=1]="Sent",e[e.CancellationPending=2]="CancellationPending",e[e.CancellationPendingAndWillResend=3]="CancellationPendingAndWillResend"}(c||(t.RoomKeyRequestState=c={}));var d=function(){function e(t,r,n){o(this,e),this.baseApis=t,this.deviceId=r,this.cryptoStore=n,(0,l.default)(this,"sendOutgoingRoomKeyRequestsTimer",null),(0,l.default)(this,"sendOutgoingRoomKeyRequestsRunning",!1),(0,l.default)(this,"clientRunning",!1)}return a(e,[{key:"start",value:function(){this.clientRunning=!0}},{key:"stop",value:function(){f.logger.log("stopping OutgoingRoomKeyRequestManager"),this.clientRunning=!1}},{key:"sendQueuedRequests",value:function(){this.startTimer()}},{key:"queueRoomKeyRequest",value:function(){var e=i(s().mark((function e(t,r){var n,i,o,a,u,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],e.next=3,this.cryptoStore.getOutgoingRoomKeyRequest(t);case 3:if(i=e.sent){e.next=9;break}return e.next=7,this.cryptoStore.getOrAddOutgoingRoomKeyRequest({requestBody:t,recipients:r,requestId:this.baseApis.makeTxnId(),state:c.Unsent});case 7:e.next=36;break;case 9:e.t0=i.state,e.next=e.t0===c.CancellationPendingAndWillResend||e.t0===c.Unsent?12:e.t0===c.CancellationPending?13:e.t0===c.Sent?17:35;break;case 12:return e.abrupt("return");case 13:return o=n?c.CancellationPendingAndWillResend:c.Sent,e.next=16,this.cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,c.CancellationPending,{state:o,cancellationTxnId:this.baseApis.makeTxnId()});case 16:return e.abrupt("break",36);case 17:if(!n){e.next=34;break}return a=c.CancellationPendingAndWillResend,e.next=21,this.cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,c.Sent,{state:a,cancellationTxnId:this.baseApis.makeTxnId(),requestTxnId:this.baseApis.makeTxnId()});case 21:if(u=e.sent){e.next=26;break}return e.next=25,this.queueRoomKeyRequest(t,r,n);case 25:return e.abrupt("return",e.sent);case 26:return e.prev=26,e.next=29,this.sendOutgoingRoomKeyRequestCancellation(u,!0);case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(26),f.logger.error("Error sending room key request cancellation; will retry later.",e.t1);case 34:return e.abrupt("break",36);case 35:throw new Error("unhandled state: "+i.state);case 36:case"end":return e.stop()}}),e,this,[[26,31]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelRoomKeyRequest",value:function(e){var t=this;return this.cryptoStore.getOutgoingRoomKeyRequest(e).then((function(r){if(r)switch(r.state){case c.CancellationPending:case c.CancellationPendingAndWillResend:return;case c.Unsent:return f.logger.log("deleting unnecessary room key request for "+p(e)),t.cryptoStore.deleteOutgoingRoomKeyRequest(r.requestId,c.Unsent);case c.Sent:return t.cryptoStore.updateOutgoingRoomKeyRequest(r.requestId,c.Sent,{state:c.CancellationPending,cancellationTxnId:t.baseApis.makeTxnId()}).then((function(r){r?t.sendOutgoingRoomKeyRequestCancellation(r).catch((function(e){f.logger.error("Error sending room key request cancellation; will retry later.",e),t.startTimer()})):f.logger.log("Tried to cancel room key request for "+p(e)+" but it was already cancelled in another tab")}));default:throw new Error("unhandled state: "+r.state)}}))}},{key:"getOutgoingSentRoomKeyRequest",value:function(e,t){return this.cryptoStore.getOutgoingRoomKeyRequestsByTarget(e,t,[c.Sent])}},{key:"cancelAndResendAllOutgoingRequests",value:function(){var e=i(s().mark((function e(){var t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoStore.getAllOutgoingRoomKeyRequestsByState(c.Sent);case 2:return t=e.sent,e.abrupt("return",Promise.all(t.map((function(e){var t=e.requestBody,n=e.recipients;return r.queueRoomKeyRequest(t,n,!0)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startTimer",value:function(){var e=this;if(!this.sendOutgoingRoomKeyRequestsTimer){this.sendOutgoingRoomKeyRequestsTimer=setTimeout((function(){if(e.sendOutgoingRoomKeyRequestsRunning)throw new Error("RoomKeyRequestSend already in progress!");e.sendOutgoingRoomKeyRequestsRunning=!0,e.sendOutgoingRoomKeyRequests().finally((function(){e.sendOutgoingRoomKeyRequestsRunning=!1})).catch((function(e){f.logger.warn("error in OutgoingRoomKeyRequestManager: ".concat(e))}))}),500)}}},{key:"sendOutgoingRoomKeyRequests",value:function(){var e=this;return this.clientRunning?this.cryptoStore.getOutgoingRoomKeyRequestByState([c.CancellationPending,c.CancellationPendingAndWillResend,c.Unsent]).then((function(t){if(t){var r;switch(t.state){case c.Unsent:r=e.sendOutgoingRoomKeyRequest(t);break;case c.CancellationPending:r=e.sendOutgoingRoomKeyRequestCancellation(t);break;case c.CancellationPendingAndWillResend:r=e.sendOutgoingRoomKeyRequestCancellation(t,!0)}return r.then((function(){return e.sendOutgoingRoomKeyRequests()})).catch((function(t){f.logger.error("Error sending room key request; will retry later.",t),e.sendOutgoingRoomKeyRequestsTimer=null}))}e.sendOutgoingRoomKeyRequestsTimer=null})):(this.sendOutgoingRoomKeyRequestsTimer=null,Promise.resolve())}},{key:"sendOutgoingRoomKeyRequest",value:function(e){var t=this;f.logger.log("Requesting keys for ".concat(p(e.requestBody))+" from ".concat(v(e.recipients))+"(id ".concat(e.requestId,")"));var r={action:"request",requesting_device_id:this.deviceId,request_id:e.requestId,body:e.requestBody};return this.sendMessageToDevices(r,e.recipients,e.requestTxnId||e.requestId).then((function(){return t.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,c.Unsent,{state:c.Sent})}))}},{key:"sendOutgoingRoomKeyRequestCancellation",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.logger.log("Sending cancellation for key request for "+"".concat(p(e.requestBody)," to ")+"".concat(v(e.recipients)," ")+"(cancellation id ".concat(e.cancellationTxnId,")"));var n={action:"request_cancellation",requesting_device_id:this.deviceId,request_id:e.requestId};return this.sendMessageToDevices(n,e.recipients,e.cancellationTxnId).then((function(){return r?t.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,c.CancellationPendingAndWillResend,{state:c.Unsent}):t.cryptoStore.deleteOutgoingRoomKeyRequest(e.requestId,c.CancellationPending)}))}},{key:"sendMessageToDevices",value:function(e,t,r){var i,o={},a=n(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;o[s.userId]||(o[s.userId]={}),o[s.userId][s.deviceId]=e}}catch(u){a.e(u)}finally{a.f()}return this.baseApis.sendToDevice(h.EventType.RoomKeyRequest,o,r)}}]),e}();function p(e){return e.room_id+" / "+e.session_id}function v(e){return"["+e.map((function(e){return"".concat(e.userId,":").concat(e.deviceId)})).join(",")+"]"}t.OutgoingRoomKeyRequestManager=d},function(e,t,r){"use strict";(function(e){var n=r(20),i=r(9),o=r(1),a=r(2),s=r(16),u=r(14),c=r(15),l=r(12);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.SAS=void 0;var d,p=h(r(4)),v=r(84),y=h(r(63)),g=r(52),m=r(8),b="m.key.verification.start",w=["m.key.verification.accept","m.key.verification.key","m.key.verification.mac"],k=(0,g.errorFactory)("m.mismatched_sas","Mismatched short authentication string"),S=(0,g.errorFactory)("m.mismatched_commitment","Mismatched commitment");var E=[["\ud83d\udc36","dog"],["\ud83d\udc31","cat"],["\ud83e\udd81","lion"],["\ud83d\udc0e","horse"],["\ud83e\udd84","unicorn"],["\ud83d\udc37","pig"],["\ud83d\udc18","elephant"],["\ud83d\udc30","rabbit"],["\ud83d\udc3c","panda"],["\ud83d\udc13","rooster"],["\ud83d\udc27","penguin"],["\ud83d\udc22","turtle"],["\ud83d\udc1f","fish"],["\ud83d\udc19","octopus"],["\ud83e\udd8b","butterfly"],["\ud83c\udf37","flower"],["\ud83c\udf33","tree"],["\ud83c\udf35","cactus"],["\ud83c\udf44","mushroom"],["\ud83c\udf0f","globe"],["\ud83c\udf19","moon"],["\u2601\ufe0f","cloud"],["\ud83d\udd25","fire"],["\ud83c\udf4c","banana"],["\ud83c\udf4e","apple"],["\ud83c\udf53","strawberry"],["\ud83c\udf3d","corn"],["\ud83c\udf55","pizza"],["\ud83c\udf82","cake"],["\u2764\ufe0f","heart"],["\ud83d\ude42","smiley"],["\ud83e\udd16","robot"],["\ud83c\udfa9","hat"],["\ud83d\udc53","glasses"],["\ud83d\udd27","spanner"],["\ud83c\udf85","santa"],["\ud83d\udc4d","thumbs up"],["\u2602\ufe0f","umbrella"],["\u231b","hourglass"],["\u23f0","clock"],["\ud83c\udf81","gift"],["\ud83d\udca1","light bulb"],["\ud83d\udcd5","book"],["\u270f\ufe0f","pencil"],["\ud83d\udcce","paperclip"],["\u2702\ufe0f","scissors"],["\ud83d\udd12","lock"],["\ud83d\udd11","key"],["\ud83d\udd28","hammer"],["\u260e\ufe0f","telephone"],["\ud83c\udfc1","flag"],["\ud83d\ude82","train"],["\ud83d\udeb2","bicycle"],["\u2708\ufe0f","aeroplane"],["\ud83d\ude80","rocket"],["\ud83c\udfc6","trophy"],["\u26bd","ball"],["\ud83c\udfb8","guitar"],["\ud83c\udfba","trumpet"],["\ud83d\udd14","bell"],["\u2693\ufe0f","anchor"],["\ud83c\udfa7","headphones"],["\ud83d\udcc1","folder"],["\ud83d\udccc","pin"]];var x={decimal:function(e){return[1e3+(e[0]<<5|e[1]>>3),1e3+((7&e[1])<<10|e[2]<<2|e[3]>>6),1e3+((63&e[3])<<7|e[4]>>1)]},emoji:function(e){return[e[0]>>2,(3&e[0])<<4|e[1]>>4,(15&e[1])<<2|e[2]>>6,63&e[2],e[3]>>2,(3&e[3])<<4|e[4]>>4,(15&e[4])<<2|e[5]>>6].map((function(e){return E[e]}))}};function _(e,t){var r,n={},i=l(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;o in x&&(n[o]=x[o](e))}}catch(a){i.e(a)}finally{i.f()}return n}var T={"hkdf-hmac-sha256":"calculate_mac","hmac-sha256":"calculate_mac_long_kdf"};function O(e,t){return function(){for(var r=e[T[t]],n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=r.apply(e,i);return m.logger.log("SAS calculateMAC:",t,i,a),a}}var M={"curve25519-hkdf-sha256":function(e,t,r){var n="".concat(e.baseApis.getUserId(),"|").concat(e.baseApis.deviceId,"|")+"".concat(e.ourSASPubKey,"|"),i="".concat(e.userId,"|").concat(e.deviceId,"|").concat(e.theirSASPubKey,"|"),o="SENDINGNETWORK_KEY_VERIFICATION_SAS|"+(e.initiatedByMe?n+i:i+n)+e.channel.transactionId;return t.generate_bytes(o,r)},curve25519:function(e,t,r){var n="".concat(e.baseApis.getUserId()).concat(e.baseApis.deviceId),i="".concat(e.userId).concat(e.deviceId),o="SENDINGNETWORK_KEY_VERIFICATION_SAS"+(e.initiatedByMe?n+i:i+n)+e.channel.transactionId;return t.generate_bytes(o,r)}},P=["curve25519-hkdf-sha256","curve25519"],R=["sha256"],I=["hkdf-hmac-sha256","hmac-sha256"],L=Object.keys(x),C=new Set(P),A=new Set(R),j=new Set(I),D=new Set(L);function N(e,t){return e instanceof Array?e.filter((function(e){return t.has(e)})):[]}var U=function(t){u(l,t);var r=c(l);function l(){var t;o(this,l);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return t=r.call.apply(r,[this].concat(a)),(0,p.default)(s(t),"waitingForAccept",void 0),(0,p.default)(s(t),"ourSASPubKey",void 0),(0,p.default)(s(t),"theirSASPubKey",void 0),(0,p.default)(s(t),"sasEvent",void 0),(0,p.default)(s(t),"doVerification",i(f().mark((function r(){var n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.Olm.init();case 2:return d=d||new e.Olm.Utility,r.next=5,t.baseApis.downloadKeys([t.userId]);case 5:n=!1;case 6:if(r.prev=6,!t.initiatedByMe){r.next=13;break}return r.next=10,t.doSendVerification();case 10:return r.abrupt("return",r.sent);case 13:return r.next=15,t.doRespondVerification();case 15:return r.abrupt("return",r.sent);case 16:r.next=26;break;case 18:if(r.prev=18,r.t0=r.catch(6),!(r.t0 instanceof v.SwitchStartEventError)){r.next=25;break}t.startEvent=r.t0.startEvent,n=!0,r.next=26;break;case 25:throw r.t0;case 26:if(n){r.next=6;break}case 27:case"end":return r.stop()}}),r,null,[[6,18]])})))),t}return a(l,[{key:"events",get:function(){return w}},{key:"canSwitchStartEvent",value:function(e){if(e.getType()!==b)return!1;var t=e.getContent();return t&&t.method===l.NAME&&this.waitingForAccept}},{key:"sendStart",value:function(){var e=i(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.channel.completeContent(b,{method:l.NAME,from_device:this.baseApis.deviceId,key_agreement_protocols:P,hashes:R,message_authentication_codes:I,short_authentication_string:L}),e.next=3,this.channel.sendCompleted(b,t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doSendVerification",value:function(){var t=i(f().mark((function t(){var r,o,a,s,u,c,l,h,p,m,b,w,E,x=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.waitingForAccept=!0,!this.startEvent){t.next=5;break}r=this.channel.completedContentFromEvent(this.startEvent),t.next=8;break;case 5:return t.next=7,this.sendStart();case 7:r=t.sent;case 8:if(this.initiatedByMe){t.next=10;break}throw new v.SwitchStartEventError(this.startEvent);case 10:return t.prev=10,t.next=13,this.waitForEvent("m.key.verification.accept");case 13:o=t.sent;case 14:return t.prev=14,this.waitingForAccept=!1,t.finish(14);case 17:if(a=o.getContent(),s=N(a.short_authentication_string,D),C.has(a.key_agreement_protocol)&&A.has(a.hash)&&j.has(a.message_authentication_code)&&s.length){t.next=21;break}throw(0,g.newUnknownMethodError)();case 21:if("string"===typeof a.commitment){t.next=23;break}throw(0,g.newInvalidMessageError)();case 23:return u=a.key_agreement_protocol,c=a.message_authentication_code,l=a.commitment,h=new e.Olm.SAS,t.prev=27,this.ourSASPubKey=h.get_pubkey(),t.next=31,this.send("m.key.verification.key",{key:this.ourSASPubKey});case 31:return t.next=33,this.waitForEvent("m.key.verification.key");case 33:if(o=t.sent,a=o.getContent(),p=a.key+y.default.stringify(r),d.sha256(p)===l){t.next=38;break}throw S();case 38:return this.theirSASPubKey=a.key,h.set_their_key(a.key),m=M[u](this,h,6),b=new Promise((function(e,t){x.sasEvent={sas:_(m,s),confirm:function(){var r=i(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x.sendMAC(h,c);case 3:e(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),t(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(){return r.apply(this,arguments)}}(),cancel:function(){return t((0,g.newUserCancelledError)())},mismatch:function(){return t(k())}},x.emit("show_sas",x.sasEvent)})),t.next=44,Promise.all([this.waitForEvent("m.key.verification.mac").then((function(e){return x.expectedEvent="m.key.verification.done",e})),b]);case 44:return w=t.sent,E=n(w,1),o=E[0],a=o.getContent(),t.next=50,this.checkMAC(h,a,c);case 50:return t.prev=50,h.free(),t.finish(50);case 53:case"end":return t.stop()}}),t,this,[[10,,14,17],[27,,50,53]])})));return function(){return t.apply(this,arguments)}}()},{key:"doRespondVerification",value:function(){var t=i(f().mark((function t(){var r,o,a,s,u,c,l,h,p,v,m,b,w=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.channel.completedContentFromEvent(this.startEvent),o=N(P,new Set(r.key_agreement_protocols))[0],a=N(R,new Set(r.hashes))[0],s=N(I,new Set(r.message_authentication_codes))[0],u=N(r.short_authentication_string,D),void 0!==o&&void 0!==a&&void 0!==s&&u.length){t.next=7;break}throw(0,g.newUnknownMethodError)();case 7:return c=new e.Olm.SAS,t.prev=8,l=c.get_pubkey()+y.default.stringify(r),t.next=12,this.send("m.key.verification.accept",{key_agreement_protocol:o,hash:a,message_authentication_code:s,short_authentication_string:u,commitment:d.sha256(l)});case 12:return t.next=14,this.waitForEvent("m.key.verification.key");case 14:return h=t.sent,r=h.getContent(),this.theirSASPubKey=r.key,c.set_their_key(r.key),this.ourSASPubKey=c.get_pubkey(),t.next=21,this.send("m.key.verification.key",{key:this.ourSASPubKey});case 21:return p=M[o](this,c,6),v=new Promise((function(e,t){w.sasEvent={sas:_(p,u),confirm:function(){var r=i(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w.sendMAC(c,s);case 3:e(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),t(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(){return r.apply(this,arguments)}}(),cancel:function(){return t((0,g.newUserCancelledError)())},mismatch:function(){return t(k())}},w.emit("show_sas",w.sasEvent)})),t.next=25,Promise.all([this.waitForEvent("m.key.verification.mac").then((function(e){return w.expectedEvent="m.key.verification.done",e})),v]);case 25:return m=t.sent,b=n(m,1),h=b[0],r=h.getContent(),t.next=31,this.checkMAC(c,r,s);case 31:return t.prev=31,c.free(),t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[8,,31,34]])})));return function(){return t.apply(this,arguments)}}()},{key:"sendMAC",value:function(e,t){var r={},n=[],i="SENDINGNETWORK_KEY_VERIFICATION_MAC"+this.baseApis.getUserId()+this.baseApis.deviceId+this.userId+this.deviceId+this.channel.transactionId,o="ed25519:".concat(this.baseApis.deviceId);r[o]=O(e,t)(this.baseApis.getDeviceEd25519Key(),i+o),n.push(o);var a=this.baseApis.getCrossSigningId();if(a){var s="ed25519:".concat(a);r[s]=O(e,t)(a,i+s),n.push(s)}var u=O(e,t)(n.sort().join(","),i+"KEY_IDS");return this.send("m.key.verification.mac",{mac:r,keys:u})}},{key:"checkMAC",value:function(){var e=i(f().mark((function e(t,r,n){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="SENDINGNETWORK_KEY_VERIFICATION_MAC"+this.userId+this.deviceId+this.baseApis.getUserId()+this.baseApis.deviceId+this.channel.transactionId,r.keys===O(t,n)(Object.keys(r.mac).sort().join(","),i+"KEY_IDS")){e.next=3;break}throw(0,g.newKeyMismatchError)();case 3:return e.next=5,this.verifyKeys(this.userId,r.mac,(function(e,r,o){if(o!==O(t,n)(r.keys[e],i+e))throw(0,g.newKeyMismatchError)()}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}],[{key:"NAME",get:function(){return"m.sas.v1"}}]),l}(v.VerificationBase);t.SAS=U}).call(this,r(11))},function(e,t,r){var n=r(266);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(e,t,r){"use strict";var n=r(10).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==t[a])throw new TypeError(o+" is ambiguous");t[a]=i}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,o=0;e[r]===u;)i++,r++;for(var a=(e.length-r)*c+1>>>0,l=new Uint8Array(a);e[r];){var f=t[e.charCodeAt(r)];if(255===f)return;for(var h=0,d=a-1;(0!==f||h<o)&&-1!==d;d--,h++)f+=s*l[d]>>>0,l[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,r++}for(var p=a-o;p!==a&&0===l[p];)p++;var v=n.allocUnsafe(i+(a-p));v.fill(0,0,i);for(var y=i;p!==a;)v[y++]=l[p++];return v}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,o=0,a=t.length;o!==a&&0===t[o];)o++,r++;for(var c=(a-o)*l+1>>>0,f=new Uint8Array(c);o!==a;){for(var h=t[o],d=0,p=c-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*f[p]>>>0,f[p]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");i=d,o++}for(var v=c-i;v!==c&&0===f[v];)v++;for(var y=u.repeat(r);v<c;++v)y+=e.charAt(f[v]);return y},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.InRoomRequests=t.InRoomChannel=void 0;var c=u(r(4)),l=r(87),f=r(8),h=r(24).EventType.RoomMessage,d=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this.client=t,this.roomId=r,this.userId=n,(0,c.default)(this,"requestEventId",null)}return a(e,[{key:"receiveStartFromOtherDevices",get:function(){return!0}},{key:"transactionId",get:function(){return this.requestEventId}},{key:"getTimestamp",value:function(e){return e.getTs()}},{key:"canCreateRequest",value:function(t){return e.canCreateRequest(t)}},{key:"handleEvent",value:function(){var t=i(s().mark((function t(r,n){var i,o,a,u,c,l,h,d=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=d.length>2&&void 0!==d[2]&&d[2],!n.hasEventId(r.getId())){t.next=3;break}return t.abrupt("return");case 3:if(o=e.getEventType(r),r.getRoomId()===this.roomId){t.next=6;break}return t.abrupt("return");case 6:if(null===this.userId&&(a=e.getOtherPartyUserId(r,this.client))&&(this.userId=a),u=this.client.getUserId(),c=r.getSender(),null===this.userId){t.next=13;break}if(c===u||c===this.userId){t.next=13;break}return f.logger.log("InRoomChannel: ignoring verification event from "+"non-participating sender ".concat(c)),t.abrupt("return");case 13:return null===this.requestEventId&&(this.requestEventId=e.getTransactionId(r)),l=!!r.getUnsigned().transaction_id,h=r.getSender()===this.client.getUserId(),t.next=18,n.handleEvent(o,r,i,l,h);case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"completedContentFromEvent",value:function(e){var t=Object.assign({},e.getContent());return t["m.relates_to"]=e.getRelation(),t}},{key:"completeContent",value:function(e,t){return t=Object.assign({},t),e!==l.REQUEST_TYPE&&e!==l.READY_TYPE&&e!==l.START_TYPE||(t.from_device=this.client.getDeviceId()),e===l.REQUEST_TYPE?t={body:this.client.getUserId()+" is requesting to verify your key, but your client does not support in-chat key verification.  You will need to use legacy key verification to verify keys.",msgtype:l.REQUEST_TYPE,to:this.userId,from_device:t.from_device,methods:t.methods}:t["m.relates_to"]={rel_type:"m.reference",event_id:this.transactionId},t}},{key:"send",value:function(e,t){var r=this.completeContent(e,t);return this.sendCompleted(e,r)}},{key:"sendCompleted",value:function(){var e=i(s().mark((function e(t,r){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,t===l.REQUEST_TYPE&&(n=h),e.next=4,this.client.sendEvent(this.roomId,n,r);case 4:i=e.sent,t===l.REQUEST_TYPE&&(this.requestEventId=i.event_id);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"getOtherPartyUserId",value:function(t,r){if(e.getEventType(t)===l.REQUEST_TYPE){var n=r.getUserId(),i=t.getSender(),o=t.getContent().to;return i===n?o:o===n?i:void 0}}},{key:"canCreateRequest",value:function(e){return e===l.REQUEST_TYPE}},{key:"getTransactionId",value:function(t){if(e.getEventType(t)===l.REQUEST_TYPE)return t.getId();var r=t.getRelation();return r&&"m.reference"===r.rel_type?r.event_id:void 0}},{key:"validateEvent",value:function(t,r){var n=e.getTransactionId(t);if("string"!==typeof n||0===n.length)return!1;var i=e.getEventType(t),o=t.getContent();if(i===l.REQUEST_TYPE){if(!o||"string"!==typeof o.to||!o.to.length)return f.logger.log("InRoomChannel: validateEvent: no valid to "+(o&&o.to)),!1;if(!e.getOtherPartyUserId(t,r))return f.logger.log("InRoomChannel: validateEvent: "+"not directed to or sent by me: ".concat(t.getSender())+", ".concat(o&&o.to)),!1}return l.VerificationRequest.validateEvent(i,t,r)}},{key:"getEventType",value:function(e){var t=e.getType();if(t===h){var r=e.getContent();if(r)if(r.msgtype===l.REQUEST_TYPE)return l.REQUEST_TYPE}return t&&t!==l.REQUEST_TYPE?t:""}}]),e}();t.InRoomChannel=d;var p=function(){function e(){o(this,e),(0,c.default)(this,"requestsByRoomId",new Map)}return a(e,[{key:"getRequest",value:function(e){var t=e.getRoomId(),r=d.getTransactionId(e);return this.getRequestByTxnId(t,r)}},{key:"getRequestByChannel",value:function(e){return this.getRequestByTxnId(e.roomId,e.transactionId)}},{key:"getRequestByTxnId",value:function(e,t){var r=this.requestsByRoomId.get(e);if(r)return r.get(t)}},{key:"setRequest",value:function(e,t){this.doSetRequest(e.getRoomId(),d.getTransactionId(e),t)}},{key:"setRequestByChannel",value:function(e,t){this.doSetRequest(e.roomId,e.transactionId,t)}},{key:"doSetRequest",value:function(e,t,r){var n=this.requestsByRoomId.get(e);n||(n=new Map,this.requestsByRoomId.set(e,n)),n.set(t,r)}},{key:"removeRequest",value:function(e){var t=e.getRoomId(),r=this.requestsByRoomId.get(t);r&&(r.delete(d.getTransactionId(e)),0===r.size&&this.requestsByRoomId.delete(t))}},{key:"findRequestInProgress",value:function(e){var t=this.requestsByRoomId.get(e);if(t){var r,i=n(t.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.pending)return o}}catch(a){i.e(a)}finally{i.f()}}}}]),e}();t.InRoomRequests=p},function(e,t,r){"use strict";var n=r(23),i=r(9),o=r(12),a=r(1),s=r(2);function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var c=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.ToDeviceRequests=t.ToDeviceChannel=void 0;var l=c(r(4)),f=r(50),h=r(8),d=r(87),p=r(52),v=r(25),y=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;a(this,e),this.client=t,this.userId=r,this.devices=n,this.transactionId=i,this.deviceId=o,(0,l.default)(this,"request",void 0)}return s(e,[{key:"isToDevices",value:function(e){if(e.length===this.devices.length){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!this.devices.includes(n))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}return!1}},{key:"canCreateRequest",value:function(t){return e.canCreateRequest(t)}},{key:"getTimestamp",value:function(e){var t=e.getContent();return t&&t.timestamp}},{key:"handleEvent",value:function(){var e=i(u().mark((function e(t,r){var n,i,o,a,s,c,l,f,h,v=this,y=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>2&&void 0!==y[2]&&y[2],i=t.getType(),o=t.getContent(),i!==d.REQUEST_TYPE&&i!==d.READY_TYPE&&i!==d.START_TYPE){e.next=10;break}if(this.transactionId||(this.transactionId=o.transaction_id),a=o.from_device,!this.deviceId&&this.devices.includes(a)&&(this.deviceId=a),this.deviceId&&this.deviceId===a){e.next=10;break}return s=this.completeContent(d.CANCEL_TYPE,(0,p.errorFromEvent)((0,p.newUnexpectedMessageError)())),e.abrupt("return",this.sendToDevices(d.CANCEL_TYPE,s,[a]));case 10:return c=r.phase===d.PHASE_STARTED||r.phase===d.PHASE_READY,e.next=13,r.handleEvent(t.getType(),t,n,!1,!1);case 13:if(l=r.phase===d.PHASE_STARTED||r.phase===d.PHASE_READY,!(i===d.START_TYPE||i===d.READY_TYPE)||c||!l||!this.deviceId){e.next=21;break}if(!(f=this.devices.filter((function(e){return e!==v.deviceId&&e!==v.client.getDeviceId()}))).length){e.next=21;break}return h=this.completeContent(d.CANCEL_TYPE,{code:"m.accepted",reason:"Verification request accepted by another device"}),e.next=21,this.sendToDevices(d.CANCEL_TYPE,h,f);case 21:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"completedContentFromEvent",value:function(e){return e.getContent()}},{key:"completeContent",value:function(e,t){return t=Object.assign({},t),this.transactionId&&(t.transaction_id=this.transactionId),e!==d.REQUEST_TYPE&&e!==d.READY_TYPE&&e!==d.START_TYPE||(t.from_device=this.client.getDeviceId()),e===d.REQUEST_TYPE&&(t.timestamp=Date.now()),t}},{key:"send",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t!==d.REQUEST_TYPE&&t!==d.START_TYPE||this.transactionId||(this.transactionId=e.makeTransactionId());var n=this.completeContent(t,r);return this.sendCompleted(t,n)}},{key:"sendCompleted",value:function(){var e=i(u().mark((function e(t,r){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==d.REQUEST_TYPE&&(t!==d.CANCEL_TYPE||this.deviceId)){e.next=6;break}return e.next=3,this.sendToDevices(t,r,this.devices);case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,this.sendToDevices(t,r,[this.deviceId]);case 8:n=e.sent;case 9:return i=new v.SendingNetworkEvent({sender:this.client.getUserId(),content:r,type:t}),e.next=12,this.request.handleEvent(t,i,!0,!0,!0);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendToDevices",value:function(){var e=i(u().mark((function e(t,r,i){var a,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.length){e.next=6;break}a={},s=o(i);try{for(s.s();!(c=s.n()).done;)l=c.value,a[l]=r}catch(u){s.e(u)}finally{s.f()}return e.next=6,this.client.sendToDevice(t,n({},this.userId,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}],[{key:"getEventType",value:function(e){return e.getType()}},{key:"getTransactionId",value:function(e){var t=e.getContent();return t&&t.transaction_id}},{key:"canCreateRequest",value:function(e){return e===d.REQUEST_TYPE||e===d.START_TYPE}},{key:"validateEvent",value:function(e,t){if(e.isCancelled())return h.logger.warn("Ignoring flagged verification request from "+e.getSender()),!1;var r=e.getContent();if(!r)return h.logger.warn("ToDeviceChannel.validateEvent: invalid: no content"),!1;if(!r.transaction_id)return h.logger.warn("ToDeviceChannel.validateEvent: invalid: no transaction_id"),!1;var n=e.getType();if(n===d.REQUEST_TYPE){if(!Number.isFinite(r.timestamp))return h.logger.warn("ToDeviceChannel.validateEvent: invalid: no timestamp"),!1;if(e.getSender()===t.getUserId()&&r.from_device==t.getDeviceId())return h.logger.warn("ToDeviceChannel.validateEvent: invalid: from own device"),!1}return d.VerificationRequest.validateEvent(n,e,t)}},{key:"makeTransactionId",value:function(){return(0,f.randomString)(32)}}]),e}();t.ToDeviceChannel=y;var g=function(){function e(){a(this,e),(0,l.default)(this,"requestsByUserId",new Map)}return s(e,[{key:"getRequest",value:function(e){return this.getRequestBySenderAndTxnId(e.getSender(),y.getTransactionId(e))}},{key:"getRequestByChannel",value:function(e){return this.getRequestBySenderAndTxnId(e.userId,e.transactionId)}},{key:"getRequestBySenderAndTxnId",value:function(e,t){var r=this.requestsByUserId.get(e);if(r)return r.get(t)}},{key:"setRequest",value:function(e,t){this.setRequestBySenderAndTxnId(e.getSender(),y.getTransactionId(e),t)}},{key:"setRequestByChannel",value:function(e,t){this.setRequestBySenderAndTxnId(e.userId,e.transactionId,t)}},{key:"setRequestBySenderAndTxnId",value:function(e,t,r){var n=this.requestsByUserId.get(e);n||(n=new Map,this.requestsByUserId.set(e,n)),n.set(t,r)}},{key:"removeRequest",value:function(e){var t=e.getSender(),r=this.requestsByUserId.get(t);r&&(r.delete(y.getTransactionId(e)),0===r.size&&this.requestsByUserId.delete(t))}},{key:"findRequestInProgress",value:function(e,t){var r=this.requestsByUserId.get(e);if(r){var n,i=o(r.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.pending&&a.channel.isToDevices(t))return a}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getRequestsInProgress",value:function(e){var t=this.requestsByUserId.get(e);return t?Array.from(t.values()).filter((function(e){return e.pending})):[]}}]),e}();t.ToDeviceRequests=g},function(e,t,r){"use strict";var n=r(9),i=r(1),o=r(2),a=r(16),s=r(14),u=r(15);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var l=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.IllegalMethod=void 0;var f=l(r(4)),h=function(e){s(r,e);var t=u(r);function r(){var e;i(this,r);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return e=t.call.apply(t,[this].concat(s)),(0,f.default)(a(e),"doVerification",n(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Verification is not possible with this method");case 1:case"end":return e.stop()}}),e)})))),e}return o(r,null,[{key:"factory",value:function(e,t,n,i,o,a){return new r(e,t,n,i,o,a)}},{key:"NAME",get:function(){return"org.sendingnetwork.illegal_method"}}]),r}(r(84).VerificationBase);t.IllegalMethod=h},function(e,t,r){"use strict";var n=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.SearchResult=void 0;var o=r(271),a=function(){function e(t,r){n(this,e),this.rank=t,this.context=r}return i(e,null,[{key:"fromJson",value:function(t,r){var n=t.context||{},i=n.events_before||[],a=n.events_after||[],s=new o.EventContext(r(t.result));return s.setPaginateToken(n.start,!0),s.addEvents(i.map(r),!0),s.addEvents(a.map(r),!1),s.setPaginateToken(n.end,!1),new e(t.rank,s)}}]),e}();t.SearchResult=a},function(e,t,r){"use strict";var n=r(23),i=r(1),o=r(2),a=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.EventContext=void 0;var s=a(r(4)),u=r(35),c=function(){function e(t){var r;i(this,e),(0,s.default)(this,"timeline",void 0),(0,s.default)(this,"ourEventIndex",0),(0,s.default)(this,"paginateTokens",(n(r={},u.Direction.Backward,null),n(r,u.Direction.Forward,null),r)),this.timeline=[t]}return o(e,[{key:"getEvent",value:function(){return this.timeline[this.ourEventIndex]}},{key:"getTimeline",value:function(){return this.timeline}},{key:"getOurEventIndex",value:function(){return this.ourEventIndex}},{key:"getPaginateToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.paginateTokens[e?u.Direction.Backward:u.Direction.Forward]}},{key:"setPaginateToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.paginateTokens[t?u.Direction.Backward:u.Direction.Forward]=e}},{key:"addEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.timeline=e.concat(this.timeline),this.ourEventIndex+=e.length):this.timeline=this.timeline.concat(e)}}]),e}();t.EventContext=c},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CrossSigningKey=void 0,t.CrossSigningKey=n,function(e){e.Master="master",e.SelfSigning="self_signing",e.UserSigning="user_signing"}(n||(t.CrossSigningKey=n={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventMapperFor=function(e,t){var r=Boolean(t.preventReEmit),i=!1!==t.decrypt;return function(t){var o=new n.SendingNetworkEvent(t);return o.isEncrypted()&&(r||e.reEmitter.reEmit(o,["Event.decrypted"]),i&&e.decryptEventIfNeeded(o)),r||e.reEmitter.reEmit(o,["Event.replaced"]),o}};var n=r(25)},function(e,t,r){"use strict";var n,i=r(12),o=r(31),a=r(9),s=r(1),u=r(2),c=r(23);function l(){l=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var f=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TreePermissions=t.MSC3089TreeSpace=t.DEFAULT_TREE_POWER_LEVELS_TEMPLATE=void 0;var h=f(r(4)),d=r(24),p=r(8),v=r(19),y=r(275),g=f(r(121)),m=r(137);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k,S={invite:100,kick:100,ban:100,redact:50,state_default:50,events_default:50,users_default:0,events:(n={},c(n,d.EventType.RoomPowerLevels,100),c(n,d.EventType.RoomHistoryVisibility,100),c(n,d.EventType.RoomTombstone,100),c(n,d.EventType.RoomEncryption,100),c(n,d.EventType.RoomName,50),c(n,d.EventType.RoomMessage,50),c(n,d.EventType.RoomMessageEncrypted,50),c(n,d.EventType.Sticker,50),n),users:{}};t.DEFAULT_TREE_POWER_LEVELS_TEMPLATE=S,t.TreePermissions=k,function(e){e.Viewer="viewer",e.Editor="editor",e.Owner="owner"}(k||(t.TreePermissions=k={}));var E=function(){function e(t,r){if(s(this,e),this.client=t,this.roomId=r,(0,h.default)(this,"room",void 0),this.room=this.client.getRoom(this.roomId),!this.room)throw new Error("Unknown room")}return u(e,[{key:"id",get:function(){return this.roomId}},{key:"isTopLevel",get:function(){var e=this.room.currentState.getStateEvents(d.EventType.SpaceParent);return null===e||void 0===e||!e.length||e.every((function(e){var t;return!(null!==(t=e.getContent())&&void 0!==t&&t.via)}))}},{key:"setName",value:function(){var e=a(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendStateEvent(this.roomId,d.EventType.RoomName,{name:t},"");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"invite",value:function(){var e=a(l().mark((function e(t){var r,n,i,a=this,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(s.length>1&&void 0!==s[1])||s[1],n=!(s.length>2&&void 0!==s[2])||s[2],i=[this.retryInvite(t)],r&&i.push.apply(i,o(this.getDirectories().map((function(e){return e.invite(t,r,n)})))),e.abrupt("return",Promise.all(i).then((function(){n&&(0,m.isRoomSharedHistory)(a.room)&&a.client.sendSharedHistoryKeys(a.roomId,[t])})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retryInvite",value:function(e){var t=this;return(0,v.simpleRetryOperation)(a(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.client.invite(t.roomId,e).catch((function(e){if("M_FORBIDDEN"===(null===e||void 0===e?void 0:e.errcode))throw new g.default.AbortError(e);throw e}));case 2:case"end":return r.stop()}}),r)}))))}},{key:"setPermissions",value:function(){var e=a(l().mark((function e(t,r){var n,i,o,a,s,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.room.currentState.getStateEvents(d.EventType.RoomPowerLevels,""),!Array.isArray(i)){e.next=3;break}throw new Error("Unexpected return type for power levels");case 3:o=i.getContent()||{},a=o.users_default||0,s=o.events_default||50,u=(null===(n=o.events)||void 0===n?void 0:n[d.EventType.RoomPowerLevels])||100,c=o.users||{},e.t0=r,e.next=e.t0===k.Viewer?11:e.t0===k.Editor?13:e.t0===k.Owner?15:17;break;case 11:return c[t]=a,e.abrupt("break",18);case 13:return c[t]=s,e.abrupt("break",18);case 15:return c[t]=u,e.abrupt("break",18);case 17:throw new Error("Invalid role: "+r);case 18:return o.users=c,e.next=21,this.client.sendStateEvent(this.roomId,d.EventType.RoomPowerLevels,o,"");case 21:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPermissions",value:function(e){var t,r,n=this.room.currentState.getStateEvents(d.EventType.RoomPowerLevels,"");if(Array.isArray(n))throw new Error("Unexpected return type for power levels");var i=n.getContent()||{},o=i.users_default||0,a=i.events_default||50,s=(null===(t=i.events)||void 0===t?void 0:t[d.EventType.RoomPowerLevels])||100,u=(null===(r=i.users)||void 0===r?void 0:r[e])||o;return u>=s?k.Owner:u>=a?k.Editor:k.Viewer}},{key:"createDirectory",value:function(){var e=a(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.unstableCreateFileTree(t);case 2:return r=e.sent,e.next=5,this.client.sendStateEvent(this.roomId,d.EventType.SpaceChild,{via:[this.client.getDomain()]},r.roomId);case 5:return e.next=7,this.client.sendStateEvent(r.roomId,d.EventType.SpaceParent,{via:[this.client.getDomain()]},this.roomId);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDirectories",value:function(){var e,t=[],r=this.room.currentState.getStateEvents(d.EventType.SpaceChild),n=i(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;try{var a=this.client.unstableGetFileTreeSpace(o.getStateKey());a&&t.push(a)}catch(s){p.logger.warn("Unable to create tree space instance for listing. Are we joined?",s)}}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"getDirectory",value:function(e){return this.getDirectories().find((function(t){return t.roomId===e}))}},{key:"delete",value:function(){var e=a(l().mark((function e(){var t,r,n,o,a,s,u,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getDirectories(),r=i(t),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=10;break}return o=n.value,e.next=8,o.delete();case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:a=["invite","knock","join"],s=this.room.currentState.getStateEvents(d.EventType.RoomMember),u=i(s),e.prev=21,u.s();case 23:if((c=u.n()).done){e.next=31;break}if(f=c.value,!(f.getStateKey()!==this.client.getUserId())||!a.includes(f.getContent().membership)){e.next=29;break}return e.next=29,this.client.kick(this.roomId,f.getStateKey(),"Room deleted");case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(21),u.e(e.t1);case 36:return e.prev=36,u.f(),e.finish(36);case 39:return e.next=41,this.client.leave(this.roomId);case 41:case"end":return e.stop()}}),e,this,[[2,12,15,18],[21,33,36,39]])})));return function(){return e.apply(this,arguments)}}()},{key:"getOrderedChildren",value:function(e){var t=this,r=e.map((function(e){return{roomId:e.getStateKey(),order:e.getContent().order}}));return r.sort((function(e,r){if(e.order&&!r.order)return-1;if(!e.order&&r.order)return 1;if(e.order||r.order)return(0,v.lexicographicCompare)(e.order,r.order);var n,i,o,a,s=t.client.getRoom(e.roomId),u=t.client.getRoom(r.roomId);if(!s||!u)return(0,v.lexicographicCompare)(e.roomId,r.roomId);var c=null!==(n=null===(i=s.currentState.getStateEvents(d.EventType.RoomCreate,""))||void 0===i?void 0:i.getTs())&&void 0!==n?n:0,l=null!==(o=null===(a=u.currentState.getStateEvents(d.EventType.RoomCreate,""))||void 0===a?void 0:a.getTs())&&void 0!==o?o:0;return c===l?(0,v.lexicographicCompare)(e.roomId,r.roomId):c-l})),r}},{key:"getParentRoom",value:function(){var e=this.room.currentState.getStateEvents(d.EventType.SpaceParent)[0];if(!e)throw new Error("Expected to have a parent in a non-top level space");var t=this.client.getRoom(e.getStateKey());if(!t)throw new Error("Unable to locate room for parent");return t}},{key:"getOrder",value:function(){var e=this;if(this.isTopLevel)return-1;var t=this.getParentRoom().currentState.getStateEvents(d.EventType.SpaceChild);return this.getOrderedChildren(t).findIndex((function(t){return t.roomId===e.roomId}))}},{key:"setOrder",value:function(){var e=a(l().mark((function e(t){var r,n,i,o,a,s,u,c,f,h,p,y,g,m,b,k,S,E,x,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isTopLevel){e.next=2;break}throw new Error("Cannot set order of top level spaces currently");case 2:if(n=this.getParentRoom(),i=n.currentState.getStateEvents(d.EventType.SpaceChild),o=this.getOrderedChildren(i),t=Math.max(Math.min(t,o.length-1),0),a=this.getOrder(),(s=a<t)&&t===o.length-1?t--:s||0!==t||t++,u=o[s?t:t-1],c=o[s?t+1:t],f=v.DEFAULT_ALPHABET[0],h=!1,u?t===o.length-1?null!==c&&void 0!==c&&c.order&&(f=(0,v.nextString)(c.order)):(p=null===u||void 0===u?void 0:u.order,y=null===c||void 0===c?void 0:c.order,p&&y?f=p===y?(0,v.nextString)(p):(0,v.averageBetweenStrings)(p,y):p?f=(0,v.nextString)(p):y?f=(0,v.prevString)(y):h=!0):null!==c&&void 0!==c&&c.order&&(f=(0,v.prevString)(c.order)),!h){e.next=32;break}m=0;case 16:if(!(m<=t)){e.next=31;break}if(b=o[m],0===m&&(g=b.order),b.order){e.next=27;break}return g=g?(0,v.nextString)(g):v.DEFAULT_ALPHABET[0],S=n.currentState.getStateEvents(d.EventType.SpaceChild,b.roomId),E=null!==(k=null===S||void 0===S?void 0:S.getContent())&&void 0!==k?k:{via:[this.client.getDomain()]},e.next=25,this.client.sendStateEvent(n.roomId,d.EventType.SpaceChild,w(w({},E),{},{order:g}),b.roomId);case 25:e.next=28;break;case 27:g=b.order;case 28:m++,e.next=16;break;case 31:f=(0,v.nextString)(g);case 32:return x=n.currentState.getStateEvents(d.EventType.SpaceChild,this.roomId),_=null!==(r=null===x||void 0===x?void 0:x.getContent())&&void 0!==r?r:{via:[this.client.getDomain()]},e.next=36,this.client.sendStateEvent(n.roomId,d.EventType.SpaceChild,w(w({},_),{},{order:f}),this.roomId);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFile",value:function(){var e=a(l().mark((function e(t,r,n,i){var o,a,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.uploadContent(new Blob([r]),{includeFilename:!1,onlyContentUri:!0});case 2:return a=e.sent,n.url=a,s={msgtype:d.MsgType.File,body:t,url:a,file:n},(i=null!==(o=i)&&void 0!==o?o:{})["m.new_content"]&&(i["m.new_content"]=s),e.next=9,this.client.sendMessage(this.roomId,w(w(w({},i),s),{},c({},d.UNSTABLE_MSC3089_LEAF.name,{})));case 9:return u=e.sent,e.next=12,this.client.sendStateEvent(this.roomId,d.UNSTABLE_MSC3089_BRANCH.name,{active:!0,name:t},u.event_id);case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"getFile",value:function(e){var t=this.room.currentState.getStateEvents(d.UNSTABLE_MSC3089_BRANCH.name,e);return t?new y.MSC3089Branch(this.client,t,this):null}},{key:"listFiles",value:function(){return this.listAllFiles().filter((function(e){return e.isActive}))}},{key:"listAllFiles",value:function(){var e,t=this;return(null!==(e=this.room.currentState.getStateEvents(d.UNSTABLE_MSC3089_BRANCH.name))&&void 0!==e?e:[]).map((function(e){return new y.MSC3089Branch(t.client,e,t)}))}}]),e}();t.MSC3089TreeSpace=E},function(e,t,r){"use strict";var n=r(31),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MSC3089Branch=void 0;var c=u(r(4)),l=r(24);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){function e(t,r,n){o(this,e),this.client=t,this.indexEvent=r,this.directory=n}return a(e,[{key:"id",get:function(){return this.indexEvent.getStateKey()}},{key:"isActive",get:function(){return!0===this.indexEvent.getContent().active}},{key:"version",get:function(){var e;return null!==(e=this.indexEvent.getContent().version)&&void 0!==e?e:1}},{key:"roomId",get:function(){return this.indexEvent.getRoomId()}},{key:"delete",value:function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendStateEvent(this.roomId,l.UNSTABLE_MSC3089_BRANCH.name,{},this.id);case 2:return e.next=4,this.client.redactEvent(this.roomId,this.id);case 4:return e.next=6,this.getVersionHistory();case 6:if(!(t=e.sent[1])){e.next=10;break}return e.next=10,t.delete();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return this.indexEvent.getContent().name||"Unnamed File"}},{key:"setName",value:function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendStateEvent(this.roomId,l.UNSTABLE_MSC3089_BRANCH.name,h(h({},this.indexEvent.getContent()),{},{name:t}),this.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isLocked",value:function(){return this.indexEvent.getContent().locked||!1}},{key:"setLocked",value:function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendStateEvent(this.roomId,l.UNSTABLE_MSC3089_BRANCH.name,h(h({},this.indexEvent.getContent()),{},{locked:t}),this.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileInfo",value:function(){var e=i(s().mark((function e(){var t,r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFileEvent();case 2:return t=e.sent,r=t.getOriginalContent().file,n=this.client.mxcUrlToHttp(r.url),e.abrupt("return",{info:r,httpUrl:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFileEvent",value:function(){var e=i(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.client.getRoom(this.roomId)){e.next=3;break}throw new Error("Unknown room");case 3:if(r=t.getUnfilteredTimelineSet().findEventById(this.id)){e.next=6;break}throw new Error("Failed to find event");case 6:return e.next=8,this.client.decryptEventIfNeeded(r,{emit:!0,isRetry:!0});case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNewVersion",value:function(){var e=i(s().mark((function e(t,r,n,i){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.directory.createFile(t,r,n,h(h({},null!==i&&void 0!==i?i:{}),{},{"m.new_content":!0,"m.relates_to":{rel_type:l.RelationType.Replace,event_id:this.id}}));case 2:return o=e.sent,e.next=5,this.client.sendStateEvent(this.roomId,l.UNSTABLE_MSC3089_BRANCH.name,{active:!0,name:t,version:this.version+1},o.event_id);case 5:return e.next=7,this.client.sendStateEvent(this.roomId,l.UNSTABLE_MSC3089_BRANCH.name,h(h({},this.indexEvent.getContent()),{},{active:!1}),this.id);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"getVersionHistory",value:function(){var e=i(s().mark((function e(){var t,r,i,o,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=[]).push(this),r=this.client.getRoom(this.roomId)){e.next=5;break}throw new Error("Invalid or unknown room");case 5:return i=n(r.getLiveTimeline().getEvents()).reverse(),e.next=8,this.getFileEvent();case 8:a=e.sent;case 9:if(!(o=i.find((function(e){return e.replacingEventId()===a.getId()})))){e.next=18;break}if(!(u=this.directory.getFile(o.getId()))){e.next=17;break}t.push(u),a=o,e.next=18;break;case 17:return e.abrupt("break",19);case 18:if(o){e.next=9;break}case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.MSC3089Branch=d},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SearchOrderBy=void 0,function(e){e.RoomId="room_id",e.Sender="sender"}(n||(n={})),t.SearchOrderBy=i,function(e){e.Recent="recent",e.Rank="rank"}(i||(t.SearchOrderBy=i={}))},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(1),a=r(2);function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var u=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaHandler=void 0;var c=u(r(4)),l=r(8),f=function(){function e(){o(this,e),(0,c.default)(this,"audioInput",void 0),(0,c.default)(this,"videoInput",void 0),(0,c.default)(this,"userMediaStreams",[]),(0,c.default)(this,"screensharingStreams",[])}return a(e,[{key:"setAudioInput",value:function(e){this.audioInput=e}},{key:"setVideoInput",value:function(e){this.videoInput=e}},{key:"hasAudioDevice",value:function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return"audioinput"===e.kind})).length>0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"hasVideoDevice",value:function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return"videoinput"===e.kind})).length>0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserMediaStream",value:function(){var e=i(s().mark((function e(t,r){var n,i,o,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,this.hasAudioDevice();case 4:e.t0=e.sent;case 5:if(n=e.t0,e.t1=r,!e.t1){e.next=11;break}return e.next=10,this.hasVideoDevice();case 10:e.t1=e.sent;case 11:if(i=e.t1,!(a=this.userMediaStreams.find((function(e){return n===e.getAudioTracks().length>0&&i===e.getVideoTracks().length>0})))){e.next=18;break}l.logger.log("Cloning user media stream",a.id),o=a.clone(),e.next=23;break;case 18:return u=this.getUserMediaContraints(n,i),l.logger.log("Getting user media with constraints",u),e.next=22,navigator.mediaDevices.getUserMedia(u);case 22:o=e.sent;case 23:return this.userMediaStreams.push(o),e.abrupt("return",o);case 25:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stopUserMediaStream",value:function(e){l.logger.debug("Stopping usermedia stream",e.id);var t,r=n(e.getTracks());try{for(r.s();!(t=r.n()).done;){t.value.stop()}}catch(o){r.e(o)}finally{r.f()}var i=this.userMediaStreams.indexOf(e);-1!==i&&(l.logger.debug("Splicing usermedia stream out stream array",e.id),this.userMediaStreams.splice(i,1))}},{key:"getScreensharingStream",value:function(){var e=i(s().mark((function e(t){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.screensharingStreams.length){e.next=17;break}if(n=this.getScreenshareContraints(t)){e.next=4;break}return e.abrupt("return",null);case 4:if(!t){e.next=11;break}return l.logger.debug("Getting screensharing stream using getUserMedia()",t),e.next=8,navigator.mediaDevices.getUserMedia(n);case 8:r=e.sent,e.next=15;break;case 11:return l.logger.debug("Getting screensharing stream using getDisplayMedia()"),e.next=14,navigator.mediaDevices.getDisplayMedia(n);case 14:r=e.sent;case 15:e.next=20;break;case 17:i=this.screensharingStreams[this.screensharingStreams.length-1],l.logger.log("Cloning screensharing stream",i.id),r=i.clone();case 20:return this.screensharingStreams.push(r),e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopScreensharingStream",value:function(e){l.logger.debug("Stopping screensharing stream",e.id);var t,r=n(e.getTracks());try{for(r.s();!(t=r.n()).done;){t.value.stop()}}catch(o){r.e(o)}finally{r.f()}var i=this.screensharingStreams.indexOf(e);-1!==i&&(l.logger.debug("Splicing screensharing stream out stream array",e.id),this.screensharingStreams.splice(i,1))}},{key:"stopAllStreams",value:function(){var e,t=n(this.userMediaStreams);try{for(t.s();!(e=t.n()).done;){var r,i=e.value,o=n(i.getTracks());try{for(o.s();!(r=o.n()).done;){r.value.stop()}}catch(f){o.e(f)}finally{o.f()}}}catch(f){t.e(f)}finally{t.f()}var a,s=n(this.screensharingStreams);try{for(s.s();!(a=s.n()).done;){var u,c=a.value,l=n(c.getTracks());try{for(l.s();!(u=l.n()).done;){u.value.stop()}}catch(f){l.e(f)}finally{l.f()}}}catch(f){s.e(f)}finally{s.f()}this.userMediaStreams=[],this.screensharingStreams=[]}},{key:"getUserMediaContraints",value:function(e,t){var r=!!navigator.webkitGetUserMedia;return{audio:!!e&&{deviceId:this.audioInput?{ideal:this.audioInput}:void 0},video:!!t&&{deviceId:this.videoInput?{ideal:this.videoInput}:void 0,width:r?{exact:640}:{ideal:640},height:r?{exact:360}:{ideal:360}}}}},{key:"getScreenshareContraints",value:function(e){return e?(l.logger.debug("Using desktop capturer source",e),{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}}}):(l.logger.debug("Not using desktop capturer source"),{audio:!1,video:!0})}}]),e}();t.MediaHandler=f},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TransferStatus=void 0,t.TransferStatus=n,function(e){e[e.Confirm=0]="Confirm",e[e.Cancel=1]="Cancel",e[e.Success=2]="Success",e[e.Fail=3]="Fail"}(n||(t.TransferStatus=n={}))},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineWindow=t.TimelineIndex=void 0;var a=o(r(4)),s=r(35),u=(r(8),function(){}),c=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.client=t,this.timelineSet=r,(0,a.default)(this,"windowLimit",void 0),(0,a.default)(this,"start",null),(0,a.default)(this,"end",null),(0,a.default)(this,"eventCount",0),this.windowLimit=i.windowLimit||1e3}return i(e,[{key:"load",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=function(n){var i,o=n.getEvents();if(e){for(var a=0;a<o.length;a++)if(o[a].getId()==e){i=a;break}if(void 0===i)throw new Error("getEventTimeline result didn't include requested event")}else i=o.length;var s=Math.min(o.length,i+Math.ceil(r/2)),u=Math.max(0,s-r);t.start=new l(n,u-n.getBaseIndex()),t.end=new l(n,s-n.getBaseIndex()),t.eventCount=s-u};if(e){var i=this.timelineSet.getTimelineForEvent(e);if(i)return n(i),Promise.resolve(i);var o=this.client.getEventTimeline(this.timelineSet,e);return o.then(n)}var a=this.timelineSet.getLiveTimeline();return n(a),Promise.resolve()}},{key:"getTimelineIndex",value:function(e){if(e==s.EventTimeline.BACKWARDS)return this.start;if(e==s.EventTimeline.FORWARDS)return this.end;throw new Error("Invalid direction '"+e+"'")}},{key:"extend",value:function(e,t){var r=this.getTimelineIndex(e);if(!r)return u("TimelineWindow: no timeline yet"),!1;var n=e==s.EventTimeline.BACKWARDS?r.retreat(t):r.advance(t);if(n){this.eventCount+=n,u("TimelineWindow: increased cap by "+n+" (now "+this.eventCount+")");var i=this.eventCount-this.windowLimit;return i>0&&this.unpaginate(i,e!=s.EventTimeline.BACKWARDS),!0}return!1}},{key:"canPaginate",value:function(e){var t=this.getTimelineIndex(e);if(!t)return u("TimelineWindow: no timeline yet"),!1;if(e==s.EventTimeline.BACKWARDS){if(t.index>t.minIndex())return!0}else if(t.index<t.maxIndex())return!0;return Boolean(t.timeline.getNeighbouringTimeline(e)||t.timeline.getPaginationToken(e))}},{key:"paginate",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=this.getTimelineIndex(e);if(!o)return u("TimelineWindow: no timeline yet"),Promise.resolve(!1);if(o.pendingPaginate)return o.pendingPaginate;if(this.extend(e,t))return Promise.resolve(!0);if(!n||0===i)return Promise.resolve(!1);var a=o.timeline.getPaginationToken(e);if(!a)return u("TimelineWindow: no token"),Promise.resolve(!1);u("TimelineWindow: starting request");var c=this.client.paginateEventTimeline(o.timeline,{backwards:e==s.EventTimeline.BACKWARDS,limit:t}).finally((function(){o.pendingPaginate=null})).then((function(n){return u("TimelineWindow: request completed with result "+n),!!n&&r.paginate(e,t,!0,i-1)}));return o.pendingPaginate=c,c}},{key:"unpaginate",value:function(e,t){var r=t?this.start:this.end;if(e>this.eventCount||e<0)throw new Error("Attemting to unpaginate "+e+" events, but only have "+this.eventCount+" in the timeline");for(;e>0;){var n=t?r.advance(e):r.retreat(e);if(n<=0)throw new Error("Unable to unpaginate any further, but still have "+this.eventCount+" events");e-=n,this.eventCount-=n,u("TimelineWindow.unpaginate: dropped "+n+" (now "+this.eventCount+")")}}},{key:"getEvents",value:function(){if(!this.start)return[];for(var e=[],t=this.start.timeline;;){var r=t.getEvents(),n=0,i=r.length;t===this.start.timeline&&(n=this.start.index+t.getBaseIndex()),t===this.end.timeline&&(i=this.end.index+t.getBaseIndex());for(var o=n;o<i;o++)e.push(r[o]);if(t===this.end.timeline)break;t=t.getNeighbouringTimeline(s.EventTimeline.FORWARDS)}return e}}]),e}();t.TimelineWindow=c;var l=function(){function e(t,r){n(this,e),this.timeline=t,this.index=r,(0,a.default)(this,"pendingPaginate",void 0)}return i(e,[{key:"minIndex",value:function(){return-1*this.timeline.getBaseIndex()}},{key:"maxIndex",value:function(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()}},{key:"advance",value:function(e){if(!e)return 0;var t;if(e<0){if((t=Math.max(e,this.minIndex()-this.index))<0)return this.index+=t,t}else if((t=Math.min(e,this.maxIndex()-this.index))>0)return this.index+=t,t;var r=this.timeline.getNeighbouringTimeline(e<0?s.EventTimeline.BACKWARDS:s.EventTimeline.FORWARDS);return r?(this.timeline=r,this.index=e<0?this.maxIndex():this.minIndex(),u("paginate: switched to new neighbour"),this.advance(e)):0}},{key:"retreat",value:function(e){return-1*this.advance(-1*e)}}]),e}();t.TimelineIndex=l},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(2),a=r(1),s=r(16),u=r(14),c=r(15),l=r(37);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var h=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveAuth=t.AuthType=void 0;var d=h(r(4)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(19)),v=r(8);function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}var g;t.AuthType=g,function(e){e.Password="m.login.password",e.Recaptcha="m.login.recaptcha",e.Terms="m.login.terms",e.Email="m.login.email.identity",e.Msisdn="m.login.msisdn",e.Sso="m.login.sso",e.SsoUnstable="org.sendingnetwork.login.sso",e.Dummy="m.login.dummy"}(g||(t.AuthType=g={}));var m=function(e){u(r,e);var t=c(r);function r(e,n,i){var o;return a(this,r),(o=t.call(this,e)).required_stages=n,o.flows=i,(0,d.default)(s(o),"name","NoAuthFlowFoundError"),o}return o(r)}(l(Error)),b=function(){function e(t){var r;a(this,e),(0,d.default)(this,"sendingNetworkClient",void 0),(0,d.default)(this,"inputs",void 0),(0,d.default)(this,"clientSecret",void 0),(0,d.default)(this,"requestCallback",void 0),(0,d.default)(this,"busyChangedCallback",void 0),(0,d.default)(this,"stateUpdatedCallback",void 0),(0,d.default)(this,"requestEmailTokenCallback",void 0),(0,d.default)(this,"data",void 0),(0,d.default)(this,"emailSid",void 0),(0,d.default)(this,"requestingEmailToken",!1),(0,d.default)(this,"attemptAuthDeferred",null),(0,d.default)(this,"chosenFlow",null),(0,d.default)(this,"currentStage",null),(0,d.default)(this,"submitPromise",null),this.sendingNetworkClient=t.sendingNetworkClient,this.data=t.authData||{},this.requestCallback=t.doRequest,this.busyChangedCallback=t.busyChanged,this.stateUpdatedCallback=t.stateUpdated||t.startAuthStage,this.requestEmailTokenCallback=t.requestEmailToken,this.inputs=t.inputs||{},t.sessionId&&(this.data.session=t.sessionId),this.clientSecret=t.clientSecret||this.sendingNetworkClient.generateClientSecret(),this.emailSid=null!==(r=t.emailSid)&&void 0!==r?r:null}return o(e,[{key:"attemptAuth",value:function(){var e,t=this;this.attemptAuthDeferred=(0,p.defer)();var r=this.attemptAuthDeferred.promise;if(null!==(e=this.data)&&void 0!==e&&e.flows)this.startNextAuthStage();else{var n;null===(n=this.busyChangedCallback)||void 0===n||n.call(this,!0);var i=null;this.data.session&&(i={session:this.data.session}),this.doRequest(i).finally((function(){var e;null===(e=t.busyChangedCallback)||void 0===e||e.call(t,!1)}))}return r}},{key:"poll",value:function(){var e=i(f().mark((function e(){var t,r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data.session){e.next=2;break}return e.abrupt("return");case 2:if(this.attemptAuthDeferred){e.next=4;break}return e.abrupt("return");case 4:if(!this.submitPromise){e.next=6;break}return e.abrupt("return");case 6:if(t={},"m.login.email.identity"!=this.currentStage){e.next=16;break}if(!this.emailSid){e.next=16;break}return r={sid:this.emailSid,client_secret:this.clientSecret},e.next=12,this.sendingNetworkClient.doesServerRequireIdServerParam();case 12:if(!e.sent){e.next=15;break}n=new URL(this.sendingNetworkClient.getIdentityServerUrl()),r.id_server=n.host;case 15:t={type:"m.login.email.identity",threepid_creds:r,threepidCreds:r};case 16:this.submitAuthDict(t,!0);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSessionId",value:function(){return this.data?this.data.session:void 0}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getStageParams",value:function(e){var t;return null===(t=this.data.params)||void 0===t?void 0:t[e]}},{key:"getChosenFlow",value:function(){return this.chosenFlow}},{key:"submitAuthDict",value:function(){var e=i(f().mark((function e(t){var r,n,i,o,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],this.attemptAuthDeferred){e.next=3;break}throw new Error("submitAuthDict() called before attemptAuth()");case 3:r||null===(n=this.busyChangedCallback)||void 0===n||n.call(this,!0);case 4:if(!this.submitPromise){e.next=14;break}return e.prev=5,e.next=8,this.submitPromise;case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:e.next=4;break;case 14:return this.data.session?(i={session:this.data.session},p.extend(i,t)):i=t,e.prev=15,this.submitPromise=this.doRequest(i,r),e.next=19,this.submitPromise;case 19:return e.prev=19,this.submitPromise=null,r||null===(o=this.busyChangedCallback)||void 0===o||o.call(this,!1),e.finish(19);case 23:case"end":return e.stop()}}),e,this,[[5,10],[15,,19,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmailSid",value:function(){return this.emailSid}},{key:"setEmailSid",value:function(e){this.emailSid=e}},{key:"doRequest",value:function(){var e=i(f().mark((function e(t){var r,n,i,o,a,s,u,c,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],e.prev=1,e.next=4,this.requestCallback(t,r);case 4:n=e.sent,this.attemptAuthDeferred.resolve(n),this.attemptAuthDeferred=null,e.next=33;break;case 9:e.prev=9,e.t0=e.catch(1),a=null!==(i=null===(o=e.t0.data)||void 0===o?void 0:o.flows)&&void 0!==i?i:null,s=this.data.flows||Boolean(a),401===e.t0.httpStatus&&e.t0.data&&s||(r?v.logger.log("Background poll request failed doing UI auth: ignoring",e.t0):null===(u=this.attemptAuthDeferred)||void 0===u||u.reject(e.t0)),e.t0.data.flows||e.t0.data.completed||e.t0.data.session||(e.t0.data.flows=this.data.flows,e.t0.data.completed=this.data.completed,e.t0.data.session=this.data.session),this.data=e.t0.data;try{this.startNextAuthStage()}catch(f){this.attemptAuthDeferred.reject(f),this.attemptAuthDeferred=null}if(this.emailSid||this.requestingEmailToken||!this.chosenFlow.stages.includes(g.Email)){e.next=33;break}return this.requestingEmailToken=!0,e.prev=19,e.next=22,this.requestEmailTokenCallback(this.inputs.emailAddress,this.clientSecret,1,this.data.session);case 22:c=e.sent,this.emailSid=c.sid,e.next=30;break;case 26:e.prev=26,e.t1=e.catch(19),this.attemptAuthDeferred.reject(e.t1),this.attemptAuthDeferred=null;case 30:return e.prev=30,this.requestingEmailToken=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[1,9],[19,26,30,33]])})));return function(t){return e.apply(this,arguments)}}()},{key:"startNextAuthStage",value:function(){var e=this.chooseStage();if(!e)throw new Error("No incomplete flows from the server");if(this.currentStage=e,e!==g.Dummy)if(this.data&&this.data.errcode||this.data.error)this.stateUpdatedCallback(e,{errcode:this.data.errcode||"",error:this.data.error||""});else{var t={};"m.login.email.identity"==e&&(t.emailSid=this.emailSid),this.stateUpdatedCallback(e,t)}else this.submitAuthDict({type:"m.login.dummy"})}},{key:"chooseStage",value:function(){null===this.chosenFlow&&(this.chosenFlow=this.chooseFlow()),v.logger.log("Active flow => %s",JSON.stringify(this.chosenFlow));var e=this.firstUncompletedStage(this.chosenFlow);return v.logger.log("Next stage: %s",e),e}},{key:"chooseFlow",value:function(){var e,t=this.data.flows||[],r=Boolean(this.inputs.emailAddress)||Boolean(this.emailSid),i=Boolean(this.inputs.phoneCountry)&&Boolean(this.inputs.phoneNumber),o=n(t);try{for(o.s();!(e=o.n()).done;){var a,s=e.value,u=!1,c=!1,l=n(s.stages);try{for(l.s();!(a=l.n()).done;){var f=a.value;"m.login.email.identity"===f?u=!0:"m.login.msisdn"==f&&(c=!0)}}catch(d){l.e(d)}finally{l.f()}if(u==r&&c==i)return s}}catch(d){o.e(d)}finally{o.f()}var h=[];throw r&&h.push("m.login.email.identity"),i&&h.push("m.login.msisdn"),new m("No appropriate authentication flow found",h,t)}},{key:"firstUncompletedStage",value:function(e){for(var t=this.data.completed||[],r=0;r<e.stages.length;++r){var n=e.stages[r];if(-1===t.indexOf(n))return n}}}]),e}();t.InteractiveAuth=b},function(e,t,r){"use strict";var n=r(9),i=r(20),o=r(12),a=r(1),s=r(2),u=r(16),c=r(14),l=r(15),f=r(127),h=r(48);function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f={};function h(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=h.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var p=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBStore=void 0;var v=p(r(4)),y=r(17),g=r(122),m=r(282),b=r(283),w=r(49),k=r(25),S=r(8),E=function(e){c(r,e);var t=l(r);function r(e){var n,i,s,c,l,d;if(a(this,r),d=t.call(this,e),(0,v.default)(u(d),"backend",void 0),(0,v.default)(u(d),"startedUp",!1),(0,v.default)(u(d),"syncTs",0),(0,v.default)(u(d),"userModifiedMap",{}),(0,v.default)(u(d),"emitter",new y.EventEmitter),(0,v.default)(u(d),"on",d.emitter.on.bind(d.emitter)),(0,v.default)(u(d),"getSavedSync",d.degradable((function(){return d.backend.getSavedSync()}),"getSavedSync")),(0,v.default)(u(d),"isNewlyCreated",d.degradable((function(){return d.backend.isNewlyCreated()}),"isNewlyCreated")),(0,v.default)(u(d),"getSavedSyncToken",d.degradable((function(){return d.backend.getNextBatchToken()}),"getSavedSyncToken")),(0,v.default)(u(d),"deleteAllData",d.degradable((function(){return f((n=u(d),h(r.prototype)),"deleteAllData",n).call(n),d.backend.clearDatabase().then((function(){S.logger.log("Deleted indexeddb data.")}),(function(e){throw S.logger.error("Failed to delete indexeddb data: ".concat(e)),e}))}))),(0,v.default)(u(d),"reallySave",d.degradable((function(){d.syncTs=Date.now();var e,t=[],r=o(d.getUsers());try{for(r.s();!(e=r.n()).done;){var n=e.value;d.userModifiedMap[n.userId]!==n.getLastModifiedTime()&&(n.events.presence&&(t.push([n.userId,n.events.presence.event]),d.userModifiedMap[n.userId]=n.getLastModifiedTime()))}}catch(i){r.e(i)}finally{r.f()}return d.backend.syncToDatabase(t)}))),(0,v.default)(u(d),"setSyncData",d.degradable((function(e){return d.backend.setSyncData(e)}),"setSyncData")),(0,v.default)(u(d),"getOutOfBandMembers",d.degradable((function(e){return d.backend.getOutOfBandMembers(e)}),"getOutOfBandMembers")),(0,v.default)(u(d),"setOutOfBandMembers",d.degradable((function(e,t){return f((i=u(d),h(r.prototype)),"setOutOfBandMembers",i).call(i,e,t),d.backend.setOutOfBandMembers(e,t)}),"setOutOfBandMembers")),(0,v.default)(u(d),"clearOutOfBandMembers",d.degradable((function(e){return f((s=u(d),h(r.prototype)),"clearOutOfBandMembers",s).call(s,e),d.backend.clearOutOfBandMembers(e)}),"clearOutOfBandMembers")),(0,v.default)(u(d),"getClientOptions",d.degradable((function(){return d.backend.getClientOptions()}),"getClientOptions")),(0,v.default)(u(d),"storeClientOptions",d.degradable((function(e){return f((c=u(d),h(r.prototype)),"storeClientOptions",c).call(c,e),d.backend.storeClientOptions(e)}),"storeClientOptions")),(0,v.default)(u(d),"getAssets",d.degradable((function(){return d.backend.getAssets()}),"getAssets")),(0,v.default)(u(d),"storeAssets",d.degradable((function(e){return f((l=u(d),h(r.prototype)),"storeAssets",l).call(l,e),d.backend.storeAssets(e)}),"storeAssets")),!e.indexedDB)throw new Error("Missing required option: indexedDB");return e.workerFactory?d.backend=new b.RemoteIndexedDBStoreBackend(e.workerFactory,e.dbName):d.backend=new m.LocalIndexedDBStoreBackend(e.indexedDB,e.dbName),d}return s(r,[{key:"startup",value:function(){var e=this;return this.startedUp?(S.logger.log("IndexedDBStore.startup: already started"),Promise.resolve()):(S.logger.log("IndexedDBStore.startup: connecting to backend"),this.backend.connect().then((function(){return S.logger.log("IndexedDBStore.startup: loading presence events"),e.backend.getUserPresenceEvents()})).then((function(t){S.logger.log("IndexedDBStore.startup: processing presence events"),t.forEach((function(t){var r=i(t,2),n=r[0],o=r[1],a=new w.User(n);o&&a.setPresenceEvent(new k.SendingNetworkEvent(o)),e.userModifiedMap[a.userId]=a.getLastModifiedTime(),e.storeUser(a)}))})))}},{key:"wantsSave",value:function(){return Date.now()-this.syncTs>3e5}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.wantsSave()?this.reallySave():Promise.resolve()}},{key:"degradable",value:function(e,t){var i=this,o=f(h(r.prototype),t,this);return n(d().mark((function t(){var r,n,a,s=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=s.length,n=new Array(r),a=0;a<r;a++)n[a]=s[a];return t.prev=1,t.abrupt("return",e.call.apply(e,[i].concat(n)));case 5:return t.prev=5,t.t0=t.catch(1),S.logger.error("IndexedDBStore failure, degrading to MemoryStore",t.t0),i.emitter.emit("degraded",t.t0),t.prev=9,S.logger.log("IndexedDBStore trying to delete degraded data"),t.next=13,i.backend.clearDatabase();case 13:S.logger.log("IndexedDBStore delete after degrading succeeded"),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(9),S.logger.warn("IndexedDBStore delete after degrading failed",t.t1);case 19:if(!o){t.next=21;break}return t.abrupt("return",o.apply(void 0,n));case 21:case"end":return t.stop()}}),t,null,[[1,5],[9,16]])})))}}],[{key:"exists",value:function(e,t){return m.LocalIndexedDBStoreBackend.exists(e,t)}}]),r}(g.MemoryStore);t.IndexedDBStore=E},function(e,t,r){"use strict";var n=r(12),i=r(9),o=r(20),a=r(1),s=r(2);function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new T(i||[]);return n(a,"_invoke",{value:S(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t((function(i,a){!function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return M()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}var c=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.LocalIndexedDBStoreBackend=void 0;var l=c(r(4)),f=r(80),h=y(r(19)),d=y(r(133)),p=r(8);function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function g(e,t,r){var n=e.openCursor(t);return new Promise((function(e,t){var i=[];n.onerror=function(){t(new Error("Query failed: "+n.error))},n.onsuccess=function(){var t=n.result;t?(i.push(r(t)),t.continue()):e(i)}}))}function m(e){return new Promise((function(t,r){e.oncomplete=function(e){t(e)},e.onerror=function(){r(e.error)}}))}function b(e){return new Promise((function(t,r){e.onsuccess=function(e){t(e)},e.onerror=function(){r(e.error)}}))}function w(e){return new Promise((function(t,r){e.onsuccess=function(){return t(e)},e.onerror=function(e){return r(e)}}))}function k(e){return b(e).then((function(t){return e.result}))}var S=function(){function e(t,r){a(this,e),this.indexedDB=t,(0,l.default)(this,"dbName",void 0),(0,l.default)(this,"syncAccumulator",void 0),(0,l.default)(this,"db",null),(0,l.default)(this,"disconnected",!0),(0,l.default)(this,"_isNewlyCreated",!1),this.dbName="sendingnetwork-js-sdk:"+(r||"default"),this.syncAccumulator=new f.SyncAccumulator}return s(e,[{key:"connect",value:function(){var e=this;if(!this.disconnected)return p.logger.log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),Promise.resolve();this.disconnected=!1,p.logger.log("LocalIndexedDBStoreBackend.connect: connecting...");var t=this.indexedDB.open(this.dbName,4);return t.onupgradeneeded=function(r){var n=t.result,i=r.oldVersion;p.logger.log("LocalIndexedDBStoreBackend.connect: upgrading from ".concat(i)),i<1&&(e._isNewlyCreated=!0,function(e){e.createObjectStore("users",{keyPath:["userId"]}),e.createObjectStore("accountData",{keyPath:["type"]}),e.createObjectStore("sync",{keyPath:["clobber"]})}(n)),i<2&&function(e){e.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]}).createIndex("room","room_id")}(n),i<3&&function(e){e.createObjectStore("client_options",{keyPath:["clobber"]})}(n),i<4&&function(e){e.createObjectStore("assets",{keyPath:["clobber"]})}(n)},t.onblocked=function(){p.logger.log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},p.logger.log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),b(t).then((function(){return p.logger.log("LocalIndexedDBStoreBackend.connect: connected"),e.db=t.result,e.db.onversionchange=function(){e.db.close()},e.init()}))}},{key:"isNewlyCreated",value:function(){return Promise.resolve(this._isNewlyCreated)}},{key:"init",value:function(){var e=this;return Promise.all([this.loadAccountData(),this.loadSyncData()]).then((function(t){var r=o(t,2),n=r[0],i=r[1];p.logger.log("LocalIndexedDBStoreBackend: loaded initial data"),e.syncAccumulator.accumulate({next_batch:i.nextBatch,rooms:i.roomsData,groups:i.groupsData,account_data:{events:n}},!0)}))}},{key:"getOutOfBandMembers",value:function(e){var t=this;return new Promise((function(r,n){var i=t.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),o=IDBKeyRange.only(e),a=i.openCursor(o),s=[],u=!1;a.onsuccess=function(){var e=a.result;if(!e)return s.length||u?r(s):r(null);var t=e.value;t.oob_written?u=!0:s.push(t),e.continue()},a.onerror=function(e){n(e)}})).then((function(t){return p.logger.log("LL: got ".concat(t&&t.length," membershipEvents from storage for room ").concat(e," ...")),t}))}},{key:"setOutOfBandMembers",value:function(){var e=i(u().mark((function e(t,r){var n,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.logger.log("LL: backend about to store ".concat(r.length)+" members for ".concat(t)),n=this.db.transaction(["oob_membership_events"],"readwrite"),i=n.objectStore("oob_membership_events"),r.forEach((function(e){i.put(e)})),o={room_id:t,oob_written:!0,state_key:0},i.put(o),e.next=8,m(n);case 8:p.logger.log("LL: backend done storing for ".concat(t,"!"));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"clearOutOfBandMembers",value:function(){var e=i(u().mark((function e(t){var r,n,i,a,s,c,l,f,h,d,v,y,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.db.transaction(["oob_membership_events"],"readonly"),n=r.objectStore("oob_membership_events"),i=n.index("room"),a=IDBKeyRange.only(t),s=k(i.openKeyCursor(a,"next")).then((function(e){return e&&e.primaryKey[1]})),c=k(i.openKeyCursor(a,"prev")).then((function(e){return e&&e.primaryKey[1]})),e.next=8,Promise.all([s,c]);case 8:return l=e.sent,f=o(l,2),h=f[0],d=f[1],v=this.db.transaction(["oob_membership_events"],"readwrite"),y=v.objectStore("oob_membership_events"),g=IDBKeyRange.bound([t,h],[t,d]),p.logger.log("LL: Deleting all users + marker in storage for room ".concat(t,", with key range:"),[t,h],[t,d]),e.next=18,w(y.delete(g));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearDatabase",value:function(){var e=this;return new Promise((function(t){p.logger.log("Removing indexeddb instance: ".concat(e.dbName));var r=e.indexedDB.deleteDatabase(e.dbName);r.onblocked=function(){p.logger.log("can't yet delete indexeddb ".concat(e.dbName," because it is open elsewhere"))},r.onerror=function(){p.logger.warn("unable to delete js-sdk store indexeddb: ".concat(r.error)),t()},r.onsuccess=function(){p.logger.log("Removed indexeddb instance: ".concat(e.dbName)),t()}}))}},{key:"getSavedSync",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.syncAccumulator.getJSON();return t.nextBatch?e?Promise.resolve(h.deepCopy(t)):Promise.resolve(t):Promise.resolve(null)}},{key:"getNextBatchToken",value:function(){return Promise.resolve(this.syncAccumulator.getNextBatchToken())}},{key:"setSyncData",value:function(e){var t=this;return Promise.resolve().then((function(){t.syncAccumulator.accumulate(e)}))}},{key:"syncToDatabase",value:function(){var e=i(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.syncAccumulator.getJSON(!0),e.next=3,Promise.all([this.persistUserPresenceEvents(t),this.persistAccountData(r.accountData),this.persistSyncData(r.nextBatch,r.roomsData,r.groupsData)]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"persistSyncData",value:function(e,t,r){var n=this;return p.logger.log("Persisting sync data up to",e),h.promiseTry((function(){var i=n.db.transaction(["sync"],"readwrite");return i.objectStore("sync").put({clobber:"-",nextBatch:e,roomsData:t,groupsData:r}),m(i).then()}))}},{key:"persistAccountData",value:function(e){var t=this;return h.promiseTry((function(){for(var r=t.db.transaction(["accountData"],"readwrite"),n=r.objectStore("accountData"),i=0;i<e.length;i++)n.put(e[i]);return m(r).then()}))}},{key:"persistUserPresenceEvents",value:function(e){var t=this;return h.promiseTry((function(){var r,i=t.db.transaction(["users"],"readwrite"),o=i.objectStore("users"),a=n(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;o.put({userId:s[0],event:s[1]})}}catch(u){a.e(u)}finally{a.f()}return m(i).then()}))}},{key:"getUserPresenceEvents",value:function(){var e=this;return h.promiseTry((function(){return g(e.db.transaction(["users"],"readonly").objectStore("users"),void 0,(function(e){return[e.value.userId,e.value.event]}))}))}},{key:"loadAccountData",value:function(){var e=this;return p.logger.log("LocalIndexedDBStoreBackend: loading account data..."),h.promiseTry((function(){return g(e.db.transaction(["accountData"],"readonly").objectStore("accountData"),void 0,(function(e){return e.value})).then((function(e){return p.logger.log("LocalIndexedDBStoreBackend: loaded account data"),e}))}))}},{key:"loadSyncData",value:function(){var e=this;return p.logger.log("LocalIndexedDBStoreBackend: loading sync data..."),h.promiseTry((function(){return g(e.db.transaction(["sync"],"readonly").objectStore("sync"),void 0,(function(e){return e.value})).then((function(e){return p.logger.log("LocalIndexedDBStoreBackend: loaded sync data"),e.length>1&&p.logger.warn("loadSyncData: More than 1 sync row found."),e.length>0?e[0]:{}}))}))}},{key:"getClientOptions",value:function(){var e=this;return Promise.resolve().then((function(){return g(e.db.transaction(["client_options"],"readonly").objectStore("client_options"),void 0,(function(e){if(e.value&&e.value&&e.value.options)return e.value.options})).then((function(e){return e[0]}))}))}},{key:"storeClientOptions",value:function(){var e=i(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.db.transaction(["client_options"],"readwrite"),r.objectStore("client_options").put({clobber:"-",options:t}),e.next=5,m(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssets",value:function(){var e=this;return Promise.resolve().then((function(){return g(e.db.transaction(["assets"],"readonly").objectStore("assets"),void 0,(function(e){if(e.value&&e.value&&e.value.assets)return e.value.assets})).then((function(e){return e[0]}))}))}},{key:"storeAssets",value:function(){var e=i(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.db.transaction(["assets"],"readwrite"),r.objectStore("assets").put({clobber:"-",assets:t}),e.next=5,m(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"exists",value:function(e,t){return t="sendingnetwork-js-sdk:"+(t||"default"),d.exists(e,t)}}]),e}();t.LocalIndexedDBStoreBackend=S},function(e,t,r){"use strict";var n=r(1),i=r(2),o=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteIndexedDBStoreBackend=void 0;var a=o(r(4)),s=r(8),u=r(19),c=function(){function e(t,r){var i=this;n(this,e),this.workerFactory=t,this.dbName=r,(0,a.default)(this,"worker",void 0),(0,a.default)(this,"nextSeq",0),(0,a.default)(this,"inFlight",{}),(0,a.default)(this,"startPromise",null),(0,a.default)(this,"onWorkerMessage",(function(e){var t=e.data;if("cmd_success"==t.command||"cmd_fail"==t.command){if(void 0===t.seq)return void s.logger.error("Got reply from worker with no seq");var r=i.inFlight[t.seq];if(void 0===r)return void s.logger.error("Got reply for unknown seq "+t.seq);if(delete i.inFlight[t.seq],"cmd_success"==t.command)r.resolve(t.result);else{var n=new Error(t.error.message);n.name=t.error.name,r.reject(n)}}else s.logger.warn("Unrecognised message from worker: ",t)}))}return i(e,[{key:"connect",value:function(){var e=this;return this.ensureStarted().then((function(){return e.doCmd("connect")}))}},{key:"clearDatabase",value:function(){var e=this;return this.ensureStarted().then((function(){return e.doCmd("clearDatabase")}))}},{key:"isNewlyCreated",value:function(){return this.doCmd("isNewlyCreated")}},{key:"getSavedSync",value:function(){return this.doCmd("getSavedSync")}},{key:"getNextBatchToken",value:function(){return this.doCmd("getNextBatchToken")}},{key:"setSyncData",value:function(e){return this.doCmd("setSyncData",[e])}},{key:"syncToDatabase",value:function(e){return this.doCmd("syncToDatabase",[e])}},{key:"getOutOfBandMembers",value:function(e){return this.doCmd("getOutOfBandMembers",[e])}},{key:"setOutOfBandMembers",value:function(e,t){return this.doCmd("setOutOfBandMembers",[e,t])}},{key:"clearOutOfBandMembers",value:function(e){return this.doCmd("clearOutOfBandMembers",[e])}},{key:"getClientOptions",value:function(){return this.doCmd("getClientOptions")}},{key:"storeClientOptions",value:function(e){return this.doCmd("storeClientOptions",[e])}},{key:"getAssets",value:function(){return this.doCmd("getAssets")}},{key:"storeAssets",value:function(e){return this.doCmd("storeAssets",[e])}},{key:"getUserPresenceEvents",value:function(){return this.doCmd("getUserPresenceEvents")}},{key:"ensureStarted",value:function(){return null===this.startPromise&&(this.worker=this.workerFactory(),this.worker.onmessage=this.onWorkerMessage,this.startPromise=this.doCmd("_setupWorker",[this.dbName]).then((function(){s.logger.log("IndexedDB worker is ready")}))),this.startPromise}},{key:"doCmd",value:function(e,t){var r=this;return Promise.resolve().then((function(){var n=r.nextSeq++,i=(0,u.defer)();return r.inFlight[n]=i,r.worker.postMessage({command:e,seq:n,args:t}),i.promise}))}}]),e}();t.RemoteIndexedDBStoreBackend=c},function(e,t,r){"use strict";var n=r(12);Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageSessionStore=s;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(19));r(8);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var a="session.e2e.";function s(e){if(this.store=e,!i.isFunction(e.getItem)||!i.isFunction(e.setItem)||!i.isFunction(e.removeItem)||!i.isFunction(e.key)||"number"!==typeof e.length)throw new Error("Supplied webStore does not meet the WebStorage API interface")}s.prototype={removeEndToEndAccount:function(){this.store.removeItem(u)},getEndToEndAccount:function(){return this.store.getItem(u)},getAllEndToEndDevices:function(){for(var e=h(""),t={},r=0;r<this.store.length;++r){var n=this.store.key(r),i=n.substr(e.length);n.startsWith(e)&&(t[i]=v(this.store,n))}return t},getEndToEndDeviceTrackingStatus:function(){return v(this.store,l)},getEndToEndDeviceSyncToken:function(){return v(this.store,c)},removeEndToEndDeviceData:function(){g(this.store,h("")),g(this.store,l),g(this.store,c)},getEndToEndSessions:function(e){return v(this.store,d(e))},getAllEndToEndSessions:function(){var e,t=y(this.store,d("")),r={},i=n(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r[o.substr(d("").length)]=v(this.store,o)}}catch(a){i.e(a)}finally{i.f()}return r},removeAllEndToEndSessions:function(){g(this.store,d(""))},getAllEndToEndInboundGroupSessionKeys:function(){for(var e=a+"inboundgroupsessions/",t=[],r=0;r<this.store.length;r++){var n=this.store.key(r);n.startsWith(e)&&t.push({senderKey:n.substr(e.length,43),sessionId:n.substr(e.length+44)})}return t},getEndToEndInboundGroupSession:function(e,t){var r=function(e,t){return a+"inboundgroupsessions/"+e+"/"+t}(e,t);return this.store.getItem(r)},removeAllEndToEndInboundGroupSessions:function(){g(this.store,a+"inboundgroupsessions/")},getAllEndToEndRooms:function(){var e,t=y(this.store,p("")),r={},i=n(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r[o.substr(p("").length)]=v(this.store,o)}}catch(a){i.e(a)}finally{i.f()}return r},removeAllEndToEndRooms:function(){g(this.store,p(""))},setLocalTrustedBackupPubKey:function(e){this.store.setItem(f,e)},getLocalTrustedBackupPubKey:function(){return this.store.getItem(f)}};var u=a+"account",c=a+"device_sync_token",l=a+"device_tracking",f=a+"trusted_backup_pubkey";function h(e){return a+"devices/"+e}function d(e){return a+"sessions/"+e}function p(e){return a+"rooms/"+e}function v(e,t){try{return JSON.parse(e.getItem(t))}catch(r){m("Failed to get key %s: %s",t,r),m(r.stack)}return null}function y(e,t){for(var r=[],n=0;n<e.length;++n){var i=e.key(n);i.startsWith(t)&&r.push(i)}return r}function g(e,t){for(var r=[],n=0;n<e.length;++n){var i=e.key(n);i.startsWith(t)&&r.push(i)}for(var o=0,a=r;o<a.length;o++){var s=a[o];e.removeItem(s)}}function m(){}},function(e,t,r){var n,i,o;i=[],void 0===(o="function"===typeof(n=function(){var e=XMLHttpRequest;if(!e)throw new Error("missing XMLHttpRequest");function t(o,a){if("function"!==typeof a)throw new Error("Bad callback given: "+a);if(!o)throw new Error("No options given");var s=o.onResponse;if((o="string"===typeof o?{uri:o}:JSON.parse(JSON.stringify(o))).onResponse=s,o.verbose&&(t.log=function(){var e,t,r={},o=["trace","debug","info","warn","error"];for(t=0;t<o.length;t++)r[e=o[t]]=n,"undefined"!==typeof console&&console&&console[e]&&(r[e]=i(console,e));return r}()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(o[u[c]])throw new Error("options."+u[c]+" is not supported");if(o.callback=a,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||t.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!==typeof o.json?o.body=JSON.stringify(o.json):"string"!==typeof o.body&&(o.body=JSON.stringify(o.body)));var l=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")};if(o.qs){var f="string"==typeof o.qs?o.qs:l(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&"+f:o.uri=o.uri+"?"+f}if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var h=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=h,h){case"application/x-www-form-urlencoded":o.body=l(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var d=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+n+'"\n\n'+e[n]+"\n");return r.push("--"+t.boundry+"--"),t.body=r.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t}(o.form);o.body=d.body,o.headers["content-type"]=d.type;break;default:throw new Error("unsupported encoding:"+h)}}}return o.onResponse=o.onResponse||n,!0===o.onResponse&&(o.onResponse=a,o.callback=n),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+function(e){var t,r,n,i,o,a,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,h="",d=[];if(!e)return e;do{t=e.charCodeAt(l++),r=e.charCodeAt(l++),n=e.charCodeAt(l++),i=(u=t<<16|r<<8|n)>>18&63,o=u>>12&63,a=u>>6&63,s=63&u,d[f++]=c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s)}while(l<e.length);switch(h=d.join(""),e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}(o.auth.username+":"+o.auth.password)),function(n){var i=new e,o=!1,a=function(e){var t,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(o){(t=document.createElement("a")).href="",t=t.href}var n=r.exec(t.toLowerCase())||[],i=r.exec(e.toLowerCase());return!(!i||i[1]==n[1]&&i[2]==n[2]&&(i[3]||("http:"===i[1]?80:443))==(n[3]||("http:"===n[1]?80:443)))}(n.uri),s="withCredentials"in i;if(r+=1,i.seq_id=r,i.id=r+": "+n.method+" "+n.uri,i._id=i.id,a&&!s){var u=new Error("Browser does not support cross-origin request: "+n.uri);return u.cors="unsupported",n.callback(u,i)}i.timeoutTimer=setTimeout((function(){o=!0;var e=new Error("ETIMEDOUT");return e.code="ETIMEDOUT",e.duration=n.timeout,t.log.error("Timeout",{id:i._id,milliseconds:n.timeout}),n.callback(e,i)}),n.timeout);var c={response:!1,loading:!1,end:!1};return i.onreadystatechange=function(r){if(o)return t.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});if(t.log.debug("State change",{state:i.readyState,id:i.id,timed_out:o}),i.readyState===e.OPENED)for(var a in t.log.debug("Request started",{id:i.id}),n.headers)i.setRequestHeader(a,n.headers[a]);else i.readyState===e.HEADERS_RECEIVED?l():i.readyState===e.LOADING?(l(),f()):i.readyState===e.DONE&&(l(),f(),function(){if(c.end)return;if(c.end=!0,t.log.debug("Request done",{id:i.id}),i.body=i.responseText,n.json)try{i.body=JSON.parse(i.responseText)}catch(e){return n.callback(e,i)}n.callback(null,i,i.body)}())},i.open(n.method,n.uri,!0),a&&(i.withCredentials=!!n.withCredentials),i.send(n.body),i;function l(){if(!c.response){if(c.response=!0,t.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,a&&0==i.statusCode){var e=new Error("CORS request rejected: "+n.uri);return e.cors="rejected",c.loading=!0,c.end=!0,n.callback(e,i)}n.onResponse(null,i)}}function f(){c.loading||(c.loading=!0,t.log.debug("Response body loading",{id:i.id}))}}(o)}t.log={trace:n,debug:n,info:n,warn:n,error:n};var r=0;function n(){}function i(e,t){return function(r,n){return"object"===typeof n&&(r+=" "+JSON.stringify(n)),e[t].call(e,r)}}return t.withCredentials=!1,t.DEFAULT_TIMEOUT=18e4,t.defaults=function(e,r){var n=function(t){return function(r,n){for(var i in r="string"===typeof r?{uri:r}:JSON.parse(JSON.stringify(r)),e)void 0===r[i]&&(r[i]=e[i]);return t(r,n)}},i=n(t);return i.get=n(t.get),i.post=n(t.post),i.put=n(t.put),i.head=n(t.head),i},["get","put","post","head"].forEach((function(e){var r=e.toUpperCase();t[e.toLowerCase()]=function(e){"string"===typeof e?e={method:r,uri:e}:(e=JSON.parse(JSON.stringify(e))).method=r;var n=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,n)}})),t.couch=function(e,r){return"string"===typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,r=r||n,t(e,(function(e,t,n){if(e)return r(e,t,n);if((t.statusCode<200||t.statusCode>299)&&n.error){for(var i in e=new Error("CouchDB error: "+(n.error.reason||n.error.error)),n)e[i]=n[i];return r(e,t,n)}return r(e,t,n)}))},t})?n.apply(t,i):n)||(e.exports=o)},function(e,t,r){"use strict";var n=r(287),i=r(297),o=r(90);e.exports={formats:o,parse:i,stringify:n}},function(e,t,r){"use strict";var n=r(288),i=r(142),o=r(90),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=String.prototype.split,l=Array.prototype.push,f=function(e,t){l.apply(e,u(t)?t:[t])},h=Date.prototype.toISOString,d=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},v={},y=function e(t,r,o,a,s,l,h,d,y,g,m,b,w,k,S,E){for(var x,_=t,T=E,O=0,M=!1;void 0!==(T=T.get(v))&&!M;){var P=T.get(t);if(O+=1,"undefined"!==typeof P){if(P===O)throw new RangeError("Cyclic object value");M=!0}"undefined"===typeof T.get(v)&&(O=0)}if("function"===typeof d?_=d(r,_):_ instanceof Date?_=m(_):"comma"===o&&u(_)&&(_=i.maybeMap(_,(function(e){return e instanceof Date?m(e):e}))),null===_){if(s)return h&&!k?h(r,p.encoder,S,"key",b):r;_=""}if("string"===typeof(x=_)||"number"===typeof x||"boolean"===typeof x||"symbol"===typeof x||"bigint"===typeof x||i.isBuffer(_)){if(h){var R=k?r:h(r,p.encoder,S,"key",b);if("comma"===o&&k){for(var I=c.call(String(_),","),L="",C=0;C<I.length;++C)L+=(0===C?"":",")+w(h(I[C],p.encoder,S,"value",b));return[w(R)+(a&&u(_)&&1===I.length?"[]":"")+"="+L]}return[w(R)+"="+w(h(_,p.encoder,S,"value",b))]}return[w(r)+"="+w(String(_))]}var A,j=[];if("undefined"===typeof _)return j;if("comma"===o&&u(_))A=[{value:_.length>0?_.join(",")||null:void 0}];else if(u(d))A=d;else{var D=Object.keys(_);A=y?D.sort(y):D}for(var N=a&&u(_)&&1===_.length?r+"[]":r,U=0;U<A.length;++U){var B=A[U],F="object"===typeof B&&"undefined"!==typeof B.value?B.value:_[B];if(!l||null!==F){var q=u(_)?"function"===typeof o?o(N,B):N:N+(g?"."+B:"["+B+"]");E.set(t,O);var K=n();K.set(v,E),f(j,e(F,q,o,a,s,l,h,d,y,g,m,b,w,k,S,K))}}return j};e.exports=function(e,t){var r,i=e,c=function(e){if(!e)return p;if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if("undefined"!==typeof e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=p.filter;return("function"===typeof e.filter||u(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?p.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:p.encode,encoder:"function"===typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):u(c.filter)&&(r=c.filter);var l,h=[];if("object"!==typeof i||null===i)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=s[l];if(t&&"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v="comma"===d&&t&&t.commaRoundTrip;r||(r=Object.keys(i)),c.sort&&r.sort(c.sort);for(var g=n(),m=0;m<r.length;++m){var b=r[m];c.skipNulls&&null===i[b]||f(h,y(i[b],b,d,v,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var w=h.join(c.delimiter),k=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),w.length>0?k+w:""}},function(e,t,r){"use strict";var n=r(88),i=r(293),o=r(295),a=n("%TypeError%"),s=n("%WeakMap%",!0),u=n("%Map%",!0),c=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),h=i("Map.prototype.get",!0),d=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),v=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+o(e))},get:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return c(e,n)}else if(u){if(t)return h(t,n)}else if(r)return function(e,t){var r=v(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return f(e,n)}else if(u){if(t)return p(t,n)}else if(r)return function(e,t){return!!v(e,t)}(r,n);return!1},set:function(n,i){s&&n&&("object"===typeof n||"function"===typeof n)?(e||(e=new s),l(e,n,i)):u?(t||(t=new u),d(t,n,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=v(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,i))}};return n}},function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(290);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},function(e,t,r){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!==typeof t||"[object Function]"!==o.call(t))throw new TypeError(n+t);for(var r,a=i.call(arguments,1),s=function(){if(this instanceof r){var n=t.apply(this,a.concat(i.call(arguments)));return Object(n)===n?n:this}return t.apply(e,a.concat(i.call(arguments)))},u=Math.max(0,t.length-a.length),c=[],l=0;l<u;l++)c.push("$"+l);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var f=function(){};f.prototype=t.prototype,r.prototype=new f,f.prototype=null}return r}},function(e,t,r){"use strict";var n=r(89);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,r){"use strict";var n=r(88),i=r(294),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&o(e,".prototype.")>-1?i(r):r}},function(e,t,r){"use strict";var n=r(89),i=r(88),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||n.call(a,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(h){c=null}e.exports=function(e){var t=s(n,a,arguments);if(u&&c){var r=u(t,"length");r.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var f=function(){return s(n,o,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f},function(e,t,r){var n="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"===typeof i.get?i.get:null,a=n&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"===typeof u.get?u.get:null,l=s&&Set.prototype.forEach,f="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,v=Object.prototype.toString,y=Function.prototype.toString,g=String.prototype.match,m=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,k=String.prototype.toLowerCase,S=RegExp.prototype.test,E=Array.prototype.concat,x=Array.prototype.join,_=Array.prototype.slice,T=Math.floor,O="function"===typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"===typeof Symbol&&"object"===typeof Symbol.iterator,I="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===R||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,C=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function A(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var n=e<0?-T(-e):T(e);if(n!==e){var i=String(n),o=m.call(t,i.length+1);return b.call(i,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var j=r(296),D=j.custom,N=K(D)?D:null;function U(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function B(e){return b.call(String(e),/"/g,"&quot;")}function F(e){return"[object Array]"===H(e)&&(!I||!("object"===typeof e&&I in e))}function q(e){return"[object RegExp]"===H(e)&&(!I||!("object"===typeof e&&I in e))}function K(e){if(R)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!P)return!1;try{return P.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,n,i){var s=r||{};if(G(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!G(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=s.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return e(m.call(t,0,r.maxStringLength),r)+i}return U(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,W),"single",r)}(t,s);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return v?A(t,w):w}if("bigint"===typeof t){var S=String(t)+"n";return v?A(t,S):S}var T="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof n&&(n=0),n>=T&&T>0&&"object"===typeof t)return F(t)?"[Array]":"[Object]";var M=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;r=x.call(Array(e.indent+1)," ")}return{base:r,prev:x.call(Array(t+1),r)}}(s,n);if("undefined"===typeof i)i=[];else if(V(i,t)>=0)return"[Circular]";function D(t,r,o){if(r&&(i=_.call(i)).push(r),o){var a={depth:s.depth};return G(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,i)}return e(t,s,n+1,i)}if("function"===typeof t&&!q(t)){var z=function(e){if(e.name)return e.name;var t=g.call(y.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),$=Q(t,D);return"[Function"+(z?": "+z:" (anonymous)")+"]"+($.length>0?" { "+x.call($,", ")+" }":"")}if(K(t)){var ee=R?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!==typeof t||R?ee:X(ee)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var te="<"+k.call(String(t.nodeName)),re=t.attributes||[],ne=0;ne<re.length;ne++)te+=" "+re[ne].name+"="+U(B(re[ne].value),"double",s);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+="</"+k.call(String(t.nodeName))+">"}if(F(t)){if(0===t.length)return"[]";var ie=Q(t,D);return M&&!function(e){for(var t=0;t<e.length;t++)if(V(e[t],"\n")>=0)return!1;return!0}(ie)?"["+J(ie,M)+"]":"[ "+x.call(ie,", ")+" ]"}if(function(e){return"[object Error]"===H(e)&&(!I||!("object"===typeof e&&I in e))}(t)){var oe=Q(t,D);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+x.call(oe,", ")+" }":"{ ["+String(t)+"] "+x.call(E.call("[cause]: "+D(t.cause),oe),", ")+" }"}if("object"===typeof t&&u){if(N&&"function"===typeof t[N]&&j)return j(t,{depth:T-n});if("symbol"!==u&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!==typeof e)return!1;try{o.call(e);try{c.call(e)}catch(te){return!0}return e instanceof Map}catch(t){}return!1}(t)){var ae=[];return a.call(t,(function(e,r){ae.push(D(r,t,!0)+" => "+D(e,t))})),Z("Map",o.call(t),ae,M)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{o.call(e)}catch(t){return!0}return e instanceof Set}catch(r){}return!1}(t)){var se=[];return l.call(t,(function(e){se.push(D(e,t))})),Z("Set",c.call(t),se,M)}if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{f.call(e,f);try{h.call(e,h)}catch(te){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return Y("WeakMap");if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{f.call(e,f)}catch(te){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return Y("WeakSet");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{return d.call(e),!0}catch(t){}return!1}(t))return Y("WeakRef");if(function(e){return"[object Number]"===H(e)&&(!I||!("object"===typeof e&&I in e))}(t))return X(D(Number(t)));if(function(e){if(!e||"object"!==typeof e||!O)return!1;try{return O.call(e),!0}catch(t){}return!1}(t))return X(D(O.call(t)));if(function(e){return"[object Boolean]"===H(e)&&(!I||!("object"===typeof e&&I in e))}(t))return X(p.call(t));if(function(e){return"[object String]"===H(e)&&(!I||!("object"===typeof e&&I in e))}(t))return X(D(String(t)));if(!function(e){return"[object Date]"===H(e)&&(!I||!("object"===typeof e&&I in e))}(t)&&!q(t)){var ue=Q(t,D),ce=C?C(t)===Object.prototype:t instanceof Object||t.constructor===Object,le=t instanceof Object?"":"null prototype",fe=!ce&&I&&Object(t)===t&&I in t?m.call(H(t),8,-1):le?"Object":"",he=(ce||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||le?"["+x.call(E.call([],fe||[],le||[]),": ")+"] ":"");return 0===ue.length?he+"{}":M?he+"{"+J(ue,M)+"}":he+"{ "+x.call(ue,", ")+" }"}return String(t)};var z=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return z.call(e,t)}function H(e){return v.call(e)}function V(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function W(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function X(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function Z(e,t,r,n){return e+" ("+t+") {"+(n?J(r,n):x.call(r,", "))+"}"}function J(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+x.call(e,","+r)+"\n"+t.prev}function Q(e,t){var r=F(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=G(e,i)?t(e[i],e):""}var o,a="function"===typeof M?M(e):[];if(R){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in e)G(e,u)&&(r&&String(Number(u))===u&&u<e.length||R&&o["$"+u]instanceof Symbol||(S.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"===typeof M)for(var c=0;c<a.length;c++)L.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}},function(e,t){},function(e,t,r){"use strict";var n=r(142),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(o),c=s?o.slice(0,s.index):o,l=[];if(c){if(!r.plainObjects&&i.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var f=0;r.depth>0&&null!==(s=a.exec(o))&&f<r.depth;){if(f+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+o.slice(s.index)+"]"),function(e,t,r,n){for(var i=n?t:u(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=i:"__proto__"!==c&&(a[c]=i):a={0:i}}i=a}return i}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var l="string"===typeof e?function(e,t){var r,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,h=l.split(t.delimiter,f),d=-1,p=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?p="utf-8":"utf8=%26%2310003%3B"===h[r]&&(p="iso-8859-1"),d=r,r=h.length);for(r=0;r<h.length;++r)if(r!==d){var v,y,g=h[r],m=g.indexOf("]="),b=-1===m?g.indexOf("="):m+1;-1===b?(v=t.decoder(g,a.decoder,p,"key"),y=t.strictNullHandling?null:""):(v=t.decoder(g.slice(0,b),a.decoder,p,"key"),y=n.maybeMap(u(g.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,p,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===p&&(y=s(y)),g.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(c,v)?c[v]=n.combine(c[v],y):c[v]=y}return c}(e,r):e,f=r.plainObjects?Object.create(null):{},h=Object.keys(l),d=0;d<h.length;++d){var p=h[d],v=c(p,l[p],r,"string"===typeof e);f=n.merge(f,v,r)}return!0===r.allowSparse?f:n.compact(f)}},function(e,t,r){(t=e.exports=r(144)).Stream=t,t.Readable=t,t.Writable=r(148),t.Duplex=r(43),t.Transform=r(149),t.PassThrough=r(304),t.finished=r(93),t.pipeline=r(305)},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(18).Buffer,s=r(301).inspect,u=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),c&&o(t,c),e}()},function(e,t){},function(e,t,r){"use strict";(function(t){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(93),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[a]=null,e[s]=null,t(d(r,!1)))}}function v(e){t.nextTick(p,e)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[u]?n(e[u]):r(d(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(void 0,!0)):t[f](r,n)}),n)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(g,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[a]=null,r[s]=null,e(d(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[l]=null,r[a]=null,r[s]=null,t(e)),void(r[u]=e)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(d(void 0,!0))),r[c]=!0})),e.on("readable",v.bind(null,r)),r}}).call(this,r(21))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=i;var n=r(149);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(7)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var i=r(42).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(93)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(l)}},function(e,t,r){var n=r(7),i=r(44),o=r(10).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<30|e>>>2}function l(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=e.readInt32BE(4*f);for(;f<80;++f)r[f]=r[f-3]^r[f-8]^r[f-14]^r[f-16];for(var h=0;h<80;++h){var d=~~(h/20),p=0|((t=n)<<5|t>>>27)+l(d,i,o,s)+u+r[h]+a[d];u=s,s=o,o=c(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(7),i=r(44),o=r(10).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function f(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var d=0;d<80;++d){var p=~~(d/20),v=c(n)+f(p,i,o,s)+u+r[d]+a[p]|0;u=s,s=o,o=l(i),i=n,n=v}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,r){var n=r(7),i=r(150),o=r(44),a=r(10).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u},function(e,t,r){var n=r(7),i=r(151),o=r(44),a=r(10).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u},function(e,t,r){e.exports=i;var n=r(17).EventEmitter;function i(){n.call(this)}r(7)(i,n),i.Readable=r(96),i.Writable=r(317),i.Duplex=r(318),i.Transform=r(319),i.PassThrough=r(320),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},function(e,t){},function(e,t,r){"use strict";var n=r(97).Buffer,i=r(313);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,r=o,i=s,t.copy(r,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(315),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(11))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var r=s.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return o[i]=a,n(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r(11),r(21))},function(e,t,r){"use strict";e.exports=o;var n=r(155),i=Object.create(r(54));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(7),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(98)},function(e,t,r){e.exports=r(39)},function(e,t,r){e.exports=r(96).Transform},function(e,t,r){e.exports=r(96).PassThrough},function(e,t,r){"use strict";var n=r(7),i=r(10).Buffer,o=r(36),a=i.alloc(128);function s(e,t){o.call(this,"digest"),"string"===typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=i.concat([t,a],64));for(var r=this._ipad=i.allocUnsafe(64),n=this._opad=i.allocUnsafe(64),s=0;s<64;s++)r[s]=54^t[s],n[s]=92^t[s];this._hash=[r]}n(s,o),s.prototype._update=function(e){this._hash.push(e)},s.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=s},function(e,t,r){e.exports=r(158)},function(e,t,r){(function(t){var n,i,o=r(10).Buffer,a=r(160),s=r(161),u=r(162),c=r(163),l=t.crypto&&t.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function d(){return i||(i=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function p(e,t,r,n,i){return l.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return l.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:i}},e,n<<3)})).then((function(e){return o.from(e)}))}e.exports=function(e,r,i,v,y,g){"function"===typeof y&&(g=y,y=void 0);var m=f[(y=y||"sha1").toLowerCase()];if(m&&"function"===typeof t.Promise){if(a(i,v),e=c(e,s,"Password"),r=c(r,s,"Salt"),"function"!==typeof g)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){d()((function(){t(null,e)}))}),(function(e){d()((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var r=p(n=n||o.alloc(8),n,10,128,e).then((function(){return!0})).catch((function(){return!1}));return h[e]=r,r}(m).then((function(t){return t?p(e,r,i,v,m):u(e,r,i,v,y)})),g)}else d()((function(){var t;try{t=u(e,r,i,v,y)}catch(n){return g(n)}g(null,t)}))}}).call(this,r(11))},function(e,t,r){var n=r(325),i=r(100),o=r(101),a=r(338),s=r(68);function u(e,t,r){if(e=e.toLowerCase(),o[e])return i.createCipheriv(e,t,r);if(a[e])return new n({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function c(e,t,r){if(e=e.toLowerCase(),o[e])return i.createDecipheriv(e,t,r);if(a[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var r,n;if(e=e.toLowerCase(),o[e])r=o[e].key,n=o[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");r=8*a[e].key,n=a[e].iv}var i=s(t,!1,r,n);return u(e,i.key,i.iv)},t.createCipheriv=t.Cipheriv=u,t.createDecipher=t.Decipher=function(e,t){var r,n;if(e=e.toLowerCase(),o[e])r=o[e].key,n=o[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");r=8*a[e].key,n=a[e].iv}var i=s(t,!1,r,n);return c(e,i.key,i.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},function(e,t,r){var n=r(36),i=r(326),o=r(7),a=r(10).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(e){n.call(this);var t,r=e.mode.toLowerCase(),i=s[r];t=e.decrypt?"decrypt":"encrypt";var o=e.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=e.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:t})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=u,o(u,n),u.prototype._update=function(e){return a.from(this._des.update(e))},u.prototype._final=function(){return a.from(this._des.final())}},function(e,t,r){"use strict";t.utils=r(164),t.Cipher=r(99),t.DES=r(165),t.CBC=r(327),t.EDE=r(328)},function(e,t,r){"use strict";var n=r(26),i=r(7),o={};function a(e){n.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var r=Object.keys(o),n=0;n<r.length;n++){var a=r[n];t.prototype[a]=o[a]}return t.create=function(e){return new t(e)},t},o._cbcInit=function(){var e=new a(this.options.iv);this._cbcState=e},o._update=function(e,t,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,r,n);for(s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{o._update.call(this,e,t,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=e[t+s]}}},function(e,t,r){"use strict";var n=r(26),i=r(7),o=r(99),a=r(165);function s(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:r})]}function u(e){o.call(this,e);var t=new s(this.type,this.options.key);this._edeState=t}i(u,o),e.exports=u,u.create=function(e){return new u(e)},u.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},function(e,t,r){var n=r(101),i=r(169),o=r(10).Buffer,a=r(170),s=r(36),u=r(67),c=r(68);function l(e,t,r){s.call(this),this._cache=new h,this._cipher=new u.AES(t),this._prev=o.from(r),this._mode=e,this._autopadding=!0}r(7)(l,s),l.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return o.concat(n)};var f=o.alloc(16,16);function h(){this.cache=o.allocUnsafe(0)}function d(e,t,r){var s=n[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"===typeof t&&(t=o.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);if("string"===typeof r&&(r=o.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new a(s.module,t,r):"auth"===s.type?new i(s.module,t,r):new l(s.module,t,r)}l.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(f))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=o.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=o.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return o.concat([this.cache,t])},t.createCipheriv=d,t.createCipher=function(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=c(t,!1,r.key,r.iv);return d(e,i.key,i.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,r){var n=r(55);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},function(e,t,r){var n=r(10).Buffer,i=r(55);function o(e,t,r){var o=t.length,a=i(t,e._cache);return e._cache=e._cache.slice(o),e._prev=n.concat([e._prev,r?t:a]),a}t.encrypt=function(e,t,r){for(var i,a=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){a=n.concat([a,o(e,t,r)]);break}i=e._cache.length,a=n.concat([a,o(e,t.slice(0,i),r)]),t=t.slice(i)}return a}},function(e,t,r){var n=r(10).Buffer;function i(e,t,r){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:i])]),i}t.encrypt=function(e,t,r){for(var o=t.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(e,t[s],r);return a}},function(e,t,r){var n=r(10).Buffer;function i(e,t,r){for(var n,i,a=-1,s=0;++a<8;)n=t&1<<7-a?128:0,s+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^n))>>a%8,e._prev=o(e._prev,r?n:i);return s}function o(e,t){var r=e.length,i=-1,o=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++i<r;)o[i]=e[i]<<1|e[i+1]>>7;return o}t.encrypt=function(e,t,r){for(var o=t.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(e,t[s],r);return a}},function(e,t,r){(function(e){var n=r(55);function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,i(t)]);var o=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),n(r,o)}}).call(this,r(18).Buffer)},function(e,t,r){var n=r(10).Buffer,i=n.alloc(16,0);function o(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function a(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},a.prototype._multiply=function(){for(var e,t,r,n=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!==(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!==(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},a.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},a.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,e,0,t])),this.state},e.exports=a},function(e,t,r){var n=r(169),i=r(10).Buffer,o=r(101),a=r(170),s=r(36),u=r(67),c=r(68);function l(e,t,r){s.call(this),this._cache=new f,this._last=void 0,this._cipher=new u.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}function f(){this.cache=i.allocUnsafe(0)}function h(e,t,r){var s=o[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"===typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"===typeof t&&(t=i.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===s.type?new a(s.module,t,r,!0):"auth"===s.type?new n(s.module,t,r,!0):new l(s.module,t,r)}r(7)(l,s),l.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return i.concat(n)},l.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},f.prototype.add=function(e){this.cache=i.concat([this.cache,e])},f.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var r=o[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=c(t,!1,r.key,r.iv);return h(e,n.key,n.iv)},t.createDecipheriv=h},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,r){(function(e){var n=r(171),i=r(342),o=r(343);var a={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var r=new e(i[t].prime,"hex"),n=new e(i[t].gen,"hex");return new o(r,n)},t.createDiffieHellman=t.DiffieHellman=function t(r,i,s,u){return e.isBuffer(i)||void 0===a[i]?t(r,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new e([2]),e.isBuffer(s)||(s=new e(s,u)),"number"===typeof r?new o(n(r,s),s,!0):(e.isBuffer(r)||(r=new e(r,i)),new o(r,s,!0)))}}).call(this,r(18).Buffer)},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,r){(function(t){var n=r(22),i=new(r(172)),o=new n(24),a=new n(11),s=new n(10),u=new n(3),c=new n(7),l=r(171),f=r(41);function h(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._pub=new n(e),this}function d(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._priv=new n(e),this}e.exports=v;var p={};function v(e,t,r){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=h,this.setPrivateKey=d):this._primeCode=8}function y(e,r){var n=new t(e.toArray());return r?n.toString(r):n}Object.defineProperty(v.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!==typeof this._primeCode&&(this._primeCode=function(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in p)return p[n];var f,h=0;if(e.isEven()||!l.simpleSieve||!l.fermatTest(e)||!i.test(e))return h+=1,h+="02"===r||"05"===r?8:4,p[n]=h,h;switch(i.test(e.shrn(1))||(h+=2),r){case"02":e.mod(o).cmp(a)&&(h+=8);break;case"05":(f=e.mod(s)).cmp(u)&&f.cmp(c)&&(h+=8);break;default:h+=4}return p[n]=h,h}(this.__prime,this.__gen)),this._primeCode}}),v.prototype.generateKeys=function(){return this._priv||(this._priv=new n(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},v.prototype.computeSecret=function(e){var r=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new t(r.toArray()),o=this.getPrime();if(i.length<o.length){var a=new t(o.length-i.length);a.fill(0),i=t.concat([a,i])}return i},v.prototype.getPublicKey=function(e){return y(this._pub,e)},v.prototype.getPrivateKey=function(e){return y(this._priv,e)},v.prototype.getPrime=function(e){return y(this.__prime,e)},v.prototype.getGenerator=function(e){return y(this._gen,e)},v.prototype.setGenerator=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.__gen=e,this._gen=new n(e),this}}).call(this,r(18).Buffer)},function(e,t,r){var n=r(10).Buffer,i=r(53),o=r(345),a=r(7),s=r(353),u=r(384),c=r(158);function l(e){o.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function f(e){o.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new l(e)}function d(e){return new f(e)}Object.keys(c).forEach((function(e){c[e].id=n.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]})),a(l,o.Writable),l.prototype._write=function(e,t,r){this._hash.update(e),r()},l.prototype.update=function(e,t){return"string"===typeof e&&(e=n.from(e,t)),this._hash.update(e),this},l.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),n=s(r,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},a(f,o.Writable),f.prototype._write=function(e,t,r){this._hash.update(e),r()},f.prototype.update=function(e,t){return"string"===typeof e&&(e=n.from(e,t)),this._hash.update(e),this},f.prototype.verify=function(e,t,r){"string"===typeof t&&(t=n.from(t,r)),this.end();var i=this._hash.digest();return u(t,i,e,this._signType,this._tag)},e.exports={Sign:h,Verify:d,createSign:h,createVerify:d}},function(e,t,r){(t=e.exports=r(173)).Stream=t,t.Readable=t,t.Writable=r(177),t.Duplex=r(46),t.Transform=r(178),t.PassThrough=r(351),t.finished=r(103),t.pipeline=r(352)},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(18).Buffer,s=r(348).inspect,u=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),c&&o(t,c),e}()},function(e,t){},function(e,t,r){"use strict";(function(t){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(103),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[a]=null,e[s]=null,t(d(r,!1)))}}function v(e){t.nextTick(p,e)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[u]?n(e[u]):r(d(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(void 0,!0)):t[f](r,n)}),n)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(g,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[a]=null,r[s]=null,e(d(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[l]=null,r[a]=null,r[s]=null,t(e)),void(r[u]=e)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(d(void 0,!0))),r[c]=!0})),e.on("readable",v.bind(null,r)),r}}).call(this,r(21))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=i;var n=r(178);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(7)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var i=r(45).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(103)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!==typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(l)}},function(e,t,r){var n=r(10).Buffer,i=r(156),o=r(104),a=r(105).ec,s=r(184),u=r(70),c=r(190);function l(e,t,r,o){if((e=n.from(e.toArray())).length<t.byteLength()){var a=n.alloc(t.byteLength()-e.length);e=n.concat([a,e])}var s=r.length,u=function(e,t){e=(e=f(e,t)).mod(t);var r=n.from(e.toArray());if(r.length<t.byteLength()){var i=n.alloc(t.byteLength()-r.length);r=n.concat([i,r])}return r}(r,t),c=n.alloc(s);c.fill(1);var l=n.alloc(s);return l=i(o,l).update(c).update(n.from([0])).update(e).update(u).digest(),c=i(o,l).update(c).digest(),{k:l=i(o,l).update(c).update(n.from([1])).update(e).update(u).digest(),v:c=i(o,l).update(c).digest()}}function f(e,t){var r=new s(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function h(e,t,r){var o,a;do{for(o=n.alloc(0);8*o.length<e.bitLength();)t.v=i(r,t.k).update(t.v).digest(),o=n.concat([o,t.v]);a=f(o,e),t.k=i(r,t.k).update(t.v).update(n.from([0])).digest(),t.v=i(r,t.k).update(t.v).digest()}while(-1!==a.cmp(e));return a}function d(e,t,r,n){return e.toRed(s.mont(r)).redPow(t).fromRed().mod(n)}e.exports=function(e,t,r,i,p){var v=u(t);if(v.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(e,t){var r=c[t.curve.join(".")];if(!r)throw new Error("unknown curve "+t.curve.join("."));var i=new a(r).keyFromPrivate(t.privateKey).sign(e);return n.from(i.toDER())}(e,v)}if("dsa"===v.type){if("dsa"!==i)throw new Error("wrong private key type");return function(e,t,r){var i,o=t.params.priv_key,a=t.params.p,u=t.params.q,c=t.params.g,p=new s(0),v=f(e,u).mod(u),y=!1,g=l(o,u,e,r);for(;!1===y;)i=h(u,g,r),p=d(c,i,a,u),0===(y=i.invm(u).imul(v.add(o.mul(p))).mod(u)).cmpn(0)&&(y=!1,p=new s(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),n.from(r)}(p,y)}(e,v,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");e=n.concat([p,e]);for(var y=v.modulus.byteLength(),g=[0,1];e.length+g.length+1<y;)g.push(255);g.push(0);for(var m=-1;++m<e.length;)g.push(e[m]);return o(g,v)},e.exports.getKey=l,e.exports.makeKey=h},function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(355).Buffer}catch(M){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(M){o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?h[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var v=f.modrn(l).toString(e);r=(f=f.idivn(l)).isZero()?v+r:h[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function v(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)o=(t=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,y=0|a[2],g=8191&y,m=y>>>13,b=0|a[3],w=8191&b,k=b>>>13,S=0|a[4],E=8191&S,x=S>>>13,_=0|a[5],T=8191&_,O=_>>>13,M=0|a[6],P=8191&M,R=M>>>13,I=0|a[7],L=8191&I,C=I>>>13,A=0|a[8],j=8191&A,D=A>>>13,N=0|a[9],U=8191&N,B=N>>>13,F=0|s[0],q=8191&F,K=F>>>13,z=0|s[1],G=8191&z,H=z>>>13,V=0|s[2],W=8191&V,X=V>>>13,Y=0|s[3],Z=8191&Y,J=Y>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ve=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,q))|0)+((8191&(i=(i=Math.imul(f,K))+Math.imul(h,q)|0))<<13)|0;c=((o=Math.imul(h,K))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,K))+Math.imul(v,q)|0,o=Math.imul(v,K);var ge=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,H)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,q),i=(i=Math.imul(g,K))+Math.imul(m,q)|0,o=Math.imul(m,K),n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0;var me=(c+(n=n+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,X)|0)+Math.imul(h,W)|0))<<13)|0;c=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,K))+Math.imul(k,q)|0,o=Math.imul(k,K),n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,X)|0;var be=(c+(n=n+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,Z)|0))<<13)|0;c=((o=o+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,q),i=(i=Math.imul(E,K))+Math.imul(x,q)|0,o=Math.imul(x,K),n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,J)|0;var we=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(T,q),i=(i=Math.imul(T,K))+Math.imul(O,q)|0,o=Math.imul(O,K),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0;var ke=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,K))+Math.imul(R,q)|0,o=Math.imul(R,K),n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0;var Se=(c+(n=n+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,q),i=(i=Math.imul(L,K))+Math.imul(C,q)|0,o=Math.imul(C,K),n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0;var Ee=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,q),i=(i=Math.imul(j,K))+Math.imul(D,q)|0,o=Math.imul(D,K),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0;var xe=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,K))+Math.imul(B,q)|0,o=Math.imul(B,K),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(v,fe)|0,o=o+Math.imul(v,he)|0;var _e=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ve)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,ve)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,H))+Math.imul(B,G)|0,o=Math.imul(B,H),n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,X)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(E,oe)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(k,ue)|0,o=o+Math.imul(k,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,he)|0;var Te=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ve)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,X))+Math.imul(B,W)|0,o=Math.imul(B,X),n=n+Math.imul(j,Z)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,J)|0,n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var Oe=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ve)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,ve)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,J))+Math.imul(B,Z)|0,o=Math.imul(B,J),n=n+Math.imul(j,$)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(E,fe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(x,fe)|0,o=o+Math.imul(x,he)|0;var Me=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ve)|0)+Math.imul(k,pe)|0))<<13)|0;c=((o=o+Math.imul(k,ve)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(B,$)|0,o=Math.imul(B,ee),n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,he)|0;var Pe=(c+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,ve)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,ve)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(j,oe)|0,i=(i=i+Math.imul(j,ae)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,ae)|0,n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,n=n+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,fe)|0,o=o+Math.imul(R,he)|0;var Re=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ve)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ve)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(B,oe)|0,o=Math.imul(B,ae),n=n+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,he)|0;var Ie=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ve)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,ve)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(j,fe)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(D,fe)|0,o=o+Math.imul(D,he)|0;var Le=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ve)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,ve)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(U,fe),i=(i=Math.imul(U,he))+Math.imul(B,fe)|0,o=Math.imul(B,he);var Ce=(c+(n=n+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,ve)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,ve)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Ae=(c+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ve))+Math.imul(B,pe)|0))<<13)|0;return c=((o=Math.imul(B,ve))+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u[0]=ye,u[1]=ge,u[2]=me,u[3]=be,u[4]=we,u[5]=ke,u[6]=Se,u[7]=Ee,u[8]=xe,u[9]=_e,u[10]=Te,u[11]=Oe,u[12]=Me,u[13]=Pe,u[14]=Re,u[15]=Ie,u[16]=Le,u[17]=Ce,u[18]=Ae,0!==c&&(u[19]=c,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function m(e,t,r){return g(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(y=v),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):r<63?v(this,e,t):r<1024?g(this,e,t):m(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},b.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=r[l+d],v=n[l+d],y=r[l+d+a],g=n[l+d+a],m=f*y-h*g;g=f*g+h*y,y=m,r[l+d]=p+y,n[l+d]=v+g,r[l+d+a]=p-y,n[l+d+a]=v-g,d!==s&&(m=u*f-c*h,h=u*h+c*f,f=m)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0===(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),a.isub(u)):(r.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0===(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new T(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function k(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},k.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},k.prototype.split=function(e,t){e.iushrn(this.n,0,t)},k.prototype.imulK=function(e){return e.imul(this.k)},i(S,k),S.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},S.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,k),i(x,k),i(_,k),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new S;else if("p224"===e)t=new E;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return w[e]=t,t},T.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var v=d,y=0;0!==v.cmp(s);y++)v=v.redSqr();n(y<p);var g=this.pow(f,new o(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===n&&0===l)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new O(e)},i(O,T),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(40)(e))},function(e,t){},function(e){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.4","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')},function(e,t,r){"use strict";var n=r(27),i=r(22),o=r(7),a=r(69),s=n.assert;function u(e){a.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,r,n){a.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,r,n){a.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,r,n,o,a,s,u,c,l,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,d=this.n.clone(),p=new i(1),v=new i(0),y=new i(0),g=new i(1),m=0;0!==h.cmpn(0);){var b=d.div(h);c=d.sub(b.mul(h)),l=y.sub(b.mul(p));var w=g.sub(b.mul(v));if(!n&&c.cmp(f)<0)t=u.neg(),r=p,n=c.neg(),o=l;else if(n&&2===++m)break;u=c,d=h,h=c,y=p,p=l,g=v,v=w}a=c.neg(),s=l;var k=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(k)>=0&&(a=t,s=r),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(t&&!o||!t&&o)&&(n=n.redNeg()),this.point(e,n)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},o(c,a.BasePoint),u.prototype.point=function(e,t,r){return new c(this,e,t,r)},u.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},c.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),u.prototype.jpoint=function(e,t,r){return new l(this,e,t,r)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),f=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(f).redISub(f),d=u.redMul(f.redISub(h)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=r.redMul(u),f=s.redSqr().redIAdd(c).redISub(l).redISub(l),h=s.redMul(l.redISub(f)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(f,h,d)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var l=o.redSqr(),f=c.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(f),v=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(v),g=d.redMul(y);g=g.redIAdd(g).redISub(h);var m=c.redMul(s);t+1<e&&(u=u.redMul(h)),o=v,s=m,c=g}return this.curve.jpoint(o,c.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(l).redISub(h);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),v=p.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},l.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l);var y=f.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=d.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,r)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),f=c.redISub(l),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(f).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(s).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(f,h,d)},l.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var n=r(22),i=r(7),o=r(69),a=r(27);function s(e){o.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,r){o.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(u,o.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},s.prototype.point=function(e,t){return new u(this,e,t)},s.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),a=i.redMul(n),s=t.z.redMul(o.redAdd(a).redSqr()),u=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var n=r(27),i=r(22),o=r(7),a=r(69),s=n.assert;function u(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function c(e,t,r,n,o){a.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(t&&!u||!t&&u)&&(s=s.redNeg()),this.point(e,s)},u.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},o(c,a.BasePoint),u.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},u.prototype.point=function(e,t,r,n){return new c(this,e,t,r,n)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),a=o.redSub(r),s=n.redSub(t),u=i.redMul(a),c=o.redMul(s),l=i.redMul(s),f=a.redMul(o);return this.curve.point(u,c,f,l)},c.prototype._projDbl=function(){var e,t,r,n,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(e=a.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),e=a.redSub(s).redISub(u).redMul(o),t=c.redMul(n.redSub(u)),r=c.redMul(o))}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),e=this.curve._mulC(a.redISub(n)).redMul(o),t=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(o);return this.curve.point(e,t,r)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),a=i.redSub(n),s=i.redAdd(n),u=r.redAdd(t),c=o.redMul(a),l=s.redMul(u),f=o.redMul(u),h=a.redMul(s);return this.curve.point(c,l,h,f)},c.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),f=n.redMul(u).redMul(l);return this.curve.twisted?(t=n.redMul(c).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(c)):(t=n.redMul(c).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(c)),this.curve.point(f,t,r)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},c.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(e,t,r){"use strict";t.sha1=r(361),t.sha224=r(362),t.sha256=r(182),t.sha384=r(363),t.sha512=r(183)},function(e,t,r){"use strict";var n=r(32),i=r(56),o=r(181),a=n.rotl32,s=n.sum32,u=n.sum32_5,c=o.ft_1,l=i.BlockHash,f=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(h,l),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],h=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),v=u(a(i,5),c(p,o,l,h),d,r[n],f[p]);d=h,h=l,l=a(o,30),o=i,i=v}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],h),this.h[4]=s(this.h[4],d)},h.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){"use strict";var n=r(32),i=r(182);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(e,t,r){"use strict";var n=r(32),i=r(183);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(e,t,r){"use strict";var n=r(32),i=r(56),o=n.rotl32,a=n.sum32,s=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function d(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,c),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],m=r,b=n,w=i,k=c,S=l,E=0;E<80;E++){var x=a(o(u(r,f(E,n,i,c),e[p[E]+t],h(E)),y[E]),l);r=l,l=c,c=o(i,10),i=n,n=x,x=a(o(u(m,f(79-E,b,w,k),e[v[E]+t],d(E)),g[E]),S),m=S,S=k,k=o(w,10),w=b,b=x}x=s(this.h[1],i,k),this.h[1]=s(this.h[2],c,S),this.h[2]=s(this.h[3],l,m),this.h[3]=s(this.h[4],r,b),this.h[4]=s(this.h[0],n,w),this.h[0]=x},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,r){"use strict";var n=r(32),i=r(26);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var n=r(22),i=r(368),o=r(27),a=r(106),s=r(102),u=o.assert,c=r(369),l=r(370);function f(e){if(!(this instanceof f))return new f(e);"string"===typeof e&&(u(Object.prototype.hasOwnProperty.call(a,e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=f,f.prototype.keyPair=function(e){return new c(this,e)},f.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},f.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},f.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var a=new n(t.generate(r));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},f.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},f.prototype.sign=function(e,t,r,o){"object"===typeof r&&(o=r,r=null),o||(o={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var a=this.n.byteLength(),s=t.getPrivate().toArray("be",a),u=e.toArray("be",a),c=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),f=this.n.sub(new n(1)),h=0;;h++){var d=o.k?o.k(h):new n(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(f)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var v=p.getX(),y=v.umod(this.n);if(0!==y.cmpn(0)){var g=d.invm(this.n).mul(y.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var m=(p.getY().isOdd()?1:0)|(0!==v.cmp(y)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new l({r:y,s:g,recoveryParam:m})}}}}}},f.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var o=(t=new l(t,"hex")).r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),c=u.mul(e).umod(this.n),f=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),f)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,r.getPublic(),f)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},f.prototype.recoverPubKey=function(e,t,r,i){u((3&r)===r,"The recovery param is more than two bits"),t=new l(t,i);var o=this.n,a=new n(e),s=t.r,c=t.s,f=1&r,h=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");s=h?this.curve.pointFromX(s.add(this.curve.n),f):this.curve.pointFromX(s,f);var d=t.r.invm(o),p=o.sub(a).mul(d).umod(o),v=c.mul(d).umod(o);return this.g.mulAdd(p,s,v)},f.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new l(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var n=r(107),i=r(179),o=r(26);function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=a,a.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},a.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(r),this._reseed++,i.encode(a,t)}},function(e,t,r){"use strict";var n=r(22),i=r(27).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,r){return t instanceof o?t:new o(e,{pub:t,pubEnc:r})},o.fromPrivate=function(e,t,r){return t instanceof o?t:new o(e,{priv:t,privEnc:r})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var n=r(22),i=r(27),o=i.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function u(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function c(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=a,a.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new s;if(48!==e[r.place++])return!1;var o=u(e,r);if(!1===o)return!1;if(o+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var a=u(e,r);if(!1===a)return!1;var c=e.slice(r.place,a+r.place);if(r.place+=a,2!==e[r.place++])return!1;var l=u(e,r);if(!1===l)return!1;if(e.length!==l+r.place)return!1;var f=e.slice(r.place,l+r.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===f[0]){if(!(128&f[1]))return!1;f=f.slice(1)}return this.r=new n(c),this.s=new n(f),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=c(t),r=c(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];l(n,t.length),(n=n.concat(t)).push(2),l(n,r.length);var o=n.concat(r),a=[48];return l(a,o.length),a=a.concat(o),i.encode(a,e)}},function(e,t,r){"use strict";var n=r(107),i=r(106),o=r(27),a=o.assert,s=o.parseBytes,u=r(372),c=r(373);function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=l,l.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),u=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},l.prototype.verify=function(e,t,r){e=s(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return u.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return u.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!==(128&e[t]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return o.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";var n=r(27),i=n.assert,o=n.parseBytes,a=n.cachedProperty;function s(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},s.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=s},function(e,t,r){"use strict";var n=r(22),i=r(27),o=i.assert,a=i.cachedProperty,s=i.parseBytes;function u(e,t){this.eddsa=e,"object"!==typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=u},function(e,t){},function(e,t,r){"use strict";var n=r(185);t.certificate=r(381);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));t.PublicKey=a;var s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=u;var c=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var l=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=l,t.DSAparam=n.define("DSAparam",(function(){this.int()}));var f=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=f;var h=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,r){"use strict";var n=r(186),i=r(188),o=r(7);function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){var t=this.name;function r(e){this._initNamed(e,t)}return o(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},a.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},a.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},function(e,t,r){"use strict";var n=r(7),i=r(187);function o(e){i.call(this,e),this.enc="pem"}n(o,i),e.exports=o,o.prototype.encode=function(e,t){for(var r=i.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"],o=0;o<r.length;o+=64)n.push(r.slice(o,o+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},function(e,t,r){"use strict";var n=r(7),i=r(108).Buffer,o=r(189);function a(e){o.call(this,e),this.enc="pem"}n(a,o),e.exports=a,a.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,c=0;c<r.length;c++){var l=r[c].match(a);if(null!==l&&l[2]===n){if(-1!==s){if("END"!==l[1])break;u=c;break}if("BEGIN"!==l[1])break;s=c}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+n);var f=r.slice(s+1,u).join("");f.replace(/[^a-z0-9+/=]+/gi,"");var h=i.from(f,"base64");return o.prototype.decode.call(this,h,t)}},function(e,t,r){"use strict";var n=t;n.Reporter=r(110).Reporter,n.DecoderBuffer=r(57).DecoderBuffer,n.EncoderBuffer=r(57).EncoderBuffer,n.Node=r(109)},function(e,t,r){"use strict";var n=t;n._reverse=function(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t},n.der=r(111)},function(e,t,r){"use strict";var n=r(185),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),c=n.define("RDNSequence",(function(){this.seqof(u)})),l=n.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),f=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),h=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(l),this.key("validity").use(f),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));e.exports=p},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=r(68),s=r(100),u=r(10).Buffer;e.exports=function(e,t){var r,c=e.toString(),l=c.match(n);if(l){var f="aes"+l[1],h=u.from(l[2],"hex"),d=u.from(l[3].replace(/[\r\n]/g,""),"base64"),p=a(t,h.slice(0,8),parseInt(l[1],10)).key,v=[],y=s.createDecipheriv(f,p,h);v.push(y.update(d)),v.push(y.final()),r=u.concat(v)}else{var g=c.match(o);r=u.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(i)[1],data:r}}},function(e,t,r){var n=r(10).Buffer,i=r(184),o=r(105).ec,a=r(70),s=r(190);function u(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,r,c,l){var f=a(r);if("ec"===f.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,r){var n=s[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),a=r.data.subjectPrivateKey.data;return i.verify(t,e,a)}(e,t,f)}if("dsa"===f.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,r){var n=r.data.p,o=r.data.q,s=r.data.g,c=r.data.pub_key,l=a.signature.decode(e,"der"),f=l.s,h=l.r;u(f,o),u(h,o);var d=i.mont(n),p=f.invm(o);return 0===s.toRed(d).redPow(new i(t).mul(p).mod(o)).fromRed().mul(c.toRed(d).redPow(h.mul(p).mod(o)).fromRed()).mod(n).mod(o).cmp(h)}(e,t,f)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=n.concat([l,t]);for(var h=f.modulus.byteLength(),d=[1],p=0;t.length+d.length+2<h;)d.push(255),p++;d.push(0);for(var v=-1;++v<t.length;)d.push(t[v]);d=n.from(d);var y=i.mont(f.modulus);e=(e=new i(e).toRed(y)).redPow(new i(f.publicExponent)),e=n.from(e.fromRed().toArray());var g=p<8?1:0;for(h=Math.min(e.length,d.length),e.length!==d.length&&(g=1),v=-1;++v<h;)g|=e[v]^d[v];return 0===g}},function(e,t,r){(function(t){var n=r(105),i=r(22);e.exports=function(e){return new a(e)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=o[e],this.curveType||(this.curveType={name:e}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(e,r,n){Array.isArray(e)||(e=e.toArray());var i=new t(e);if(n&&i.length<n){var o=new t(n-i.length);o.fill(0),i=t.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,r,n){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),s(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,e)},a.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,r){r=r||"utf8",t.isBuffer(e)||(e=new t(e,r));var n=new i(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(18).Buffer)},function(e,t,r){t.publicEncrypt=r(387),t.privateDecrypt=r(388),t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)}},function(e,t,r){var n=r(70),i=r(41),o=r(53),a=r(191),s=r(192),u=r(22),c=r(193),l=r(104),f=r(10).Buffer;e.exports=function(e,t,r){var h;h=e.padding?e.padding:r?1:4;var d,p=n(e);if(4===h)d=function(e,t){var r=e.modulus.byteLength(),n=t.length,c=o("sha1").update(f.alloc(0)).digest(),l=c.length,h=2*l;if(n>r-h-2)throw new Error("message too long");var d=f.alloc(r-n-h-2),p=r-l-1,v=i(l),y=s(f.concat([c,d,f.alloc(1,1),t],p),a(v,p)),g=s(v,a(y,l));return new u(f.concat([f.alloc(1),g,y],r))}(p,t);else if(1===h)d=function(e,t,r){var n,o=t.length,a=e.modulus.byteLength();if(o>a-11)throw new Error("message too long");n=r?f.alloc(a-o-3,255):function(e){var t,r=f.allocUnsafe(e),n=0,o=i(2*e),a=0;for(;n<e;)a===o.length&&(o=i(2*e),a=0),(t=o[a++])&&(r[n++]=t);return r}(a-o-3);return new u(f.concat([f.from([0,r?1:2]),n,f.alloc(1),t],a))}(p,t,r);else{if(3!==h)throw new Error("unknown padding");if((d=new u(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return r?l(d,p):c(d,p)}},function(e,t,r){var n=r(70),i=r(191),o=r(192),a=r(22),s=r(104),u=r(53),c=r(193),l=r(10).Buffer;e.exports=function(e,t,r){var f;f=e.padding?e.padding:r?1:4;var h,d=n(e),p=d.modulus.byteLength();if(t.length>p||new a(t).cmp(d.modulus)>=0)throw new Error("decryption error");h=r?c(new a(t),d):s(t,d);var v=l.alloc(p-h.length);if(h=l.concat([v,h],p),4===f)return function(e,t){var r=e.modulus.byteLength(),n=u("sha1").update(l.alloc(0)).digest(),a=n.length;if(0!==t[0])throw new Error("decryption error");var s=t.slice(1,a+1),c=t.slice(a+1),f=o(s,i(c,a)),h=o(c,i(f,r-a-1));if(function(e,t){e=l.from(e),t=l.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));var i=-1;for(;++i<n;)r+=e[i]^t[i];return r}(n,h.slice(0,a)))throw new Error("decryption error");var d=a;for(;0===h[d];)d++;if(1!==h[d++])throw new Error("decryption error");return h.slice(d)}(d,h);if(1===f)return function(e,t,r){var n=t.slice(0,2),i=2,o=0;for(;0!==t[i++];)if(i>=t.length){o++;break}var a=t.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return t.slice(i)}(0,h,r);if(3===f)return h;throw new Error("unknown padding")}},function(e,t,r){"use strict";(function(e,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(10),a=r(41),s=o.Buffer,u=o.kMaxLength,c=e.crypto||e.msCrypto,l=Math.pow(2,32)-1;function f(e,t){if("number"!==typeof e||e!==e)throw new TypeError("offset must be a number");if(e>l||e<0)throw new TypeError("offset must be a uint32");if(e>u||e>t)throw new RangeError("offset out of range")}function h(e,t,r){if("number"!==typeof e||e!==e)throw new TypeError("size must be a number");if(e>l||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>u)throw new RangeError("buffer too small")}function d(e,t,r,i){if(n.browser){var o=e.buffer,s=new Uint8Array(o,t,r);return c.getRandomValues(s),i?void n.nextTick((function(){i(null,e)})):e}if(!i)return a(r).copy(e,t),e;a(r,(function(r,n){if(r)return i(r);n.copy(e,t),i(null,e)}))}c&&c.getRandomValues||!n.browser?(t.randomFill=function(t,r,n,i){if(!s.isBuffer(t)&&!(t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof r)i=r,r=0,n=t.length;else if("function"===typeof n)i=n,n=t.length-r;else if("function"!==typeof i)throw new TypeError('"cb" argument must be a function');return f(r,t.length),h(n,r,t.length),d(t,r,n,i)},t.randomFillSync=function(t,r,n){"undefined"===typeof r&&(r=0);if(!s.isBuffer(t)&&!(t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');f(r,t.length),void 0===n&&(n=t.length-r);return h(n,r,t.length),d(t,r,n)}):(t.randomFill=i,t.randomFillSync=i)}).call(this,r(11),r(21))},function(e,t,r){(t=r(34)(!1)).push([e.i,'.roomView {\n  height: calc(100% - 50px);\n  padding: 20px 20px 70px;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n  background-color: var(--bg-color);\n}\n\n.chat_content {\n  flex: 1;\n  overflow: auto;\n  display: flex;\n  flex-direction: column-reverse;\n  padding: 0 20px;\n}\n\n.chat_message_box {\n  color: #fff;\n  font-size: 12px;\n  display: flex;\n  flex-direction: column;\n}\n.chat_message_box.right {\n  align-items: flex-end;\n}\n.chat_message_box.left {\n  align-items: flex-start;\n}\n.chat_message_box.center {\n  align-items: center;\n  padding: 8px 8px 7px 10px;\n  color: rgba(255, 255, 255, 0.85);\n}\n\n.chat_message {\n  max-width: 60%;\n  min-width: 50px;\n  padding: 8px 8px 7px 10px;\n  margin-bottom: 5px;\n  word-break: break-all;\n  font-family: PingFangSC;\n  font-size: 14px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n}\n\n.chat_message_box.right .chat_message {\n  border-top-right-radius: 12px;\n  border-top-left-radius: 12px;\n  border-bottom-left-radius: 12px;\n}\n.chat_message_box.left .chat_message {\n  border-top-right-radius: 12px;\n  border-top-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n}\n\n.chat_message_box.right .chat_message {\n  background: var(--right-message-bg-color);\n  color: var(--right-message-color);\n}\n.chat_message_box.left .chat_message {\n  background: var(--left-message-bg-color);\n  color: var(--left-message-color);\n}\n\n.chat_message_ts {\n  text-align: right;\n  font-size: 12px;\n  margin-top: 2px;\n}\n\n.chat_message_box.right .chat_message .chat_message_ts {\n  color: var(--right-message-ts-color);\n}\n\n.chat_message_box.left .chat_message .chat_message_ts {\n  color: var(--left-message-ts-color);\n}\n\n.chat_message_box.left .chat_message_sender {\n  font-family: PingFangSC;\n  font-size: 12px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  color: var(--message-sender-color);\n  margin-bottom: 5px;\n}\n\n.input-box {\n  width: 100%;\n  padding: 10px 20px 20px;\n  height: 70px;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  background-color: var(--bg-color);\n  display: flex;\n  align-items: center;\n}\n\n.dappList {\n  position: absolute;\n  bottom: 70px;\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.dappItem {\n  color: #000;\n  cursor: pointer;\n  background: #fff;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  padding: 0 10px;\n  display: block;\n}\n\n.dappItem:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n#sendMessage {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border-radius: 20px;\n  padding: 0 10px !important;\n}\n\n.upload {\n  color: #fff;\n  padding-left: 10px;\n  cursor: pointer;\n}\n\n.dapp {\n  height: 44px;\n  width: 44px;\n  border-radius: 50%;\n  color: #838791;\n  margin-right: 10px;\n  background: #1e212b;\n  text-align: center;\n  cursor: pointer;\n  min-width: 44px;\n  position: relative;\n}\n\n.dapp.close {\n  transform: rotate(45deg);\n}\n\n.dapp::before {\n  content: "+";\n  font-size: 34px;\n  position: absolute;\n  left: 12px;\n  top: -6px;\n}\n\n.video {\n  padding: 0 10px;\n  color: #fff;\n  cursor: pointer;\n}\n\n.previewImg {\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  z-index: 99999;\n  left: 0;\n  top: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.previewImg img {\n  width: 70%;\n}\n',""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,".urlPreview .urlPreview_url {\n  text-decoration: none;\n  color: #38ca9f;\n}\n\n.urlPreview .urlPreview_title {\n  margin-top: 5px;\n  font-size: 14px;\n  font-weight: 700;\n  color: #38ca9f;\n}\n\n.urlPreview .urlPreview_description {\n  margin-top: 2px;\n  font-size: 14px;\n  margin-bottom: 2px;\n}\n",""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,".chat_widget_content * {\n  box-sizing: border-box;\n}\n\n.chat_widget_content {\n  width: 100%;\n  height: calc(100% - 50px);\n  box-shadow: 0 8px 30px 0 rgba(0, 0, 0, 0.28);\n  display: flex;\n  flex-direction: column;\n  /* position: relative; */\n}\n\n.chat_widget_content .chat_widget_content_title {\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  font-family: PingFangSC;\n  font-size: 17px;\n  font-weight: 500;\n  font-stretch: normal;\n  font-style: normal;\n  letter-spacing: -0.41px;\n  color: var(--contacts-title-color);\n  position: relative;\n}\n\n.chat_widget_content .chat_widget_content_title.componentType_0 {\n  justify-content: center;\n}\n\n.chat_widget_content_title_bg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  z-index: -1;\n}\n",""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,".UrlPreviewWidget {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: var(--bg-color);\n  display: flex;\n  flex-direction: column;\n  top: 0;\n  left: 0;\n}\n\n.UrlPreviewWidget .handleFun {\n  display: flex;\n  justify-content: flex-end;\n  height: 50px;\n  align-items: center;\n  padding: 0 20px;\n}\n\n.UrlPreviewWidget .handleFun img {\n  cursor: pointer;\n}\n\n.UrlPreviewWidget .iframeContainer {\n  flex: 1;\n}\n\n.iframe {\n  width: 100%;\n  border: none;\n  height: 100%;\n}\n",""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,".profile {\n  flex: 1;\n  background-color: var(--bg-color);\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n  word-break: break-all;\n}\n\n.profile input {\n  width: 100%;\n}\n\n.profile_item {\n  margin-bottom: 10px;\n}\n\n.displayname_btns {\n    margin-top: 5px;\n}\n\n.save {\n    margin-right: 5px;\n}",""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,".chat_widget_login {\n  width: 100%;\n  height: calc(100% - 50px);\n  box-shadow: 0 8px 30px 0 rgba(0, 0, 0, 0.28);\n  background-color: var(--bg-color);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 26px;\n  color: #fff;\n}\n\n.chat_widget_login a {\n    cursor: pointer;\n}\n",""]),e.exports=t},function(e,t,r){(t=r(34)(!1)).push([e.i,"body,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\np,\nblockquote,\ndl,\ndt,\ndd,\nul,\nol,\nli,\npre,\nform,\nfieldset,\nlegend,\nbutton,\ninput,\ntextarea,\nth,\ntd {\n  margin: 0;\n  padding: 0;\n}\n\nhtml {\n  color: #000;\n  overflow-y: scroll;\n  overflow: -moz-scrollbars;\n}\n\nbody,\nbutton,\ninput,\nselect,\ntextarea {\n  font: 12px arial;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: 100%;\n}\n\nem {\n  font-style: normal;\n}\n\nsmall {\n  font-size: 12px;\n}\n\nul,\nol {\n  list-style: none;\n}\n\na {\n  text-decoration: none;\n}\n\na:hover {\n  text-decoration: underline;\n}\n\nlegend {\n  color: #000;\n}\n\nfieldset,\nimg {\n  border: 0;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n  font-size: 100%;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\nimg {\n  -ms-interpolation-mode: bicubic;\n}\n\ntextarea {\n  resize: vertical;\n}\n\n.chat_widget {\n  position: relative;\n  /* position: fixed; */\n  /* right: 50px; */\n  /* bottom: 50px; */\n  width: 390px;\n  height: 600px;\n  border-radius: 20px;\n  overflow: hidden;\n}\n\n.chat_widget_title {\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  background-color: var(--bg-color);\n}\n\n.chat_widget_title_logo {\n  width: 180px !important;\n  height: 16px;\n}\n\n.P2P_logo {\n  position: fixed;\n  right: 50px;\n  bottom: 50px;\n  cursor: pointer;\n}\n\n.P2P_logo img {\n  width: 50px;\n  height: 50px;\n}",""]),e.exports=t},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=r(114).default,a="https://unpkg.com/react@16/umd/react.production.min.js",s="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js",u=function(){try{r(112)}catch(e){console.warn("File is not found: /Users/wangkai/Desktop/chat-component/src/direflow-components/chat-component/index.js")}};setTimeout((function(){return n(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return window.React&&window.ReactDOM?(u(),[2]):[4,n(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),[4,o(a,"reactBundleLoaded")];case 1:t.sent(),t.label=2;case 2:return[4,o(s,"reactBundleLoaded")];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return e=t.sent(),console.error(e),[3,6];case 6:return[2]}}))}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,new Promise((function(e,t){var r=0,n=setInterval((function(){r>=2500&&t(new Error("Direflow Error: React & ReactDOM was unable to load")),window.React&&window.ReactDOM&&(clearInterval(n),e()),r+=1}))}))];case 3:return t.sent(),u(),[3,5];case 4:return e=t.sent(),console.error(e.message),[3,5];case 5:return[2]}}))}))}))}]);
//# sourceMappingURL=sdnChatWidget.js.map